/*!
 *  BUI 简介 
 *  
 *  v1.4.7  date: 2018-09-05
 *  
 *  BUI 是一个开放式的UI交互框架, 有着丰富的组件, 可以自由定制交互,快速开发WebApp,微信,还可以通过第三方平台开发混合移动应用.
 *
 *  BUI 专注移动快速开发
 *  -----------------------------------------------------------
 *  BUI Team
 *  部门: 政企体验创新部
 *  产品经理: 区柏荣
 *  代码设计: 王伟深 杨俊标
 *  产品设计师: 邝德如 范菊 唐竹晗
 *  -----------------------------------------------------------
 *  BUI 反馈邮箱: wangwsh_bingosoft.net
 *
 *  Copyright (c) 2016-2018
 */
var libs=window.Zepto||window.jQuery;window.router={};var bui=function(e,t){var n={};return n.debug=!0,n.hasRouter=!1,n.isWebapp,n.currentPlatform="",n.log=!0,n.trace=!1,n["native"]={},n.config={},n.config.namespace="bui",n.config.classNamePrefix=n.config.namespace+"-",n.config.version="1.4.7",n.config.versionCode=20180905,n.version=n.config.version,n.versionCode=n.config.versionCode,n.config.viewport={zoom:!0,create:!0},n.config.init={auto:!0},n.config.ready={},n.config.ajax={},n.config.back={},n.config.load={},n.config.getPageParams={},n.config.refresh={},n.config.run={},n.config.checkVersion={},n.config.dialog={},n.config.confirm={},n.config.alert={},n.config.hint={},n.config.prompt={},n.config.loading={},n.config.mask={},n.config.list={},n.config.listview={},n.config.scroll={},n.config.pullrefresh={},n.config.select={},n.config.sidebar={},n.config.slide={},n.config.actionsheet={},n.config.dropdown={},n.config.accordion={},n.config.stepbar={},n.config.rating={},n.config.number={},n.config.file={},n.config.fileselect={},n.config.upload={},n.config.download={},n.config.swipe={},n.config.router={},n.config.loader={},n}(libs,window);!function(e,t){return e.prefix=function(t){return e.config.classNamePrefix+t},e.showLog=function(t,n){n=n||"";var i="";"object"==typeof t&&"message"in t&&"name"in t?i=t.message+":"+t.name+"&&stack:"+t.stack:"string"==typeof t&&(i=t),e.log&&console.error(n+" "+i),e.trace&&console.trace&&console.trace()},e.guid=function(e){function t(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},e.swipeDirection=function(e,t,n,i){var a=t-e,r=i-n,o=Math.abs(a),l=Math.abs(r),s=9,c=3;return!(o<s&&l<s)&&(o/l>c?a>0?"swiperight":"swipeleft":r>0?"swipedown":"swipeup")},e.obj=function(n,i){var a=null;i=i||null;var r=e.hasRouter?router.currentPage()||"body":"body";r=i||r;var o=t(r),l=/^(\d)/,s=/^[a-zA-z]/,c=/^#\d/,u=/^\.\d/,d="string"==typeof n,a=null;return"object"==typeof n?a=o.find(n):d&&l.test(n)?a=o.find("[id='"+n+"']"):d&&s.test(n)?a=n.length>35?o.find("[id='"+n+"']"):o.find(n):(c.test(n)?a=o.find("[id='"+n.substr(1)+"']"):u.test(n)?a=o.find("[class='"+n.substr(1)+"']"):n&&(a=o.find(n)),a)},e.objId=function(t){return e.obj(t,"body")},e.selector=function(e){return"undefined"==typeof e?this:t(e,this)},e.widget=function(e){return e&&e in this?this[e]:this},e.option=function(n,i){if("object"!==e["typeof"](n)&&"undefined"==typeof i)return"string"==typeof n?this.config[n]:this.config;if("id"==n)return e.showLog("不允许修改控件的ID参数"),this;if(n&&"object"===e["typeof"](n)){var a=t.extend(this.config,n);return this.init(a)}if(this.config.hasOwnProperty(n)){var r={};r[n]=i;var a=t.extend(this.config,r);return this.init(a)}return this},e}(bui||{},libs),function(e,t){e.emitter=function(){function t(){this.handle=Object.create(null)}return t.prototype.on=function(e,t,n){return"function"==typeof t?(n=t,t=this):(n=n,t=t||this),t.handle=t.handle||{},"undefined"==typeof t.handle[e]&&(t.handle[e]=[]),t.handle[e].push(n),t},t.prototype.off=function(t,n,i){return"function"==typeof n?(i=n,n=this):"function"==typeof i?(i=i,n=n||this):n=this,"undefined"===t?n.handle={}:"string"==typeof t&&"function"==typeof i?e.array.remove(i,n.handle[t]):"string"==typeof t&&(n.handle={},n.handle[t]=[]),n},t.prototype.one=function(e,t){function n(){t&&t.apply(this,arguments),this.off(e,n)}return this.on(e,n),this},t.prototype.trigger=function(e){try{if(this.handle[arguments[0]]instanceof Array){var t=this.handle[arguments[0]],n=[].slice.apply(arguments);n.shift();for(var i=0,a=t.length;i<a;i++)t[i]&&t[i].apply(this.self||this,n)}}catch(r){}return this},function(e){return new t}}();var n=bui.emitter();return e.on=n.on,e.off=n.off,e.trigger=n.trigger,e.one=n.one,e}(bui||{},libs),function(e,t){function n(t,n){function i(t){var i=100,a=n||540,r=document.head.parentNode,o=t?t:(h/a*i).toFixed(2);return c=o,e.config.viewport.zoom&&(r.style.fontSize=c+"px"),e.trigger.call(e,"viewportinit"),this}function a(e){return h}function r(e){return p}function o(e){return g}function l(e){return v}function s(e){return f}e.trigger.call(e,"viewportbefore");var c,u=document.querySelector("meta[name=viewport]"),d="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no",f=window.devicePixelRatio,h=document.documentElement.clientWidth,p=document.documentElement.clientHeight,g=parseInt(h)*parseInt(f),v=parseInt(p)*parseInt(f);if(u)e.config.viewport.create&&(u.content=d);else{var m=document.createElement("meta");m.name="viewport",m.content=d;var b=document.head;e.config.viewport.create&&b.appendChild(m),m=null}var w=[240,320,360,375,384,412,414,435,480,512,540,768,1024,1536,2048,2732,534,854],y=[44.44,59.26,66.67,69.44,71.11,76.3,76.67,80.56,88.89,94.81,100,70,70,70,70,70,60,60],x=e.array.index(document.documentElement.clientWidth,w);return x>-1&&"undefined"==typeof t?c=y[x]:i(t),{width:a,height:r,fontSize:c,screenWidth:o,screenHeight:l,ratio:s,init:i}}return e.viewport=n,e}(bui||{},libs),function(e,t){"use strict";return e.loader=function(n){function i(e){return e=e||{},y=t.extend({},y,e),this}function r(e){if("undefined"==typeof e)return S;if("object"==typeof e&&("modules"in e||"baseUrl"in e))S=t.extend(!0,{},S,e),O=S.modules;else if("object"==typeof e&&"moduleName"in e){var n=o(e);O[e.moduleName]=n||{},S=t.extend(!0,{},S,{modules:O}),O=S.modules}return S}function o(e){var n={moduleName:"",template:"",depend:[],script:"",style:[],isDefined:!1,isLoaded:!1,callback:null,exports:{},dependExports:[]},i={};e.moduleName in O&&(i=O[e.moduleName]);var a=t.extend(!0,{},n,i,e);return a}function l(t,n,i){try{var a=s(),o=a.name}catch(l){}var u=[],d=[];if("undefined"==typeof t)return e.showLog("define第1个参数不能为空"),this;if("function"==typeof t)i=t,t=o,n=[];else if("object"===e["typeof"](t)){var f=t;t=o,n=[],i=function(){return f}}else"array"===e["typeof"](t)?(i=n,n=t,t=o):"function"==typeof n?(t=t,i=n,n=[]):(t=t,n=n,i=i);var h=t in O?O[t].script||a.src:a.src;if(y.trace&&console.log("define",t),n.length)for(var p=0;p<n.length;p++){var g=n[p];g.indexOf(".css")>-1?g.indexOf("css!")>-1?d.push(g.substr(4)):d.push(g):(u.push(g),g in O||r({moduleName:g}))}if("string"==typeof t&&"function"==typeof i){var v=function(){var e=[c,O[o].exports,O[o]],t=[];u.length&&u.forEach(function(e,n){t.push(O[e].exports)});var n=t.concat(e);return i&&i.apply(this,n)};r({moduleName:t,depend:u,style:d,script:h,callback:v})}else e.showLog("define "+t+"模块的参数格式不对");return this}function s(){var e,n,i=window.location.href,r=[],o=document.currentScript;if(i.indexOf("#")>-1?r=i.split("#"):r.push(i),b=r[0].replace("/index.html","")+"/",o)return e=o.src.replace(b,""),n=o.getAttribute("name")||e.substr("0",e.indexOf(y.scriptSuffix)),{name:n,src:e};try{a()}catch(l){var s=l.stack||l.sourceURL||l.stacktrace||"",c=s.split(/[@ ]/g).pop(),u=c.replace(/(:\d+)?:\d+$/i,""),u=u.replace(new RegExp(b,"g"),"");return o=t('script[src="'+u+'"]')[0],n=o?o.getAttribute("name"):u.replace(y.scriptSuffix,""),{name:n,src:u}}}function c(t,n){y.trace&&console.log("require",t);var i={};if(t&&"string"==typeof t&&(t=[t]),n&&"function"!=typeof n)return e.showLog("require第2个参数格式为function","bui.loader.require"),i;try{u(t,function(){if(f(x)){var e=[];t.forEach(function(i,a){d(i),e.push(O[i]&&O[i].exports),a===t.length-1&&n&&n.apply(C,e||[])})}})}catch(a){e.showLog(a,"bui.loader.require")}return this}function u(t,n){function i(e,i){var a=O[e];a&&a.depend&&a.depend.length&&u(a.depend,n),a&&(a.isDefined=!0),i==t.length-1&&n&&n.apply(a)}return t=t||[],O=S.modules,t.forEach(function(a,r){var o=O[a];O[a]&&O[a].style&&O[a]&&O[a].style.length&&v(O[a].style),e.array.compare(a,x)||x.unshift(a),o&&o.isLoaded?r==t.length-1&&(n&&n.apply(o),x=[]):o&&o.callback&&!o.script?i(a,r):g(a,function(){O[a]&&O[a].style&&O[a].style.length&&v(O[a].style),i(a,r)},function(){r==t.length-1&&(n&&n.apply(null),x=[])})}),x}function d(t){O=S.modules;var n="string"==typeof t?O[t]||{}:t,i=n.depend||[],a=null,r=[];n.dependExports=[];try{if(i.length)for(var o=0;o<i.length;o++){var l=i[o],s=O[l];s.isLoaded?r[o]=s.exports:r[o]=d(s)||s.exports,s.exports=r[o],n.dependExports.push(r[o]),s.isLoaded=!0}a=n.isLoaded?n.exports:n.callback&&n.callback.apply(n,r),n.exports=a||O[n.moduleName]&&O[n.moduleName].exports,n.isLoaded=!0,y.trace&&console.log("execute",n.moduleName)}catch(c){e.showLog(c,"bui.loader.execute")}return a}function f(e){var t=!0,n=e||[];if(O=S.modules,n.length)n.forEach(function(e,n){O[e]&&O[e].isDefined===!1&&(t=!1)});else for(var i in O)O[i]&&O[i].isDefined===!1&&(t=!1);return t}function h(t){var n=!0,i=[];if(O=S.modules,"string"==typeof t){var a=t.indexOf(",")>-1;a?i=t.split(","):i.push(t)}else t&&"array"===e["typeof"](t)&&(i=t||[]);if(i.length)i.forEach(function(e,t){e in O||(n=!1),O[e]&&O[e].isLoaded===!1&&(n=!1)});else for(var r in O)O[r]&&O[r].isLoaded===!1&&(n=!1);return n}function p(t,n,i){return"string"==typeof t?t.indexOf(".css")>-1?(m(item),n&&n(t)):g(t,n,i):t&&"array"===e["typeof"](t)&&t.forEach(function(e,a){e.indexOf(".css")>-1?(m(e),a==t.length-1&&n&&n(t)):a==t.length-1?g(e,n,i):g(e)}),this}function g(n,i,a){var r,o=this;if(O=S.modules,"undefined"==typeof n||""==n)return a&&a.call(o,n),this;if(n in O)r=n,n=O[n].script||r+y.scriptSuffix;else{var l=n.indexOf(y.scriptSuffix);l>-1?(n=n,r=n.substr(0,l)):(r=n,n+=y.scriptSuffix)}var s=document.createElement("script")||{},c=y.cache?"":"?t="+(new Date).getTime(),u=n.indexOf("http://")>-1||n.indexOf("https://")>-1;s.type="text/javascript",s.async=y.async,s.src=u?n+c:S.baseUrl+n+c,s.setAttribute("name",r),s.onload=function(){y.trace&&console.log("create",n),i&&i(n)},s.onerror=function(e){y.trace&&console.log("createError",n),a&&a(n)};var d=e.array.index(n,k),f=t('script[name="'+r+'"]').length||t('script[src="'+n+'"]').length;return d>-1||f?i&&i(n):d<0&&(document.body&&document.body.appendChild(s),k.push(n)),s=null,this}function v(t){var n,i=t.length;if("array"===e["typeof"](t))for(n=0;n<i;n++){var a=t[n];m(a)}else m(t)}function m(t){if("string"!=typeof t)return void e.showLog(t+"的格式不正确");var n=e.array.index(t,T);if(n<0){var i=document.createElement("link")||{};i.href=t+(y.cache?"":"?t="+(new Date).getTime()),i.setAttribute("rel","stylesheet"),i.setAttribute("type","text/css"),document.head&&document.head.appendChild(i),i=null,T.push(t)}}var b,w={cache:!0,async:!1,trace:!1,scriptSuffix:".js"},y=t.extend({},w,e.config.loader,n),x=[],k=[],T=[],S={baseUrl:"",modules:{}},O={},C={init:i,define:l,require:c,map:r,"import":p,checkLoad:h,checkDefine:f};return C},e}(bui||{},libs),function(e,t){"use strict";return e.router=function(n){function i(n){if(n=t.extend(!0,{},W,e.config.router,n),W=pe.config=n,e.hasRouter=!0,he=!0,"pages/main/main.html"===n.indexModule.template&&"pages/main/main.js"===n.indexModule.script||(ue=loader.map(n.indexModule)),Z&&"effect"in n&&ne.forEach(function(e,t){e.effect=n.effect}),!n.id)return e.showLog("id 不能为空","bui.router.init"),!1;if(A=e.objId(n.id),H=bui.mask({appendTo:A,opacity:0,autoClose:!1}),z=e.loading({display:"block",width:30,height:30,opacity:0}),V=window.viewport.width()||document.documentElement.clientWidth,q=n.height||window.viewport.height()||document.documentElement.clientHeight,B=A.children(".bui-router-main"),B.length)B.css({width:V,height:q});else{var i=S(n);A.html(i),B=A.children(".bui-router-main")}return X||r(n),j.call(this,"init",{target:A[0]}),this}function a(){var e=fe.get("hasCache",0);Boolean(e)&&W.reloadCache?se.load():o()}function r(t){return e.isWebapp?window.addEventListener("load",function(){a()},!1):e.on("pageready",function(){a()}),W.reloadCache&&window.addEventListener("beforeunload",function(e){se.save(),j.call(Y,"beforeunload",{target:ne[ne.length-1]})}),W.syncHistory&&"pushState"in window.history&&window.addEventListener("popstate",function(t){var n=l(),i=""==n.pid?W.indexModule.moduleName:n.pid,a=h(i),r=e.array.index(i,ne,"pid");r>-1?(f({index:a,param:n.param}),j.call(Y,"popstate",{type:"back",prevTarget:ne[a-1],target:ne[a]})):(c({url:i,param:n.param}),j.call(Y,"popstate",{type:"load",prevTarget:ne[ne.length-2],target:ne[ne.length-1]}))}),this}function o(t){try{var n=l();if(n.pid){if(n.pid.indexOf("http://")>-1||n.pid.indexOf("https://")>-1)return void c({url:n.pid,param:n.param,iframe:!0});c({url:n.pid,param:n.param})}else c({url:W.indexModule.moduleName,param:n.param||{}})}catch(i){e.showLog(i,"bui.router.loadUrl")}}function l(e){var t=window.location.hash||window.location.search,e=0!=e,n=t&&t.indexOf("?"),i=n>-1?t&&t.substr(1,n-1):window.location.hash.substr(1),a=i&&i.indexOf(".html"),r=a>-1?i.substr(0,a):i,o=a>-1?i:i+".html",l={};if(n>-1)for(var s=t&&t.substr(n+1),c=s&&s.split("&"),u=0;u<c.length;u++){var d=e?decodeURIComponent(c[u].split("=")[1]):c[u].split("=")[1];l[c[u].split("=")[0]]=d}return{pid:r,url:o,param:l}}function s(n){var i=t.Deferred(),a=function(t,a){return p(t.url,function(i){var r=e.guid(),o=d(t.url),l=o.pid,s=(C({id:r,content:i,pid:l}),[]);se.add(l,{id:r,pid:l,template:i}),s.push(l),t.style&&"array"===e["typeof"](t.style)?t.style.forEach(function(e,t){s.push(e)}):t.style&&"string"===e["typeof"](t.style)&&s.push(t.style),t.script&&"array"===e["typeof"](t.script)?t.script.forEach(function(e,t){s.push(e)}):t.script&&"string"===e["typeof"](t.script)&&s.push(t.script),loader["import"](s,function(){j.call(pe,"preloadend",{prevTarget:null,target:null}),a&&a(n)},function(){j.call(pe,"preloadend",{prevTarget:null,target:null}),a&&a(n)})},function(n){e.showLog(t.url+"请求失败"),i.reject(t.url)}),i.promise()};return n&&"object"===e["typeof"](n)?"url"in n&&a(n,function(){i.resolve(n)}):n&&"array"===e["typeof"](n)&&n.forEach(function(e,t){var r=n.length-1;t==r?"url"in e&&a(e,function(){i.resolve(n)}):"url"in e&&a(e)}),i}function c(n){function i(){var t=C({id:S,content:"",pid:N});B&&B.attr("data-main",S).append(t),s(function(){p(L,function(t,n,i){var a=e.objId(S);if(a.html(t),l(),o(),f(),W.cache){C({id:S,content:t,pid:N});se.add(N,{id:S,pid:N,template:t})}ce.add(N,{id:S,pid:N,param:x})},function(e,t,n){r(L),j.call(pe,"loadfail",e,t,n)})})}function a(){p(L,function(e,t,n){c(e);W.cache&&se.add(N,{id:S,pid:N,template:e}),l(),s(function(){b.progress&&z&&z.hide()}),o(),f(),ce.add(N,{id:S,pid:N,param:x})},function(e,t,n){r(L),j.call(pe,"loadfail",e,t,n)})}function r(e){H&&H.hide(),b.progress&&z&&z.hide(),ie.removeLast(),w.reject(e)}function o(){G||N in te?(u({pid:N}),oe&&s()):(loader.checkLoad(N)?u({pid:N}):loader.require(N,function(t){try{b.firstAnimate&&b.progress&&z&&z.hide(),te[N]=t||null,w.resolve(t)}catch(n){e.showLog(n,"bui.router.load"),w.reject()}}),b.callback&&b.callback({prevTarget:y,target:P}),j.call(pe,"complete",{prevTarget:y,target:P}))}function l(){_=e.objId(D.id);var t=_.find(".bui-page");t.length&&W.autoInit&&e.init({id:t,height:q})}function s(t){k(),T(),_=e.objId(S);try{K||G||b.replace||b.part?(H&&H.hide(),!b.firstAnimate&&b.progress&&z&&z.hide(),t&&t(),_.css("zIndex",5)):($&&$.hide(),J&&J.show(function(){H&&H.hide(),!b.firstAnimate&&b.progress&&z&&z.hide(),t&&t(),_.css("zIndex",5)}))}catch(n){e.showLog(n,"bui.router.doAnimate")}}function c(t){var n="";if(b.part)n=I({content:t}),b.id?E.html(n):e.showLog("id 不能为空","router.loadPart");else if(b.replace){var i=ie.getLast();E=ne.length?e.objId(i.id):B,i.pid=N,i.url=L,i.param=x;e.array.index(N,ne,"pid");n=N in ae?se.get(N,"template"):I({content:t}),E.html(n).attr("data-page",N)}else G||(n=C({id:S,content:t,pid:N}),B&&B.attr("data-main",S).append(n));return n}function u(e){var t=e||ie.getLast(),n=de[t.pid]&&de[t.pid]||{},i=n.callback,a=i&&i.apply(n,n.dependExports)||n.exports;te[t.pid]=a||null,n.exports=a,G=!1,K=!1,j.call(pe,"refresh",{prevTarget:y,target:t}),w.resolve(a)}function f(){var e=ne[ne.length-2]||null,t=ie.getLast();K&&(j.call(pe,"firstload",{prevTarget:e,target:t}),K=!1),b.part?j.call(pe,"loadpart",{prevTarget:e,target:t}):j.call(pe,"load",{prevTarget:e,target:t})}function h(e){var t=se.get(e.pid,"template");c(t),e.part?(u(e),H&&H.hide(),e.progress&&z&&z.hide()):(l(),!G&&s(function(){e.progress&&z&&z.hide()}),u(e),H&&H.hide())}function g(){p(L,function(t,n,i){var a=e.objId(S);a.html(t),o(),f(),W.cache&&se.add(N,{id:S,pid:N,template:t}),H&&H.hide(),b.progress&&z&&z.hide()},function(e,t,n){r(L),j.call(pe,"loadfail",e,t,n)})}function v(e){var t=O({id:e.id,pid:e.pid,url:e.url,param:e.param});B&&B.attr("data-main",e.id).append(t),s(function(){b.progress&&z&&z.hide()})}var m={id:"",url:"",param:{},effect:"",firstAnimate:W.firstAnimate,progress:W.progress,reload:W.reload,replace:!1,iframe:!1,part:!1,callback:null},b=t.extend(!0,{},m,n),w=t.Deferred(),y=ie.getLast()||null,x=(ne[ne.length-2]||null,b.param||{});b.id=(b.id&&b.id.indexOf("#")>-1?b.id.substr(1):b.id)||"";var S=b.replace?y.id:b.id||e.guid(),E=e.objId(S);if(!b.url)return e.showLog("url 不能为空","bui.router.load"),w.promise();if(b.url.indexOf("tel:")>=0||b.url.indexOf("mailto:")>=0||b.url.indexOf("sms:")>=0)return e.unit.openExtral(b.url),w.promise();"undefined"==b.url&&(b.url="main"),H&&H.show(),b.progress&&z&&z.show();var F=d(b.url),N=F.pid,L=b.iframe?b.url:F.url,P={id:S,pid:N,url:L,replace:b.replace,param:x,part:{},effect:n.effect||W.effect};if(j.call(pe,"loadbefore",{prevTarget:y,target:P}),ne.length){var R=ne.length-1;ne[R].effect=b.effect}!G&&!b.part&&!b.replace&&ie.add(P),b.replace&&ie.replace(P);var D=ie.getLast();if(b.part&&(D.part[N]={id:S,pid:N,url:L,param:x},ne.splice(ne.length-1,1,D)),b.part||(le=P),N in ae)h({pid:N,progress:b.progress,part:b.part}),b.callback&&b.callback({prevTarget:y,target:P}),j.call(pe,"complete",{prevTarget:y,target:P});else{if(b.iframe)return v({id:S,pid:N,url:b.url,param:x}),w.promise();if(b.part)return g(),w.promise();if(b.firstAnimate)return i(),w.promise();a()}return w.promise()}function u(e){var n={id:"",url:"",param:{},part:!0},i=t.extend(!0,{},n,e),a=c(i);return a.promise()}function d(e){var t="",n=e;ue=loader.map(),de=ue.modules;var i=n.indexOf(W.pageSuffix);return i>-1?(t=n,n=t.substr(0,i),n in de||(n=y(t)||n)):(n=n,t=de[n]&&de[n].template||n+W.pageSuffix||""),{pid:n,url:t}}function f(n){var i=this,a=t.extend(!0,{index:-1,name:"",callback:null},n),r=parseInt(a.index),o=ne.length;if(r>0)return void e.showLog("index 参数只能是负数","bui.router.back");var l=ie.getLast(),s=o-1;return j.call(pe,"backbefore",{prevTarget:null,target:l}),a.name&&(r=h(a.name)),Math.abs(r)>s&&(r=-s),o>1&&Q&&(r<-1&&T(r),Q=!1,n.effect&&($.option({effect:n.effect}),J.option({effect:n.effect})),$&&$.show(),J&&J.hide(function(){function t(){var e={};e=te[c]||{},a.callback&&a.callback.call(i,e,s),j.call(pe,"back",{prevTarget:l,target:s}),le=s,Q=!0}var n=o+r;x(n),ie.removeNext(n),T();var s=k(),c=s.pid;e.objId(s.id).css("zIndex",5),t()})),this}function h(t){var n,i=e.array.indexs(t,ne,"pid"),a=i.length;if(a){var r=-(ne.length-i[a-1]-1);n=0==r?-1:r}else n=-1;return n}function p(n,i,a){n?t.ajax({url:n,dataType:"html",async:W.async,success:function(e,t,a){a.url=n,i&&i(e,t,a),j.call(pe,"success",e,t,a)},error:function(e,t,n){a&&a(e,t,n),j.call(pe,"fail",e,t,n)}}):e.showLog("url 不能为空","bui.router.requestUrl")}function g(){G=!0;var e=ne.length-1,t=ne[e];return c({id:t.id,url:t.url,param:t.param}),this}function v(e){return e=e||{},c({url:e.url||"",param:e.param||{},replace:!0}),this}function m(){var e=ie.getLast();return e.param}function b(t){if("undefined"==typeof t)return void e.showLog("必须传模块id才能获取参数,可以通过define的module参数获取");var n=ie.getLast(),i=null,a=t in n.part?n.part[t]:{};return"param"in a&&(i=a.param),i}function w(e){var t;return e&&(t=e in te),t}function y(t){for(var n in de)try{var i=de[n].template||"";if(i===t)return n}catch(a){e.showLog(a.message)}}function x(e){B.children().each(function(n,i){n>=e&&t(i).remove()})}function k(){var t=ie.getLast(),n=t.id||"",i=t.effect||W.effect;return n&&(J=null,J=e.toggle({id:document.getElementById(n),effect:ee[i].inRight||""}),B&&B.attr("data-main",n),j.call(pe,"pageshow",{target:t})),t}function T(t){t=t||-1;var n=ne.length+t-1,i=ne[n],a=i&&i.id||"",r=i&&i.effect||W.effect;return a&&($=null,$=e.toggle({id:document.getElementById(a),effect:ee[r].inLeft||""})),j.call(pe,"pagehide",{target:i}),i}function S(e){e=e||{};var t="";return t+='<div class="bui-router-main" style="width:'+V+"px;height:"+q+'px;">',t+="</div>"}function O(t){var n=t.param?e.setUrlParams(t.url,t.param):t.url,i="";return i+='<div id="'+t.id+'" class="bui-router-item" data-page="'+t.pid+'">',i+='<iframe class="bui-router-iframe" src="'+n+'"></iframe>',i+="</div>"}function C(e){var t="";return t+='<div id="'+e.id+'" class="bui-router-item" data-page="'+e.pid+'">',t+=e.content||"",t+="</div>"}function I(e){var t="";return t+=e.content}function E(t,n){return Z=!0,e.option.call(pe,t,n)}function F(t,n){return e.on.apply(pe,arguments),this}function N(t,n){return e.off.apply(pe,arguments),this}function j(t){pe.self=this==window||this==pe?null:this,e.trigger.apply(pe,arguments)}function L(){return le}function P(e){var t=document.getElementById(le.id);return t}function R(t){var n=document.getElementById(le.id)||document;return e.obj(t,n)}function D(e){return le.id}function M(n){var i=ie.getLast(),a=e.objId(i.id),r="object"==typeof n?t(n):a.find(".bui-page");return r.length&&e.init({id:r,height:q}),this}var A,z,H,V,q,U={id:"",progress:!1,syncHistory:!0,autoInit:!0,firstAnimate:!1,indexModule:{moduleName:"main",template:"pages/main/main.html",script:"pages/main/main.js"},cache:!0,reloadCache:!1,reload:!1,height:0,async:!0,effect:"push",hashPrefix:"#",scriptSuffix:".js",pageSuffix:".html"},W=t.extend({},U,e.config.router,n),_=null,Y=this,B=null,$=null,J=null,X=!1,K=!0,Q=!0,G=!1,Z=!1,ee={none:{inRight:"showIn",inLeft:"showIn"},fadein:{inRight:"fadeIn",inLeft:"fadeIn"},fadeinslide:{inRight:"fadeInRight",inLeft:"fadeInLeft"},slide:{inRight:"slideInRight",inLeft:"slideInLeft"},push:{inRight:"pushInRight",inLeft:"pushInLeft"},zoom:{inRight:"zoomIn",inLeft:"zoomIn"},cover:{inRight:"coverInRight",inLeft:"coverInLeft"},zoomslide:{inRight:"zoomSlideInRight",inLeft:"zoomSlideInLeft"}},te={},ne=[],ie={},ae={},re={},oe=!1,le={},se={},ce={},ue=loader.map(W.indexModule),de=ue.modules,fe=e.storage({local:!1}),he=!1;ie.get=function(){return ne},ie.add=function(t){t=t||{};var n=window.location.origin+window.location.pathname+"#"+t.pid,i=e.setUrlParams(n,t.param);if(ne.push(t),!K)return W.syncHistory&&"pushState"in window.history&&window.history.pushState(t,null,i),ne},ie.replace=function(t){t=t||{};var n=ne.length-1,i=window.location.origin+window.location.pathname+"#"+t.pid,a=e.setUrlParams(i,t.param);return n>-1&&(ne.splice(n,1,t),W.syncHistory&&"replaceState"in window.history&&window.history.replaceState(t,null,a)),ne},ie.getLast=function(e){var t=ne.length-1,n=ne[t]||{};return e?n[e]:n},ie.removeNext=function(t){var n=ne.length-t;ne.splice(t,n);var i=ie.getLast(),a=window.location.origin+window.location.pathname+"#"+i.pid,r=e.setUrlParams(a,i.param);W.syncHistory&&"replaceState"in window.history&&window.history.replaceState(i.param,null,r)},ie.removeLast=function(){var e=ne.length-1;ie.removeNext(e)},se.add=function(e,t){return ae[e]=t||{},ae[e]},se.get=function(e,t){if(t){var n=ae[e]||{};return n[t]}return ae[e]},se.save=function(){if(ne.length>1){var e=A.html();fe.set("cacheHtml",e),fe.set("cacheHistory",ne),fe.set("hasCache","true")}},se.load=function(){var t=fe.get("cacheHtml",0),n=fe.get("cacheHistory",0),i=[];if(n.length>1){A.html(t),B=A.children(".bui-router-main");try{n.forEach(function(e,t){var n="string"==typeof e?JSON.parse(e):e;i.push(n)});var a=i[i.length-1];le=a,loader.require(a.pid,function(e){te[a.pid]=e||null}),F("back",function(e){loader.require(e.target.pid,function(t){te[e.target.pid]=t||null})})}catch(r){e.showLog(r)}ne=i,k(),T(),K=!1,oe=!0,se.clear()}},se.clear=function(){fe.remove("cacheHistory"),fe.remove("cacheHtml"),fe.remove("hasCache")},ce.add=function(e,t){return re[e]=t||{},re[e]},ce.get=function(e,t){if(t){var n=re[e]||{};return n[t]}return re[e]};var pe={init:i,option:E,data:{},on:F,off:N,load:c,loadPart:u,replace:v,refresh:g,back:f,isLoad:w,$:R,currentId:D,currentPage:P,currentModule:L,getPageParams:m,getPartParams:b,getHistory:ie.get,preload:s,initScroll:M,history:{get:ie.get,getLast:ie.getLast}};return pe},e}(bui||{},libs),function(ui,$){return ui.objectToKeyString=function(e,t){var n="";for(var i in e){var a=t?encodeURIComponent(e[i]):e[i];n+="&"+i+"="+a}return n.substr(1)},ui.keyStringToObject=function(e,t){var n,i={},a=[];try{for(a=e.split("&"),n=0;n<a.length;n++){var r=t?decodeURIComponent(a[n].split("=")[1]):a[n].split("=")[1];i[a[n].split("=")[0]]=r}}catch(o){ui.showLog(o)}return i},ui.setUrlParams=function(e,t,n){var i,n=0!=n,t="object"==typeof t?t:{},a=this.objectToKeyString(t,n);return i=""==a?e:e+"?"+a},ui.getUrlParams=function(e){var e=0!=e,t=window.location.search,n={};if(t.indexOf("?")>-1){var i=t.substr(1);n=this.keyStringToObject(i,e)}return n},ui.getUrlParam=function(e){var t=window.location.search,n=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),i=t.substr(1).match(n);return null!=i?decodeURIComponent(i[2]):null},ui["typeof"]=function(e){var t=Object.prototype.toString.call(e).slice(8,-1);return t=t.toLowerCase()},ui.jsonToString=function(e){function t(e){function t(e,t){var a=e[t];return a&&"object"===ui["typeof"](a)?e[t]=n(a):a&&"array"===ui["typeof"](a)?e[t]=i(a):e[t]=a,e[t]}var a;if("object"===ui["typeof"](e)){for(var r in e)e[r]=t(e,r);a=JSON.stringify(e)}else"array"===ui["typeof"](e)?(e.forEach(function(n,i){e[i]=t(e,i)}),a=JSON.stringify(e)):a=e;return a}function n(e){if(e&&"object"===ui["typeof"](e)){for(var t in e){var n=e[t];"object"==typeof n&&(e[t]=JSON.stringify(n))}return e}}function i(e){if(e&&"array"===ui["typeof"](e))return e.forEach(function(t,n){"object"==typeof t&&(e[n]=JSON.stringify(t))}),e}var a;return a="object"==typeof e?t(e):e},ui.stringToJson=function(jsonStr){function stringToObject(str){var data,dataObj;try{if(data=eval(str),"array"===ui["typeof"](data))data.forEach(function(e,t){data[t]=stringToObject(e)});else if("object"===ui["typeof"](data))for(var i in data){var item=data[i];data[i]=stringToObject(item)}dataObj=data}catch(e){dataObj=str}return dataObj}var jsonObj;return jsonObj=jsonStr&&stringToObject(jsonStr)},ui.checkTargetInclude=function(e,t){var n=t,i=[];if(n.indexOf(",")>-1){i=n.split(",");var a,r=i.length;for(a=0;a<r;a++){var o=i[a];o.indexOf(".")>-1&&(i[a]=o.substr(1))}}else n.indexOf(".")>-1?i[0]=n.substr(1):i[0]=n;var l,s=i.length;for(l=0;l<s;l++)if($(e).hasClass(i[l]))return!0;return!1},ui}(bui||{},libs),function(e,t){return e.array={},e.array.index=e.inArray=function(t,n,i){var n=n||[];if("string"!=typeof i){var a=n.indexOf(t);return a}for(var r in n)try{var o=n[r]&&n[r][i];if(o===t)return parseInt(r)}catch(l){e.showLog(l.message,"bui.inArray")}return-1},e.array.compare=e.compareArray=function(e,t,n){var t=t||[];if("string"!=typeof n){var i=t.indexOf(e);return i>-1}for(var a in t)try{var r=t[a]&&t[a][n];if(r===e)return!0}catch(o){}return!1},e.array.remove=e.removeArray=function(e,t,n){var i=t||[];return i.map(function(t,a){try{var r="string"==typeof n||"number"==typeof n?t[n]:t;r===e&&i.splice(a,1)}catch(o){}}),i},e.array.filter=e.filterArray=function(e,t,n){var i=[],t=t||[];if("string"==typeof n)for(var a in t)try{var r=t[a]&&t[a][n],o=new RegExp(e);o.test(r)&&i.push(t[a])}catch(l){}else t.map(function(n,a,r){var o=new RegExp(e);return o.test(n)&&i.push(t[a]),n===e});return i},e.array.indexs=e.indexArray=function(e,t,n){var t=t||[],i=[];if("string"==typeof n)for(var a in t)try{var r=t[a]&&t[a][n];r===e&&i.push(+a)}catch(o){}else t.forEach(function(t,n,a){t===e?i.push(+n):i});return i},e.array.excess=e.excessArray=function(e,t,n){var t=t||[],i={},a=[];if("string"==typeof n)for(var r in t)try{var o=t[r]&&t[r][n];i[o]!==o&&(i[o]=o,a.push(t[r]))}catch(l){}else t.forEach(function(e,t,n){i[e]!==e&&(i[e]=e,a.push(e))});return a},e.array.copy=e.copyArray=function(t,n,i){var a=[];if(form=n||0,i=i||t&&t.length,!t||"array"===e["typeof"](t)){t.forEach(function(e,t){a.push(e)});var r=a.splice(n,i)||[];return r}},e}(bui||{},libs),function(e,t){return e.storage=function(t){function n(t,n,i){var a=1==o?null:d.getItem(t),r=[],l="",s=i?n[i]:n;if(null===a){r.push(n),l=JSON.stringify(r);try{d.setItem(t,l)}catch(c){"QuotaExceededError"==c.name&&console.log("超出本地存储限额！")}}else{var f=JSON.parse(a),h=i?e.array.compare(s,f,i):e.array.compare(s,f);if(h){e.array.remove(s,f,i),f[u](n);try{l=JSON.stringify(f),d.setItem(t,l)}catch(c){"QuotaExceededError"==c.name&&console.log("超出本地存储限额！")}}else{f[u](n),f.length>o&&0!=o&&f.pop();try{l=JSON.stringify(f),d.setItem(t,l)}catch(c){"QuotaExceededError"==c.name&&console.log("超出本地存储限额！")}}}return this}function i(t,n,i){var a,r=d.getItem(t)||"";try{a=r&&JSON.parse(r)}catch(o){a=r,e.showLog(o.name+": "+o.message,"bui.storage.get")}if("number"==typeof n&&i)a=a&&a[n]&&a[n][i]||void 0;else if("string"==typeof n){var l=e.array.index(n,a,i);a=a&&a[l]}else a="number"==typeof n?a&&a[n]||void 0:a;return a}function a(t,n,a){if("string"!=typeof t)return void e.showLog("要删除的字段名只能是字符串","bui.storage.remove");var r=i(t)||[];if("number"==typeof n){var o="number"==typeof a?a:o;r.splice(n,o);try{var l=JSON.stringify(r)||"";d.setItem(t,l)}catch(s){e.showLog(s.name+": "+s.message,"bui.storage.remove")}}else if("string"==typeof n){var c=e.array.remove(n,r,a);try{var l=JSON.stringify(c)||"";d.setItem(t,l)}catch(s){e.showLog(s.name+": "+s.message,"bui.storage.remove")}}else d.removeItem(t);return this}function r(){return d.clear(),this}var o,l,s,c=1;"number"==typeof t||"string"==typeof t?(o=0==parseInt(t)?0:parseInt(t)||c,s=!0,l=!0):"object"==typeof t?(o=t&&0==t.size?0:t.size||c,s=!t||0!=t.local,l=!t||0!=t.reverse):(o=c,s=!0,l=!0);var u=l?"push":"unshift",d=s?localStorage:sessionStorage;return{get:i,set:n,remove:a,clear:r}},e}(bui||{},libs),function(e,t){return e.unit={},e.unit.remToPx=function(e){var t=window.viewport&&window.viewport.fontSize||100,e=(parseFloat(e)*t).toFixed(2);return e},e.unit.pxToRem=function(e){var t=window.viewport&&window.viewport.fontSize||100,e=(parseFloat(e)/t).toFixed(2);return e},e.unit.pxToRemZoom=function(e){var t=100,e=(parseFloat(e)/t).toFixed(2);return e},e.unit.debounce=function(e,t,n){var i;return function(){var a=n||this,r=arguments,o=function(){i=null,e.apply(a,r)};clearTimeout(i),i=setTimeout(o,t)}},e.unit.throttle=function(e,t,n){t||(t=250);var i,a;return function(){var r=n||this,o=+new Date,l=arguments;i&&o<i+t?(clearTimeout(a),a=setTimeout(function(){i=o,e.apply(r,l)},t)):(i=o,e.apply(r,l))}},e.unit.startWithCss=function(e){var t=new RegExp("^\\.|^#"),n="string"==typeof e&&t.test(e);return n},e.unit.startWithId=function(e){var t=new RegExp("^#"),n="string"==typeof e&&t.test(e);return n},e.unit.startWithClass=function(e){var t=new RegExp("^\\."),n="string"==typeof e&&t.test(e);return n},e.unit.tel=function(t){var n,t=String(t),i="tel:",a=/(^1\d{10}$)|(^0\d{2,3}-?\d{7,8}$)/;return a.test(t)||0===t.indexOf("+")?(0==t.indexOf("+")&&(i="wtai://wp/mc;"),n=t,window.location.href=i+n,e):e},e.unit.sms=function(t,n){var i=navigator.userAgent,a=/(iPhone|iPad|iOS)/i.test(i),r=a?"&":"?";return window.location.href="sms:"+t+r+"body="+n,e},e.unit.mailto=function(t){var t="email"in t?t:{};return"string"==typeof t.email&&t.email.indexOf("@")>0?window.location.href="mailto:"+t.email+"?subject="+(t.subject||"")+"&body="+(t.body||"")+"&cc="+(t.cc||""):e.showLog(email+"格式不正确"),e},e.unit.openExtral=function(t){var n=[],i="",t=String(t);if(t.indexOf("mailto:")>=0)if(n=t.split("mailto:"),i=n[1],i.indexOf("?")>-1){var a=i.split("?"),r=e.keyStringToObject(a[1]);r.email=a[0],e.unit.mailto(r)}else e.unit.mailto({email:i});if(t.indexOf("tel:")>=0&&(n=t.split("tel:"),i=parseInt(n[1]),e.unit.tel(i)),t.indexOf("sms:")>=0)if(n=t.split("sms:"),i=n[1],t.indexOf("=")>=0){var o=t.split("="),l=o[1];e.unit.sms(i,l)}else e.unit.sms(i);return e},e}(bui||{},libs),function(e,t){return e.platform=function(){function e(e){return/Windows NT/i.test(c)}function t(){return/Macintosh/i.test(c)}function n(e){return/(Android|Linux)/i.test(c)}function i(e){return/(iPhone)/i.test(c);
}function a(e){var t=!1;return 3==window.devicePixelRatio&&375==document.documentElement.clientWidth&&812==document.documentElement.clientHeight&&(t=!0),t}function r(e){return/(iPad)/i.test(c)}function o(e){return/(iPhone|iPad|iOS)/i.test(c)}function l(e){return/(micromessenger)/i.test(c)}function s(e){return/(crosswalk)/i.test(c)}var c=navigator.userAgent;return{isAndroid:n,isIphone:i,isIpad:r,isIos:o,isWeiXin:l,isBingotouch:s,isMac:t,isIphoneX:a,isWindow:e}}(),e}(bui||{},libs),function(e,t){return e.checkVersion=function(n){function i(e){o(e)}function a(){e.platform.isIos()?e.run({id:f,"native":h["native"]}):e.run({id:d,"native":h["native"]})}function r(n){g.on("click",function(){m<s?(T(),k({title:"新版本"+u,content:c,buttons:n.buttons,width:n.width,height:n.height,mask:n.mask,callback:function(){var e=t(this).text().trim();"立即下载"==e&&a()}})):(S(),e.hint(y)),n.callback&&n.callback.call(this)}),v=!0}function o(n){e.ajax(n).done(function(i){var o=i,l=parseInt(o.minVersionCode);d=o.downloadUrl||"",f=o.iosDownloadUrl||"",c=o.remark||"检测到新版本"+u+",是否立即下载",s=parseInt(o.versionCode),u=o.versionName,o.isForced?(T(),m<l?k({title:n.title,content:w,width:n.width,height:n.height,mask:n.mask,autoClose:!1,buttons:[{name:"立即下载",className:"primary-reverse"}],callback:function(){try{a()}catch(t){e.showLog(t)}}}):m>l&&m<s?k({title:n.title,content:c,buttons:n.buttons,width:n.width,height:n.height,mask:n.mask,callback:function(){try{var n=t(this).text().trim();"立即下载"==n&&a()}catch(i){e.showLog(i)}}}):(S(),e.hint(y))):m<s?T():S(),h.onSuccess&&h.onSuccess(o),!v&&h.id&&r(n)}).fail(function(t){h.onFail&&h.onFail(),n.tips.fail&&e.hint(n.tips.fail)})}var l={id:"",target:"i",title:"版本更新",tips:{nowVersion:"",minVersion:"您的版本太低,需要卸载安装最新版才能正常使用!",fail:"网络超时,请检测网络再次尝试"},currentVersion:"",currentVersionCode:"",width:400,height:260,mask:!0,url:"",data:{},"native":!0,method:"GET",buttons:[{name:"取消",className:""},{name:"立即下载",className:"primary-reverse"}],timeout:2e4,callback:null,onSuccess:null,onFail:null};n=n||{};var s,c,u,d,f,h=t.extend(!0,l,e.config.checkVersion,n),p='<span class="bui-badges"></span>',g=t(h.id),v=!1,m=parseInt(h.currentVersionCode||e.config.versionCode),b=h.currentVersion||e.config.version,w=h.tips.minVersion,y=h.tips.nowVersion||"您目前的版本"+b+",已经是最新了 ^_^",x=h.target.indexOf("#")>-1?e.obj(h.target):g?g.find(h.target):null,k=e.confirm;i(h);var T=function(){var e=x&&x.find(".bui-badges").length;e||x&&x.append(p)},S=function(){x&&x.find(".bui-badges").remove()}},e}(bui||{},libs),function(e,t){return e.timer=function(n){function i(){return d=h,f=!0,clearTimeout(p),this}function a(){return h=c?s.times:0,clearTimeout(p),g(),this}function r(){if(f&&(h=d,f=!1),0==h)return h=0,u&&u.text(h),s.onEnd&&s.onEnd.call(this),void clearTimeout(p);var e=h<10?"0"+h:h;return u&&u.text(e),s.onProcess&&s.onProcess.call(this,h),h--,p=setTimeout(function(){r()},s.interval),this}function o(){if(f&&(h=d,f=!1),h==s.times)return s.onEnd&&s.onEnd.call(this),h=s.times,u&&u.text(h),void clearTimeout(p);var e=h<10?"0"+h:h;return u&&u.text(e),s.onProcess&&s.onProcess.call(this,h),h++,p=setTimeout(function(){o()},s.interval),this}var l={interval:1e3,target:null,reduce:!0,onEnd:null,onProcess:null,times:10},s=t.extend({},l,n),c=s.reduce,u=s.target?e.obj(s.target):null,d=0,f=!1,h=c?s.times:0,p=null,g=c?r:o;return{stop:function(){d=0,h=c?s.times:0,clearTimeout(p)},start:g,restart:a,pause:i}},e}(bui||{},libs),function(e,t){return e.animate=function(n){function i(t){return t.id?(N=e.objId(t.id),N.css({"-webkit-transition":z,transition:z}),j=t.open3D,L=t.zoom,P=t.animates||[],D=R.config=t,this):void e.showLog("animate id不能为空","bui.animate")}function a(e){var e=e,t=Math.abs(parseFloat(e));e="string"==typeof e&&e.indexOf("%")>-1?"-"+e:L?-(t/100)+"rem":-t+"px";var n="translateX("+e+")";return P.push(n),M.push(n),this}function r(e){var e=e,t=Math.abs(parseFloat(e));e="string"==typeof e&&e.indexOf("%")>-1?e:L?t/100+"rem":t+"px";var n="translateX("+e+")";return P.push(n),M.push(n),this}function o(e){var e=e,t=Math.abs(parseFloat(e));e="string"==typeof e&&e.indexOf("%")>-1?"-"+e:L?-(t/100)+"rem":-t+"px";var n="translateY("+e+")";return P.push(n),M.push(n),this}function l(e){var e=e,t=Math.abs(parseFloat(e));e="string"==typeof e&&e.indexOf("%")>-1?e:L?t/100+"rem":t+"px";var n="translateY("+e+")";return P.push(n),M.push(n),this}function s(e){var t=String(e),e=t.indexOf(",")>-1?t:e+",1",n="scale("+e+")";return P.push(n),M.push(n),this}function c(e){var e=String(e),t="scaleX("+e+")";return P.push(t),M.push(t),this}function u(e){var e=String(e),t="scaleY("+e+")";return P.push(t),M.push(t),this}function d(e){var t=String(e),e=t.indexOf("deg")>-1?t:t+"deg",n="rotate("+e+")";return P.push(n),M.push(n),this}function f(e){var t=String(e),e=t.indexOf("deg")>-1?t:t+"deg",n="rotateX("+e+")";return P.push(n),M.push(n),this}function h(e){var t=String(e),e=t.indexOf("deg")>-1?t:t+"deg",n="rotateY("+e+")";return P.push(n),M.push(n),this}function p(e){var e,n=String(e),i=[];n.indexOf(",")>-1?(i=n.split(","),e="",t.each(i,function(t,n){t<2&&(e+=n.indexOf("deg")>-1?","+n:","+n+"deg")}),e=e.substr(1)):e=n.indexOf("deg")>-1?n:n+"deg,0";var a="skew("+e+")";return P.push(a),M.push(a),this}function g(e){var t=String(e),e=t.indexOf("deg")>-1?t:t+"deg",n="skewX("+e+")";return P.push(n),M.push(n),this}function v(e){var t=String(e),e=t.indexOf("deg")>-1?t:t+"deg",n="skewY("+e+")";return P.push(n),M.push(n),this}function m(e){var t=String(e);return N.css({"-webkit-transform-origin":t,"transform-origin":t}),this}function b(e,t){var n=t||"ease-out";return z="number"==typeof e?"all "+e+"ms "+n:0==e||"none"==e?"none":1==e?"all 300ms "+n:e||"all 300ms "+n,N.css({"-webkit-transition":z,transition:z}),this}function w(){return P=[],M=[],A=[],H=0,this}function y(e){return V&&(b(),V=!1),N.css({"-webkit-transform":"",transform:""}),"none"!=z&&N.one("webkitTransitionEnd",function(){e&&e.call(R,this)}),w(),this}function x(e){var t=j?M.join("")+"translateZ(0)":M.join("");try{A[H]=[],A[H].push(P.join("")),P=[],H++}catch(n){}return N.css({"-webkit-transform":t,transform:t}),"none"!=z?N.one("webkitTransitionEnd",function(){e&&e.call(R,this)}):e&&e.call(R,this),this}function k(e){function t(e){var r=e[i]||[],o=e[i+1]||[];n=j?r.join("")+"translateZ(0)":r.join(""),n=M.join("")+n.replace(/\(.*?\)/g,"(0)"),N.css({"-webkit-transform":"",transform:""}),i++;try{N.one("webkitTransitionEnd",function(){return o&&o.length?void t(a):(i=0,void(historyCache=[]))})}catch(l){}}var n,i=0,a=A.reverse();return t(a),this}function T(e,t){return N.css({"-webkit-transform":e,transform:e}),t&&"none"!=b&&N.one("webkitTransitionEnd",function(){t.call(R,this)}),this}function S(e){return e=parseFloat(e)||100,j=!0,N.parent().css({perspective:e+"px"}),this}function O(e,t){var n={};return"object"==typeof e?(n=e,t=""):"string"==typeof e&&(n[e]=t||""),N.css(n),this}function C(t){var n={};return e.widget.call(n,t)}function I(t,n){return e.option.call(R,t,n)}var E={id:"",zoom:!0,open3D:!1,animates:[]};if("object"==typeof n&&n.id)n=n||{};else{var F=n||"";n={},n.id=F}var N,j,L,P,R={origin:m,transition:b,property:O,open3D:S,transform:T,start:x,stop:y,clear:w,left:a,right:r,up:o,down:l,scale:s,scaleX:c,scaleY:u,rotate:d,rotateX:f,rotateY:h,skew:p,skewX:g,skewY:v,reverse:k,widget:C,option:I,config:D,init:i},D=R.config=t.extend(!0,{},E,n),M=[],A=[],z="all 300ms ease-out";i(D);var H=0,V=!1;return R},e}(bui||{},libs),function(e,t){"use strict";return e.toggle=function(n){function i(t){if(t=t||b,w=!1,!t.id)return void e.showLog("toggle id不能为空","bui.toggle");h=e.objId(t.id),b=m.config=t,v=h.attr("class")||"";var n=t.effect,i=t.inOrder?e.array.index(n,y.hideInOrder):e.array.index(n,y.hide),a=n&&(e.array.index(n,y.show)>-1?e.array.index(n,y.show):i);return T=!(h[0]&&"none"==h[0].style.display||"none"==h.css("display")),a<0?(g=y.show[0],p=t.inOrder?y.hideInOrder[0]:y.hide[0],this):(g=y.show[a],void(p=t.inOrder?y.hideInOrder[a]:y.hide[a]))}function a(){return T}function r(t,n){if(!w)return!(!x&&!k)&&(x=!1,"function"==typeof t?(n=t,t=g||""):t=t||g||"",g=t,h[0]&&"none"==h[0].style.display&&h.css("display","block"),h.addClass("animated "+t),"showIn"==t||"showOut"==t?(b.revert&&h.removeClass("animated "+t),n&&n.call(m,this),T=!0,x=!0):h.one("webkitAnimationEnd",function(){try{!T&&h.css("display","block"),b.revert&&h.removeClass("animated "+t),n&&n.call(m,this),T=!0,x=!0}catch(i){e.showLog(i,"toggle show method")}}),this)}function o(t,n){if(!w&&(x||k))return k=!1,"function"==typeof t?(n=t,t=p||""):t=t||p||"",h.css("display","block").addClass("animated "+t),p=t,"showIn"==t||"showOut"==t?(h.css("display","none"),b.revert&&h.removeClass("animated "+t),n&&n.call(m,this),T=!1,k=!0):h.one("webkitAnimationEnd",function(){try{h.css("display","none"),b.revert&&h.removeClass("animated "+t),n&&n.call(m,this),T=!1,k=!0}catch(i){e.showLog(i,"toggle hide method")}}),this}function l(){return h.remove(),this}function s(e){var e=1==e;h&&(h.off(),e&&h.remove()),w=!0}function c(t){var n={};return e.widget.call(n,t)}function u(t,n){return e.option.call(m,t,n)}var d={id:"",effect:"fadeIn",revert:!0,inOrder:!1};if("string"==typeof n){var f=n||"";n={},n.id=f}var h,p,g,v,m={show:r,hide:o,remove:l,isShow:a,destroy:s,widget:c,option:u,config:b,init:i},b=m.config=t.extend(!0,{},d,n),w=!1,y={show:["fadeIn","fadeInLeft","fadeInRight","fadeInDown","fadeInUp","fadeInLeftBig","fadeInRightBig","fadeInUpBig","fadeInDownBig","zoomIn","bounceIn","rotateIn","rollIn","flipInX","flipInY","lightSpeedIn","showIn","slideInRight","slideInLeft","coverInLeft","coverInRight","zoomSlideInLeft","zoomSlideInRight","pushInLeft","pushInRight"],hide:["fadeOut","fadeOutLeft","fadeOutRight","fadeOutUp","fadeOutDown","fadeOutLeftBig","fadeOutRightBig","fadeOutDownBig","fadeOutUpBig","zoomOut","bounceOut","rotateOut","rollOut","flipOutX","flipOutY","lightSpeedOut","showOut","slideOutRight","slideOutLeft","coverOutLeft","coverOutRight","zoomSlideOutLeft","zoomSlideOutRight","pushOutLeft","pushOutRight"],hideInOrder:["fadeOut","fadeOutRight","fadeOutLeft","fadeOutDown","fadeOutUp","fadeOutRightBig","fadeOutLeftBig","fadeOutUpBig","fadeOutDownBig","zoomOut","bounceOut","rotateOut","rollOut","flipOutX","flipOutY","lightSpeedOut","showOut","slideOutLeft","slideOutRight","coverOutRight","coverOutLeft","zoomSlideOutRight","zoomSlideOutLeft","pushOutRight","pushOutLeft"]},x=!0,k=!0,T=!1;return i(b),b.id&&i(b),m},e}(bui||{},libs),function(e,t){return e.mask=function(n){var i=[];return function(n){function a(e){N=!1;var n=t.extend(!0,S,e);return n.appendTo=n.appendTo||"body",O=t(n.appendTo),I=O.children(".bui-mask"),E=n.onlyOne||O.is("body"),S=T.config=n,y=O.css("position"),n.autoTrigger&&l(n),this}function r(e){var n=t.extend(!0,S,e),a=function(e){var t=this;if(E){var a=i[i.length-1];a&&a.callback&&a.callback.call(this,e)}else n.callback&&n.callback.call(t,e);n.autoClose&&f(),e.stopPropagation()};I.on("click.bui",a),F=!0}function o(t){var n=t,i=n.background?n.background:"rgba(0,0,0,"+n.opacity+")",a="";return a+='<div class="'+e.prefix("mask")+'" style="background:'+i+";z-index:"+n.zIndex+'"></div>'}function l(e){if(!N){var n=t.extend(!0,S,e),i=o(n);return I=O.children(".bui-mask"),E&&c(n),I.length<1?(O.append(i).css("position","relative"),I=O.children(".bui-mask")):I.css("display","block"),x=!0,C=!0,w.call(this,"show"),F||r(n),this}}function s(){if(!N)return I=O.children(".bui-mask"),E?(u(),i.length<1&&I&&I.length&&(I&&I.remove(),I=null,C=!1)):(I&&I.remove(),I=null,O.css("position",y||"static"),x=!1),F=!1,w.call(this,"hide"),this}function c(t){e.array.compare(j,i,"id")||i.push({id:j,opacity:t.opacity,callback:t.callback})}function u(e){i.pop()}function d(e){if(!N){var n=t.extend(!0,S,e);return I=O.children(".bui-mask"),I&&I.length?(I.css("display","block"),O.css("position","relative"),x=!0,C=!0,E&&c(n)):l(n),w.call(this,"show"),this}}function f(){if(!N)return I=O.children(".bui-mask"),E?(u(),i.length<1&&I&&I.length&&(I.css("display","none"),C=!1)):(I.css("display","none"),O.css("position","relative"),x=!1),w.call(this,"hide"),this}function h(){return E?C:x}function p(e){s(),O&&i.length<1&&O.off("click.bui"),b("show"),b("hide"),N=!0}function g(t){var n={};return e.widget.call(n,t)}function v(t,n){return e.option.call(T,t,n)}function m(t,n){return e.on.apply(T,arguments),this}function b(t,n){return e.off.apply(T,arguments),this}function w(t){T.self=this==window||this==T?null:this,e.trigger.apply(T,arguments)}var y,x,k={appendTo:"",opacity:.6,background:"",zIndex:100,autoTrigger:!1,onlyOne:!1,autoClose:!1,callback:null},T={handle:{},on:m,off:b,add:l,hide:f,show:d,isShow:h,remove:s,destroy:p,widget:g,option:v,config:S,init:a},S=T.config=t.extend(!0,{},k,e.config.mask,n),O=(t("body"),null),C=!1,I=null,E=!1,F=!1,N=!1,j=e.guid();return a(S),T}}(),e}(bui||{},libs),function(e,t){return e.loading=function(){var n=[];return function(i){function a(n){P=!1;var i=t.extend(!0,E,n);i.appendTo=i.appendTo||"body",F=t(i.appendTo),N=e.guid(),j=F.children(".bui-loading"),E=I.config=i,i.autoTrigger&&l(i);var a=i.callback;return i.callback=function(){i.autoClose&&d(),a&&a.call(this)},E.callback=i.callback,O=i.mask&&e.mask(i),this}function r(e){j=F.children(".bui-loading");var t=function(t){if(e.appendTo)e.callback&&e.callback.call(this,t);else{var i=n[n.length-1];i&&i.callback&&i.callback.call(this,t)}t.stopPropagation()};return F.on("click.bui",".bui-loading",t),L=!0,this}function o(t){t=t||{};var n=t.text,i=F.width(),a=n&&"block"==t.display?parseInt(t.height)+30:parseInt(t.height),r=-(i/2),o=-(a/2),l="block"==t.display?e.prefix("loading-block"):e.prefix("loading-inline"),s="";s+='<div id="'+N+'" class="'+e.prefix("loading")+" "+l+'" style="width:'+i+"px;height:"+a+"px;line-height:"+a+"px;margin-left:"+r+"px;margin-top:"+o+"px;"+(t.zIndex?"z-index:"+t.zIndex:"")+'" >',t.onlyText||(s+='<div class="'+e.prefix("loading-cell")+'" style="width:'+parseFloat(t.width)+"px;height:"+parseFloat(t.height)+'px;"></div>'),n&&(s+='<div class="'+e.prefix("loading-text")+'">'+t.text+"</div>"),s+="</div>";var c=t&&t.template?t.template.call(this,t):s;return c}function l(e){if(!P){var n=t.extend(!0,E,e);if(j=F.children(".bui-loading"),S=j.children(".bui-loading-cell"),j&&j.hasClass("bui-loading-pause"))j&&j.removeClass("bui-loading-pause"),k.call(this,"start");else{""==n.appendTo&&g(n),j.length&&j.remove();var i=o(n);F.append(i),O&&O.add(n),k.call(this,"show")}return n.timeout&&(R&&clearTimeout(R),R=setTimeout(function(){d()},n.timeout)),L||r(n),this}}function s(e){if(!P){T=j&&j.children(".bui-loading-text");var t;return"undefined"==typeof e?t=T&&T.text():(T&&T.text(e),this)}}function c(){P||(S=j&&j.children(".bui-loading-cell"),S&&S.css("display","inline-block"),j&&j.removeClass("bui-loading-pause"))}function u(){P||(S=j&&j.children(".bui-loading-cell"),S&&S.css("display","none"),j&&j.addClass("bui-loading-pause"))}function d(){if(!P)return j=F.children(".bui-loading"),E.appendTo?(j&&j.remove(),j=null,O&&O.remove()):(v(),O&&O.remove(),n.length<1&&j&&j.length&&(j&&j.remove(),j=null)),L=!1,k.call(this,"remove"),k.call(this,"hide"),this}function f(){if(!P)return j=F.children(".bui-loading"),j&&j.length&&(j.addClass("bui-loading-pause"),k.call(this,"pause")),this}function h(e){if(!P){var n=t.extend(!0,E,e);return j=F.children(".bui-loading"),j&&j.length?(s(n.text),j.css("display","block"),O&&O.show(),""==n.appendTo&&g(E),k.call(this,"show")):l(n),E.timeout&&(R&&clearTimeout(R),R=setTimeout(function(e){p()},E.timeout)),this}}function p(){if(!P)return j=F.children(".bui-loading"),E.appendTo?(j.css("display","none"),O&&O.hide()):(v(),n.length<1&&j&&j.length&&(j.css("display","none"),O&&O.hide())),k.call(this,"hide"),this}function g(t){!e.array.compare(N,n,"id")&&t.callback&&n.push({id:N,callback:t.callback})}function v(){n.pop()}function m(e){var e=1==e;d(),F&&n.length<1&&F.off("click.bui"),x("show"),x("hide"),x("start"),x("stop"),x("pause"),x("remove"),O&&O.destroy(e),P=!0}function b(t){var n={mask:O||{}};return e.widget.call(n,t)}function w(t,n){return e.option.call(I,t,n)}function y(t,n){return e.on.apply(I,arguments),this}function x(t,n){return e.off.apply(I,arguments),this}function k(t){I.self=this==window||this==I?null:this,e.trigger.apply(I,arguments)}var T,S,O,C={appendTo:"",width:30,height:30,text:"正在加载...",onlyText:!1,mask:!0,zIndex:"",autoTrigger:!1,autoClose:!0,timeout:0,opacity:0,display:"block",template:null,callback:null},I={handle:{},on:y,off:x,start:l,stop:d,pause:f,text:s,showRing:c,hideRing:u,show:h,hide:p,destroy:m,widget:b,option:w,config:E,init:a},E=I.config=t.extend(!0,{},C,e.config.loading,i),F=(t("body"),null),N="",j=null,L=!1,P=!1,R=null;return a(E),I}}(),e}(bui||{},libs),function(e,t){return e.slide=function(n){function i(n){var i=t.extend(!0,ce,n);return i.id?(D=e.obj(i.id),ce=se.config=i,$=i.direction,i.height=parseFloat(i.height),i.width=parseFloat(i.width),Z=window.viewport.width()||document.documentElement.clientWidth,ee=window.viewport.height()||document.documentElement.clientHeight,M=0==i.menu.indexOf("#")?e.obj(i.menu):D.find(i.menu).eq(0),A=M.children(),z=D.find(i.children).eq(0),H=z.parent(),V=z.children(),a(i),o(),ne=i.autoplay,ne&&g(),fe||(r(),ve=!0),de=de||i.index,parseInt(i.index)>0?p(i.index,"none"):p(de,"none"),this):void e.showLog("slide id不能为空","bui.slide.init")}function a(e){var t=D.parents(".bui-page"),n=(D.parents("main"),D[0]&&D[0].offsetTop||0),i=t.children(e.header),a=i[0]&&i[0].offsetHeight||0,r=t.children(e.footer),o=r[0]&&r[0].offsetHeight||0;K=ee-(a||0)-(o||0)-n,Q=0==e.height?K:e.height;var l="static"==M.parent().css("position")?M.css("position"):M.parent().css("position");G=D.find(e.menu).length?"absolute"==l||"fixed"==l?Q:Q-(M[0]&&M[0].offsetHeight||0):Q,B=e.fullscreen?ee:0==e.height?G:e.height,Y=e.fullscreen?Z:e.width||Z,q=V.length,J="x"==$?Y/ce.visibleNum:Y,X="y"==$?B/ce.visibleNum:B,te="y"==ce.direction?X*ce.scrollNum:J*ce.scrollNum,W=Y*q/ce.visibleNum,_=B*q/ce.visibleNum}function r(){var e=function(e){var n=t(this).hasClass("active"),i=t(this).index(),a=t(this).attr("disabled"),r=t(this).hasClass("disabled")||""==a||"true"==a||"disabled"==a;n||r||(ce.animate?p(i):p(i,"none"),x(i),ne&&g()),e.stopPropagation()};0==ce.menu.indexOf("#")?M.on("click.bui","li",e):D.on("click.bui",ce.menu+" li",e),D.on("click.bui",ce.prev,w),D.on("click.bui",ce.next,y);var n=ce.children+" "+ce.item;D.on("click.bui",n,function(e){R.call(this,"click",e),ce.callback&&ce.callback.call(this,e,se)}),T(),ce.swipe||k(),fe=!0}function o(){me={x:{swipeDir:"swipeleft",swipeDir2:"swiperight",width:te},y:{swipeDir:"swipeup",swipeDir2:"swipedown",width:te}},re={x:{parentInitKey:"width",parentInitValue:W,boxCss:"display:-webkit-box;display:box;-webkit-box-align: start;-webkit-box-pack: center;width:100%;",boxItemCSS:"-webkit-box-flex:1;box-flex:1;width:"+J+"px;height:"+X+"px;"},y:{parentInitKey:"height",parentInitValue:_,box:"display:-webkit-box;display:box;-webkit-box-align: start;-webkit-box-pack: center;width:100%;-webkit-box-orient: vertical;box-orient: vertical;",boxItemCSS:"-webkit-box-flex:1;box-flex:1;width:"+J+"px;height:"+X+"px;"}},H[re[$].parentInitKey](re[$].parentInitValue);var e,n=V.length;for(e=0;e<n;e++)oe=Boolean(V.eq(e).attr("data-scroll"))||ce.scroll,re[$].boxItemCSS=re[$].boxItemCSS+(oe?"overflow:auto;":"overflow:hidden;"),V[e].style.cssText=re[$].boxItemCSS;try{z[0].style.cssText=re[$].boxCss}catch(i){console.log("请检查下children参数是否正确.","bui.slide id:"+ce.id)}var a="y"==$&&ce.visibleNum>1?G/ce.visibleNum:G,r=ce.zoom?Q/100+"rem":Q+"px",o=ce.zoom?a/100+"rem":a+"px";ce.zoom?J/100+"rem":J+"px";if(ce.fullscreen?(t("main").css({position:"static"}),D.addClass("bui-slide-fullscreen").css({position:"absolute",top:0,left:0,right:0,bottom:0,"z-index":10,overflow:"hidden",width:Y,height:ee}),V.addClass(ce.alignClassName||"bui-box-center").css("height",ee)):(D.css({position:"relative",overflow:"hidden",width:Y,height:r}),V.addClass(ce.alignClassName).height(o)),ce.autoheight&&D.addClass("bui-slide-autoheight"),ce.autopage){var s=l(),c=z.find(".active").index()+1,u=S(s,c);D.children(".bui-slide-head").remove(),D.append(u),A=D.find(ce.menu).eq(0).children()}}function l(){var e=V.length,t=e-ce.visibleNum,n=e%ce.scrollNum!=0?t+1:t/ce.scrollNum+1;return n}function s(t){var n=t.originalEvent&&t.originalEvent.targetTouches||t.targetTouches,i=we?n[0]:t;return ue.x1=i.pageX,ue.y1=i.pageY,ue.direction="",ce.stopHandle&&e.checkTargetInclude(t.target,ce.stopHandle)?void(ke=!1):(Oe=-de*te,Ce=-de*te,n.length>1||t.scale&&1!==t.scale?void f("x"==$?Oe:Ce):(ne&&(v(),ne=!0),R.call(this,"touchstart",t,ue),ce.onStart&&ce.onStart.call(this,t,ue,se),void(ke=!0)))}function c(n){var i=n.originalEvent&&n.originalEvent.targetTouches||n.targetTouches;if(i.length>1||n.scale&&1!==n.scale)return void f("x"==$?Oe:Ce);if(ke){var a=we?i[0]:n;ue.x2=a.pageX,ue.y2=a.pageY,ue.direction||(ue.direction=e.swipeDirection(ue.x1,ue.x2,ue.y1,ue.y2)),"swipeleft"!==ue.direction&&"swiperight"!==ue.direction||(n.preventDefault(),n.stopPropagation()),R.call(this,"touchmove",n,ue);try{if("y"==$&&ce.scroll){var r=t(n.target).closest(".active"),o=r[0].scrollTop||0,s=r[0].scrollHeight||0,c=r[0].offsetHeight||0;if("swipedown"===ue.direction&&o>1)return void(Te=!1);if("swipeup"===ue.direction&&s-o-c>=2)return void(Te=!1)}}catch(n){}ie=ue.x2-ue.x1,ae=ue.y2-ue.y1,me.x.move=Oe+ie,me.x.absDelta=Math.abs(ie),me.y.move=Ce+ae,me.y.absDelta=Math.abs(ae);var u=l();ue.direction!==me[$].swipeDir&&ue.direction!==me[$].swipeDir2||(ce.delay&&me[$].absDelta>ce.distance&&f(me[$].move,"none"),ce.delay||(ce.bufferEffect?f(me[$].move,"none"):0==de&&u>1&&("swipeleft"==ue.direction||"swipeup"==ue.direction)?f(me[$].move,"none"):de==u-1&&u>1&&("swiperight"==ue.direction||"swipedown"==ue.direction)?f(me[$].move,"none"):de>0&&de<u-1&&u>1&&f(me[$].move,"none"),n.preventDefault()),ce.onMove&&ce.onMove.call(this,n,ue,se)),Te=!0}}function u(e){R.call(this,"touchend",e,ue),Te&&(ie=ue.x2-ue.x1,ae=ue.y2-ue.y1,me.x.delta=Oe,me.x.absDelta=Math.abs(ie),me.y.delta=Ce,me.y.absDelta=Math.abs(ae),me[$].absDelta>ce.distance?(d.call(this,ue,me),ce.onEnd&&ce.onEnd.call(this,e,ue,se)):me[$].absDelta<ce.distance&&f(me[$].delta),ne&&g(),"swipeleft"!=ue.direction&&"swiperight"!=ue.direction||e.stopPropagation(),ye+=ue.y2-ue.y1,xe+=ue.x2-ue.x1,ue.lastX=xe,ue.lastY=ye,ue={x1:0,x2:0,y1:0,y2:0,direction:""},ke=!1,Te=!1)}function d(e,t){de=z.children(".active").index();var i;if(e.direction==t[$].swipeDir){var a=V.length,r=a-ce.visibleNum,o=a%ce.scrollNum!=0?r+1:r/ce.scrollNum+1;if(de>=o-1)i=de,t[$].delta=-i*t[$].width,f(t[$].delta),de=i,x(i),R.call(this,"last",i);else if(i=de+1,t[$].delta=-i*t[$].width,f(t[$].delta),de=i,x(i),R.call(this,"next",i),n.autoload)O(de);else{var l=V.eq(de);R.call(l,"to",i)}}else if(e.direction==t[$].swipeDir2)if(de>0)if(i=de-1,t[$].delta=-i*t[$].width,f(t[$].delta),de=i,x(i),R.call(this,"prev",i),n.autoload)O(de);else{var l=V.eq(de);R.call(l,"to",i)}else i=de,t[$].delta=-i*t[$].width,f(t[$].delta),de=i,x(i),R.call(this,"first",i)}function f(e,t){var n=ce.transition,t=t||"all "+n+"ms",e=e||0;switch($){case"x":h(e+"px",0,t,H);break;case"y":h(0,e+"px",t,H)}return this}function h(e,t,n,i){var a=t||0;"y"==$&&ce.zoom&&String(t).indexOf("%")<=-1&&(a=parseInt(t)/100+"rem");var n,i=i||D,e=e||0,r=e,o=String(e).indexOf("%")>-1?String(e):r,l=String(t).indexOf("%")>-1?String(t):a;n="number"==typeof n?"all "+n+"ms":n||"all 300ms";try{i.css({"-webkit-transition":n,transition:n,"-webkit-transform":"translate("+o+","+l+")",transform:"translate("+o+","+l+")"}),i.one("webkitTransitionEnd",function(){i.css({"-webkit-transition":"none",transition:"none"})})}catch(s){console.log(s.message)}}function p(e,i){var a=0;if("string"==typeof e&&e.indexOf(".html")>-1){var r=[];A.each(function(n,i){var o=t(i).attr("href")||void 0;r[n]=o,o==e&&(a=n)})}else a=parseInt(e);var o={x:{transform:-a*parseFloat(te)},y:{transform:-a*parseFloat(te)}},s=l();if(a>=s||a<0)return!1;if(f(o[$].transform,i),de=a,x(a),ne&&g(),n.autoload)O(de);else{var c=V.eq(de);R.call(c,"to",a)}return this}function g(e){var e=e||ce.interval;v(),ne=!0;var t=de;U=setInterval(function(e){var n=l();t>=0&&t<n-1?t+=1:t=0,p(t)},e),R.call(this,"play")}function v(e){if(U)try{window.clearInterval(U),ne=!1,R.call(this,"stop")}catch(t){}return this}function m(e){g(e)}function b(){return de}function w(){var e=de-1;return R.call(this,"prev",e),p(e),this}function y(){var e=de+1;return R.call(this,"next",e),p(e),this}function x(e){e=e||0,V.removeClass("active"),V.eq(e).addClass("active"),A.removeClass("active"),A.eq(e).addClass("active")}function k(){return D.off("touchstart",s).off("touchmove",c).off("touchend",u).off("touchcancel"),R.call(this,"lock"),this}function T(e){return D.on("touchstart",s).on("touchmove",c).on("touchend",u).on("touchcancel",function(){f("x"==$?Oe:Ce)}),R.call(this,"unlock"),this}function S(e,t){var n,i="",t=t||1;for(i+='<div class="bui-slide-head">',i+="<ul >",n=1;n<Number(e)+1;n++)i+="<li "+(n==t?'class="active"':"")+">"+n+"</li>";return i+="</ul >",i+="</div >"}function O(n){var i=V.eq(n),a=A.eq(n),r=a.attr("href")||"";return e.array.compare(n,pe)?(R.call(i,"to",n,"200"),!1):void(ce.autoload&&(r?t.ajax({url:r,dataType:"html",async:ce.async,success:function(e,t){i.html(e),pe.push(n),R.call(i,"load",n,t),!ve&&R.call(i,"to",n,t),ve=!1},error:function(e,t){R.call(i,"loadfail",n,t)}}):(!ve&&R.call(i,"to",n),ve=!1)))}function C(t){var n,i=e.guid(),t=t||1,a="";for(n=0;n<t;n++)a+='<li id="'+i+'" style="-webkit-box-flex:1;box-flex:1;width:'+J+"px;height:"+X+'px;"></li>';z.append(a),V=z.children();var r=J*V.length;q=V.length,H.width(r)}function I(n){var i={id:null,url:"",preload:!1,param:{},success:null,fail:null},a=t.extend(!0,{},i,n),r=a.url||"",o=null,l=V.length?de+1:0;if(a.id)o=e.obj(a.id);else{var s=V.eq(l);s.length?o=s:(C(),V=z.children(),o=V.eq(l))}if(r)if(de=l,ge[l]=a.param,r in he){var c="cache";e.array.compare(l,pe)||(pe.push(l),o.html(he[r]),a.success&&a.success.call(o,he[r],c),R.call(o,"load",he[r],c)),a.preload||p(l)}else t.ajax({url:r,success:function(t,n){t?(he[r]=t,e.array.compare(l,pe)||(pe.push(l),o.html(he[r]),a.success&&a.success.call(o,he[r],n),R.call(o,"load",t,n)),a.preload||p(l)):(a.fail&&a.fail.call(o,t,n),R.call(o,"loadfail",t,n))},error:function(e,t){a.fail&&a.fail.call(o,e,t),R.call(o,"loadfail",e,t)}});return this}function E(e){var e="number"==typeof e?e:de;return ge[e]||{}}function F(e){var e=1==e;v(),M&&(M.off("click.bui"),e&&M.remove()),D&&(D.off(),e&&D.remove()),P("stop"),P("play"),P("first"),P("last"),P("to")}function N(t){var n={};return e.widget.call(n,t)}function j(t,n){return e.option.call(se,t,n)}function L(t,n){return e.on.apply(se,arguments),this}function P(t,n){return e.off.apply(se,arguments),this}function R(t){se.self=this==window||this==se?null:this,e.trigger.apply(se,arguments)}var D,M,A,z,H,V,q,U,W,_,Y,B,$,J,X,K,Q,G,Z,ee,te,ne,ie,ae,re,oe,le={id:"",menu:".bui-slide-head ul",children:".bui-slide-main ul",header:"header",footer:"footer",item:"li",prev:".bui-slide-prev",next:".bui-slide-next",alignClassName:"",stopHandle:"",width:0,height:0,zoom:!1,transition:200,interval:5e3,swipe:!0,animate:!0,delay:!1,bufferEffect:!1,visibleNum:1,scrollNum:1,distance:80,direction:"x",autoplay:!1,autoheight:!1,scroll:!1,index:0,fullscreen:!1,autopage:!1,autoload:!1,async:!0,callback:null,onStart:null,onMove:null,onEnd:null},se={handle:{},on:L,off:P,to:p,load:I,getPageParams:E,getPages:l,prev:w,next:y,stop:v,start:m,lock:k,index:b,unlock:T,destroy:F,widget:N,option:j,config:ce,init:i},ce=se.config=t.extend(!0,{},le,e.config.slide,n),ue={},de=0,fe=!1,he={},pe=[],ge=[],ve=!1,me={x:{},y:{}},be=/hp-tablet/gi.test(navigator.appVersion),we="ontouchstart"in window&&!be,$="",ye=0,xe=0,ke=!1,Te=!1,ue={x1:0,x2:0,y1:0,y2:0,direction:""};try{i(ce)}catch(Se){e.showLog(Se)}var Oe,Ce;return se},e}(bui||{},libs),function(e,t){return e.swipe=function(){var n=null,i=null;return function(a){function r(i){var a=t.extend(!0,K,i);return pe=!1,a.id?(M=e.obj(a.id),V=a.width>0?a.width:ke.clientWidth,q=a.height>0?a.height:ke.clientHeight,A=M.children(a.handle),z=Z?M.children():M,W=z.children(a.swipeleft),_=z.children(a.swiperight),Y=z.children(a.swipeup),B=z.children(a.swipedown),$=parseFloat(a.movingDistance),H=$,s(),ee||(o(a),ee=!0),n&&n.close(),de||E(),this):void e.showLog("swipe id不能为空","bui.swipe.init")}function o(e){z.css({width:V,position:"relative",overflow:"hidden"}),!Z&&z.css({height:q}),A.css({position:"relative","z-index":10});try{var t=W.attr("data-moving")||$,n=_.attr("data-moving")||$,i=Y.attr("data-moving")||$,a=B.attr("data-moving")||$,r=l(t),o=l(n),s=l(i),c=l(a);ne&&W.css({width:r}),te&&_.css({width:o}),ae&&B.css({height:s}),ie&&Y.css({height:c})}catch(u){}}function l(e){var t=K.zoom?e/100+"rem":e+"px";return t}function s(){"x"==G?(te=!!_.length,ne=!!W.length):"y"==G?(ae=!!B.length,ie=!!Y.length):"xy"==G&&(ae=!!B.length,ie=!!Y.length,ne=!!W.length,te=!!_.length)}function c(n){var i=n.originalEvent&&n.originalEvent.targetTouches||n.targetTouches;if(i.length>1||n.scale&&1!==n.scale)return void(be=!1);if(K.stopHandle&&e.checkTargetInclude(n.target,K.stopHandle))return void(be=!1);var a=me?i[0]:n;if(Q.id=K.id,Q.x1=a.pageX,Q.y1=a.pageY,Q.direction="",U=t(n.target).closest(K.handle),D.call(this,"touchstart",n,Q),Z&&!ge){A=U,z=A.parent(),W=z.children(K.swipeleft),_=z.children(K.swiperight),Y=z.children(K.swipeup),B=z.children(K.swipedown),s();z.index();o(K),(0==K.height||""==z[0].style.height)&&z.height(U[0].offsetHeight)}if(Q.movingleft=parseInt(W.attr("data-moving")||$),Q.movingright=parseInt(_.attr("data-moving")||$),Q.movingup=parseInt(Y.attr("data-moving")||$),Q.movingdown=parseInt(B.attr("data-moving")||$),U.length){var r=!1;switch(G){case"x":r=!(!ne&&!te);break;case"y":r=!(!ie&&!ae);break;case"xy":r=!!(ne||te||ie||ae)}}be=void 0==r||1==r}function u(a){var r=a.originalEvent&&a.originalEvent.targetTouches||a.targetTouches;if(r.length>1||a.scale&&1!==a.scale)return void k();var o=me?r[0]:a;if(Q.x2=o.pageX,Q.y2=o.pageY,D.call(this,"touchmove",a,Q),n&&a.stopPropagation(),be){Q.direction||(Q.direction=e.swipeDirection(Q.x1,Q.x2,Q.y1,Q.y2)),"swipeleft"!==Q.direction&&"swiperight"!==Q.direction||a.preventDefault();try{if("swipeup"===Q.direction||"swipedown"===Q.direction){var l=M[0].scrollTop||0,s=(M[0].scrollHeight||0,U[0].scrollTop||0),c=(U[0].scrollHeight||0,t(a.target)[0].scrollTop||0),u=a.target.offsetHeight||0,d=a.target.scrollHeight||0,p=!1,g=!1;0==l&&0==s&&0==c&&(p=!0),d-c-u<=2&&(g=!0)}}catch(a){}var v="swiperight"==Q.direction||"swipeleft"==Q.direction?Q.x2-Q.x1:Q.y2-Q.y1,m=0;Q.deltax=ge?Math.abs(v):Math.abs(v)+ye,!te||"swiperight"!=Q.direction||oe||ge||i?!p||!ae||"swipedown"!=Q.direction||le||ge||i?!ne||"swipeleft"!=Q.direction||re||ge||i?!g||!ie||"swipeup"!=Q.direction||se||ge||i?"swipeleft"==Q.direction&&oe?(H=Q.movingright,m=f(Q,Q.movingright),ue&&F(-Q.deltax,0,"none",i||_),ce&&F(-m,0,"none",A),D.call(this,"movingleft",a,Q),we=!0,a.stopPropagation()):"swipeup"==Q.direction&&le?(H=Q.movingdown,m=f(Q,Q.movingdown),ue&&F(0,-Q.deltax,"none",i||B),ce&&F(0,-m,"none",A),D.call(this,"movingup",a,Q),we=!0,a.preventDefault(),a.stopPropagation()):"swiperight"==Q.direction&&re?(H=Q.movingleft,m=f(Q,Q.movingleft),ue&&F(Q.deltax,0,"none",i||W),ce&&F(m,0,"none",A),D.call(this,"movingright",a,Q),we=!0,a.stopPropagation()):"swipedown"==Q.direction&&se&&(H=Q.movingup,m=f(Q,Q.movingleft),ue&&F(0,Q.deltax,"none",i||Y),ce&&F(0,m,"none",A),D.call(this,"movingdown",a,Q),we=!0,a.preventDefault(),a.stopPropagation()):(H=Q.movingup,m=h(Q,Q.movingup),ue&&F(0,m,"none",Y),ce&&F(0,-Q.deltax,"none",A),D.call(this,"movingup",a,Q),we=!0,a.preventDefault(),a.stopPropagation()):(H=Q.movingleft,m=h(Q,Q.movingleft),ue&&F(m,0,"none",W),ce&&F(-Q.deltax,0,"none",A),D.call(this,"movingleft",a,Q),we=!0,a.stopPropagation()):(H=Q.movingdown,m=f(Q,Q.movingdown),ue&&F(0,m,"none",B),ce&&F(0,Q.deltax,"none",A),D.call(this,"movingdown",a,Q),we=!0,a.preventDefault(),a.stopPropagation()):(H=Q.movingright,m=f(Q,Q.movingright),ue&&F(m,0,"none",_),ce&&F(Q.deltax,0,"none",A),D.call(this,"movingright",a,Q),
we=!0,a.stopPropagation())}}function d(e){if(D.call(this,"touchend",e,Q),we){var t="swiperight"==Q.direction||"swipeleft"==Q.direction?Math.abs(Q.x2-Q.x1):Math.abs(Q.y2-Q.y1);te&&"swiperight"==Q.direction&&t>K.distance&&!oe&&!ge?(g(),D.call(this,Q.direction,e,Q),D.call(this,"open",Q.direction)):ne&&"swipeleft"==Q.direction&&t>K.distance&&!re&&!ge?(p(),D.call(this,Q.direction,e,Q),D.call(this,"open",Q.direction)):ie&&"swipeup"==Q.direction&&t>K.distance&&!se&&!ge?(v(),D.call(this,Q.direction,e,Q),D.call(this,"open",Q.direction)):ae&&"swipedown"==Q.direction&&t>K.distance&&!le&&!ge?(m(),D.call(this,Q.direction,e,Q),D.call(this,"open",Q.direction)):ge&&t<K.distance?(ne&&re&&p(),te&&oe&&g(),ie&&se&&v(),ae&&le&&m(),D.call(this,Q.direction,e,Q),K.alwaysTrigger&&D.call(this,"open",Q.direction)):ge&&t>K.distance?(ne&&re&&w(),te&&oe&&b(),ie&&se&&y(),ae&&le&&x(),D.call(this,Q.direction,e,Q),D.call(this,"close",Q.direction)):!ge&&t<K.distance&&(ne&&!re&&w(),te&&!oe&&b(),ie&&!se&&y(),ae&&!le&&x(),K.alwaysTrigger&&D.call(this,"close",Q.direction),D.call(this,Q.direction,e,Q)),be=!1,we=!1,e.stopPropagation()}}function f(e,t){var n=-t+e.deltax;return n=n>0?0:n}function h(e,t){var n=t-e.deltax;return n=n>t?t:n}function p(e){e=e||{},e.transition=e.transition||K.transition,e.target=e.target||W,e.handle=e.handle||A,n&&n.close(),ge=!0,re=!0,Z&&(n=X,i=W,ke.addEventListener("click",I,!0)),ue&&F(0,0,e.transition,e.target),ce&&F(-H,0,e.transition,e.handle)}function g(e){e=e||{},e.transition=e.transition||K.transition,e.target=e.target||_,e.handle=e.handle||A,n&&n.close(),ge=!0,oe=!0,Z&&(n=X,i=_,ke.addEventListener("click",I,!0)),ue&&F(0,0,e.transition,e.target),ce&&F(H,0,e.transition,e.handle)}function v(e){e=e||{},e.transition=e.transition||K.transition,e.target=e.target||Y,e.handle=e.handle||A,n&&n.close(),ge=!0,se=!0,Z&&(n=X,i=Y,ke.addEventListener("click",I,!0)),ue&&F(0,0,e.transition,e.target),ce&&F(0,-H,e.transition,e.handle)}function m(e){e=e||{},e.transition=e.transition||K.transition,e.target=e.target||B,e.handle=e.handle||A,n&&n.close(),ge=!0,le=!0,Z&&(n=X,i=B,ke.addEventListener("click",I,!0)),ue&&F(0,0,e.transition,e.target),ce&&F(0,H,e.transition,e.handle)}function b(e){e=e||{},e.transition=e.transition||K.transition,e.target=_,e.handle=he||A,ge=!1,oe=!1,Z&&(n=null,i=null,fe=null,he=null,ke.removeEventListener("click",I,!0)),ue&&F(-(H+1),0,e.transition,e.target),ce&&F(ye,0,e.transition,e.handle)}function w(e){e=e||{},e.transition=e.transition||K.transition,e.target=W,e.handle=he||A,ge=!1,re=!1,Z&&(n=null,i=null,fe=null,he=null,ke.removeEventListener("click",I,!0)),ue&&F("101%",0,e.transition,e.target),ce&&F(-ye,0,e.transition,e.handle)}function y(e){e=e||{},e.transition=e.transition||K.transition,e.target=Y,e.handle=he||A,ge=!1,se=!1,Z&&(n=null,i=null,fe=null,he=null,ke.removeEventListener("click",I,!0)),ue&&F(0,"100%",e.transition,e.target),ce&&F(0,-ye,e.transition,e.handle)}function x(e){e=e||{},e.transition=e.transition||K.transition,e.target=B,e.handle=he||A,ge=!1,le=!1,Z&&(n=null,i=null,fe=null,he=null,ke.removeEventListener("click",I,!0)),ue&&F(0,-H,e.transition,e.target),ce&&F(0,ye,e.transition,e.handle)}function k(){oe&&b(),re&&w(),le&&x(),se&&y(),D.call(this,"close")}function T(){if(!pe)return k(),this}function S(e){if(!pe){var t=e||{};t.transition=t.transition||K.transition,t.index=t.index||0;var n,i=t.target;switch(i){case"swiperight":t.target=_.eq(t.index),n=t.target.parent().index(),t.handle=Z?M.children().eq(n).children(K.handle):A,he=t.handle,fe=t.target,te&&g(t);break;case"swipeleft":t.target=W.eq(t.index),n=t.target.parent().index(),t.handle=Z?M.children().eq(n).children(K.handle):A,he=t.handle,fe=t.target,ne&&p(t);break;case"swipedown":t.target=B.eq(t.index),n=t.target.parent().index(),t.handle=Z?M.children().eq(n).children(K.handle):A,he=t.handle,fe=t.target,ae&&m(t);break;case"swipeup":t.target=Y.eq(t.index),n=t.target.parent().index(),t.handle=Z?M.children().eq(n).children(K.handle):A,he=t.handle,fe=t.target,ie&&v(t);break;default:t.target=_.eq(t.index),n=t.target.parent().index(),t.handle=Z?M.children().eq(n).children(K.handle):A,he=t.handle,fe=t.target,te&&g(t)}return D.call(this,"open",i),this}}function O(){return n}function C(){return ge}function I(e){var i=t(e.target),a=i.closest(W).length||i.closest(_).length||i.closest(Y).length||i.closest(B).length||e.target.className.indexOf("bui-mask")>-1||e.target.className.indexOf("bui-click")>-1;n&&(a||(n.close(),e.stopPropagation()))}function E(){M.on("touchstart",c).on("touchmove",u).on("touchend",d).on("touchcancel",function(){}),de=!0}function F(e,t,n,i){var n,a=i||M,e=e||0,t=t||0,r=K.zoom?parseFloat(e)/100+"rem":parseFloat(e)+"px",o=K.zoom?parseFloat(t)/100+"rem":parseFloat(t)+"px",l=String(e).indexOf("%")>-1?e:r,s=String(t).indexOf("%")>-1?t:o;return n="number"==typeof n?"all "+n+"ms":n||"all 300ms",a.css({"-webkit-transition":n,transition:n,"-webkit-transform":"translate("+l+","+s+")",transform:"translate("+l+","+s+")"}).one("webkitTransitionEnd",function(){a.css({"-webkit-transition":"none",transition:"none"})}),this}function N(){if(!pe)return M.off("touchmove",u).off("touchend",d).off("touchcancel",function(){}),D.call(this,"lock"),this}function j(){if(!pe)return M.on("touchmove",u).on("touchend",d).on("touchcancel",function(){}),D.call(this,"unlock"),this}function L(e){var e=1==e;M&&(M.off(),e&&M.remove()),R("open"),R("close"),pe=!0}function P(t,n){return e.on.apply(X,arguments),this}function R(t,n){return e.off.apply(X,arguments),this}function D(t){X.self=this==window||this==X?null:this,e.trigger.apply(X,arguments)}var M,A,z,H,V,q,U,W,_,Y,B,$,J={id:"",handle:".handle",swiperight:".swiperight",swipeleft:".swipeleft",swipeup:".swipeup",swipedown:".swipedown",direction:"x",stopHandle:"",hasChild:!1,handleMove:!0,targetMove:!0,alwaysTrigger:!1,width:0,height:0,movingDistance:280,initDistance:0,zoom:!1,distance:80,transition:300},X={handle:{},active:O,isActive:C,on:P,off:R,close:T,open:S,destroy:L,lock:N,unlock:j,init:r},K=X.config=t.extend(!0,{},J,e.config.swipe,a),Q={},G=K.direction,Z=K.hasChild,ee=!1,te=!1,ne=!1,ie=!1,ae=!1,re=!1,oe=!1,le=!1,se=!1,ce=K.handleMove,ue=K.targetMove,de=!1,fe=null,he=null,pe=!1,ge=!1,ve=/hp-tablet/gi.test(navigator.appVersion),me="ontouchstart"in window&&!ve,be=!1,we=!1,Q={x1:0,x2:0,y1:0,y2:0,direction:"",deltax:0,movingleft:0,movingright:0,movingup:0,movingdown:0},ye=K.initDistance,xe=document,ke=xe.documentElement;r(K);return X}}(),e}(bui||{},libs),function(e,t){return e.sidebar=function(n){function i(n){var i=t.extend(!0,y,n);return y=w.config=i,i.trigger&&(O=e.obj(i.trigger)),k=e.obj(i.handle),m=bui.swipe({id:i.id,handle:i.handle,movingDistance:i.width,swiperight:i.swiperight,swipeleft:i.swipeleft,direction:"x",hasChild:!1,width:0,height:0,handleMove:i.handleMove,zoom:i.zoom,distance:i.distance,transition:300}),y.mask&&(x=bui.mask({appendTo:i.handle,autoTrigger:!1,opacity:.01,callback:function(){m.close()}})),S||(a(),i.height>0&&e.obj(i.id).height(i.height)),this}function a(){var e=this;m.on("open",function(t){O&&O.addClass("active"),x&&x.show(),k.css("overflow-y","hidden"),T=!0,v.call(e,"open",t)}),m.on("close",function(){O&&O.removeClass("active"),x&&x.hide(),k.css("overflow-y","auto"),T=!1,v.call(e,"close")}),O&&O.on("click.bui",function(){if(!t(this).hasClass("disabled")){var e=t(this).attr("data-target")||"swiperight";T?o():r({target:e})}}),S=!0}function r(e){var t=e||{};return t.target=t.target||"swiperight",t.transition=t.transition||300,m.open(t),this}function o(){return m.close(),this}function l(){return m.lock(),v.call(this,"lock"),this}function s(e){return m.unlock(),v.call(this,"unlock"),this}function c(){return T}function u(){return m.active()}function d(e){var e=1==e;O&&O.off("click.bui"),g("open"),g("close"),x&&x.destroy(e),m&&m.destroy(e)}function f(t){var n={swipe:m,mask:x};return e.widget.call(n,t)}function h(t,n){return e.option.call(w,t,n)}function p(t,n){return e.on.apply(w,arguments),this}function g(t,n){return e.off.apply(w,arguments),this}function v(t){w.self=this==window||this==w?null:this,e.trigger.apply(w,arguments)}var m,b={id:"",trigger:"",handle:".bui-page",swiperight:".swiperight",swipeleft:".swipeleft",handleMove:!0,mask:!0,width:280,height:0,zoom:!0,distance:80},w={handle:{},on:p,off:g,active:u,isActive:c,open:r,close:o,lock:l,unlock:s,destroy:d,widget:f,option:h,config:y,init:i},y=w.config=t.extend(!0,{},b,e.config.sidebar,n),x=null,k=null,T=!1,S=!1,O=null;return i(y),w},e}(bui||{},libs),function(e,t){return e.listview=function(n){function i(n){var i=t.extend(!0,k,n);return k=x.config=i,b=e.obj(i.id),w=b.children(),w.length&&a(i),T||r(i),this}function a(e){e.height>0&&b.height(e.height),e.data.length?w.each(function(n,i){var a=t(i),r=a.attr("status"),l=e.menuHeight>0?e.menuHeight:i.offsetHeight;if(!r){var s=o(e);a.append(s).attr("status","1")}i.style.height||t(i).height(l)}):w.each(function(n,i){var a=e.menuHeight>0?e.menuHeight:i.offsetHeight;i.style.height||t(i).height(a)})}function r(e){var t=this,n=function(t){e.callback&&e.callback.call(this,t,m)};b.on("click.bui",".bui-listview-menu .bui-btn",n),m=bui.swipe({id:e.id,handle:e.handle,movingDistance:e.menuWidth,swiperight:e.swiperight,swipeleft:e.swipeleft,direction:"x",hasChild:!0,width:e.width,height:0,zoom:k.zoom,distance:e.distance,transition:300}),m.on("open",function(e){S=!0,v.call(t,"open",e)}),m.on("close",function(e){S=!1,v.call(t,"close",e)}),T=!0}function o(e){var n="",i="right"==e.position?e.swipeleft.substr(1):e.swiperight.substr(1);return n+='<div class="bui-listview-menu '+i+'">',t.each(e.data,function(e,t){n+='    <div class="bui-btn '+t.classname+'">'+t.text+"</div>"}),n+="</div>"}function l(){return m.active()}function s(e){var t=e||{};return t.target=t.target||("right"==k.position?k.swipeleft.substr(1):k.swiperight.substr(1)),t.transition=t.transition||300,t.index=t.index||0,m.open(t),this}function c(){return m.close(),this}function u(){return m.lock(),v.call(this,"lock"),this}function d(e){return m.unlock(),v.call(this,"unlock"),this}function f(e){var e=1==e;w&&(w.off("click.bui"),w=null),b&&(b.off("click.bui"),e&&b.remove(),b=null),g("open"),g("close"),m&&m.destroy(e),k=null,x=null}function h(t){var n={swipe:m};return e.widget.call(n,t)}function p(t,n){return e.option.call(x,t,n)}function g(t,n){return e.off.apply(x,arguments),this}function v(t){x.self=this==window||this==x?null:this,e.trigger.apply(x,arguments)}var m,b,w,y={id:"",data:[],handle:".bui-btn",swiperight:".swiperight",swipeleft:".swipeleft",position:"right",width:0,height:0,menuWidth:160,menuHeight:0,distance:80,zoom:!1,callback:null},x={active:l,lock:u,unlock:d,open:s,close:c,destroy:f,widget:h,option:p,config:k,init:i},k=x.config=t.extend(!0,{},y,e.config.listview,n),T=!1,S=!1;return i(k),x},e}(bui||{},libs),function(e,t){"use strict";return e.btn=function(n){function i(t){return"object"===e["typeof"](t)?(d.id=t.id||"",d.handle=t.handle||"",d.progress="progress"in t&&t.progress,d.replace="replace"in t&&t.replace,d.timeout=t.timeout||3e3):"string"===e["typeof"](t)&&(d.id=t||"",d.handle="",d.progress=!1,d.replace=!1,d.timeout=3e3),l=e.obj(d.id),u=d.handle,s=d.progress,c=d.replace,this}function a(n){var n=n;o();var i=0;l.on("click.bui",u,function(a){var r=n||t(this).attr("href"),o=t(this).attr("target"),l=t(this).attr("disabled"),u=t(this).hasClass("disabled")||""==l||"true"==l||"disabled"==l,f={};if(r&&!u&&!(r&&r.indexOf("javascript:")>-1)){if(r&&r.indexOf("?")>-1){var h=r.split("?");f=e.keyStringToObject(h[1]),r=h[0]}var p,g=t(this).attr("param")||"",v=g&&g.indexOf("{")>-1&&g.indexOf("}")>-1?JSON.parse(t(this).attr("param")):{},m=t.extend(!0,f,v),b=t(this).attr("progress")?"false"!=t(this).attr("progress"):s;b&&(p=e.loading({autoTrigger:!0,display:"block",width:30,height:30,opacity:0,timeout:d.timeout}));var w=+new Date;if(w-i<350)return!1;i=w;var y={url:r,param:m,replace:c};return"_blank"==o?e.run({id:r,data:m}):e.load(y),!1}})}function r(n,i){var i=i||{};o(),l.on("click.bui",u,function(a){var r=this,o=t(r).css("background"),l="none"==o?"#fff":o;i.appendTo=r,i.background=i.background||l,i.autoClose=0!=i.autoClose,i.autoTrigger=0!=i.autoTrigger;var s=e.loading(i);return n&&n.call(r,s)})}function o(){return l.off("click.bui",u),this}var l,s,c,u,d={};return i(n),{load:a,submit:r,off:o}},e}(bui||{},libs),function(e,t){"use strict";return e.dialog=function(n){function i(n){var i=t.extend(!0,O,n);switch(i.appendTo=i.appendTo||(e.hasRouter?router.currentPage()||"body":"body"),R=!1,x=i.effect,i.position){case"top":C="bui-dialog-top",x=i.effect||"fadeInDown";break;case"bottom":C="bui-dialog-bottom",x=i.effect||"fadeInUp";break;case"left":C="bui-dialog-left",x=i.effect||"fadeInLeft";break;case"right":C="bui-dialog-right",x=i.effect||"fadeInRight";break;case"center":C="bui-dialog-center",x=i.effect||F}i.fullscreen&&(C="bui-dialog-fullscreen",x=i.effect||F),i.render?(i.id=e.guid(),d(i),w=e.objId(i.id)):(w=e.obj(i.id),w.addClass(C)),I=w.width()>L?L:w.width(),E=w.height()>P?P:w.height(),w.css("display","none"),y=e.toggle({id:i.id,effect:x});try{k=n.mask&&e.mask({opacity:n.opacity,appendTo:w.parent(),autoTrigger:!1,onlyOne:!0,autoClose:!1,callback:function(){n.onMask&&n.onMask(),O.autoClose&&(O.render?c(u):c())}})}catch(a){console.log(a)}return N&&!O.render||f(),O=S.config=i,this}function a(e){var n="";return n+='<div id="'+e.id+'" class="bui-dialog '+C+" "+e.className+'" style="display:block">',e.title&&(n+='\t<div class="bui-dialog-head">'+e.title+"</div>"),n+='\t<div class="bui-dialog-main">',e.content&&(n+=e.content),n+="\t</div>",e.buttons&&e.buttons.length&&(n+='\t<div class="bui-dialog-foot bui-box">',t(e.buttons).each(function(e,t){n+='\t\t<div class="bui-btn span1 '+(t.className||"")+'" value="'+(t.value||"")+'">'+(t.name||t)+"</div>"}),n+="\t</div>"),e.close&&(n+='   <div class="bui-dialog-close">'+(e.closeText?e.closeText:'<i class="icon-close"></i>')+"</div>"),n+="</div>"}function r(t){if(!s&&!R){w.css("display","block");var n=w.attr("status")||0;if(0==n){I=O.width||I||w.width(),E=O.height||E||w.height();var i=e.unit.pxToRemZoom(I),a=e.unit.pxToRemZoom(E),r=O.zoom?i+"rem":I+"px",o=O.zoom?a+"rem":E+"px",c=O.zoom?"-"+a/2+"rem":"-"+E/2+"px",u=O.zoom?"-"+i/2+"rem":"-"+I/2+"px";if("center"!=O.position||O.fullscreen||w.css({width:r,height:o,top:"50%","margin-top":c,left:"50%","margin-left":u,right:"auto"}),O.fullscreen||w.css({width:r,height:o}),O.scroll){var d=w.children(".bui-dialog-head"),h=w.children(".bui-dialog-foot"),p=w.children(".bui-dialog-main"),g=d.length?d.height():0,v=h.length?h.height():0,m=w.height()-g-v;p.css({height:m})}w.attr("status","1")}return k&&k.show(),y.show(function(e){s=!0,t&&t.call(S,y),l.call(this,"openafter",{target:w[0]})}),N||f(),l.call(this,"open",{target:w[0]}),this}}function o(e,t){"undefined"==typeof j[e]&&(j[e]=[]),j[e].push(t)}function l(e,t){if(j[e]instanceof Array)for(var n=j[e],i=0,a=n.length;i<a;i++)n[i](t)}function s(e){return s}function c(t){if(s&&!R){var t=t||O.onClose;try{y.hide(function(e){s=!1,t&&t.call(S,y)}),k&&k.hide(),l.call(this,"close",{target:w[0]})}catch(n){e.showLog(n,"bui.dialog.close")}return this}}function u(){try{w.remove(),l.call(this,"remove",{target:null})}catch(t){e.showLog(t,"bui.dialog.remove")}return this}function d(e){var n=a(e);return t(e.appendTo).append(n),this}function f(){return w.on("click.bui",".bui-dialog-close",function(e){O.onClose&&O.onClose.call(this,S),O.autoClose&&(O.render?c(u):c()),e.stopPropagation()}),w.on("click.bui",".bui-dialog-foot .bui-btn",function(e){O.callback&&O.callback.call(this,S),O.autoClose&&(O.render?c(u):c()),e.stopPropagation()}),N=!0,this}function h(t){return e.selector.call(w,t)}function p(e){return T.title="提示",T.content="",T.close=!1,T.render=!0,T.autoClose=!0,T.mask=!0,T.buttons=["确定"],O=t.extend(!0,T,e),i(O),l.call(this,"create",{target:null}),this}function g(e){var e=1==e;w&&(w.off("click.bui"),e&&w.remove()),b("open"),b("close"),k&&k.destroy(e),y&&y.destroy(e),R=!0}function v(t){var n={toggle:y,mask:k};return e.widget.call(n,t)}function m(t,n){return e.option.call(S,t,n)}function o(t,n){return e.on.apply(S,arguments),this}function b(t,n){return e.off.apply(S,arguments),this}function l(t){S.self=this==window||this==S?null:this,e.trigger.apply(S,arguments)}var w,y,x,k,T={id:"",title:"",effect:"",content:"",className:"",appendTo:"",position:"center",fullscreen:!1,width:0,height:0,mask:!0,opacity:.6,render:!1,autoClose:!0,close:!0,scroll:!0,closeText:"",zoom:!1,buttons:[],onMask:null,onClose:null,callback:null},S={selector:h,$:h,handle:{},on:o,off:b,open:r,close:c,isOpen:s,create:p,remove:u,destroy:g,widget:v,option:m,config:O,init:i},O=S.config=t.extend(!1,{},T,e.config.dialog,n),C="",I="",E="",F="fadeInDown",s=!1,N=!1,j={},L=window.viewport.width()||document.documentElement.clientWidth,P=window.viewport.height()||document.documentElement.clientHeight,R=!1;return O.id&&i(O),S},e}(bui||{},libs),function(e,t){"use strict";return e.alert=function(n,i){var a=e.dialog(),r={};r.className="bui-alert",r.title="提示",r.width=400,r.height=260,r.scroll=!0,r.position="center",r.autoClose=!0,r.zoom=!0,r.buttons=[{name:"确定",className:"primary-reverse"}],r.callback=i||function(){};var o=t.extend(r,e.config.alert),l="";try{l="string"==typeof n&&n.indexOf("<")>-1&&n.indexOf(">")>-1?"<xmp>"+n+"</xmp>":!n||"object"!==e["typeof"](n)&&"array"!==e["typeof"](n)?n&&"function"===e["typeof"](n)?n.toString():n:JSON.stringify(n),o.content='<div class="bui-dialog-text bui-box-center" style="height:100%;">'+l+"</div>"}catch(s){e.showLog(s,"bui.alert")}return a.create(o).open(),a},e}(bui||{},libs),function(e,t){"use strict";return e.confirm=function(n,i){var a=e.dialog(),r={};r.className="bui-confirm",r.title="提示",r.width=400,r.height=260,r.scroll=!0,r.autoClose=!0,r.zoom=!0,r.position="center",r.buttons=[{name:"取消",className:""},{name:"确定",className:"primary-reverse"}],r.callback=i||function(){};var o={};return"object"==typeof n?(n.content='<div class="bui-dialog-text bui-box-center" style="height:100%;">'+n.content+"</div>",o=t.extend(r,e.config.confirm,n)):(o=t.extend(r,e.config.confirm),o.content='<div class="bui-dialog-text bui-box-center" style="height:100%;">'+n+"</div>",o.callback=i||function(){}),a.create(o).open(),a},e}(bui||{},libs),function(e,t){"use strict";return e.prompt=function(n,i){var a=e.dialog(),r={};r.className="bui-prompt",r.title="",r.width=400,r.height=260,r.scroll=!0,r.autoClose=!1,r.zoom=!0,r.position="center",r.buttons=[{name:"取消",className:""},{name:"确定",className:"primary-reverse"}],r.callback=i||function(){},r.placeholder="",r.row=1,r.type="text",r.value="",r.onChange=null;var o={},l="",s="";switch("object"==typeof n?(o=t.extend(r,e.config.prompt,n),l=o.content||""):(o=t.extend(r,e.config.prompt),o.callback=i||function(){},l=n||""),o.type){case"number":o.content='<div class="bui-prompt-main bui-box-vertical"> <div class="bui-prompt-label">'+l+'</div> <div class="span1"> <input class="bui-prompt-text" placeholder="'+o.placeholder+'" type="'+o.type+'" value="'+o.value+'"/> </div> </div>';break;default:o.content='<div class="bui-prompt-main bui-box-vertical"> <div class="bui-prompt-label">'+l+'</div> <div class="span1"> <textarea class="bui-prompt-text" placeholder="'+o.placeholder+'" rows="'+o.row+'" >'+o.value+"</textarea> </div> </div>"}return a.create(o).open(),t("#"+a.config.id).on("change",".bui-prompt-text",function(){s=this.value,o.onChange&&o.onChange.call(this,a)}),a.value=function(e){return"undefined"==typeof e?s:(t("#"+a.config.id).find(".bui-prompt-text").val(e),s=e)},a.focus=function(e){t("#"+a.config.id).find(".bui-prompt-text").focus()},a},e}(bui||{},libs),function(e,t){"use strict";return e.hint=function(n,i){function a(n){var i=t.extend(!0,T,n);return i.appendTo=i.appendTo||(e.hasRouter?router.currentPage()||"body":"body"),y=e.guid(),C="top"===i.position?"fadeInDown":"bottom"===i.position?"fadeInUp":i.effect,T=k.config=i,o(y,i.content,S,i.appendTo),++S,O=e.objId(y),w=e.toggle({id:O,effect:C}),I=!0,w.show(),i.autoClose&&(x&&clearTimeout(x),x=setTimeout(function(e){i.onClose&&i.onClose.call(k),s()},i.timeout)),E||r(i),this}function r(e){O.on("click.bui",".bui-hint-close",function(t){s(),e.onClose&&e.onClose.call(this,k)}),E=!0}function o(n,i,a,r){var o,l="11"+a,s=e.objId(r)||t("body");switch(T.position){case"top":o="bui-hint-top";break;case"bottom":o="bui-hint-bottom";break;case"center":o="bui-hint-center"}var c=T.background?T.background:"rgba(0,0,0,"+T.opacity+")",u='<div id="'+n+'" class="bui-hint '+o+'" style="background:'+c+";z-index:"+l+'">'+i+(T.autoClose?"":'<div class="bui-hint-close"><i class="icon-close"></i></div>')+"</div>";s.append(u),r&&s.css("position","relative")}function l(){return I}function s(){var e=this;return w&&(I=!1,w.hide(function(){v.call(e,"hide",{target:null}),w.remove(),w=null})),this}function c(e){var t=this;return w&&(I=!1,w.hide(function(n){e&&e.call(this,k),v.call(t,"hide",{target:O[0]})})),this}function u(e){var t=this;return w&&(I=!0,w.show(function(n){v.call(t,"show",{target:O[0]}),e&&e.call(this,k)})),this}function d(e){var e=1==e;O.off("click.bui"),w&&w.destroy(e),g("show"),g("hide")}function f(t){var n={toggle:w};return e.widget.call(n,t)}function h(t,n){return e.option.call(k,t,n)}function p(t,n){return e.on.apply(k,arguments),this}function g(t,n){return e.off.apply(k,arguments),this}function v(t){k.self=this==window||this==k?null:this,e.trigger.apply(k,arguments)}var m={appendTo:"",content:"",timeout:2e3,autoClose:!0,opacity:.6,background:"",effect:"fadeInUp",position:"bottom",onClose:null};if("number"==typeof n||"string"==typeof n){var b=n||"";n={},n.content=b,n.onClose=i||null}else"object"==typeof n&&n.content&&(n=n);var w,y,x,k={handle:{},on:p,off:g,remove:s,hide:c,show:u,isShow:l,destroy:d,widget:f,option:h,config:T,init:a},T=k.config=t.extend(!0,{},m,e.config.hint,n),S=0,O=null,C="",I=!1,E=!1;return T.content&&a(T),k},e}(bui||{},libs),function(e,t){return e.pullrefresh=function(n){function i(n){var i=t.extend(!0,z,n);return i.id?(S=e.obj(i.id),z=A.config=i,O=S[0],C=S.children(P),I=S.children(R),E=S.children(D),N=a,F=i.refreshTips.end,L=e.loading({appendTo:C,width:20,height:20,autoClose:!1,text:F,onlyText:!0,display:"inline",autoTrigger:!1,mask:!1}),i.autoLoad&&(q=!0,L.start({text:i.refreshTips.start,onlyText:!1}),N()),U||o(i),m(i.height),this):void e.hint("pullrefresh id不能为空")}function a(){V=(new Date).getTime(),z.onRefresh&&z.onRefresh.call(A),T.call(this,"refresh")}function r(){var e,t=(new Date).getTime(),n=t-V,i=1e3,a=60*i,r=60*a,o=Math.floor(n/r),l=Math.floor(n/a);Math.floor(n/i);return e=o<=0&&l<=0?"刚刚更新":o<=0&&l>0?l+"分钟前更新":"上次更新时间:"+(o<10?"0"+o:o)+":"+(l<10?"0"+l:l)}function o(e){H||d(),U=!0}function l(n){var i=n.originalEvent&&n.originalEvent.targetTouches||n.targetTouches,a=Y?i[0]:n;return K.x1=a.pageX,K.y1=a.pageY,K.direction="",z.stopHandle&&e.checkTargetInclude(n.target,z.stopHandle)?void(J=!1):i.length>1||n.scale&&1!==n.scale?void(J=!1):(F=z.lastUpdated?r():z.refreshTips.end,T.call(this,"touchstart",n,K),void(J=!(!(t(window).scrollTop()<=0&&S.scrollTop()<=0&&z.onRefresh)||q)))}function s(t){var n=t.originalEvent&&t.originalEvent.targetTouches||t.targetTouches;if(J){if(n.length>1||t.scale&&1!==t.scale)return void h();if(!J)return void h();var i=Y?n[0]:t;K.x2=i.pageX,K.y2=i.pageY,K.direction||(K.direction=e.swipeDirection(K.x1,K.x2,K.y1,K.y2)),T.call(this,"touchmove",t,K),"swipeleft"!==K.direction&&"swiperight"!==K.direction||t.preventDefault(),"swipedown"==K.direction?(T.call(this,"movingdown",t,K),j=Math.abs(K.y2-K.y1),h(j/2,!1),j>=z.distance?Q||(L.show({text:z.refreshTips.release,onlyText:!1}).pause(),Q=!0):G||(L.show({text:F,onlyText:!1}).pause(),G=!0),X=!0,z.maxDistance>z.distance&&j>=z.maxDistance&&(L.show({text:z.refreshTips.start,onlyText:!1}).start(),q=!0,z.onRefresh&&N(),X=!1,Q=!1,G=!1,K={},B+=K.y2-K.y1,$+=K.x2-K.x1,K.lastX=$,K.lastY=B,K={x1:0,x2:0,y1:0,y2:0,direction:""},J=!1,X=!1),t.preventDefault(),t.stopPropagation()):"swipeup"==K.direction&&(T.call(this,"movingup",t,K),X=!0)}}function c(e){return T.call(this,"touchend",e,K),X?("swipedown"==K.direction?(T.call(this,K.direction,e,K),j>=z.distance?(h(z.distance/2),L.show({text:z.refreshTips.start,onlyText:!1}).start(),q=!0,z.onRefresh&&N()):h(),e.stopPropagation(),Q=!1,G=!1,K={}):"swipeup"==K.direction&&T.call(this,K.direction,e,K),B+=K.y2-K.y1,$+=K.x2-K.x1,K.lastX=$,K.lastY=B,K={x1:0,x2:0,y1:0,y2:0,direction:""},J=!1,void(X=!1)):(K={x1:0,x2:0,y1:0,y2:0,direction:""},J=!1,void(X=!1))}function u(e){return H=!0,S.off("touchstart",l).off("touchmove",s).off("touchend",c).off("touchcancel",h),h(),e&&e.call(this,A),T.call(this,"lock"),this}function d(e){return H=!1,S.on("touchstart",l).on("touchmove",s).on("touchend",c).on("touchcancel",h),e&&e.call(this,A),T.call(this,"unlock"),this}function f(e,t,n){return W||(L.show({text:z.refreshTips.success,onlyText:!1}),h(e,t),I.one("webkitTransitionEnd",function(){L&&L.hide(),W=!1,n&&n.call(A)})),this}function h(e,t){t=0!=t,e=e||0,q=!1;var n=t?"all 300ms ease-out":"none";return p(0,e+"px",n,I),E.length&&p(0,e+"px",n,E),this}function p(e,t,n,i){var n,i=i||S,e=e||0,t=t||0,a=e,r=t,o=String(e).indexOf("%")>-1?String(e):a,l=String(t).indexOf("%")>-1?String(t):r;n="number"==typeof n?"all "+n+"ms":n||"all 300ms";try{i.css({"-webkit-transition":n,transition:n,"-webkit-transform":"translate("+o+","+l+")",transform:"translate("+o+","+l+")"}),i.one("webkitTransitionEnd",function(){i.css({"-webkit-transition":"none",transition:"none"})})}catch(s){console.log(s.message)}}function g(){W=!0,h(),e.hint(z.refreshTips.fail),T.call(this,"fail")}function v(){h(z.distance/2,!0),L.start({text:z.refreshTips.start,onlyText:!1}),z.onRefresh&&N()}function m(e){var t=S.parents(".bui-page"),n=(t.children("main"),O&&O.offsetTop||0),i=t.children(z.header),a=i.length>1?i.eq(i.length-1).height():i.height(),r=t.children(z.footer),o=r.length>1?r.eq(r.length-1).height():r.height(),l=window.viewport.height()-(a||0)-(o||0)-n,s=e?parseFloat(e):l;S.height(s)}function b(e){var e=1==e;S&&(S.off(),e&&S.remove()),L&&L.destroy(e),k("refresh"),k("movingdown"),k("swipedown")}function w(t){var n={loading:L};return e.widget.call(n,t)}function y(t,n){return e.option.call(A,t,n)}function x(t,n){return e.on.apply(A,arguments),this}function k(t,n){return e.off.apply(A,arguments),this}function T(t){A.self=this==window||this==A?null:this,e.trigger.apply(A,arguments)}var S,O,C,I,E,F,N,j,L,P="."+e.prefix("scroll-head"),R="."+e.prefix("scroll-main"),D="."+e.prefix("scroll-foot"),M={id:"",stopHandle:"",childrenTop:P,childrenMain:R,header:".bui-page header",footer:".bui-page footer",distance:90,maxDistance:0,autoLoad:!0,lastUpdated:!1,height:0,refreshTips:{start:"刷新中..",release:"松开刷新",end:"下拉刷新",fail:"刷新失败,请检查下网络再试试",success:"刷新成功"},onRefresh:null},A={handle:{},on:x,off:k,reverse:f,refresh:v,setHeight:m,fail:g,lock:u,unlock:d,destroy:b,widget:w,option:y,config:z,init:i},z=A.config=t.extend(!0,{},M,e.config.pullrefresh,n),H=!1,V=(new Date).getTime(),q=!1,U=!1,W=!1,_=/hp-tablet/gi.test(navigator.appVersion),Y="ontouchstart"in window&&!_,B=0,$=0,J=!1,X=!1,K={x1:0,x2:0,y1:0,y2:0,direction:""};i(z);var Q=!1,G=!1;return A},e}(bui||{},libs),function(e,t){return e.scroll=function(n){function i(n){var i=t.extend(!0,$,n);if(L=t(window),!i.id)return void e.hint("scroll id不能为空");N=e.obj(i.id),ne=i.page,ie=i.pageSize,$=B.config=i,G=!0,Z=!0,ee=!1,te=!1,j=N[0],R=N.children(U),M=N.children(W),D=N.children(_),M.css({position:"relative"}),H=e.loading({appendTo:D,width:20,height:20,autoClose:!1,text:i.scrollTips.start,display:"inline",autoTrigger:!1,mask:!1}),A=l,z=o,V?V.init({id:i.id,onRefresh:A,distance:i.distance,maxDistance:i.maxDistance,lastUpdated:i.lastUpdated,height:i.height,refreshTips:i.refreshTips,autoLoad:i.autoRefresh}):i.refresh&&i.onRefresh?(V=e.pullrefresh({id:i.id,onRefresh:A,distance:i.distance,stopHandle:i.stopHandle,maxDistance:i.maxDistance,lastUpdated:i.lastUpdated,header:i.header,footer:i.footer,height:i.height,refreshTips:i.refreshTips,autoLoad:i.autoRefresh}),V.lock(),K=!0):m(i.height);try{z&&z.call(B,ne,ie)}catch(r){e.showLog(r,"bui.scroll.init")}return ae||a(i),this}function a(t){N.on("scroll",e.unit.debounce(r,t.delayTime)),ae=!0}function r(e){var t=e.target,n=t.scrollTop||0;0==n?F.call(this,"scrolltop",e):t.scrollTop+t.clientHeight>=(t&&t.scrollHeight-$.endDistance)&&$.onLoad&&($.page=B.config.page=++ne,$.autoScroll&&z&&z.call(B,$.page,ie),F.call(this,"scrollbottom",e)),F.call(this,"scrollend",e),$.onScrolling&&$.onScrolling.call(this,e,B)}function o(e,t){return Q=!0,te=!1,Z&&!ee&&($.page=B.config.page=e,$.onLoad&&H&&H.start({text:$.scrollTips.start,onlyText:!1}),$.onLoad&&$.onLoad.call(B,e,t)),K&&$.refresh&&V&&V.unlock(),this}function l(){Q=!0,Z=!0,ee=!1,G=!0,te=!0,ne=J,ie=$.pageSize,re={},H&&H.start({text:$.scrollTips.end,onlyText:!0}),$.page=B.config.page=ne,F.call(this,"refresh",ne),$.onRefresh&&$.onRefresh.call(B,ne,ie)}function s(t,n,i){var i=0!=i;return n&&"array"==e["typeof"](n)?(n=n,Q=!1,oe&&clearTimeout(oe),void(oe=setTimeout(function(){var e=parseInt(N.height()),a=parseInt(N.find($.childrenMain)[0]&&N.find($.childrenMain)[0].scrollHeight);if(i)if(n&&n.length>ie-1){if(Z=!0,ee=!1,G=!1,H&&H.start({text:$.scrollTips.end,onlyText:!0}),a>=10&&a<e&&$.autoNext&&$.onLoad){var r=++ne;z&&z.call(B,r,ie)}F.call(this,"loadpage",n,ne)}else{Z=!1,ee=!0;var o=G&&n.length<1?$.scrollTips.nodata:$.scrollTips.last;H&&H.start({text:o,onlyText:!0}),F.call(this,"loadpage",n,ne),F.call(this,"lastpage",n,ne)}else Z=!1,ee=!0,H&&H.stop();return re[t]=n},10))):(e.showLog("scroll 控件的updatePage 第2个参数,必须是一个数组,如果是list控件,检测field的data映射是否准确","bui.scroll.updatePage"),void(n=[]))}function c(e){return V&&V.reverse(),e&&e.call(B,V),this}function u(){return te}function d(e){return re}function f(e){re={}}function h(e,t){return X=!0,K=!0,H.show({text:$.scrollTips.fail,onlyText:!0,callback:function(n){o(e,t)}}),V&&V.lock(),this}function p(t,n){var i,a,r=[];if(t&&n)for(i in re){var o=e.array.filter(t,re[i],n);if(o.length)for(a in o)r.push(o[a])}return r}function g(e,t){var e=e||0;P=N.find($.children).children($.handle);var n=N.height(),i=parseFloat(P.height()),a=j.scrollHeight,r=i*parseInt(e)-i;return a>n&&(j.scrollTop=r,F.call(this,"to",e),t&&t.call(B,parseInt(e))),this}function v(e){var n=0;return n="object"==typeof e?t(e)[0].offsetTop:"string"==typeof e&&e.indexOf("#")>-1?t(e)[0].offsetTop:parseInt(e)||0,j.scrollTop=n,this}function m(e){var t=N.parents(".bui-page"),n=(t.children("main"),j&&j.offsetTop||0),i=t.children($.header),a=i.length>1?i.eq(i.length-1).height():i.height(),r=t.children($.footer),o=r.length>1?r.eq(r.length-1).height():r.height(),l=window.viewport.height()-(a||0)-(o||0)-n,s=e?parseFloat(e):l;N.height(s)}function b(){return N.off("scroll",e.unit.debounce(r,$.delayTime)),F.call(this,"lock"),this}function w(t){return N.on("scroll",e.unit.debounce(r,$.delayTime)),F.call(this,"unlock"),this}function y(){return g(1),V&&V.refresh(),this}function x(e){var e=e||ne;return ne=e,z&&z.call(B,ne,ie),this}function k(){return z&&z.call(B,++ne,ie),this}function T(){return ne-- >0&&z&&z.call(B,ne--,ie),this}function S(e){var e=1==e;N&&(N.off("scroll"),e&&N.remove()),V&&V.destroy(e),H&&H.destroy(e),E("loadpage"),E("lastpage"),E("scrolltop"),E("scrollbottom"),E("scrollend")}function O(t){var n={pullrefresh:V,loading:H};return e.widget.call(n,t)}function C(t,n){return e.option.call(B,t,n)}function I(t,n){return e.on.apply(B,arguments),this}function E(t,n){return e.off.apply(B,arguments),this}function F(t){B.self=this==window||this==B?null:this,e.trigger.apply(B,arguments)}var N,j,L,P,R,D,M,A,z,H,V,q="."+e.prefix("list"),U="."+e.prefix("scroll-head"),W="."+e.prefix("scroll-main"),_="."+e.prefix("scroll-foot"),Y={id:"",childrenTop:U,childrenMain:W,childrenBottom:_,children:q,stopHandle:"",header:".bui-page header",footer:".bui-page footer",handle:"li",distance:100,endDistance:1,height:0,page:1,pageSize:10,lastUpdated:!0,autoRefresh:!1,autoNext:!0,autoScroll:!0,refresh:!0,delayTime:100,scrollTips:{start:"努力加载中..",end:"上拉加载更多",nodata:"没有更多内容",
last:"没有更多内容",fail:"点击重新加载"},refreshTips:{start:"刷新中..",release:"松开刷新",end:"下拉刷新",fail:"点击加载",success:"刷新成功"},onScrolling:null,onRefresh:null,onLoad:null},B={handle:{},on:I,off:E,reverse:c,updateCache:s,updatePage:s,getCache:d,clearCache:f,fail:h,filter:p,to:g,scrollTop:v,lock:b,unlock:w,refresh:y,load:x,nextPage:k,prevPage:T,setHeight:m,isRefresh:u,destroy:S,widget:O,option:C,config:$,init:i},$=B.config=t.extend(!0,{},Y,e.config.scroll,n),J=$.page,X=!1,K=!1,Q=!1,X=!1,G=!0,Z=!0,ee=!1,te=!1,ne=$.page,ie=$.pageSize,ae=!1,re={};i($);var oe;return B},e}(bui||{},libs),function(e,t){return e.list=function(n){function i(n){var i=t.extend(!0,S,n);b=e.obj(i.id),w=b.find(i.children),S=T.config=i,C=S.data;var o=0==S.refresh?null:l;if(S.url)return x?x.init({id:i.id,children:i.children,handle:i.handle,page:i.page,pageSize:i.pageSize,distance:i.distance,maxDistance:i.maxDistance,height:i.height,refresh:i.refresh,autoNext:i.autoNext,autoScroll:i.autoScroll,scrollTips:i.scrollTips,refreshTips:i.refreshTips,lastUpdated:i.lastUpdated,onRefresh:o,onLoad:r}):x=bui.scroll({id:i.id,children:i.children,handle:i.handle,header:i.header,footer:i.footer,page:i.page,pageSize:i.pageSize,distance:i.distance,stopHandle:i.stopHandle,maxDistance:i.maxDistance,height:i.height,refresh:i.refresh,autoNext:i.autoNext,autoScroll:i.autoScroll,scrollTips:i.scrollTips,refreshTips:i.refreshTips,lastUpdated:i.lastUpdated,onRefresh:o,onLoad:r}),I||a(i),this}function a(e){return e.callback&&b.on("click",e.handle,function(t){e.callback.call(this,t,T,x)}),I=!0,this}function r(i,a,r){function l(e,t,n){var i=(e-1)*t;return i+t>=n.length?n.slice(i,n.length):n.slice(i,i+t)}function s(e,t,a){var r,s;r="string"==typeof e?e&&JSON.parse(e)||{}:e||{},s=S&&S.field&&""==S.field.data?r||[]:o(S.field.data,r),S.localData&&(s=l(i,S.pageSize,s));var d=n.template&&n.template(s,r,i)||"";d&&w&&w[u](d);var f=x&&x.isRefresh()||!1;m.call(c,"success",e,i,a);try{f?(S.onRefresh&&S.onRefresh.call(T,x,r,a),m.call(c,"refresh",e,i,a),S.refresh&&x.reverse()):S.onLoad&&S.onLoad.call(T,x,r,a),S.localData?c&&c.updatePage(i,s):x&&x.updatePage(i,s)}catch(h){}}var c=this,u=r||S.commandLoad,d=[],f=[];return C=t.extend(!0,{},E,S.data,C),S&&S.field&&S.field.page&&S.field.page.indexOf(".")>-1?(d=S.field.page.split("."),C[d[0]]=C[d[0]]||{},C[d[0]][d[1]]=i):C[S.field.page]=i,S&&S.field&&S.field.size&&S.field.size.indexOf(".")>-1?(f=S.field.size.split("."),C[f[0]]=C[f[0]]||{},C[f[0]][f[1]]=a):C[S.field.size]=a,S.page=T.config.page=i,S.data=C,S.localData?void s(S.localData,200):(y=e.ajax(S).done(s).fail(function(e,t,n){m.call(c,"fail",e,i,n),S.onFail&&S.onFail.call(T,t,x,i,n),x&&x.fail(i,a,e)}),this)}function o(e,t){function n(e){var t,i=e[a[r]],o=a[r+1];return t="string"==typeof i?JSON.parse(i):i||[],o&&o in t?(r++,n(t)):(r=0,t)}var i,a=[];e&&e.indexOf(".")>-1?a=e.split("."):a.push(e);var r=0;return i=n(t)}function l(){var e=O,t=S.pageSize;return m.call(this,"refreshbefore"),r(e,t,S.commandRefresh),this}function s(){return m.call(this,"refreshbefore"),x.refresh(),this}function c(n,i){var a;if("string"==typeof i)try{a=JSON.parse(i)}catch(r){return void e.showLog("data 参数必须为对象","bui.list.modifyData")}else a=i;return C=t.extend(!0,{},E,a)}function u(){w.html("")}function d(e){var e=1==e;b&&(b.off("click.bui"),e&&b.remove(),b=null),v("refreshbefore"),v("refresh"),v("success"),v("fail"),x&&x.destroy(e)}function f(t){var n={scroll:x,ajax:y};return e.widget.call(n,t)}function h(t,n){return"data"==t&&"undefined"!=typeof n?c(t,n):e.option.call(T,t,n)}function p(e){return S=T.config=t.extend(!0,{},T.config,e),C=S.data,this}function g(t,n){return e.on.apply(T,arguments),this}function v(t,n){return e.off.apply(T,arguments),this}function m(t){T.self=this==window||this==T?null:this,e.trigger.apply(T,arguments)}var b,w,y,x,k={id:"",url:"",data:{},method:"GET",dataType:"json",headers:{},contentType:"",timeout:2e4,field:{page:"page",size:"pageSize",data:""},scrollTips:{start:"努力加载中..",end:"上拉加载更多",nodata:"没有更多内容",last:"没有更多内容",fail:"点击重新加载"},refreshTips:{start:"刷新中..",release:"松开刷新",end:"下拉刷新",fail:"点击加载",success:"刷新成功"},lastUpdated:!1,page:1,pageSize:10,autoNext:!0,autoScroll:!0,"native":!0,refresh:!0,stopHandle:"",children:".bui-list",handle:".bui-btn",header:".bui-page header",footer:".bui-page footer",height:0,commandRefresh:"html",commandLoad:"append",localData:null,template:null,onRefresh:null,onLoad:null,onFail:null,callback:null},T={handle:{},on:g,off:v,empty:u,refresh:s,modify:p,destroy:d,widget:f,option:h,config:S,init:i},S=T.config=t.extend(!0,{},k,e.config.list,n),O=S.page,C={},I=!1,E=S.data;return i(S),T},e}(bui||{},libs),function(e,t){return e.searchbar=function(n){function i(n){var i=t.extend(!0,b,n);return f=e.obj(i.id),b=m.config=i,p=f.find("input"),f.find(i.handleRemove).length>0?g:p.after('<i class="'+i.handleRemove.substr(1)+'"></i>'),g=f.find(i.handleRemove),g.hide(),w||a(i),this}function a(n){return f.on("click.bui",n.handle,function(e){document.activeElement.blur();var t=p.val();h=t,d.call(this,"search",t),n.callback&&n.callback.call(this,m,t)}),f.on("click.bui",n.handleRemove,function(){document.activeElement.blur(),p.val("");var e=p.val();h=e,t(this).hide(),d.call(this,"remove",e),n.onRemove&&n.onRemove.call(this,m,e)}),f.on("input","input",e.unit.debounce(function(){var e=p.val();h=e,e?g.show():g.hide(),d.call(this,"input",e),n.onInput&&n.onInput.call(this,m,e)},n.delayTime)),w=!0,this}function r(e){return e=e||h,d.call(this,"search",e),b.callback&&b.callback.call(this,m,e),this}function o(e){var e=1==e;f&&(f.off(),e&&f.remove()),u("search"),u("remove"),u("input")}function l(t){var n={};return e.widget.call(n,t)}function s(t,n){return e.option.call(m,t,n)}function c(t,n){return e.on.apply(m,arguments),this}function u(t,n){return e.off.apply(m,arguments),this}function d(t){m.self=this==window||this==m?null:this,e.trigger.apply(m,arguments)}var f,h,p,g,v={id:"",handle:".icon-search,.btn-search",handleRemove:".icon-remove",delayTime:400,onInput:null,onRemove:null,callback:null},m={handle:{},on:c,off:u,search:r,destroy:o,widget:l,option:s,config:b,init:i},b=m.config=t.extend(!0,{},v,e.config.searchbar,n),w=!1;return i(b),m},e}(bui||{},libs),function(e,t){"use strict";return e.select=function(n){function i(n){var i=t.extend(!0,R,n);if(i.appendTo=i.appendTo||(e.hasRouter?router.currentPage()||"body":"body"),H=[],V=[],D=i.id?e.obj(i.id).attr("id"):D,R=P.config=i,i.data.length)var r=c(i.data);if(i.popup)if(j)j.close(),I.find(".bui-dialog-main").html(r);else{if(i.id)I=e.obj(i.id);else{var s=l();t(i.appendTo).append(s),I=e.obj(D),I.find(".bui-dialog-main").html(r)}j=e.dialog({id:D,effect:i.effect,mask:i.mask,position:i.position,autoClose:!1,height:i.height,width:i.width,zoom:!1,fullscreen:i.fullscreen,onMask:function(e){d()}})}else{if(!i.id)return void e.hint("select id 必须有");I=e.obj(i.id),i.data.length&&I.html(r)}return N=I.find(i.handle),i.data.length<1&&a(),q||o(i),i.value&&f(i.value),this}function a(e){var n=[],i=[];return N.find("input").each(function(a,o){var l=t(this);if(!(l.length<1)){var s=l.val(),c=l.attr("text"),u=l.is(":checked");R.data[a]={},R.data[a][A]=c,R.data[a][z]=s,n.push(s),i.push(c),u&&r({name:c,value:s}),e&&e.call(this,a,o)}}),{value:n,text:i}}function r(e){switch(R.type){case"radio":H=[],V=[],H.push(e.name),V.push(e.value);break;case"select":H=[],V=[],H.push(e.name),V.push(e.value);break;case"checkbox":H.push(e.name),V.push(e.value)}}function o(n){n.trigger&&(C=e.obj(n.trigger),F=C.find(n.triggerChildren).length?C.find(n.triggerChildren):C,E=n.placeholder||t.trim(F.html()),n.placeholder&&F.html(n.placeholder),C.on("click.bui",function(e){t(this).hasClass("disabled")||u()}));var i=function(i){var a=t(i.target[i.target.length-1]),o=a.val(),l=a.attr("text"),s="INPUT"!==i.srcElement.nodeName?a.is(":checked"):!a.is(":checked");s?s&&(n.toggle||"checkbox"==n.type)&&(O.call(a,"uncheck",i),e.array.remove(l,H),e.array.remove(o,V),n.onChange&&n.onChange.call(a,i)):(O.call(a,"check",i),r({name:l,value:o}),n.onChange&&n.onChange.call(a,i)),f(V.join(",")||""),h(H.join(",")||"")},a=function(e){var a=null;e.srcElement=e.originalEvent&&e.originalEvent.srcElement||e.srcElement,a=t(this).find("input"),e.target=[a[0]],i.call(a,e),n.popup&&n.autoClose&&d(),O.call(a,"select",e),e.stopPropagation()};I.on("click",n.handle,a);var o=function(e){n.callback&&n.callback.call(this,P),e.stopPropagation()};I.on("click.bui",n.callbackHandle,o),q=!0}function l(e){var n="";return R.popup&&(n+='<div id="'+D+'" class="bui-dialog bui-dialog-select">',R.title&&(n+='<div class="bui-dialog-head">'+R.title+"</div>"),n+='  <div class="bui-dialog-main">'),R.popup&&(n+="  </div>",R.buttons.length>0&&(n+='    <div class="bui-dialog-foot bui-box">',t.each(R.buttons,function(e,t){n+='        <div class="span1">',n+='             <div class="bui-btn '+(t.className||"")+'" value="'+(t.value||"")+'">'+(t.name||t)+"</div>",n+="        </div>"}),n+="    </div>"),n+="</div>"),n}function s(e){var e=e||{},t=document.createElement("input");for(var n in e)"string"!=typeof e[n]&&"number"!=typeof e[n]||t.setAttribute(n,e[n]);switch(R.type){case"select":t.setAttribute("type","radio"),t.setAttribute("class",R.className||"bui-choose");break;case"radio":t.setAttribute("type","radio"),t.setAttribute("class",R.className||"bui-checkbox");break;case"checkbox":t.setAttribute("type","checkbox"),t.setAttribute("class",R.className||"bui-checkbox");break;default:t.setAttribute("type","checkbox")}return t}function c(n){var i=M,a="",r="",o=R.template&&R.template(n,R);return o?r=o:t.each(n,function(n,a){var o="string"==typeof a?a:a[A]||a||"",l=a&&a[z]?a[z]||a:n,c={name:i,value:l,text:o};a=a&&"object"===e["typeof"](a)?a:{};var u=t.extend(!0,{},a,c),d=s(u).outerHTML;r+='    <div class="bui-btn bui-box bui-btn-line">',"left"==R.direction&&(r+=d),"center"==R.direction?(r+='        <div class="span1" align="center">'+o+"</div>",r+=d):r+='        <div class="span1">'+o+"</div>","right"==R.direction&&(r+=d),r+="    </div>"}),a+='    <div class="bui-list">',a+=r,a+="    </div>"}function u(e){return O.call(this,"showbefore"),R.popup&&j?!j.isOpen()&&j.open(function(){e&&e.call(P),O.call(this,"show")}):(I.css("display","block"),e&&e.call(P),O.call(this,"show")),this}function d(e){return O.call(this,"hidebefore"),R.popup&&j?j.isOpen()&&j.close(function(){e&&e.call(P),O.call(this,"hide")}):(I.css("display","none"),e&&e.call(P),O.call(this,"hide")),this}function f(t){if("undefined"==typeof t)return V.join(",");N=I.find(R.handle);var n=[],i=[],a=[],r=[];String(t).indexOf(",")>-1?r=t.split(","):t&&r.push(t),R.data.forEach(function(t,o){var l=t&&"object"===e["typeof"](t)&&t.hasOwnProperty(A)?String(t[A]):String(t),s=t&&"object"===e["typeof"](t)&&t.hasOwnProperty(z)?String(t[z]):String(o),c=N.eq(o).find("input");if(""==t)return c.prop("checked",!1),H=[],void(V=[]);var u=e.array.index(l,r),d=e.array.index(s,r);d>-1||u>-1?("radio"!=R.type&&"select"!=R.type||(i=[],a=[]),i.push(l),a.push(s),n[o]=c,c.prop("checked",!0)):c.prop("checked",!1)}),H=i.map(function(e,t){return e}),V=a.map(function(e,t){return e}),O.call(n[n.length-1],"change",{target:n}),C&&R.change&&C.attr("value",a.join(",")),I.attr("value",a.join(","))}function h(e){return"undefined"==typeof e?H.join(","):(C&&R.change&&(C.attr("text",e),F.html(e||E)),I.attr("text",e),this)}function p(e){var t=[];return String(e).indexOf(",")>-1?t=e.split(","):t.push(parseInt(e)),H=[],V=[],t.forEach(function(e,t){R.data[e]&&H.push(R.data[e][A]||R.data[e]),R.data[e]&&V.push(R.data[e][z]||t)}),"checkbox"==R.type?(h(H.join(",")),f(V.join(","))):(h(H[0]),f(V[0])),this}function g(){if("checkbox"==R.type){var e=R.data.map(function(e,t){return t});p(e.join(","))}else p(0);return this}function v(){return H=[],V=[],N.find("input").prop("checked",null),f(""),h(""),O.call(this,"reset"),this}function m(){if("checkbox"==R.type){var t=H.map(function(e,t){return e});V.map(function(e,t){return e});H=[],V=[],R.data.forEach(function(n,i){var a=N.eq(i).find("input"),r=e.array.index(n[A],t);r>-1?a.prop("checked",null):(a.prop("checked",!0),H.push(n[A]),V.push(n[z]))}),f(V.join(",")||""),h(H.join(",")||"")}else v();return this}function b(){var e=C;return e&&e.addClass("disabled"),this}function w(){var e=C;return e&&e.removeClass("disabled"),this}function y(e){var e=1==e;return I&&(I.off(),e&&I.remove()),C&&(C.off("click.bui"),e&&C.remove()),j&&j.destroy(e),S("show"),S("hide"),S("change"),S("select"),S("check"),S("uncheck"),this}function x(t){var n={dialog:j||{}};return e.widget.call(n,t)}function k(t,n){return e.option.call(P,t,n)}function T(t,n){return e.on.apply(P,arguments),this}function S(t,n){return e.off.apply(P,arguments),this}function O(t){P.self=this==window||this==P?null:this,e.trigger.apply(P,arguments)}var C,I,E,F,N,j,L={id:"",trigger:"",triggerChildren:".span1",handle:".bui-list .bui-btn",className:"",name:"",appendTo:"",data:[],popup:!0,title:"",autoClose:!1,placeholder:"",field:{name:"name",value:"value"},height:0,width:0,mask:!0,change:!0,toggle:!1,effect:"fadeInUp",type:"radio",direction:"left",position:"bottom",fullscreen:!1,value:"",buttons:[],onChange:null,callbackHandle:".bui-dialog-foot .bui-btn",callback:null},P={handle:{},on:T,off:S,value:f,active:p,disabled:b,enabled:w,text:h,show:u,hide:d,selectAll:g,selectNone:v,unselect:m,destroy:y,widget:x,option:k,config:R,init:i},R=P.config=t.extend(!1,{},L,e.config.select,n),D=e.guid(),M=R.name||e.guid(),A=R.field.name,z=R.field.value,H=[],V=[],q=!1;return i(R),P},e}(bui||{},libs),function(e){"use strict";return e.dropdown=function(t){function n(t){var n=$.extend(!0,I,t);if(!n.id)return void e.showLog("dropdown id不能为空","bui.dropdown.init");w=e.obj(n.id),I=C.config=n,y=w.children(n.handle),S=n.target?w.find(n.target):y.next(),k=n.relative,x=w.attr("position")||n.position;var r=w[0]&&w[0].offsetLeft>=document.documentElement.clientWidth?0:w[0]&&w[0].offsetLeft,l=n.width?"auto":-r+"px",s={bottom:{menuPosition:"bui-menu-bottom",arrowPosition:"bui-arrow-up",left:l},top:{menuPosition:"bui-menu-top",arrowPosition:"bui-arrow-down",left:l},left:{menuPosition:"bui-menu-left",arrowPosition:"bui-arrow-right",left:"auto"},right:{menuPosition:"bui-menu-right",arrowPosition:"bui-arrow-left",left:"100%"}};T=n.width>0?n.width:k?E:n.width,parseFloat(T)>0&&S.width(T);var c=n.showArrow?s[x].arrowPosition+" "+s[x].menuPosition:s[x].menuPosition;a(c,s[x].left);var u=S.find(n.targetHandle+".active").eq(0),d=u.index();return d>=0&&o(d),F||i(n),this}function i(e){var t=function(e){if(!$(this).hasClass("disabled")){var t=$(this).hasClass("active");u(),t?s():c(),e.stopPropagation()}},n=function(t){var n=$(this).attr("value")||"",i=$.trim($(this).text()),a=void 0!=w.attr("change")?w.attr("change"):e.change;e.showActive&&$(this).addClass("active").siblings().removeClass("active"),r.call(this,n),1==a&&l.call(this,i),I.autoClose&&s(),e.callback&&e.callback.call(this,t),I.stopPropagation&&t.stopPropagation()};y.on("click.bui",t),w.on("click.bui",e.targetHandle,n);var i=function(e){u(),e.stopPropagation()};I.autoClose&&$("body").off("click.bui").on("click.bui",":not(.bui-dropdown)",i),F=!0}function a(e,t){S.addClass(e),k&&S.css({left:t})}function r(e){if("undefined"==typeof e){var t=N||y.attr("value");return t}N=e,y.attr("value",e),I.change||b.call(this,"change",{target:y[0]})}function o(e){e=parseInt(e);var t=S.find(I.targetHandle).eq(e);if(t.length>0){var n=$.trim(t.text()),i=t.attr("value")||"";l(n),r(i),I.showActive&&t.addClass("active").siblings().removeClass("active")}return this}function l(e){if("undefined"==typeof e){var t=$.trim(y.text());return t}var n=y.children(I.handleChildren);return n?n.text(e):y.text(e),b.call(this,"change",{target:y[0]}),this}function s(){return y.removeClass("active"),S.css("display","none"),b.call(this,"hide",{target:y[0]}),this}function c(){return y.addClass("active"),S.css("display","block"),b.call(this,"show",{target:y[0]}),this}function u(){return $(".bui-dropdown > .bui-btn").removeClass("active"),$(".bui-dropdown > .bui-list").css("display","none"),b.call(this,"hide",{target:y[0]}),this}function d(){var e=y;return e&&e.addClass("disabled"),this}function f(){var e=y;return e&&e.removeClass("disabled"),this}function h(e){var e=1==e;w&&(w.off("click.bui"),e&&w.remove()),y&&(y.off("click.bui"),e&&y.remove()),$("body").off("click.bui"),m("show"),m("hide")}function p(t){var n={};return e.widget.call(n,t)}function g(t,n){return e.option.call(C,t,n)}function v(t,n){return e.on.apply(C,arguments),this}function m(t,n){return e.off.apply(C,arguments),this}function b(t){C.self=this==window||this==C?null:this,e.trigger.apply(C,arguments)}var w,y,x,k,T,S,O={id:"",handle:".bui-btn",handleChildren:".span1",target:"",targetHandle:".bui-btn",position:"bottom",showArrow:!1,showActive:!0,autoClose:!0,stopPropagation:!1,width:0,relative:!0,change:!0,callback:null},C={handle:{},on:v,off:m,active:o,disabled:d,enabled:f,value:r,text:l,hide:s,show:c,hideAll:u,destroy:h,widget:p,option:g,config:I,init:n},I=C.config=$.extend(!0,{},O,e.config.dropdown,t),E=document.documentElement.clientWidth,F=!1,N="";return n(I),C},e}(bui||{}),function(e,t){"use strict";return e.accordion=function(n){function i(n){var i=t.extend(!0,I,n);return x=window.viewport.width()||document.documentElement.clientWidth,k=window.viewport.height()||document.documentElement.clientHeight,E=i.id.indexOf(".")>-1?t(i.id):e.obj(i.id)||t("."+e.prefix("accordion")),I=C.config=i,T=i.handle.indexOf("#")>-1?e.obj(i.handle):E.children(i.handle),S=i.target.indexOf("#")>-1?e.obj(i.target):E.children(i.target),a(i),F||r(i),this}function a(e){T.removeClass("active"),S.css("display","none"),parseFloat(e.targetHeight)>0&&S.height(e.targetHeight),parseFloat(e.height)>0&&E.height(e.height)}function r(e){var n=function(n){t(this).hasClass("disabled")||t(this).attr("href")||(s.call(this,e),e.callback&&e.callback.call(this,C),!t(this).attr("href")&&n.stopPropagation())};e.handle.indexOf("#")>-1?T.on("click.bui",n):E.off("click.bui").on("click.bui",e.handle,n),F=!0}function o(e){var t;return t="number"==typeof e?T.eq(e):T,t&&t.addClass("disabled"),this}function l(e){var t;return t="number"==typeof e?T.eq(e):T,t&&t.removeClass("disabled"),this}function s(n){var i=t(this),a=i.hasClass("active"),r=(T.index(this),n.target.indexOf("#")>-1?e.obj(n.target):i.next(n.target));n.single?a?(i.removeClass("active"),r.css("display","none"),y.call(C,"hide",{target:i})):(p(),i.addClass("active"),r.css("display","block"),y.call(C,"show",{target:i})):a?(i.removeClass("active"),r.css("display","none"),y.call(C,"hide",{target:i})):(i.addClass("active"),r.css("display","block"),y.call(C,"show",{target:i}))}function c(e){var e=Number(e)||0,t=T.eq(e).length?T.eq(e):T,n=S.eq(e).length?S.eq(e):t.next(I.target);return t.addClass("active"),n.css("display","block"),y.call(this,"show",{target:T[e]}),this}function u(e){var e=Number(e)||0,t=T.eq(e).length?T.eq(e):T,n=S.eq(e).length?S.eq(e):t.next(I.target);return t.removeClass("active"),n.css("display","none"),y.call(this,"hide",{target:T[e]}),this}function d(){return E.length>1?E.each(function(e,t){f(0,t)}):f(0),y.call(this,"show",{target:T[0]}),this}function f(e,n){var e=e||0,i=n?t(n):E;i.children(I.handle).eq(e).addClass("active").next(I.target).css("display","block")}function h(){return T.each(function(e,n){t(n).addClass("active").next(I.target).css("display","block")}),y.call(this,"showall",{target:T}),this}function p(){return T.each(function(e,n){t(n).removeClass("active").next(I.target).css("display","none")}),y.call(this,"hideall",{target:T}),this}function g(e){var e=1==e;E&&(E.off("click.bui"),e&&E.remove()),w("hide"),w("show")}function v(t){var n={};return e.widget.call(n,t)}function m(t,n){return e.option.call(C,t,n)}function b(t,n){return e.on.apply(C,arguments),this}function w(t,n){return e.off.apply(C,arguments),this}function y(t){C.self=this==window||this==C?null:this,e.trigger.apply(C,arguments)}var x,k,T,S,O={id:"",handle:"dt",target:"dd",height:0,targetHeight:0,single:!1,callback:null},C={handle:{},on:b,off:w,showFirst:d,showAll:h,hideAll:p,disabled:o,enabled:l,destroy:g,show:c,hide:u,widget:v,option:m,config:I,init:i},I=C.config=t.extend(!0,{},O,e.config.accordion,n),E=null,F=!1;return i(I),C},e}(bui||{},libs),function(e,t){"use strict";return e.rating=function(n){function i(n){var i=t.extend(!0,C,n);return i.id?(w=e.obj(i.id),C=O.config=i,y=i.fullClassName,x=i.halfClassName,l(i),I||o(i),this):void e.hint("rating id不能为空")}function a(t){var n=(e.guid(),""),i=0,a=t.stars;for(i=0;i<a;i++)n+='<div class="bui-rating-cell" ></div>';return n}function r(e){var t,n="",e=String(e)||String(k),i=0,a=C.stars,r=[];r=e.indexOf(".")>-1?e.split("."):[e,0];var o=parseInt(r[0]);for(t=r[1]/10*100+"%",i=0;i<a;i++)i<o&&(n+='<div class="bui-rating-cell" ><div class="bui-rating-cell-full" style="width:100%;">&nbsp;</div></div>'),i==o&&(n+='<div class="bui-rating-cell" ><div class="bui-rating-cell-full" style="width:'+t+';">&nbsp;</div></div>'),i>o&&(n+='<div class="bui-rating-cell" ><div class="bui-rating-cell-full" style="width:0;">&nbsp;</div></div>');return n}function o(e){if(!e.disabled){var n=String(e.value).indexOf(".")>-1?1:0;w.on("click.bui",e.handle,function(i){var a=t(this).index(),r=0;if(e.half){r=n%2==0?a+.5:a+1}else r=a+1;s(r),c(r),n++,e.callback&&e.callback.call(this,O),i.stopPropagation()})}I=!0}function l(e){if(e.render){var t=a(e);w.html(t),T=w.children(e.handle)}else T=w.children(e.handle);c(e.value)}function s(e){var n=[];e=String(e),C.half&&e.indexOf(".")>-1?n=e.split("."):n.push(e),T.removeClass(y).removeClass(x),T.each(function(e,i){1==n.length&&e<n[0]?t(i).addClass(y):2==n.length&&(e<n[0]&&t(i).addClass(y),e==n[0]&&t(i).addClass(x))})}function c(e){return e?(w.attr("value",e),s(e),k=e,b.call(this,"change",e)):k=w.attr("value"),k}function u(e){var t=r(e);w.attr("value",e).html(t),k=e}function d(e){var e=0!=e;return e?(w.off("click.bui",C.handle),b.call(this,"disabled")):f(),this}function f(e){return C.disabled=!1,o(),b.call(this,"undisabled"),this}function h(e){var e=1==e;w&&(w.off("click.bui"),e&&w.remove()),m("change")}function p(t){var n={};return e.widget.call(n,t)}function g(t,n){return e.option.call(O,t,n)}function v(t,n){return e.on.apply(O,arguments),this}function m(t,n){return e.off.apply(O,arguments),this}function b(t){O.self=this==window||this==O?null:this,e.trigger.apply(O,arguments)}var w,y,x,k,T,S={id:"",handle:".bui-rating-cell",fullClassName:"bui-rating-cell-full",halfClassName:"bui-rating-cell-half",half:!1,stars:5,value:0,disabled:!1,render:!0,callback:null},O={handle:{},on:v,off:m,disabled:d,show:u,value:c,destroy:h,widget:p,option:g,config:C,init:i},C=O.config=t.extend(!0,{},S,e.config.rating,n),I=!1;return i(C),O},e}(bui||{},libs),function(e){"use strict";return e.actionsheet=function(t){function n(t){var n=$.extend(!0,k,t);n.appendTo=n.appendTo||(e.hasRouter?router.currentPage()||"body":"body"),m=e.obj(n.trigger),k=x.config=n,b=e.guid();var o=a(n.buttons);return $(n.appendTo).append(o),g=e.dialog({id:b,position:n.position,mask:n.mask,opacity:n.opacity,onMask:function(e){r()}}),w=g.selector(),v=w.find(n.handle),T||i(),this}function i(){var e=function(e){e.target=this,k.callback&&k.callback.call(this,e,x),p.call(this,"click",e)},t=function(e){$(this).hasClass("disabled")||o.call(this)};w&&w.on("click.bui",k.handle,e),m&&m.on("click.bui",t),T=!0}function a(e){var t=parseFloat(k.width),n=t>0?"width:"+t+"px;left:50%;right:0;margin-left:-"+t/2+"px;":"",i="";return e&&e.length&&(i+='<div id="'+b+'" class="bui-actionsheet" style="'+n+'">',i+='    <ul class="bui-list round">',$.each(e,function(e,t){i+='        <li class="bui-btn '+(t.className||"")+'" value="'+(t.value||"")+'">'+(t.name||"")+"</li>"}),i+="    </ul>",k.cancelText?i+='    <div class="bui-btn round" value="cancel">'+k.cancelText+"</div>":"",i+="</div>"),i}function r(e){var t=this;return p.call(t,"hidebefore",{target:w[0]}),g.isOpen()&&g.close(function(){e&&e.call(x),p.call(t,"hide",{target:w[0]})}),this}function o(e){var t=this;return p.call(t,"showbefore",{target:w[0]}),!g.isOpen()&&g.open(function(){e&&e.call(x),p.call(t,"show",{target:w[0]})}),this}function l(e){var t=m;return t&&t.addClass("disabled"),this}function s(){var e=m;return e&&e.removeClass("disabled"),this}function c(e){var e=1==e;m&&m.off("click.bui"),h("hide"),h("show"),g&&g.destroy(e)}function u(t){var n={dialog:g};return e.widget.call(n,t)}function d(t,n){return e.option.call(x,t,n)}function f(t,n){return e.on.apply(x,arguments),this}function h(t,n){return e.off.apply(x,arguments),this}function p(t){x.self=this==window||this==x?null:this,e.trigger.apply(x,arguments)}var g,v,m,b,w,y={appendTo:"",trigger:"",handle:".bui-btn",position:"bottom",width:0,mask:!0,opacity:.6,buttons:[],cancelText:"取消",callback:null},x={handle:{},on:f,off:h,disabled:l,enabled:s,hide:r,show:o,destroy:c,widget:u,option:d,config:k,init:n},k=x.config=$.extend(!1,{},y,e.config.actionsheet,t),T=!1;return n(k),x},e}(bui||{}),function(e,t){return e.number=function(n){function i(n){var i=t.extend(!0,E,n);return N=!1,w=i.max,y=i.min,x=i.step,O=i.id?e.obj(i.id):t(".bui-number"),E=I.config=i,i.render&&r(i),k=O.children(i.prev),T=O.children(i.next),S=O.children(i.input),F||o(i),i.disabled&&S.attr("disabled","disabled"),s(i.value),this}function a(e){var t="";return t+='    <div class="bui-number-prev"><i class="icon-minus"></i></div>',t+='    <input type="text" value="'+e.value+'"/>',t+='    <div class="bui-number-next"><i class="icon-plus"></i></div>'}function r(e){var t=a(e);return O.html(t),this}function o(n){return O.off("input",n.input).on("input",n.input,e.unit.debounce(function(e){var i=isNaN(parseInt(t(this).val()))?0:parseInt(t(this).val());/^[0-9]*$/i.test(i)&&s.call(this,i),n.onInput&&n.onInput.call(this,i),e.stopPropagation()},400)),O.off("click.bui",n.prev).on("click.bui",n.prev,function(e){var i=t(this).parent().children(E.input);d.call(i,e),n.callback&&n.callback.call(i,e,I),e.preventDefault(),e.stopPropagation()}),O.off("click.bui",n.next).on("click.bui",n.next,function(e){var i=t(this).parent().children(E.input);f.call(i,e),n.callback&&n.callback.call(i,e,I),e.preventDefault(),e.stopPropagation()}),F=!0,this}function l(){var e=this==I?S:t(this),n=parseInt(e.val());return n}function s(e){var n=this==I?S:t(this);b.call(n,"change",e);var i=e||0;return i>w&&(i=w),i<y&&(i=y),i&&i>=y&&i<=w&&(i=i),n.val(parseInt(i)),this}function c(e){var t=0;return e?(s.call(this,e),t=e):t=l.call(this),t}function u(e){var n=this==I?S:t(this),e=0!=e;return e?n.attr("disabled","disabled"):n.removeAttr("disabled"),this}function d(){var e=this==I?S:t(this),n=e.val(),i=parseInt(n),a=i-=x;return s.call(this,a),b.call(e,"prev",a),this}function f(){var e=this==I?S:t(this),n=e.val(),i=parseInt(n),a=i+=x;return s.call(this,a),b.call(e,"next",a),this}function h(e){var e=1==e;O&&(O.off("click.bui"),O.off("input"),e&&O.remove()),m("prev"),m("next"),m("change"),N=!0}function p(t){var n={};return e.widget.call(n,t)}function g(t,n){return e.option.call(I,t,n)}function v(t,n){return e.on.apply(I,arguments),this}function m(t,n){return e.off.apply(I,arguments),this}function b(t){I.self=this==window||this==I?null:this,e.trigger.apply(I,arguments)}var w,y,x,k,T,S,O,C={id:null,min:0,max:100,step:1,value:0,disabled:!1,render:!0,tips:!1,prev:".bui-number-prev",input:"input",next:".bui-number-next",onInput:null,callback:null},I={handle:{},on:v,off:m,disabled:u,value:c,prev:d,next:f,destroy:h,widget:p,option:g,config:E,init:i},E=I.config=t.extend(!0,{},C,e.config.number,n),F=!1,N=!1;return i(E),I},e}(bui||{},libs),function(e,t){"use strict";return e.stepbar=function(n){function i(n){var i=t.extend(!0,w,n);if(!i.id)return void e.hint("stepbar id不能为空");g=e.obj(i.id),w=b.config=i;var o=a(i.data);return t(i.id).html(o),v=g.children(),y||r(i),this}function a(e){var n="";return t.each(e,function(e,t){n+='<div class="bui-stepbar-cell">',n+='    <span class="bui-stepbar-dot"></span>',n+='    <div class="bui-stepbar-text">',t.title&&(n+="        <h3>"+t.title+"</h3>"),t.subtitle&&(n+='        <p class="bui-stepbar-time">'+t.subtitle+"</p>"),t.content&&(n+='        <p class="bui-stepbar-desc">'+t.content+"</p>"),n+="    </div>",n+="</div>"}),n}function r(e){var n=function(n){if(e.click){var i=t(this).index();o(i)}e.callback&&e.callback.call(this,n,b)};return g.on("click.bui",e.handle,n),y=!0,this}function o(e){if("number"==typeof e)return e=e>=v.length-1?v.length-1:e<0?0:e,v.each(function(n,i){n<e&&t(i).removeClass("active").addClass("visited"),n==e&&t(i).removeClass("visited").addClass("active"),n>e&&t(i).removeClass("visited active")}),p.call(this,"change",e),e;var e=g.children(".active").index();return e}function l(){var e=o()+1;return p.call(this,"next",e),o(e)}function s(){var e=o()-1;return p.call(this,"prev",e),o(e)}function c(e){var e=1==e;g&&(g.off("click.bui"),e&&g.remove()),h("next"),h("prev"),h("change")}function u(t){var n={};return e.widget.call(n,t)}function d(t,n){return e.option.call(b,t,n)}function f(t,n){return e.on.apply(b,arguments),this}function h(t,n){return e.off.apply(b,arguments),this}function p(t){b.self=this==window||this==b?null:this,e.trigger.apply(b,arguments)}var g,v,m={id:null,handle:".bui-stepbar-cell",click:!0,data:[],callback:null},b={handle:{},on:f,off:h,value:o,next:l,prev:s,destroy:c,widget:u,option:d,config:w,init:i},w=b.config=t.extend(!0,{},m,e.config.stepbar,n),y=!1;return i(w),b},e}(bui||{},libs);var Picker=function(e){function t(e){return window.cancelAnimationFrame?window.cancelAnimationFrame(e):window.webkitCancelAnimationFrame?window.webkitCancelAnimationFrame(e):window.mozCancelAnimationFrame?window.mozCancelAnimationFrame(e):window.clearTimeout(e)}function n(e,t){for(var n=0;n<e.length;n++){var i=e[n].style;i.webkitTransform=i.MsTransform=i.msTransform=i.MozTransform=i.OTransform=i.transform=t}return e}function i(e,t){"string"!=typeof t&&(t+="ms");for(var n=0;n<e.length;n++){var i=e[n].style;i.webkitTransitionDuration=i.MsTransitionDuration=i.msTransitionDuration=i.MozTransitionDuration=i.OTransitionDuration=i.transitionDuration=t}return e}function a(e,t){var n,i,a,r;return"undefined"==typeof t&&(t="x"),a=window.getComputedStyle(e,null),window.WebKitCSSMatrix?(i=a.transform||a.webkitTransform,i.split(",").length>6&&(i=i.split(", ").map(function(e){return e.replace(",",".")}).join(", ")),r=new WebKitCSSMatrix("none"===i?"":i)):(r=a.MozTransform||a.OTransform||a.MsTransform||a.msTransform||a.transform||a.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),n=r.toString().split(",")),"x"===t&&(i=window.WebKitCSSMatrix?r.m41:16===n.length?parseFloat(n[12]):parseFloat(n[4])),"y"===t&&(i=window.WebKitCSSMatrix?r.m42:16===n.length?parseFloat(n[13]):parseFloat(n[5])),i||0}var r=this,o={updateValuesOnTouchmove:!1,rotateEffect:!1,momentumRatio:7,freeMode:!1};e=e||{};for(var l in o)"undefined"==typeof e[l]&&(e[l]=o[l]);r.params=e,r.cols=[],r.initialized=!1;var s=function(){var e=navigator.userAgent,t=e.match(/(Android);?[\s\/]+([\d.]+)?/),n=e.match(/(iPad).*OS\s([\d_]+)/),i=e.match(/(iPod)(.*OS\s([\d_]+))?/),a=!n&&e.match(/(iPhone\sOS)\s([\d_]+)/),r=n||i||a,o=!!t;return r||navigator.userAgent.toLowerCase().indexOf("safari")>=0&&navigator.userAgent.toLowerCase().indexOf("chrome")<0&&!o}();return r.setValue=function(e,t){var n=0;if(0===r.cols.length)return r.value=e,void r.updateValue(e);for(var i=0;i<r.cols.length;i++)r.cols[i]&&!r.cols[i].divider&&(r.cols[i].setValue(e[n],t),n++)},r.updateValue=function(e){for(var t=e||[],n=[],i=0;i<r.cols.length;i++)r.cols[i].divider||(t.push(r.cols[i].value),n.push(r.cols[i].displayValue));t.indexOf(void 0)>=0||(r.value=t,r.displayValue=n,r.params.onChange&&r.params.onChange(r,r.value,r.displayValue))},r.initPickerCol=function(e,o){function l(e){if(!k&&!x){var t=e.originalEvent||e;t.preventDefault(),x=!0,T=S=t.targetTouches[0].pageY,O=(new Date).getTime(),P=!0,I=F=a(p.wrapper[0],"y")}}function c(e){if(x){var o=e.originalEvent||e;o.preventDefault(),P=!1,S=o.targetTouches[0].pageY,k||(t(y),k=!0,I=F=a(p.wrapper[0],"y"),i(p.wrapper,"0ms")),
o.preventDefault();var l=S-T;F=I+l,E=void 0,F<b&&(F=b-Math.pow(b-F,.8),E="min"),F>w&&(F=w+Math.pow(F-w,.8),E="max"),n(p.wrapper,"translate3d(0,"+F+"px,0)"),p.updateItems(void 0,F,0,r.params.updateValuesOnTouchmove),j=F-N||F,L=(new Date).getTime(),N=F}}function u(e){if(!x||!k)return void(x=k=!1);x=k=!1,i(p.wrapper,""),E&&("min"===E?n(p.wrapper,"translate3d(0,"+b+"px,0)"):n(p.wrapper,"translate3d(0,"+w+"px,0)")),C=(new Date).getTime();var t,a;C-O>300?a=F:(t=Math.abs(j/(C-L)),a=F+j*r.params.momentumRatio),a=Math.max(Math.min(a,w),b);var o=-Math.floor((a-w)/v);r.params.freeMode||(a=-o*v+w),n(p.wrapper,"translate3d(0,"+parseInt(a,10)+"px,0)"),p.updateItems(o,a,"",!0),setTimeout(function(){P=!0},100)}function d(e){if(P){t(y);var n=$(this).attr("data-picker-value");p.setValue(n)}}var f=$(e),h=f.index(),p=r.cols[h];if(!p.divider){p.container=f,p.wrapper=p.container.find(".picker-items-col-wrapper"),p.items=p.wrapper.find(".picker-item");var g,v,m,b,w;p.replaceValues=function(e,t,n){p.destroyEvents(),p.values=e,p.displayValues=t;var i=r.columnHTML(p,!0);p.wrapper.html(i),p.items=p.wrapper.find(".picker-item"),p.calcSize(),p.setValue(n||p.values[0],0,!0),p.initEvents()},p.calcSize=function(){r.params.rotateEffect&&(p.container.removeClass("picker-items-col-absolute"),p.width||(p.container[0].style.width=""));var e,t;e=0,t=p.container[0].offsetHeight,g=p.wrapper[0].offsetHeight,v=p.items[0].offsetHeight,m=v*p.items.length,b=t/2-m+v/2,w=t/2-v/2,p.width&&(e=p.width,parseInt(e,10)===e&&(e+="px"),p.container[0].style.width=e),r.params.rotateEffect&&(p.width||(p.items.each(function(){var t=$(this);t[0].style.width="auto",e=Math.max(e,t[0].offsetWidth),t[0].style.width=""}),p.container[0].style.width=e+2+"px"),p.container.addClass("picker-items-col-absolute"))},p.calcSize(),n(p.wrapper,"translate3d(0,"+w+"px,0)"),i(p.wrapper,"0ms");var y;p.setValue=function(e,t,a){"undefined"==typeof t&&(t="");var r=p.wrapper.find('.picker-item[data-picker-value="'+e+'"]').index();"undefined"!=typeof r&&r!==-1||(r=0);var o=-r*v+w;n(p.wrapper,"translate3d(0,"+o+"px,0)"),i(p.wrapper,t+"ms"),p.updateItems(r,o,t,a)},p.updateItems=function(e,t,o,l){"undefined"==typeof t&&(t=a(p.wrapper[0],"y")),"undefined"==typeof e&&(e=-Math.round((t-w)/v)),e<0&&(e=0),e>=p.items.length&&(e=p.items.length-1);var c=p.activeIndex;p.wrapper.find(".picker-selected").removeClass("picker-selected"),i(p.items,o);var u=p.items.eq(e).addClass("picker-selected");if(n(u,""),r.params.rotateEffect){(t-(Math.floor((t-w)/v)*v+w))/v;p.items.each(function(){var e=$(this),i=e.index()*v,a=w-t,r=i-a,o=r/v,l=Math.ceil(p.height/v/2)+1,c=-18*o;c>180&&(c=180),c<-180&&(c=-180),Math.abs(o)>l?e.addClass("picker-item-far"):e.removeClass("picker-item-far"),n(e,"translate3d(0, "+(-t+w)+"px, "+(s?-110:0)+"px) rotateX("+c+"deg)")})}(l||"undefined"==typeof l)&&(p.value=u.attr("data-picker-value"),p.displayValue=p.displayValues?p.displayValues[e]:p.value,c!=e&&(p.onChange&&p.onChange(r,p.value,p.displayValue),r.updateValue()))},o&&p.updateItems(0,w,0);var x,k,T,S,O,C,I,E,F,N,j,L,P=!0;p.initEvents=function(e){var t=/hp-tablet/gi.test(navigator.appVersion),n="ontouchstart"in window&&!t,i=n?"touchstart":"mousedown",a=n?"touchmove":"mousemove",r=n?"touchend":"mouseup",o=e?"off":"on";p.container[o](i,l),p.container[o](a,c),p.container[o](r,u),"mouseup"==r&&document.documentElement.addEventListener("mouseleave",u,!1),p.items[o]("click",d)},p.destroyEvents=function(){p.initEvents(!0)},p.initEvents()}},r.columnHTML=function(e,t){var n="",i="";if(e.divider)i+='<div class="picker-items-col picker-items-col-divider '+(e.textAlign?"picker-items-col-"+e.textAlign:"")+" "+(e.cssClass||"")+'">'+e.content+"</div>";else{for(var a=0;a<e.values.length;a++)n+='<div class="picker-item" data-picker-value="'+e.values[a]+'">'+(e.displayValues?e.displayValues[a]:e.values[a])+"</div>";i+='<div class="picker-items-col '+(e.textAlign?"picker-items-col-"+e.textAlign:"")+" "+(e.cssClass||"")+'"><div class="picker-items-col-wrapper">'+n+"</div></div>"}return t?n:i},r.layout=function(){var e,t="",n="";r.cols=[];var i="";for(e=0;e<r.params.cols.length;e++){var a=r.params.cols[e];i+=r.columnHTML(r.params.cols[e]),r.cols.push(a)}n="picker-modal picker-columns "+(r.params.cssClass||"")+(r.params.rotateEffect?" picker-3d":""),t='<div class="'+n+'"><div class="picker-modal-inner picker-items">'+i+'<div class="picker-center-highlight"></div></div></div>',r.pickerHTML=t},r.init=function(){r.initialized||(r.layout(),r.container=$(r.pickerHTML),r.container.addClass("picker-modal-inline"),$(r.params.container).html(r.container),r.container.find(".picker-items-col").each(function(){var e=!0;(!r.initialized&&r.params.value||r.initialized&&r.value)&&(e=!1),r.initPickerCol(this,e)}),r.value?r.setValue(r.value,0):r.params.value&&r.setValue(r.params.value,0)),r.initialized=!0},r.init(),r};!function(e,t){return e.picker=function(e){return new Picker(e)},e}(bui||{},libs),function(e,t){return e.pickerdate=function(){function n(e){if(e&&e.constructor==Date)return e;if(e&&"string"==typeof e){if(e=e.replace(/-/gim,"/").replace(/^(\d+\/\d+?)($|\s)/,function(e,t){return t+"/1"}),e.indexOf("/")<0){var t=new Date;e=t.getFullYear()+"/"+t.getMonth()+"/"+t.getDate()+" "+e}return new Date(e)}return"number"==typeof e?new Date(e):new Date}function i(e,t){var e,t,n=new Date;return n.getTime()<e.getTime()?e:n.getTime()>t.getTime()?t:n}function a(a){function r(e){var t=new Date("1970/1/1");return F.forEach(function(n,i){t["set"+n](e[O[n]].value-("Month"==n?1:0))}),t}function o(e){var t=n(e);return F.map(function(e,n){return t["get"+e]()+("Month"==e?1:0)})}function l(e){t(this).hasClass("disabled")||S&&!S.isOpen()&&S.open(function(){})}function s(t){k.self=this==window||this==k?null:this,e.trigger.apply(k,arguments)}var c,u=e.guid(),d={id:u,height:260,popup:!0,mask:!0,position:"bottom",appendTo:"",rotateEffect:!1,buttons:[{name:"取消",className:""},{name:"确定",className:"primary-reverse"}],onMask:function(){S&&S.close()},callback:null},f=t.extend(!0,{},d,a);f.appendTo=f.appendTo||(e.hasRouter?router.currentPage()||"body":"body"),f.callback=function(){var e=a.callback&&a.callback.call(this);1!=e&&"undefined"!=typeof e||("取消"==t(this).text().trim()||"cancel"==t(this).text().trim()||"关闭"==t(this).text().trim()?k.value(c):c=k.value())};var h,p,g,v,m,b,w,y,x,k=this,T=function(){},S=null,O={},C=["FullYear","Month","Date"],I=["Hours","Minutes","Seconds"],E={FullYear:"year",Month:"month",Date:"date",Hours:"hour",Minutes:"minute",Seconds:"second"},F=[],N=!1;this.config={},this.option=function(){},this.cols=function(e){e=e||{};var t=[];return y=[],w=[],O={},F=[],C.forEach(function(n,i){"none"!==e[E[n]]&&(F.push(n),t.push(n))}),I.forEach(function(t,n){"none"!==e[E[t]]&&(F.push(t),y.push(t))}),t.forEach(function(t,n){O[t]=w.length,w.push(P[t](e[E[t]]))}),y.forEach(function(n,i){0==i&&0!=t.length?w.push(P.Space()):w.push(P.Divider()),0==t.length&&(w[0].content=""),O[n]=w.length,w.push(P[n](e[E[n]]))}),k.picker&&(k.picker.params.cols=w,k.picker.initialized=!1,k.picker.init()),N=!1,this},this.id=function(e){e&&!v&&(v=e)},this.reset=function(){return k.picker&&(k.picker.initialized=!1,k.picker.init()),this},this.min=function(e){return p=n(e||f.min||"1960/01/01 00:00:00"),this},this.max=function(e){return g=n(e||f.max||"2022/01/01 00:00:00"),this},this.value=function(e){if(e){var t=n(e),i=o(t);return k.picker.setValue(i,0),this}return b(k.picker,k.value,k.displayValue)},this.handle=function(t){if(t&&h!==t){var n=e.obj(h);n&&n.off("click",l),n=e.obj(t),n&&n.on("click",l),l.hasOpen=!1,h=t}return this};var j={y:function(e,t){return e.getFullYear().toString().slice(-t)},M:function(e,t){var n=t>1?"0":"";return(n+(e.getMonth()+1)).slice(-2)},d:function(e,t){var n=t>1?"0":"";return(n+e.getDate()).slice(-2)},h:function(e,t){var n=t>1?"0":"";return(n+e.getHours()).slice(-2)},m:function(e,t){var n=t>1?"0":"";return(n+e.getMinutes()).slice(-2)},s:function(e,t){var n=t>1?"0":"";return(n+e.getSeconds()).slice(-2)}};this.formatValue=function(e){return b=function(t,n,i){var a=r(t.cols);return e.replace(/y+|M+|d+|h+|m+|s+/g,function(e){return j[e[0]](a,e.length)})},k.picker&&k.picker.updateValue(),N=!1,this},this.onChange=function(e){return m=e||T,s.call(this,"change",x),this},this.popup=function(n){if(f.popup&&!S){var i='<div id="'+u+'" class="bui-dialog" >';i+='<div class="bui-dialog-main"><div id="'+u+'-picker"></div></div>',f.buttons&&f.buttons.length&&(i+='<div class="bui-dialog-foot bui-box">',t.each(f.buttons,function(e,t){var n="object"==typeof t&&"className"in t?" "+t.className:"",a="object"==typeof t&&"name"in t?t.name:t;i+='<div class="span1"><div class="bui-btn'+n+'">'+a+"</div></div>"}),i+="</div>"),i+="</div>";t(f.appendTo).append(i);v=e.obj(u+"-picker")}return this};var L=function(e,t,n){var i=r(e.cols),a=p["get"+t](),o=g["get"+t](),l=i.getTime(),s=p.getTime(),c=g.getTime();return l<s&&i["get"+t]()<a?("Month"==t&&(a+=1),void e.cols[O[t]].setValue(a)):l>c&&i["get"+t]()>o?("Month"==t&&(o+=1),void e.cols[O[t]].setValue(o)):void(n&&(l<s||l>c)&&e.cols[O[n]].onChange(e))},P={};P.FullYear=function(e){return e=e||{values:function(){for(var e=[],t=p.getFullYear(),n=g.getFullYear(),i=t;i<=n;i++)e.push(i);return e}()},{values:e.values,displayValues:e.displayValues,onChange:function(e,t,n){L(e,"FullYear",O.Month?"Month":"")}}},P.Month=function(e){return e=e||{values:[1,2,3,4,5,6,7,8,9,10,11,12],displayValues:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]},{values:e.values,displayValues:e.displayValues,textAlign:"right",onChange:function(e,t,n){for(var i=new Date(e.cols[O.FullYear].value,parseInt(e.cols[O.Month].value),0).getDate(),a=[],r=1;r<=i;r++)a.push(r);var o=e.cols[O.Date];o&&o.replaceValues&&o.replaceValues(a,null,o.value<i?o.value:i),L(e,"Month",O.Date?"Date":"")}}},P.Date=function(e){return e=e||{values:function(){var e=31,t=[];do t.unshift(e);while(e--);return t}()},{values:e.values,displayValues:e.displayValues,onChange:function(e,t,n){L(e,"Date",O.Hours?"Hours":"")}}},P.Space=function(){return{divider:!0,content:"  "}},P.Hours=function(e){return e=e||function(){for(var e=[],t=[],n=0;n<24;n++)e.push(n),t.push(("0"+n).slice(-2));return{values:e,displayValues:t}}(),{values:e.values,displayValues:e.displayValues,onChange:function(e,t,n){L(e,"Hours",O.Minutes?"Minutes":"")}}},P.Divider=function(){return{divider:!0,textAlign:"center",content:":"}},P.Minutes=function(e){return e=e||function(){for(var e=[],t=[],n=0;n<60;n++)e.push(n),t.push(("0"+n).slice(-2));return{values:e,displayValues:t}}(),{values:e.values,displayValues:e.displayValues,onChange:function(e,t,n){L(e,"Minutes",O.Seconds?"Seconds":"")}}},P.Seconds=function(e){return e=e||function(){for(var e=[],t=[],n=0;n<60;n++)e.push(n),t.push(("0"+n).slice(-2));return{values:e,displayValues:t}}(),{values:e.values,displayValues:e.displayValues,onChange:function(e,t,n){L(e,"Seconds")}}},k.min(f.min),k.max(f.max),k.cols(f.cols),k.onChange(f.onChange),k.formatValue(f.formatValue||"yyyy-MM-dd hh:mm:ss"),k.id(f.id),k.handle(f.handle),k.popup(f),k.picker=e.picker({container:v,rotateEffect:f.rotateEffect,value:o(f.value?n(f.value):i(p,g)),onChange:function(e,t,n){var i=b(e,t,n);x!=i&&(x=i,m(i),s.call(this,"change",i))},cols:w}),f.popup&&!S&&(S=e.dialog(f),S&&S.on("open",function(){c=b(k.picker,k.value,k.displayValue),k.picker&&(k.picker.initialized=!1,k.picker.init()),s.call(this,"show")}),S&&S.on("close",function(){s.call(this,"hide")})),this.disabled=function(){var t=e.obj(h);return t&&t.addClass("disabled"),this},this.enabled=function(){var t=e.obj(h);return t&&t.removeClass("disabled"),this},this.destroy=function(e){var e=1==e;this.off("show"),this.off("hide"),this.off("change"),S&&S.destroy(e),k=null},this.widget=function(t){var n={dialog:S||{}};return e.widget.call(n,t)},this.on=function(t,n){return e.on.apply(k,arguments),this},this.off=function(t,n){return e.off.apply(k,arguments),this}}return function(e){return new a(e)}}(),e}(bui||{},libs),function(e,t){"use strict";return e.levelselect=function(n){function i(n){var i="";n.popup?(i=u(n),j.append(i),F=bui.dialog({id:b,height:n.height,mask:n.mask,scroll:!1,autoClose:n.autoClose,fullscreen:n.fullscreen,position:n.position,effect:n.effect,onMask:n.onMask}),y=e.obj(b)):(i=d(n),j.append(i),y=e.objId(b)),x=e.objId(w);var a=0;for(a=0;a<n.level;a++)!function(i){I[i]=t(".select-level-val-"+i,y),C[i]=t(".select-level-"+i,x),n.trigger&&(E[i]=t(n.trigger).eq(i)),O[i]=bui.select({id:C[i],type:"select",direction:"right",field:{name:n.field.name},popup:!1,data:[],onChange:function(){}}),I[i].on("click",function(){t(this).addClass("active").siblings().removeClass("active"),S.to(i)}),O[i]&&O[i].on("change",function(a){n.log&&console.log("change",i);var r=O[i].value()||0,o=O[i].text();T[i]=o;var l=[],s=[];"string"==typeof n.field.data?l=m[i][r][n.field.data]||m[i][r]:n.field.data&&"array"===e["typeof"](n.field.data)&&(n.field.data.forEach(function(e,t){s.push(m[i][r][n.field.data[t]])}),l=s[0]||s[1]||s[2]||s[3]||s[4]||s[5]),m[i+1]=l,O[i+1]&&O[i+1].option("data",m[i+1]),O[i+2]&&O[i+2].option("data",[""]),C[i]&&C[i].find(".bui-btn").removeClass("active"),t(this).parents(".bui-btn").addClass("active"),c(i),I[i]&&I[i].text(o),I[i+1]&&I[i+1].text(n.placeholder),I[i+2]&&I[i+2].text(""),E[i].text(o),E[i+1]&&E[i+1].text(n.placeholder),E[i+2]&&E[i+2].text(""),a.ui={trigger:E[i],selector:I[i],index:i,select:O[i],data:m[i]},p.call(this,"change",a),n.popup&&!F.isOpen()||(i==n.level-1?(n.log&&console.log("close"),n.autoClose&&F.close()):i%n.visibleNum==1&&(n.log&&console.log("next"),S.next()))})}(a);l(n),n.popup&&F?F.on("open",function(e){k=n.popup?n.height-y.find(".select-value").height()-y.children(".bui-dialog-head").height():n.height,o(n)}):o(n),I[0].text(n.placeholder),E[0].text(n.placeholder),m[0]=n.data,O[0].option("data",m[0]),n.value&&s(n.value),L=!1}function a(){F&&F.open(),p.call(this,"show")}function r(){F&&F.close(),p.call(this,"hide")}function o(e){S||(S=bui.slide({id:w,height:k,scroll:!0,visibleNum:e.visibleNum}).lock(),S.on("to",function(e){var n=t(this).index();c(n)}))}function l(e){}function s(t){return"undefined"==typeof t?T:void(t&&"array"===e["typeof"](t)?t.forEach(function(e,t){O[t].value(e)}):"string"==typeof t&&O[0].value(t))}function c(e){t(".select-value div",y).removeClass("active"),t(".select-value div",y).eq(e).addClass("active")}function u(e){var t="";return t+='<div id="'+b+'" class="bui-dialog bui-levelselect" style="display:none;">',t+='    <div class="bui-dialog-head">'+e.title+"</div>",t+='    <div class="bui-dialog-main">',t+=d(e),t+="    </div>",t+='    <div class="bui-dialog-close"><i class="icon-close"></i></div>',t+="</div>"}function d(e){var t="",n=0;if(e.popup||(t+='<div id="'+b+'" class="bui-levelselect" style="display:none;">'),e.showValue){for(t+='    <div class="bui-box select-value">',n=0;n<e.level;n++)t+='        <div class="select-level-val-'+n+'"></div>';t+="    </div>"}for(t+='<div id="'+w+'" class="bui-slide bui-levelselect-slide">',t+='    <div class="bui-slide-main">',t+="        <ul>",n=0;n<e.level;n++)t+="            <li>",t+='                <div class="select-level-'+n+'"></div>',t+="            </li>";return t+="        </ul>",t+="    </div>",t+="</div>",e.popup||(t+="</div>"),t}function f(t,n){return e.on.apply(N,arguments),this}function h(t,n){return e.off.apply(N,arguments),this}function p(t){N.self=this==window||this==N?null:this,e.trigger.apply(N,arguments)}var g={popup:!0,data:[],height:300,appendTo:"",title:"所在地区",trigger:null,placeholder:"请选择",level:3,visibleNum:2,log:!1,mask:!0,autoClose:!0,fullscreen:!1,position:"bottom",effect:"fadeInUp",showValue:!0,onMask:null,value:[],field:{name:"n",data:["c","a"]}},v=t.extend(!0,{},g,n),m=[],b=bui.guid(),w=b+"-slide",y=null,x=null,k=0,T=[],S=null,O=[],C=[],I=[],E=[],F=null,N={init:i,show:a,hide:r,value:s,on:f,off:h,trigger:p};n.appendTo=n.appendTo||(e.hasRouter?router.currentPage()||"body":"body");var j=t(n.appendTo),L=!0;return i(v),N},e}(bui||{},libs),function(e,t){return e.ajax=function(n){function i(e){var n=function(t,n,i){var r;if("string"==typeof t&&"json"==e.dataType)try{r=JSON.parse(t)}catch(o){r=t}else r=t||{};s&&s(r,n,i),a.resolve(r,n,i)},i=function(t,n,i){var r;if("string"==typeof t&&"json"==e.dataType)try{r=JSON.parse(t)}catch(o){r=t}else r=t||{};c&&c(r,n,i),a.reject(r,n,i)};e.success=n,e.error=i;var o=e.type&&e.type.toUpperCase();e.type=o||e.method.toUpperCase(),r=t.ajax(e)}var a=t.Deferred(),r=null,o={data:{},method:"GET",dataType:"json",timeout:6e4,headers:{},processData:!0,mimeType:"none",cache:!1,async:!0,needJsonString:!0,contentType:"",localData:null,"native":!0},l=t.extend(!0,{},o,e.config.ajax,n),s=l.success,c=l.fail||l.error;if(""===l.contentType&&"GET"==l.method?l.contentType="text/html;charset=UTF-8":""===l.contentType&&"POST"==l.method?l.contentType="application/x-www-form-urlencoded":l.contentType=l.contentType,"application/json"==l.contentType&&"object"===e["typeof"](l.data)&&l.needJsonString)try{l.data=JSON.stringify(l.data)}catch(u){l.data=l.data}if(!l.url)return e.showLog("url不能为空","bui.ajax"),a;if(a.abort=function(){r&&r.abort()},l.localData)return s&&s(l.localData,200),a.resolve(l.localData,200),a;if(l["native"]&&e.isWebapp||!l["native"]&&!e.isWebapp)i(l);else{if("undefined"==typeof e["native"].ajax)return i(l),a;a=e["native"].ajax&&e["native"].ajax(l)||a}return a},e}(bui||{},libs),function(e,t){return e.load=function(n){var i,a={url:"",param:{},reload:!1,replace:!1,"native":!0},r=t.extend(!0,{},a,e.config.load,n),o=r.url;if(!r.url)return void e.showLog("url 不能为空!","bui.load:web");if(o.indexOf("tel:")>=0||o.indexOf("mailto:")>=0||o.indexOf("sms:")>=0)return void e.unit.openExtral(o);try{r.param="string"==typeof r.param&&JSON.parse(r.param)||r.param||{}}catch(l){return void e.showLog("param 参数值必须是一个{}对象","bui.load:web")}return document.activeElement.blur(),i=e.setUrlParams(r.url,r.param),r.reload&&e.isWebapp?void(window.location.href=i):r.reload&&!e.isWebapp?void(e["native"].load&&e["native"].load(r)):!r.replace||"load"in window.router?void("load"in window.router?window.router.load&&window.router.load(r):r["native"]&&e.isWebapp||!r["native"]&&!e.isWebapp?window.location.href=i:e["native"].load&&e["native"].load(r)):void window.location.replace(i)},e}(bui||{},libs),function(e,t){return e.getPageParams=function(n){var i=t.Deferred(),a={callback:null,"native":!0};n=n||{};var r=t.extend(!0,{},a,e.config.getPageParams);if("function"==typeof n?r.callback=n:n&&"object"===e["typeof"](n)&&(r=t.extend(!0,{},a,e.config.getPageParams,n)),"getPageParams"in window.router){var o=window.router.getPageParams&&window.router.getPageParams();r.callback&&r.callback(o),i.resolve(o)}else if(r["native"]&&e.isWebapp||!r["native"]&&!e.isWebapp){var l=e.getUrlParams();r.callback&&r.callback(l),i.resolve(l)}else i=e["native"].getPageParams&&e["native"].getPageParams(r)||i;return i},e}(bui||{},libs),function(e,t){return e.back=function(n){function i(){if(a.index===-1?window.history.back():window.history.go(a.index),u)try{clearTimeout(u)}catch(e){}a.delay&&a.callback?u=setTimeout(function(){a.callback()},500):a.callback&&a.callback()}var a,r={index:-1,name:"",delay:!0,"native":!0,callback:null};if("function"==typeof n?(r.callback=n,a=t.extend(!0,{},r,e.config.back)):a=n&&"object"===e["typeof"](n)?t.extend(!0,{},r,e.config.back,n):t.extend(!0,{},r,e.config.back),"back"in window.router)if(window.router.config.syncHistory){var o=router.getHistory(),l=o.length-1;if(a.name){var s=e.array.indexs(a.name,o,"pid"),c=s.length;c?a.index=-(o.length-s[c-1]-1):a.index=-1}Math.abs(a.index)>l&&(a.index=-l),o.length>1&&i()}else window.router.back&&window.router.back(a);else a["native"]&&e.isWebapp||!a["native"]&&!e.isWebapp?i():e["native"].back&&e["native"].back(a);var u},e}(bui||{},libs),function(e,t){return e.refresh=function(n){var i={"native":!0},a=t.extend(!0,{},i,e.config.refresh,n);"refresh"in window.router?window.router.refresh&&window.router.refresh():a["native"]&&e.isWebapp||!a["native"]&&!e.isWebapp?window.location.reload(!0):e["native"].refresh&&e["native"].refresh()},e}(bui||{},libs),function(e,t){return e.run=function(n){var i={},a={id:"",name:"",data:null,onFail:null,"native":!0};"string"==typeof n?i.id=n:n&&"object"===e["typeof"](n)&&(i=t.extend(!0,{},a,e.config.run,n));var r=String(i.id);if(i["native"]&&e.isWebapp||!e.isWebapp&&!i["native"]){if(r.indexOf("http://")>-1||r.indexOf("https://")>-1){var o=e.setUrlParams(i.id,i.data);if(e.platform.isIos())return void(window.location.href=o);var l=window.open("","_blank")||window.open("","_newtab");l.location.href=o}}else e["native"].run&&e["native"].run(i)},e}(bui||{},libs),function(e,t){return e.fileselect=function(n){function i(n){var i=t.extend(!0,g,n);switch(g.appendTo=i.appendTo||(e.hasRouter?router.currentPage()||"body":"body"),i.mediaType){case"allmedeia":x="*";break;case"picture":x="image/*";break;case"image":x="image/*";break;case"video":x="video/*";break;case"audio":x="audio/*";break;default:x=i.mediaType}return w=[],y?o():h=e["native"].fileselect&&e["native"].fileselect(n,{module:v})||{},this}function a(n){m=null;var i=this,a=t.extend(!0,g,n);return b=a,y?(n.from&&f.attr("capture",n.from),f.off("change").on("change",function(){var t=this.files;if(t.length<1)return void(a.onFail&&a.onFail.call(i,t,w));t.length>1&&e.showLog("一次只能选一张图片","bui.fileselect:web"),m=t[0];try{if(!e.array.compare(t[0].name,w,"name")){var n={name:t[0].name,data:t[0],type:t[0].type,size:t[0].size};w.push(n)}}catch(r){e.showLog(r,"bui.fileselect:web")}a.onSuccess&&a.onSuccess.call(i,t,w)}),e.platform.isIos()&&"function"==typeof FastClick?f[0].dispatchEvent(new Event("click")):f.trigger("click")):h.add.bind(i)(a),this}function r(e){function t(e){var t=new FileReader;t.onloadend=function(t){var n=new Image,a=!1,r=b.width||800,o=b.quality||.8,l=document.createElement("canvas"),s=l.getContext("2d");n.src=this.result,n.onload=function(){if(!a)return l.width=r,l.height=r*(n.height/n.width),s.drawImage(n,0,0,l.width,l.height),n.src=l.toDataURL("image/jpeg",o),i&&i.call(v,n.src,e),void(a=!0)}},t.readAsDataURL(e)}var e=e||{},n=e.data||m,i=e.onSuccess||function(){};e.onFail||function(){};if(y)try{t(n)}catch(a){}else h.toBase64(e);return this}function o(){if(void 0==f){d=bui.guid();var e=g.from?'capture="'+g.from+'"':"",n='<input type="file" accept="'+x+'" name="uploadFiles" id="'+d+'" '+e+' style="display:none"/>';t(g.appendTo).append(n),f=t("#"+d)||t('input[name="uploadFiles"]')}}function l(t,n){var n=n||"name";if(!y)return w=h.remove(t,n);if("string"==typeof t){e.array.remove(t,w,n);var i=w.length?w[w.length-1].data:null;return m=i,w}return this}function s(){return w=[],m=null,y||h.clear(),w}function c(){return w=y?w:h.data()}function u(){return m=y?m:h.value()}var d,f,h,p={"native":!0,appendTo:"",quality:.8,from:"camera",width:800,height:800,mediaType:"picture"},g=t.extend(!0,{},p,e.config.fileselect,n),v={add:a,remove:l,clear:s,value:u,data:c,toBase64:r,init:i},m=null,b=null,w=[],y=g["native"]&&e.isWebapp||!g["native"]&&!e.isWebapp,x="*";return i(g),v},e}(bui||{},libs),function(e,t){return e.file=function(n){function i(t){return b=e.fileselect(t),g=a(t),v=r({root:!0,create:!0}),this}function a(n){function i(e){var t="";try{switch(e.code){case FileError.QUOTA_EXCEEDED_ERR:t="QUOTA_EXCEEDED_ERR";break;case FileError.NOT_FOUND_ERR:t="NOT_FOUND_ERR";break;case FileError.SECURITY_ERR:t="SECURITY_ERR";break;case FileError.INVALID_MODIFICATION_ERR:t="INVALID_MODIFICATION_ERR";break;case FileError.INVALID_STATE_ERR:t="INVALID_STATE_ERR";break;default:t="Unknown Error"}}catch(e){}var n={msg:t};a.reject(n)}var a=t.Deferred();return S?(h="bui.app",p=window,m=1024*parseInt(T.size)*1024,window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,navigator.webkitPersistentStorage&&navigator.webkitPersistentStorage.requestQuota(m,function(e){window.requestFileSystem(window.PERSISTENT,e,function(e){a.resolve(e)},i)})):w=e["native"].file&&e["native"].file(n,{fileselect:b,module:k})||{},a}function r(e){var n={folderName:h,root:!1,create:!1,msg:"",param:{create:!1,exclusive:!1},onSuccess:null,onFail:null},i=t.extend({},n,e),a="";if(i.create?(a="创建 ",i.param.create=!0):(a="获取 ",i.param.create=!1),S){var r=o(i.folderName);r=i.root?r:h+"/"+r,g.done(function(e){e.root.getDirectory(r,i.param,function(t){i.onSuccess&&i.onSuccess.call(k,t,e)},function(e){var t={msg:a+r+" 文件夹失败"};i.onFail&&i.onFail.call(k,t)})}).fail(function(e){var t={msg:"文件系统还没准备好."};i.onFail&&i.onFail.call(k,t)})}else w.getFolder(i);return this}function o(e){var t;return"."==e[0]||"/"==e[0]||" "==e[0]?(t=e.slice(1),o(t)):"."!=e[0]&&"/"!=e[0]&&" "!=e[0]?e:void 0}function l(e){var t;return e&&e.indexOf("/")>-1?t=e.slice(e.lastIndexOf("/")+1,e.indexOf("?")>-1?e.indexOf("?"):void 0):e}function s(e){var n={fileName:"",folderName:"",root:!1,create:!1,param:{create:!1,exclusive:!1},onSuccess:null,onFail:null},i=t.extend({},n,e),a="";if(i.create?(a="创建 ",i.param.create=!0):(a="获取 ",i.param.create=!1),!i.fileName||i.fileName.indexOf(".")<0)return void(i.onFail&&i.onFail());if(S){var o=l(i.fileName);r({root:i.root,folderName:i.folderName,create:!0,onSuccess:function(e,t){var n=e.name==h?e.name+"/"+o:h+"/"+e.name+"/"+o;t.root.getFile(n,i.param,function(e){y=e,i.onSuccess&&i.onSuccess.call(k,e,t)},function(e){var t={msg:a+o+" 文件失败"};i.onFail&&i.onFail.call(k,t)})},onFail:function(e){i.onFail&&i.onFail(e)}})}else w.getFile(i);return this}function c(e){var n=t.extend(!0,{},e);return S?r({root:n.root,folderName:n.folderName,create:n.create,onSuccess:function(e,t){e.removeRecursively(function(){n.onSuccess&&n.onSuccess.call(k,e,t)},function(t){var i={msg:"删除 "+n.folderName+" 文件失败"};n.onFail&&n.onFail.call(k,i,e)})},onFail:function(e){var t={msg:"删除 "+n.folderName+" 文件失败"};n.onFail&&n.onFail.call(k,t)}}):w.removeFolder(n),this}function u(e){var n=t.extend(!0,{},e);return S?s({root:n.root,create:n.create,folderName:n.folderName,fileName:n.fileName,onSuccess:function(e,t){e.remove(function(){n.onSuccess&&n.onSuccess.call(k,e,t)},function(t){var i={msg:"删除 "+n.fileName+" 文件失败"};n.onFail&&n.onFail.call(k,i,e)})},onFail:function(e){var t={msg:"删除 "+n.fileName+" 文件失败"};n.onFail&&n.onFail.call(k,t)}}):w.removeFile(n),this}function d(t){var n=t||{};if(n.url){l(n.url);return S?e.showLog("web暂不支持open方法","bui.file.open:web"):w.open(n),this}}function f(e){return b.toBase64(e),this}var h,p,g,v,m,b,w,y,x={size:10,"native":!0},k={getFolder:r,removeFolder:c,getFile:s,getFileName:l,removeFile:u,toBase64:f,open:d,init:i},T=k.config=t.extend(!0,{},x,e.config.file,n),S=T["native"]&&e.isWebapp||!T["native"]&&!e.isWebapp;return i(T),k},e}(bui||{},libs),function(e,t){return e.upload=function(n){function i(t){return v=e.loading({display:"block",width:30,height:30,opacity:0,callback:function(){u()}}),m=e.fileselect({"native":t["native"],from:t.from,mediaType:t.mediaType}),E||(w=e["native"].upload&&e["native"].upload(t,{loading:v,fileselect:m,module:O})||{}),t.data?(c(t),this):this}function a(e){var t=m.add.bind(O);return t(e),this}function r(e,t){var n=s(),i=n.length;return i&&m.remove(n[i-1].name,t),this}function o(){return m.clear(),this}function l(e){return m.toBase64(e),this}function s(){return m.data()}function c(e){var n=t.extend(!0,{},S,e);if(x=n.url,y=m.value(),C=n.showProgress,y){if(C&&v.show(),E){var i=n.data,a=new FormData;a.append(n.fileKey,y);for(var r in i)a.append(r,i[r]);n.data=a,d(n)}else w.start(n);return this}}function u(e){return E?(v&&v.stop(),b&&b.abort(),e&&e.call(O,v,b)):w.stop(e),this}function d(e){var n=e.onSuccess,i=e.onFail;return b=t.ajax({url:x,type:e.method,data:e.data,cache:e.cache,headers:e.headers,contentType:e.contentType,processData:e.processData,timeout:e.timeout,xhr:function(){var e=t.ajaxSettings.xhr();if(f&&e.upload)return e.upload.addEventListener("progress",f,!1),e},success:function(e){p(),n&&n.call(O,e)},error:function(e,t){p(),i&&i.call(O,e,t)}}),this}function f(e){window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame,window.requestAnimationFrame(function(){if(e.lengthComputable){var t=Math.round(100*e.loaded/e.total);k=t.toString()+"%",t<100?h(k):p(),I&&I.call(O,k)}})}function h(e){return v&&v.show({text:e}),this}function p(){return v&&v.stop(),this}function g(t){var n={loading:v,fileselect:m,ajax:b};return e.widget.call(n,t)}var v,m,b,w,y,x,k,T={url:"",data:null,headers:{},showProgress:!0,timeout:6e4,"native":!0,contentType:!1,processData:!1,method:"POST",fileKey:"file",mediaType:"picture",from:"",onProgress:null,onSuccess:null,onFail:null},S=t.extend(!0,{},T,e.config.upload,n),O={init:i,add:a,remove:r,clear:o,data:s,start:c,stop:u,toBase64:l,widget:g},C=S.showProgress,I=S.onProgress,E=S["native"]&&e.isWebapp||!S["native"]&&!e.isWebapp;return i(S),O},e}(bui||{},libs),function(e,t){return e.download=function(n){function i(t){function n(e){h.getFolder({folderName:e.folderName,create:!1,onSuccess:function(e,t){m=e.fullPath},onFail:function(t){h.getFolder({folderName:e.folderName,create:!0,onSuccess:function(e,t){m=e.fullPath},onFail:function(e){C&&C(e)}})}}),e.url&&a(e)}return y=e.loading({display:"block",width:30,height:30,opacity:0,callback:function(){o()}}),h=e.file({"native":t["native"]}),S?n(t):p=e["native"].download&&e["native"].download(t,{file:h,loading:y,module:k})||{},this}function a(e){var n=t.extend(!0,{},T,e);g=n.url,v=encodeURI(g),O=n.onProgress,n.showProgress&&y.show({text:"0%"}),b=m+"/"+(e.fileName||h.getFileName(g)),S?(n.cache=!1,n.contentType=!1,n.processData=!1,f=t.ajax({url:v,type:n.method,data:n.data,cache:n.cache,headers:n.headers,contentType:n.contentType,processData:n.processData,timeout:n.timeout,xhr:function(){var e=t.ajaxSettings.xhr();if(l&&e)return e.addEventListener("progress",l,!1),e},success:function(t){var i=e.fileName||h.getFileName(n.url);h.getFile({fileName:i,folderName:n.folderName,create:!0,onSuccess:function(e,t){n.onSuccess&&n.onSuccess.call(k,e.fullPath,t)}})},fail:function(e){c(),n.onFail&&n.onFail.call(k,e)}})):p.start(n)}function r(e){var n=t.extend(!0,{autoDown:!0},T,e),i=e.fileName||h.getFileName(n.url);h.getFile({fileName:i,folderName:n.folderName,onSuccess:function(e,t){n.onSuccess&&n.onSuccess.call(k,e.fullPath,e,t)},onFail:function(e){n.autoDown=a(n)}})}function o(e){S?(c(),f&&f.abort()):p.stop(),e&&e.call(k,y,f)}function l(e){window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame,window.requestAnimationFrame(function(){if(e.lengthComputable){var t=Math.round(100*e.loaded/e.total);w=t.toString()+"%",t<100?s(w):c(),O&&O.call(k,w)}})}function s(e){y&&y.show({text:e})}function c(){y&&y.stop()}function u(e){return h.toBase64(e),this}function d(t){var n={loading:y,file:h,ajax:f};return e.widget.call(n,t)}var f,h,p,g,v,m,b,w,y,x={url:"",data:{},headers:{},method:"GET",showProgress:!0,timeout:6e4,fileName:"",folderName:"download","native":!0,onProgress:null,onSuccess:null,onFail:null},k={getFile:r,start:a,stop:o,toBase64:u,init:i,widget:d},T=k.config=t.extend(!0,{},x,e.config.download,n),S=T["native"]&&e.isWebapp||!T["native"]&&!e.isWebapp,O=(T.showProgress,T.onProgress),C=T.onFail;return i(T),k},e}(bui||{},libs),function(e,t){return e.currentPlatform="webapp",e.ready=function(n){e.isWebapp="undefined"==typeof e.isWebapp?e.debug:e.isWebapp;var i=t.Deferred();if(e.isWebapp)t(document).ready(function(){n&&n(),e.trigger.call(e,"pageready"),i.resolve()});else{if("undefined"==typeof e["native"].ready)return e.showLog("当前bui.js为webapp版本,不支持原生方法,请更换bui.js为对应平台版本"),i;i=e["native"].ready&&e["native"].ready(n)||i}return i},e}(bui||{},libs),function(e,t){return e["native"].ajax=function(e){var n=t.Deferred(),i=t.extend(!0,{},e);i.method=i.type||i.method;var a=function(e,t,a){var r,o;if("string"==typeof e&&"json"==i.dataType)try{r=JSON.parse(e)}catch(l){r=e}else r=e||{};if("string"==typeof r.returnValue&&"json"==i.dataType)try{o=JSON.parse(r.returnValue)}catch(l){o=r.returnValue}else o=r.returnValue||{};i.success&&i.success(o,t,a),n.resolve(o,t,a)},r=function(e,t,a){var r,o;
if("string"==typeof e)try{r=JSON.parse(e)}catch(l){r=e}else r=e||{};if("string"==typeof r.returnValue)try{o=JSON.parse(r.returnValue)}catch(l){o=r.returnValue}else o=r.returnValue||{};i.fail&&i.fail(o,t,a),n.reject(o,t,a)};return Cordova.exec(a,r,"HttpRequest","ajax",[i.url,i.data,i.method,i.async,i.contentType,i.headers,i.timeout,i.dataType,i.processData,i.cache,i.mimeType]),n},e}(bui||{},libs),function(e,t){return e["native"].load=function(e){var t={};if(e.url.indexOf("http://")>-1||e.url.indexOf("https://")>-1||e.url.indexOf("file://")>-1||0==e.url.indexOf("/"))e.url=e.url;else{var n=window.location.href,i=n.lastIndexOf("/");e.url=n.substring(0,i)+"/"+e.url}t.url=e.url,t.params=e.param,Cordova.exec(null,null,"Page","loadUrl",[t])},e}(bui||{},libs),function(e,t){return e["native"].getPageParams=function(e){var n=t.Deferred(),i=function(t){try{var i="string"==typeof t?JSON.parse(t):t;e.callback&&e.callback(i)}catch(a){}n.resolve(i)};return Cordova.exec(i,null,"Page","getPageParams",[]),n},e}(bui||{},libs),function(e,t){return e["native"].back=function(e){app&&app.back(e.callback)},e}(bui||{},libs),function(e,t){return e["native"].refresh=function(e){app&&app.refresh()},e}(bui||{},libs),function(e,t){return e["native"].run=function(t){var n={};t.id?(t.data&&(n=t.data),Cordova.exec(null,null,"ExtendApp","runApp",[t.id,n])):e.showLog("id 不能为空","bui.run")},e}(bui||{},libs),function(e,t){return e["native"].fileselect=function(n,i){function a(){p=[]}function r(n){function i(){var t={},n=navigator.camera.DestinationType;switch(t.quality=String(r.quality).indexOf(".")>-1?100*r.quality:r.quality,t.targetWidth=void 0==r.width?void 0:r.targetWidth||800,t.targetHeight=void 0==r.height?void 0:r.targetHeight||800,t.correctOrientation=0!=r.correctOrientation,t.allowEdit=0!=r.allowEdit,t.params=r.params||{},r.from){case"picture":t.sourceType=Camera.PictureSourceType.PHOTOLIBRARY;break;case"photo":t.sourceType=Camera.PictureSourceType.PHOTOLIBRARY;break;case"camera":t.sourceType=Camera.PictureSourceType.CAMERA;break;case"savephoto":t.sourceType=Camera.PictureSourceType.SAVEDPHOTOALBUM;break;default:t.sourceType=Camera.PictureSourceType.PHOTOLIBRARY}switch(r.destinationType){case"data":t.destinationType=n.DATA_URL;break;default:t.destinationType=n.FILE_URI}navigator.camera.getPicture(function(i){if(t.destinationType==n.FILE_URI)window.resolveLocalFileSystemURI(i,function(t){var n=t.fullPath;h=n;var i=n.lastIndexOf("?"),o=i<0?void 0:i,l=n.slice(n.lastIndexOf(".")+1,o),s=n.slice(n.lastIndexOf("/")+1,o),c="image/"+l;if(!e.array.compare(s,p,"name")){var u={name:s,data:n,type:c};p.push(u)}r.onSuccess&&r.onSuccess.call(a,n,p)},function(e){r.onFail&&r.onFail.call(a,e)});else{h=i;var o={name:"base64.jpg",data:i,type:"jpg"};p.push(o),r.onSuccess&&r.onSuccess.call(a,i,p)}},function(e){r.onFail&&r.onFail.call(a,e)},t)}h=null;var a=this,r=t.extend(!0,{width:800,height:800},d,n);switch(r.mediaType){case"picture":i();break;case"video":i();break;default:i()}}function o(t){function n(t){try{t.root.getFile(m,null,i,o)}catch(n){e.showLog(n)}}function i(e){e.file(a,o)}function a(e){r(e)}function r(e){var t=new FileReader;t.onloadend=function(t){s&&s.call(f,t.target.result,e)},t.readAsDataURL(e)}function o(e){c&&c.call(f,e.target.error.code)}var t=t||{},l=t.data||h,s=t.onSuccess,c=t.onFail,u=l.fullPath||l,d="file:///storage/emulated/0/",p=u.indexOf(d)>-1?27:0,g=u.lastIndexOf("?"),v=g<0?void 0:g,m=u.slice(p,v),b=e.platform.isIos()?LocalFileSystem.TEMPORARY:LocalFileSystem.PERSISTENT;return window.requestFileSystem(b,0,n,o),this}function l(t,n){var n=n||"name";if("string"==typeof t){p=e.array.remove(t,p,n);var i=p.length?p[p.length-1].data:null;return h=i,p}return this}function s(){return p=[],h=null,p}function c(){return p}function u(){return h}var d=n,f={add:r,remove:l,clear:s,value:u,data:c,toBase64:o,init:a},h=null,p=[];return a(d),f},e}(bui||{},libs),function(e,t){return e["native"].file=function(n,i){function a(e){return window.app&&app.getInfo(function(e){h=e.id||"bui.app",p=h}),v=r(),m=o({root:!0,create:!0}),this}function r(){function e(e){var t="";switch(e.code){case FileError.QUOTA_EXCEEDED_ERR:t="QUOTA_EXCEEDED_ERR";break;case FileError.NOT_FOUND_ERR:t="NOT_FOUND_ERR";break;case FileError.SECURITY_ERR:t="SECURITY_ERR";break;case FileError.INVALID_MODIFICATION_ERR:t="INVALID_MODIFICATION_ERR";break;case FileError.INVALID_STATE_ERR:t="INVALID_STATE_ERR";break;default:t="Unknown Error"}var i={msg:t};n.reject(i)}var n=t.Deferred();if(g=LocalFileSystem,b=0,window.requestFileSystem&&g)window.requestFileSystem(g[x],b,function(e){n.resolve(e)},e);else{var i={msg:"不支持requestFileSystem"};n.reject(i)}return n}function o(e){var n={folderName:p,root:!1,create:!1,msg:"",param:{create:!1,exclusive:!1},onSuccess:null,onFail:null},i=t.extend({},n,e),a="";i.create?(a="创建 ",i.param.create=!0):(a="获取 ",i.param.create=!1);var r=l(i.folderName);return r=i.root?r:p+"/"+r,v.done(function(e){e.root.getDirectory(r,i.param,function(t){i.onSuccess&&i.onSuccess.call(w,t,e)},function(e){var t={msg:a+r+" 文件夹失败"};i.onFail&&i.onFail.call(w,t)})}).fail(function(e){var t={msg:"文件系统还没准备好."};i.onFail&&i.onFail.call(w,t)}),this}function l(e){var t;return"."==e[0]||"/"==e[0]||" "==e[0]?(t=e.slice(1),l(t)):"."!=e[0]&&"/"!=e[0]&&" "!=e[0]?e:void 0}function s(e){var t;return e&&e.indexOf("/")>-1?t=e.slice(e.lastIndexOf("/")+1,e.indexOf("?")>-1?e.indexOf("?"):void 0):e}function c(e){var n={fileName:"",folderName:"",root:!1,create:!1,param:{create:!1,exclusive:!1},onSuccess:null,onFail:null},i=t.extend({},n,e),a="";if(i.create?(a="创建 ",i.param.create=!0):(a="获取 ",i.param.create=!1),!i.fileName||i.fileName.indexOf(".")<0)return void(i.onFail&&i.onFail());var r=s(i.fileName);return o({root:i.root,folderName:i.folderName,create:!0,onSuccess:function(e,t){var n=e.name==p?e.name+"/"+r:p+"/"+e.name+"/"+r;t.root.getFile(n,i.param,function(e){i.onSuccess&&i.onSuccess.call(w,e,t)},function(e){var t={msg:a+r+" 文件失败"};i.onFail&&i.onFail.call(w,t)})},onFail:function(e){i.onFail&&i.onFail(e)}}),this}function u(e){var n=t.extend(!0,{},e);return o({root:n.root,folderName:n.folderName,create:n.create,onSuccess:function(e,t){e.removeRecursively(function(){n.onSuccess&&n.onSuccess.call(w,e,t)},function(t){var i={msg:"删除 "+n.folderName+" 文件失败"};n.onFail&&n.onFail.call(w,i,e)})},onFail:function(e){var t={msg:"删除 "+n.folderName+" 文件失败"};n.onFail&&n.onFail.call(w,t)}}),this}function d(e){var n=t.extend(!0,{},e);return c({root:n.root,create:n.create,folderName:n.folderName,fileName:n.fileName,onSuccess:function(e,t){e.remove(function(){n.onSuccess&&n.onSuccess.call(w,e,t)},function(t){var i={msg:"删除 "+n.fileName+" 文件失败"};n.onFail&&n.onFail.call(w,i,e)})},onFail:function(e){var t={msg:"删除 "+n.fileName+" 文件失败"};n.onFail&&n.onFail.call(w,t)}}),this}function f(e){var t=e||{};if(t.url)return Cordova.exec(function(e){t.onSuccess&&t.onSuccess.call(w,e)},function(e){t.onFail&&t.onFail.call(w,e)},"ExtendApp","openFile",[t.url,""]),this}var h,p,g,v,m,b,w={getFolder:o,removeFolder:u,getFile:c,getFileName:s,removeFile:d,open:f,init:a},y=n,i=i||{},x="PERSISTENT";i.fileselect,e.isWebapp||0==y["native"];return a(y),w},e}(bui||{},libs),function(e,t){return e["native"].upload=function(e,n){function i(e){e.data&&a(e)}function a(e){var n=t.extend(!0,{},p,e);if(f=n.url,d=m.value(),b=n.showProgress,d)return b&&v.show(),o(n),this}function r(e){return v&&v.stop(),u&&u.abort(),e&&e.call(g,v,u),this}function o(e){var t=e.onSuccess,n=e.onFail;f=encodeURI(e.url);var i;switch(e.mediaType){case"picture":i=navigator.camera.MediaType.PICTURE;break;case"video":i=navigator.camera.MediaType.VIDEO;break;default:i=navigator.camera.MediaType.ALLMEDIA}var a=new FileUploadOptions;return a.fileKey=e.fileKey,a.mimeType=e.mimeType,a.fileName=d.substr(d.lastIndexOf("/")+1)||"image.jpg",a.params=e.data,a.mediaType=i,u=new FileTransfer,u.onprogress=l,u.upload(d,f,function(e){c();var n=JSON.parse(e.response);t&&t.call(g,n)},function(e){c(),n&&n.call(g,e)},p),this}function l(e){window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame,window.requestAnimationFrame(function(){if(e.lengthComputable){var t=Math.round(100*e.loaded/e.total);h=t.toString()+"%",t<100?s(h):c(),w&&w.call(g,h)}})}function s(e){return v&&v.show({text:e}),this}function c(){return v&&v.stop(),this}var u,d,f,h,p=e,n=n||{},g={init:i,start:a,stop:r},v=n.loading||function(){},m=n.fileselect||function(){},b=p.showProgress,w=p.onProgress;return i(p),g},e}(bui||{},libs),function(e,t){return e["native"].download=function(n,i){function a(e){if(y.getFolder({folderName:e.folderName,create:!1,onSuccess:function(e,t){p=e.fullPath},onFail:function(t){y.getFolder({folderName:e.folderName,create:!0,onSuccess:function(e,t){p=e.fullPath},onFail:function(e){T&&T(e)}})}}),e.url)return r(e),this}function r(e){var t=e;f=t.url,h=encodeURI(f);t.onProgress;t.showProgress&&x.show({text:"0%"}),g=p+"/"+(e.fileName||y.getFileName(f)),d=new FileTransfer,d.onprogress=l,d.download(h,g,function(e){try{t.onSuccess&&t.onSuccess.call(b,e.fullPath,e,x)}catch(n){console.log(n)}},function(e){c(),t.onFail&&t.onFail.call(b,e,x)},!1,{headers:t.headers})}function o(){c(),d&&d.abort()}function l(e){window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame,window.requestAnimationFrame(function(){if(e.lengthComputable){var t=Math.round(100*e.loaded/e.total);v=t.toString()+"%",t<100?s(v):c(),k&&k.call(b,v)}})}function s(e){x&&x.show({text:e})}function c(){x&&x.stop()}function u(e){return y.toBase64(e),this}var d,f,h,p,g,v,m={url:"",data:{},headers:{},method:"GET",showProgress:!0,timeout:6e4,fileName:"",folderName:"download","native":!0,onProgress:null,onSuccess:null,onFail:null},b={start:r,stop:o,toBase64:u,init:a},w=b.config=t.extend(!0,{},m,e.config.download,n),i=i||{},y=i.file,x=i.loading,k=(e.isWebapp||0==w["native"],w.showProgress,w.onProgress),T=w.onFail;return a(w),b},e}(bui||{},libs),function(e,t){return e.currentPlatform="bingotouch",e["native"].ready=function(n){var i=t.Deferred();return"undefined"==typeof cordova||"undefined"==typeof app?(e.showLog("请检查页面有没有引入 Cordova.js 及 bingotouch.js","bui.native.ready:bingotouch"),i.reject()):e.platform.isMac()||e.platform.isWindow()?(e.showLog("调用手机原生功能,需要在debugtool中打开","bui.native.ready:bingotouch"),i.reject()):window.addEventListener?window.addEventListener("load",function(t){document.addEventListener("deviceready",function(){n&&n(),e.trigger.call(e,"pageready"),i.resolve()},!1)},!1):window.attachEvent("onload",function(t){document.addEventListener("deviceready",function(){n&&n(),e.trigger.call(e,"pageready"),i.resolve()},!1)}),i},e}(bui||{},libs),function(e,t){e.init=function(n){var i,a={id:".bui-page",height:0,header:"header",main:"main",footer:"footer"};if("object"==e["typeof"](n))i=t.extend({},a,e.config.init,n);else{var r={};r.height=n,i=t.extend({},a,r)}var o=i.height||document.documentElement.clientHeight;if(!(t(i.main).length<1)){try{var l=t(i.id),s=i.header.indexOf("#")>-1?e.obj(i.header)[0]:l.children(i.header)[0],c=i.footer.indexOf("#")>-1?e.obj(i.footer)[0]:l.children(i.footer)[0],u=i.main.indexOf("#")>-1?e.obj(i.main):l.children(i.main),d=s?s.offsetHeight:0,f=c?c.offsetHeight:0,h=o-d-f;u.height(h)}catch(p){e.showLog(p,"bui.init")}return h}},window.loader=e.loader(),e.define=loader.define,e.require=loader.require,e.map=loader.map,e["import"]=loader["import"],e.checkLoad=loader.checkLoad,e.checkDefine=loader.checkDefine,window.addEventListener?window.addEventListener("load",function(t){e.trigger.call(e,"onload")},!1):window.attachEvent("onload",function(t){e.trigger.call(e,"onload")}),t(document).ready(function(){e.isWebapp="undefined"==typeof e.isWebapp?e.debug:e.isWebapp,e.trigger.call(e,"pagebefore"),e.platform.isWindow()||e.platform.isMac()?window.viewport=e.viewport(60):e.platform.isIpad()?window.viewport=e.viewport(70):window.viewport=e.viewport(),e.config.init.auto&&e.init(),"function"==typeof FastClick&&FastClick.attach(document.body),e.trigger.call(e,"pageinit")});try{var n="hidden"in document?"hidden":"webkitHidden"in document?"webkitHidden":"",i=n.replace(/hidden/i,"visibilitychange"),a=function(t){document[n]?e.trigger.call(e,"pagehide",t):e.trigger.call(e,"pageshow",t)};document.addEventListener(i,a)}catch(r){}try{navigator.control.gesture(!1),navigator.control.longpressMenu(!1)}catch(r){}return"function"==typeof define&&"object"==typeof define.amd&&define.amd?define("bui",[libs],function(){return e}):"undefined"!=typeof module&&module.exports?module.exports.bui=e:window.bui=e,e}(bui||{},libs);