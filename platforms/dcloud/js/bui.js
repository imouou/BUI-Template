/* @preserve 
 * @name: BUI v1.6.3  
 * @detail: BUI 是一个免费的UI交互框架, 用于快速定制开发WebApp,微信,混合移动应用(Bingotouch,Link,Dcloud,Apicloud,Appcan等).
 * @site: http://www.easybui.com/ 
 * Copyright © 2017-2020 BUI. All Rights Reserved. 
 */
!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";var e;function t(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&n.path)}},n.exports),n.exports}window.libs=window.Zepto||window.jQuery||{},window.bui={},window.router={},(e=window.bui).debug=!0,e.hasRouter=!1,e.nativeRouter=!1,e.isWebapp,e.currentPlatform="",e.log=!0,e.trace=!1,e.native={},e.config={},e.config.namespace="bui",e.config.classNamePrefix=e.config.namespace+"-",e.config.version="1.6.3",e.config.versionCode=20201106,e.version=e.config.version,e.versionCode=e.config.versionCode,e.config.viewport={zoom:!0,create:!0},e.config.init={auto:!0},e.config.ready={},e.config.ajax={},e.config.get={},e.config.put={},e.config.delete={},e.config.post={},e.config.back={},e.config.load={},e.config.getPageParams={},e.config.refresh={},e.config.run={},e.config.checkVersion={},e.config.component={auto:!0},e.config.dialog={},e.config.confirm={},e.config.alert={},e.config.hint={},e.config.prompt={},e.config.loading={},e.config.mask={},e.config.list={},e.config.listview={},e.config.scroll={},e.config.pullrefresh={},e.config.select={},e.config.sidebar={},e.config.slide={},e.config.actionsheet={},e.config.dropdown={},e.config.accordion={},e.config.stepbar={},e.config.rating={},e.config.number={},e.config.file={},e.config.fileselect={},e.config.upload={},e.config.download={},e.config.swipe={},e.config.router={},e.config.loader={},e.config.loader.define={},e.config.loader.load={},e.config.loader.component={},e.config.store={},e.config.floor={},function(e,t){e.prefix=function(t){return e.config.classNamePrefix+t},e.showLog=function(t,n){n=n||"";var i="";"object"==typeof t&&"message"in t&&"name"in t?i=t.message+":"+t.name+"&&stack:"+t.stack:"string"==typeof t&&(i=t),e.log&&console.error(n+" "+i),e.trace&&console.trace&&console.trace(),e.trigger("catcherror",t,n)},e.guid=function(e){function t(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return(e=void 0===e?"bui":e||"")+t().substr(e.length)+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},e.swipeDirection=function(e,t,n,i){var a=t-e,o=i-n,r=Math.abs(a),l=Math.abs(o);return!(r<9&&l<9)&&(r/l>3?a>0?"swiperight":"swipeleft":o>0?"swipedown":"swipeup")},e.obj=function(n,i){var a=null;i=i||null;var o=e.hasRouter&&router.currentPage()||"html",r=t(o=i||o),l="string"==typeof n;if("object"==typeof n)return a=t(n);if(l&&/^(\d)/.test(n))return a=r.find("[id='"+n+"']");if(l&&/^[a-zA-z]/.test(n)){var s=/^(html|head|body|header|main|footer|ul|li|section|dt|dd|div|span|img|article|i|strong|input|textarea|select|h1|h2|h3|h4|h5|h6|p|view|component|components|iframe)$/gi.test(n)||/^\[.+\]$/.test(n)||n.indexOf("[")>-1?n:"#"+n;return a=r.find(s)}return/^#\d/.test(n)?a=r.find("[id='"+n.substr(1)+"']"):/^\.\d/.test(n)?a=r.find("[class='"+n.substr(1)+"']"):n&&(a=r.find(n)),a},e.$=e.obj,e.objId=function(t){return e.obj(t,"html")},e.selector=function(e){return void 0===e?this:t(e,this)},e.widget=function(e){return e&&e in this?this[e]:this},e.option=function(n,i){if("object"!==e.typeof(n)&&void 0===i)return"string"==typeof n?this.config[n]:this.config;if("id"==n)return e.showLog("不允许修改控件的ID参数"),this;if(n&&"object"===e.typeof(n)){var a=t.extend(this.config,n);return this.init(a)}if(this.config.hasOwnProperty(n)){var o={};o[n]=i;a=t.extend(this.config,o);return this.init(a)}return this}}(window.bui||{},window.libs),function(e,t){e.emitter=function(){function t(){this.handle=Object.create(null)}return t.prototype.on=function(t,n,i){return"function"==typeof n?(i=n,n=this):(i=i,n=n||this),n.handle=n.handle||{},e.unit.stringToArray(t).forEach((function(e,t){void 0===n.handle[e]&&(n.handle[e]=[]),n.handle[e].push(i)})),n},t.prototype.off=function(t,n,i){"function"==typeof n?(i=n,n=this):"function"==typeof i?(i=i,n=n||this):n=this;var a=e.typeof(t);if(void 0===t)n.handle=Object.create(null);else if("string"===a&&"function"==typeof i){var o=n.handle[t]||[];e.array.remove(o,i)}else if("string"===a||"array"===a){"object"!=typeof n.handle&&(n.handle={}),e.unit.stringToArray(t).forEach((function(e,t){n.handle[e]=[]}))}return n},t.prototype.one=function(e,t){var n=this;return this.on(e,(function i(){t&&t.apply(n,arguments),n.off(e,i)})),this},t.prototype.wait=function(t,n){var i=this,a=e.unit.stringToArray(t),o=[],r=!0;return a.forEach((function(t,l){i.on(t,(function(t){o[l]=t,o.length===a.length&&r&&(a.forEach((function(t,n){o[n]=e.history.getLast().component[t]||{}})),n&&n.apply(i,o),r=!1)}))})),this},t.prototype.waited=function(t,n){var i=this,a=e.unit.stringToArray(t),o=[],r=!0;return a.forEach((function(t,l){i.on(t,(function(t){o[l]=t.exports||t,o.length===a.length&&r&&(a.forEach((function(t,n){var i=e.history.getLast().component[t];o[n]=i?i.exports:{}})),n&&n.apply(i,o),r=!1)}))})),this},t.prototype.trigger=function(e){try{if(this.handle[arguments[0]]instanceof Array){var t=this.handle[arguments[0]],n=[].slice.apply(arguments);n.shift();for(var i=0,a=t.length;i<a;i++)t[i]&&t[i].apply(this.self||this,n)}}catch(e){}return this},t.prototype.notify=function(){try{for(var e in this.handle)if(this.handle[e]instanceof Array)for(var t=this.handle[e],n=0,i=t.length;n<i;n++)t[n]&&t[n].apply(this.self||this)}catch(e){}return this},function(e){return new t}}();var n=e.emitter();e.on=n.on,e.off=n.off,e.trigger=n.trigger,e.one=n.one}(window.bui||{}),function(e,t){e.store=function(n){var i={el:null,scope:"",data:null,extends:null,mixins:[],beforeMounts:[],beforeCompiles:[],compileds:[],beforeUpdates:[],mounteds:[],updateds:[],beforeDestroys:[],destroyeds:[],computed:null,methods:null,watch:null,templates:null,beforeMount:null,mounted:null,beforeCompile:null,compiled:null,beforeUpdate:null,updated:null,beforeDestroy:null,destroyed:null,isPublic:!1,modelEvent:"input",scopeSplit:".",delayInput:200,needStatic:!1,needView:!0,needComponent:!1,needCompile:!0,needNative:!1,deep:!0,log:!1,autoinit:!0},a=null;function o(n){var a=null,o=n&&n.extends?[n.extends]:[];e.array.merge(i.mixins,o,n.mixins||[],[n]);var r=t.extend(!0,{},i,e.config.store);return function e(n){var o=0;for(o=0;o<n.length;o++){var l=n[o];l.beforeMount&&i.beforeMounts.push(l.beforeMount),l.beforeCompile&&i.beforeCompiles.push(l.beforeCompile),l.beforeUpdate&&i.beforeUpdates.push(l.beforeUpdate),l.updated&&i.updateds.push(l.updated),l.compiled&&i.compileds.push(l.compiled),l.mounted&&i.mounteds.push(l.mounted),l.beforeDestroy&&i.beforeDestroys.push(l.beforeDestroy),l.destroyed&&i.destroyeds.push(l.destroyed),a=t.extend(!0,r,l),l.mixins&&l.mixins.length&&o<n.length-1&&e(l.mixins)}}(i.mixins),a=t.extend(!0,i,a)}var r,l="function"==typeof(a=o(n)).data?a.data.call(A):a.data,s=a.scope||e.guid(),c=a.computed,u=a.scopeSplit,d=a.methods,f=a.templates,h=a.watch||i.watch,p=(a.delayInput,a.isPublic),g=a.modelEvent,m=a.needStatic,v="",b=!1,y=!0,w={},x={},k={},T=!1,I={},O=e.emitter(),C={target:null};a.el?a.el=a.el:a.el=p?"body":".bui-page",r=a.el,v=0==r.indexOf(".")||0==r.indexOf("#")?r.substr(1):r;var S=null,L=null,j=null,P=null,E=[],N=!0,$=l,B=void 0===a.log?i.log:a.log,R=/b-text|b-html|b-value|b-show|b-hide|b-checked|b-src|b-href|b-bind|b-style|b-class|b-model|b-id|b-data|b-title|b-visible/gim,F={"b-text":function(t){var n="b-text",i=ee.call(this,t,n),a=Q.call(this,n),o="",r=e.typeof(t.value),l=i.attr(n),s=re.call(this,n),c=(s[0].keyname,s[0].param);switch(r){case"array":o=te(t,l);break;case"function":o=t.value.apply(A,c);break;default:o=t.value}o=a?!o:o,i.text(o),E=[]},"b-html":function(t){var n="b-html",i=ee.call(this,t,n),a=Q.call(this,n),o="",r=e.typeof(t.value),l=i.attr(n),s=re.call(this,n),c=(s[0].keyname,s[0].param);switch(r){case"array":o=te(t,l);break;case"function":o=t.value.apply(A,c);break;default:o=t.value}o=a?!o:o,i.html(o),E=[]},"b-value":function(e){var t=ee.call(this,e,"b-value");p?t.each((function(t,n){ne.call(this,e)})):ne.call(t[0],e);E=[]},"b-show":function(e){var t=ee.call(this,e,"b-show");void 0!==e.value&&1==Boolean(e.value)?this.removeAttribute("style"):void 0!==e.value&&0==Boolean(e.value)&&t.css("display","none");E=[]},"b-visible":function(e){var t=ee.call(this,e,"b-visible");void 0!==e.value&&1==Boolean(e.value)?this.removeAttribute("style"):void 0!==e.value&&0==Boolean(e.value)&&t.css("visibility","hidden");E=[]},"b-hide":function(e){var n="!"+s+u+e.keyname,i=p?t(`[b-show="${n}"]`):S(this);void 0!==e.value&&1==Boolean(e.value)?i.css("display","none"):void 0!==e.value&&0==Boolean(e.value)&&i.removeAttr("style")},"b-checked":function(e){this.checked=!!e.value,E=[]},"b-bind":function(e){var t=ee.call(this,e,"b-bind"),n=this,i=e.keyname,a=e.value;if("object"==typeof a)for(let o in a)pe(i+"."+o,(function(t){ae(ee.call(n,e,"b-bind"),o,t.value)})),ae(t,o,a[o]);else{var o="string"==typeof i&&i.split("."),r=o[o.length-1];ae(t,r,a)}},"b-src":function(e){ee.call(this,e,"b-src").attr("src",e.value),E=[]},"b-title":function(e){ee.call(this,e,"b-title").attr("title",e.value),E=[]},"b-data":function(e){ee.call(this,e,"b-data").attr("data",e.value),E=[]},"b-id":function(e){ee.call(this,e,"b-id").attr("id",e.value),E=[]},"b-href":function(e){ee.call(this,e,"b-href").attr("href",e.value),E=[]},"b-class":function(n){var i=ee.call(this,n,"b-class"),a=this;this.classList;if("object"==typeof n.value)if("array"===e.typeof(n.value)){n.value.length||i.attr("class",""),n.value.forEach((function(e,t){!i.hasClass(e)&&i.addClass(e)}));var o=n.keyname.indeOf(".$index");o>-1?pe(n.keyname.substr(0,o)+"."+t(i).index(),(function(e){var t=ee.call(a,n,"b-class");oe(t,e.value[t.index()],e.value)})):pe(n.keyname,(function(e){var t=ee.call(a,n,"b-class");oe(t,e.value[t.index()],e.value)}))}else for(let e in n.value){let t=n.value[e],o=n.preValue&&n.preValue[e]||"";pe(n.keyname+"."+e,(function(t){oe(ee.call(a,n,"b-class"),e,t.value)})),oe(i,e,t,o)}else if("function"==typeof n.value){var r=re.call(this,"b-class"),l=r[0].keyname,s=r[0].param,c=n.value.apply(A,s);oe(i,l,c,n.preValue)}else{var u="string"==typeof n.keyname&&n.keyname.split("."),d=u[u.length-1];oe(i,d,n.value,n.preValue)}E=[]},"b-model":function(e){var t=ee.call(this,e,"b-model");p?t.each((function(t,n){ie.call(this,e)})):ie.call(t[0],e)},"b-style":function(e){var t=ee.call(this,e,"b-style"),n=this;if("object"==typeof e.value)for(let i in e.value)pe(e.keyname+"."+i,(function(t){ee.call(n,e,"b-style").css(i,t.value)})),t.css(e.value);else t.css(e.keyname,e.value);E=[]}},D={"b-text":[],"b-html":[],"b-value":[],"b-show":[],"b-hide":[],"b-checked":[],"b-bind":[],"b-src":[],"b-title":[],"b-data":[],"b-id":[],"b-href":[],"b-class":[],"b-model":[],"b-style":[]},M={},A=(t.extend(!0,{},l,d,h,c,f),{$methods:d,$refs:I,mixin:o,$options:a,$templates:f,config:a,watch:V,nextTick:function(t){return pe("nexttick",(function(n){try{t&&t.call(A,n)}catch(n){e.showLog(n)}})),this},oneTick:function(t,n){var i="nexttick-"+t;if(k.hasOwnProperty(i))return this;return k[i]=n,pe("nexttick",(function(n){if(n.keyname===t)try{x[t].pop(),0==x[t].length&&k[i]&&k[i].call(A,n)}catch(n){e.showLog(n)}})),this},get:function(t){if(void 0===t)return $=$;if("string"==typeof t){var n=e.unit.getKeyValue(t,$);return E=[],n}return $},set:de,delete:fe,del:fe,observer:se,compile:q,$mount:q,compileHtml:W,clearKey:function(){return E=[],b=!1,y=!0,T=!1,this},destroy:function(){return E=[],a.beforeDestroys.forEach((function(e,t){e.call(A)})),b=!1,y=!0,T=!1,ge(),a.beforeMounts=[],a.beforeCompiles=[],a.compileds=[],a.mounteds=[],a.beforeUpdates=[],a.updateds=[],a.destroyeds.forEach((function(e,t){e.call(A)})),this},init:H,connect:function(t,n,i){if("object"!=typeof t||!t.hasOwnProperty("$refs"))return A;var a=this;if("string"==typeof n){ue(t,n);var o=e.unit.getKeyValue(n,a.$data);"object"===e.typeof(o)?s(n,o,i||n):l(i||n,o,n)}else{var r=Object.keys($);let n=0;for(;n<r.length;n++){let i=r[n];if(e.array.compare(ce,i,"field"))break;ue(t,i);if(t.$data.hasOwnProperty(i)){t.$data[i];let n=a.$data[i];"object"===e.typeof(n)?s(i,n):l(i,n)}}}function l(n,i,a){"array"===e.typeof(i)?t[n].$replace(i):t.set(n,i);let o=V(a||n,(function(i){"array"===e.typeof(i)?t[n].$replace(i):t.set(n,i)})),r=e.array.index(ce,n,"field");(r<0||ce[r]&&t.$options.el!==ce[r].el)&&ce.push({field:a||n,el:t.$options.el,disconnect:o})}function s(n,o,r){let l=Object.keys(o);for(let o=0;o<l.length;o++){let r=l[o],c=n+"."+r,u=void 0===i,d=u||""==i?r:i+"."+r,f=(ue(t,c),e.unit.getKeyValue(c,a.$data));u?t.set(c,f):t.set(d,f);let h=V(c,(function(e){void 0!==i?t.set(d,e):t.set(c,e)}));var s=e.array.index(ce,c,"field");(s<0||ce[s]&&t.$options.el!==ce[s].el)&&ce.push({field:c,el:t.$options.el,disconnect:h})}t.trigger.call(t,r||n,{action:"set",target:null,value:$[n],preValue:null,action:"set",keyname:n,origin:$})}return A},disconnect:function(t){if("string"==typeof t){var n=e.array.get(ce,t,"field");n&&n.disconnect()}else ce.forEach((function(e,t){e.disconnect()}));return A},on:pe,off:ge,one:function(e,t){if(k.hasOwnProperty(e))return this;return pe(e,t),k[e]=t,this},trigger:me,emitter:O});try{a.autoinit&&H()}catch(t){e.showLog(t)}function H(){var n=(S=e.hasRouter?router.$:t)(a.el);L="object"==typeof a.el?t(a.el):n.length?n:t(a.el),j=L&&L.parent(),P=L&&L.children(),A.$el=L,A.$parent=j,A.$children=P,A.$data=l;for(let e in d)d[e]=d[e].bind(A);return A.$methods=d,d&&function(){try{Object.keys(d).forEach((t=>{l.hasOwnProperty(t)?e.showLog("不能跟data的键值相同:"+t):Object.defineProperty(A,t,{get:function(){return d[t].bind(this)},set:function(){}})}))}catch(t){e.showLog(t)}}(),f&&function(){try{Object.keys(f).forEach((t=>{l.hasOwnProperty(t)?e.showLog("不能跟data的键值相同:"+t):Object.defineProperty(A,t,{get:function(){return f[t].bind(this)},set:function(){}})}))}catch(t){e.showLog(t)}}(),me.call(A,"beforemount"),a.beforeMounts.forEach((function(e,t){e.call(A)})),se(l),function(){for(let e in l)Object.defineProperty(A,e,{configurable:!0,get(){B&&console.log("1. module getting "+e,E),!b&&y?(b=!0,y=!1,E=[]):(b=!1,y=!1);let t=l[e];return Array.isArray(t)&&C.target&&(w[e]=[],w[e].push(C.target)),t},set(t){B&&console.log("2. module setting "+e,E),E=[],l[e]=t,$[e]=t}})}(),h&&function(t){try{z(t)}catch(t){e.showLog(t)}}(h),c&&function(){try{Object.keys(c).forEach((t=>{if(l.hasOwnProperty(t))e.showLog("不能跟data的键值相同:"+t);else{var n=c[t];Object.defineProperty(A,t,{get:function(){var e,i="function"==typeof n?n.bind(this):n.get.bind(this);return C.target&&(w[t]=[],w[t].push(C.target)),C.target=function(){var e=i();w[t]&&w[t].forEach((e=>e())),me(t,{target:null,value:e,action:"set",keyname:t,param:[],origin:$}),C.target=null,E=[]},e=i(),C.target=null,E=[],e},set:n&&"object"===e.typeof(n)&&n.set||function(){}})}}))}catch(t){e.showLog(t)}}(),p?a.needCompile&&router&&router.on("complete",(function(e){a.needCompile&&q(),N&&a.mounteds.forEach((function(t,n){t.call(A,e)})),$=t.extend(!0,{},l),b=!1,y=!0,me.call(A,"mounted",e),N=!1,E=[]})):(N||ge(),m&&function(){let e=L.html();e=W(e),L.html(e)}(),a.needView?function(e){loader.views({id:e.id,loaded:function(e){q(e.el)},compiled:e.compiled})}({id:L,compiled:function(){a.needCompile&&q(),a.mounteds.forEach((function(e,t){e.call(A)}))}}):(a.needCompile&&q(),a.mounteds.forEach((function(e,t){e.call(A)}))),$=t.extend(!0,{},l),b=!1,y=!0,E=[],me.call(A,"mounted"),N=!1),this}function z(t,n,i){t=t||h;try{let a=Object.keys(t),o=[];a.forEach((function(a,r){let s=i||("object"==typeof t[a]?t[a].handler:t[a]);o.push(a),n&&o.unshift(n);let c=o.join("."),u=t[a];if("object"===e.typeof(u)){let n=u.deep?Object.keys(l[a]):Object.keys(t[a]),i=e.unit.getKeyValue(a,l);n.forEach((function(t,n){let a=c+"."+t,r=i[t];"object"===e.typeof(r)&&z(r,a,s),V(a,s),o=[]})),u.immediate&&u.handler&&u.handler.call(A,l[a],$[a])}V(c,s),o=[]}))}catch(t){e.showLog(t)}}function V(t,n){var i=function(t){try{var i=[t.value,t.preValue||"",t];if("init"!==t.action){var a=n;switch(e.typeof(a)){case"function":a.apply(A,i);break;case"array":a.forEach((function(e,t){e.apply(A,i)}));break;case"string":new Function(a+`(${t.value},${t.preValue||""})`)();break;default:a.apply(A,i)}}}catch(t){e.showLog(t)}};return pe(t,i),ge.bind(this,t,i)}function q(n){try{var i=null,o=null;void 0===n?(i=L,o=a):"string"==typeof n?(i=S(n),o=a):n&&"object"==typeof n&&(i=S(n)||t(n),o=t.extend(!0,{},a,n));var r=!0;if(o.beforeCompiles.forEach((function(e,t){if(!1===(r=e.call(A,o)))return!1})),!1===r)return E=[],!1;if(function(t){var n=t.find(`[b-template*=${s}]`),i=[];if(x={},n.length)try{n.each((function(t,n){var a=S(this),o=re.call(this,"b-template"),r=o[0].keyname,l=o[0].param,c=s+u;l[0]||console.error('b-template 没有找到数据源, 格式为: b-template="page.template(page.sources)"');var d="string"==typeof l[0]&&l[0].replace(new RegExp(c),"")||"",h=a.attr("b-command")||"html",g=a.attr("b-children")||a.children()[0]&&a.children()[0].tagName;_(d,A);p&&ge(d),x.hasOwnProperty(d)?x[d].push(d):x[d]=[d],pe(d,(function(t){try{var n,i=t.param;switch(t.action){case"push":case"unshift":n=i;break;case"splice":n=i.slice(2)||"";break;default:n=t.value}if(f&&f.hasOwnProperty(r)){(l=l.map((function(e,t){return"string"==typeof e&&0==e.indexOf(s+u)&&t>0?_(e.replace(new RegExp(c),""),$):e})))[0]=n;var o=void 0!==n&&"undefined"!==n&&f[r]&&f[r].apply(A,l);void 0===o&&(o="",e.showLog(r+"模板方法需要返回内容，例如：return html;")),p&&(a=S(`[b-template*="${c+d}"]`));var m=t.preValue||[];0==m.length&&"html"==h&&a.empty();var v=g?a.children(g):a.children(),b=v,y=i&&i.length||0;switch(N=!0,t.action){case"push":if(a.append(o),v=a.children(g),y&&y==v.length)Y(v);else if(y>1)for(var w=b.length,x=w;x<v.length;x++)Y(v.eq(w+x-1));else Y(v.last());break;case"unshift":if(a.prepend(o),v=a.children(g),y&&y==v.length)Y(v);else if(y>1)for(x=0;x<y;x++)Y(v.eq(x));else Y(v.first());break;case"pop":v.last().remove(),Y((v=a.children(g)).last());break;case"shift":v.first().remove(),Y((v=a.children(g)).first());break;case"length":break;case"splice":var k=parseInt(i[0]),T=parseInt(i[1]);T>=m.length&&(a.empty(),v=a.children(g));var I=v.length,O=I>0;if(0==T)if(O&&I-1>=k){v.eq(k).before(o),v=a.children(g);for(x=0;x<n.length;x++)Y(v.eq(k+x))}else{a.append(o),v=a.children(g);for(x=0;x<n.length;x++)Y(v.eq(I+x))}else if(T>0){if(void 0!==i[2])if(O&&I-1>=k){v.eq(k).before(o),v=a.children(g);for(x=0;x<n.length;x++)Y(v.eq(k+x))}else{a.append(o),v=a.children(g);for(x=0;x<n.length;x++)Y(v.eq(I+x))}let e=0;switch(h){case"append":e=v.length-t.preValue.length||0;break;case"prepend":case"html":default:e=0}for(x=0;x<T;x++)v.eq(k+n.length+x+e).remove();o&&!t.value.length&&a.html(o)}break;case"reverse":case"sort":a.html(o),Y(a);break;default:a[h](o),Y(a)}me.call(A,"nexttick",t)}else e.showLog(`找不到对应的模板,请检查下 scope:${s} 的templates是否存在${r}`,"bui.store")}catch(t){e.showLog(t)}})),e.array.compare(i,d)||i.push(d),E=[]})),K(i)}catch(t){e.showLog(t)}}(i),Y(i),o.needComponent)return loader.components({id:i,compiled:function(){J(i),Z(i),X(i),!0,U(),E=[],o.compileds.forEach((function(e,t){e.call(A,o)}))}}),this;J(i),Z(i),X(i),!0,U(),E=[],o.compileds.forEach((function(e,t){e.call(A,o)}))}catch(t){e.showLog(t)}return this}function U(){return L.find("[ref]").each((function(){let t=this.getAttribute("ref"),n=I.hasOwnProperty(t),i=null;n&&"htmldivelement"===e.typeof(I[t])?(i=[I[t]],i.push(this),I[t]=i):n&&"array"===e.typeof(I[t])?I[t].push(this):I[t]=this})),this}function W(n){try{var i=this,a="string"==typeof n?n:"",o=new RegExp("{{[\\s]?"+s+u+"(.*?)}}","mg");return a=a.replace(o,(function(n,a){var o=a.split(s+u);""===t.trim(o[0])&&o.shift();var r=o.length>0&&e.unit.getKeyValue(o.join("."),$)||"";return"function"==typeof r?r.call(i):r}))}catch(t){e.showLog(t)}}function _(t,n){let i;if(M&&M.hasOwnProperty(t))i=M[t];else{if(i=e.unit.getKeyValue(t,n),void 0===i)return void(B&&console.warn(`请检查 ${t} 在bui.store scope:${s} 中有没有声明定义`));M[t]=i}return i}function Y(t){try{var n=t,i=[],a=(n[0]&&n[0].outerHTML||n.html()||"").match(R)||[],o=e.array.uniq(a);o.length&&o.forEach((function(t,a){var o=n.find(`[${t}*=${s}]`);o.length<1&&(o=n.closest(`[${t}*=${s}]`)),o.length&&o.each((function(n,a){var o="",r=re.call(this,""+t),l=r[0]&&r[0].keyname||"",s=l.indexOf(".length"),c=s>-1?l.substr(0,s):l,u=r[0]&&r[0].param;_(c,A);var d=re.call(this,"b-linked");if(d.length&&d.forEach((function(t,n){pe(t.keyname,(function(t){me(l,{target:null,value:e.unit.getKeyValue(l,A),action:"set",keyname:l,param:u,origin:$})}))})),"b-show"===t)switch(r[0]&&r[0].rule){case"!":o="b-hide";break;default:o="b-show"}else o=t;if(p){var f=e.array.compare(D[o],c);!f&&D[o].push(c),!f&&pe(c,F[o].bind(this))}else!N&&0===n&&ge(c),pe(c,F[o].bind(this));e.array.compare(i,c)||i.push(c),E=[],b=!1,y=!0}))})),K(i)}catch(t){e.showLog(t)}}function K(e){e.forEach((function(e,t){me(e,{target:null,action:"init",value:M[e],param:null,keyname:e,origin:$}),E=[]}))}function J(n){var i=n,o=`[type="text"][b-model*=${s}],\n                                [type="search"][b-model*=${s}],\n                                [type="password"][b-model*=${s}],\n                                [type="url"][b-model*=${s}],\n                                [type="number"][b-model*=${s}],\n                                [type="email"][b-model*=${s}],\n                                [type="range"][b-model*=${s}],\n                                [type="tel"][b-model*=${s}],\n                                textarea[b-model*=${s}]`;if("input"===a.modelEvent){var r=!1;i.off("input compositionstart compositionend",o).on(g,o,(function(e){r||l.call(e.target,e)})).on("compositionstart",o,(function(e){r=!0,e.stopPropagation()})).on("compositionend",o,(function(e){r=!1,l.call(e.target,e),e.stopPropagation()}))}else i.off(g,o).on(g,o,l);function l(t){var n=t.target.value,i=re.call(this,"b-model"),a=i[0]&&i[0].keyname||"";if(""===a)return e.showLog("b-model的值不能为空"),!1;de(a,n),E=[],t.stopPropagation()}var c=`[type="checkbox"][b-model*=${s}],\n                                [type="radio"][b-model*=${s}]`;i.off("change",c).on("change",c,(function(t){try{var n,a=this,o=this.getAttribute("value")||this.checked,r=this.getAttribute("type"),l=re.call(this,"b-model")[0].keyname,c=this.getAttribute("check-value"),u=this.getAttribute("uncheck-value"),d=this.getAttribute("check"),f=this.getAttribute("uncheck");(d||f||c||u)&&(o=this.checked?c||this.value||d:u||f||""),n=_(l,A);var h=/\{.+\}$/g.test(o)?null:i.find(`[type="checkbox"][b-model="${s+"."+l}"][value="${o}"],\n                [type="radio"][b-model="${s+"."+l}"][value="${o}"]`);switch(r){case"checkbox":this.checked&&(n&&"array"===e.typeof(n)?!e.array.compare(n,o)&&e.unit.getKeyValue(l,A).push(o):de(l,o),this.checked=!0),this.checked||(n&&"array"===e.typeof(n)?e.array.remove(e.unit.getKeyValue(l,A),o):de(l,o),this.checked=!1),h&&h.each((function(e,t){this.checked=a.checked}));break;case"radio":default:de(l,o)}E=[],t.stopPropagation()}catch(t){e.showLog(t)}}));var u=`select[b-model*=${s}]`;i.off("change",u).on("change",u,(function(n){try{var i=t(this).val(),a=(this.selectedIndex,this.multiple),o=re.call(this,"b-model")[0].keyname,r=null;switch(r=_(o,A),a){case!0:"array"!==e.typeof(r)&&e.showLog(o+"的类型必须为数组"),i.splice(0,0,0,i.length+1),r.splice.apply(r,i);break;default:de(o,i)}E=[],n.stopPropagation()}catch(n){e.showLog(n)}}))}function X(e){e.off("change",`[b-checked*=${s}]`).on("change",`[b-checked*=${s}]`,(function(e){var t=this.checked;de(re.call(this,"b-checked")[0].keyname,t),E=[],e.stopPropagation()}))}function Z(e){var t=e;t.off("click.bui",`[b-click*=${s}]`).on("click.bui",`[b-click*=${s}]`,(function(e){var t=G.call(this,e,"b-click");if(!1===t)return!1;void 0===t&&e.stopPropagation()})),t.off("touchstart",`[b-touchstart*=${s}]`).on("touchstart",`[b-touchstart*=${s}]`,(function(e){if(!1===G.call(this,e,"b-touchstart"))return!1})),t.off("touchmove",`[b-touchmove*=${s}]`).on("touchmove",`[b-touchmove*=${s}]`,(function(e){if(!1===G.call(this,e,"b-touchmove"))return!1})),t.off("touchend",`[b-touchend*=${s}]`).on("touchend",`[b-touchend*=${s}]`,(function(e){if(!1===G.call(this,e,"b-touchend"))return!1})),t.off("scroll",`[b-scroll*=${s}]`).on("scroll",`[b-scroll*=${s}]`,(function(e){if(!1===G.call(this,e,"b-scroll"))return!1})),t.off("focus",`[b-focus*=${s}]`).on("focus",`[b-focus*=${s}]`,(function(e){if(!1===G.call(this,e,"b-focus"))return!1})),t.off("change",`[b-change*=${s}]`).on("change",`[b-change*=${s}]`,(function(e){if(!1===G.call(this,e,"b-change"))return!1})),t.off("blur",`[b-blur*=${s}]`).on("blur",`[b-blur*=${s}]`,(function(e){if(!1===G.call(this,e,"b-blur"))return!1})),t.off("submit",`[b-submit*=${s}]`).on("submit",`[b-submit*=${s}]`,(function(e){if(!1===G.call(this,e,"b-submit"))return!1}))}function G(t,n){var i=re.call(this,n),a=i[0].keyname,o=i[0].param,r=null;o.push(t);try{var l="function"==typeof(r=_(a,A))&&r.apply(A,o);return E=[],me(a,{target:this,value:r,action:"set",keyname:a,param:o,origin:$}),l}catch(t){e.showLog(t)}}function Q(e){return 0==this.getAttribute(e).indexOf("!")}function ee(e,n){var i=s+u+e.keyname;return p?t(`[${n}="${i}"]`):S(this)}function te(e,t){return t.indexOf(".length")>-1?e.value.length||0:e.value instanceof Array?e.value.join(","):e.value}function ne(t){var n=this.getAttribute("type"),i=this.value,a=this,o=this.getAttribute("b-value");switch(n){case"radio":i==t.value?this.checked=!0:this.checked=!1;break;case"checkbox":"array"===e.typeof(t.value)&&t.value.forEach((function(e,t){i==e&&(a.checked=!0)}));break;default:this.value=te(t,o)}}function ie(e){var n=this.getAttribute("type"),i=this.value,a=(e.param,this);if("SELECT"===this.nodeName&&this.multiple)e.value.length>1?e.value.forEach((function(e,n){"string"==typeof e?t(a).find(`option[value=${e}]`).attr("selected",!0):t(a).find(`option[value=${e.value}]`).attr("selected",!0)})):this.value=e.value[0];else{switch(n){case"radio":i==e.value?this.checked=!0:this.checked=!1;break;case"checkbox":if(i&&e.value instanceof Array)switch(e.action){case"push":case"unshift":e.param.filter((function(e,t){i!==e||(a.checked=!0)}));break;case"pop":case"shift":e.param.filter((function(e,t){i===e&&(a.checked=!1)}));break;case"splice":var o=e.param,r=parseInt(o[1]),l=o.slice(2);0==r?l.forEach((function(e,t){i===e&&(a.checked=!0)})):r>0&&(e.preValue.forEach((function(t,n){n<=e.param[1]&&(a.checked=!1)})),e.value.forEach((function(e,t){i===e&&(a.checked=!0)})));break;case"length":break;default:e.value.filter((function(e,t){i==e&&(a.checked=!0)}))}else e.value===i||1==e.value?this.checked=!0:this.checked=!1;break;default:if(event&&event.target&&"INPUT"===event.target.nodeName)break;this.value=e.value}E=[]}}function ae(e,t,n){switch(t){case"disabled":n?e.attr(t,n):e.removeAttr(t);break;case"checked":e.prop(t,n);break;default:var i="object"==typeof n?JSON.stringify(n):n;e.attr(t,i)}E=[]}function oe(e,t,n,i){"boolean"==typeof n?(n&&e.addClass(t),!n&&e.removeClass(t)):"string"==typeof n?(p&&e.removeClass(n),i&&e.removeClass(i),n&&!e.hasClass(n)&&e.addClass(n),void 0!==i&&""===n&&e.removeClass(i)):(Boolean(n)&&e.addClass(t),!Boolean(n)&&e.removeClass(t))}function re(t){var n=[],i=this,a=this.getAttribute(t)||"",o=a.indexOf("&")>-1?a.split("&"):a&&[a]||[];try{o.forEach((function(e,a){var o={},r=le.call(i,e,t);o.scope=s,o.rule=r.rule,o.keyname=r.name,o.param=r.param,o.eventType=r.eventType,o.eventProperty=r.eventProperty,n.push(o)}))}catch(t){e.showLog("参数处理出错")}return n}function le(n,i){try{var a=n?n.match(/([^\(|\)]+)/g):[],o="",r="",l=null,c=[],d=null,f=this,h="",p=t(f).attr("b-target"),g=p&&t(f).parents(p)[0]||f,m="",v="";if(h=(h=(l=a[0]&&a[0].indexOf(s+u)>-1?a[0].split(s+u):[s,a[0]])[0].split(s))[0]||h[1]||"",o=s,(r=l[1]||"").indexOf("$index")>-1){let e=t(g).index();r=r.replace("$index",e)}else if(r.indexOf("$id")>-1){let e=g.id;r=r.replace("$id",e)}else if(r.indexOf("$parentIndex")>-1){let e=t(g).parent().index();r=r.replace("$parentIndex",e)}if(void 0!==a[1]){let n=a[1]||"";try{var b=/\{.+\}$/g,y=/\[.+\]$/g;let a=/(\'(.*?)\'.*?)|(\"(.*?)\".*?)|(\w[-\w.+]*@([A-Za-z0-9][-A-Za-z0-9]+\.)+[A-Za-z]{2,14})|(^((https|http|ftp|rtsp|mms)?:\/\/)[^\,]+)|([a-zA-Z0-9][-a-zA-Z0-9\._]{0,62})|(\{.+\})|(\[.+])|([$\w\.]+)|([\d\.]+)|([\u4e00-\u9fa5|\w|\d]+)/g;c=(n?n.match(a):[]).map((function(n,a){var o=n.replace(/^\"|^\'|\"$|\'$/g,""),r=t(g).attr("b-target"),l=r&&t(g).parents(r)[0]||g;switch(n){case"$this":o=l;break;case"$index":o=t(l).index();break;case"$parentIndex":o=t(l).parent().index();break;case"$parent":o=l.parentNode;break;case"$children":o=t(l).children();break;case"$id":o=l.id;break;case"$text":o=l.textContent;break;case"$value":o=l.value;break;case"$html":o=l.innerHTML}if("b-template"!==i){var c=s+u;e.unit.startWithStr(o,c)&&(o=e.unit.getKeyValue(o.split(c)[1],A))}return b.test(n)||y.test(n)?JSON.parse(n):o}))}catch(t){e.showLog(t,"getArguments"),c=[]}}void 0!==a[2]&&(m=(d=a[2].indexOf(".")>-1?a[2].split("."):[a[2]])[0],v=d[1]||"")}catch(t){e.showLog("参数格式错误:"+n)}return{scope:o,rule:h,name:r,param:c,eventType:m,eventProperty:v}}function se(t,n){if(!t.hasOwnProperty("widget")||"function"!=typeof t.widget)return function(t,n){if(n&&"array"===e.typeof(n)){if(n.length>1){var i=n.pop();o(e.unit.getKeyValue(n.join("."),t),i)}else o(t,n[0]);return}function o(t,n){let i=t[n];if(i instanceof Array?function(t,n){var i=[],o=Array.prototype;let r=Object.create(o);["push","pop","shift","unshift","splice","sort","reverse"].forEach((function(t){var c=o[t];Object.defineProperty(r,t,{enumerable:!0,configurable:!0,value:function(o){let r=[...arguments];me.call(A,"beforeupdate",{target:null,action:t,param:r,value:this,prevValue:[],keyname:n,origin:$}),i.push(n),l.hasOwnProperty(n)||i.unshift(E.join("."));var u=i.join("."),d=this.slice(0);let f=c.apply(this,r);switch(B&&console.log(`5. ${u} action ${t} `),t){case"pop":case"shift":r=[f]}e.unit.setKeyValue(u,this,$);var h=L.find(`[b-template*="${s}.${u}"]`);return me(u,{target:h,action:t,param:r,value:this,preValue:d,keyname:n,origin:$}),w[i[0]]&&"array"===e.typeof(w[i[0]])&&w[i[0]].forEach((e=>e())),i=[],E=[],b=!1,y=!0,me.call(A,"updated",{target:h,action:t,param:r,value:this,preValue:d,keyname:n,origin:$}),a.updateds.forEach((function(e,i){e.call(A,{target:h,action:t,param:r,value:this,preValue:d,keyname:n,origin:$})})),f}})})),r.$index=function(t,n){return e.array.index(this,t,n)},r.$include=function(t,n){return e.array.compare(this,t,n)},r.$empty=function(){return e.array.empty(this)},r.$replace=function(t){return e.array.replace(this,t)},r.$merge=function(){return e.array.merge(this,...arguments)},r.$get=function(t,n){return e.array.get(this,t,n)},r.$set=function(t,n,i){return e.array.set(this,t,n,i)},r.$delete=function(t,n){return e.array.delete(this,t,n)},r.$deleteIndex=function(t){return e.array.deleteIndex(this,t)},t.__proto__=r}(i,n):function(t,n){let i=t[n],o="function"==typeof i?i.call(A):i;var r=[];Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get(e){return B&&console.log(`3. data getting ${n}:`,o),O.target=this,(b||!b&&y)&&E.push(n),C.target&&r.push(C.target),o},set(t){if(t===o)return E=[],T=!1,b=!1,y=!0,!0;O.target===this&&(E=[]),O.target=this,(!y||!b&&y)&&E.push(n);var i=E.join(".");!T&&me.call(A,"beforeupdate",{action:"set",value:t,preValue:o,keyname:i,origin:$}),!T&&a.beforeUpdates.forEach((function(e,n){e.call(A,{action:"set",value:t,preValue:o,keyname:i,origin:$})})),B&&console.log("4. data setting "+i,t);var s=e.unit.getKeyValue(i,$);return o=t,r.forEach((e=>e())),!T&&me(i,{action:"set",value:o,preValue:s,keyname:i,origin:$}),e.unit.setKeyValue(i,o,$),o instanceof Array?se(l,E):"object"===e.typeof(o)&&(a.deep&&se(t),o&&Object.keys(o).forEach((function(e,t){var i=n+"."+e;E=[],me(i,{target:null,value:o[e],preValue:s&&s[e],action:"set",keyname:i,origin:$})}))),!T&&me.call(A,"updated",{action:"set",value:o,preValue:s,keyname:i,origin:$}),!T&&a.updateds.forEach((function(e,t){e.call(A,{action:"set",value:o,preValue:s,keyname:i,origin:$})})),E=[],T=!1,b=!1,y=!0,!0}})}(t,n),i&&"object"===e.typeof(i))return se(i)}Object.keys(t).forEach((function(e){o(t,e)}))}(t,n)}var ce=[];function ue(t,n){var i=e.array.index(ce,n,"field");return!!(i>-1&&ce[i]&&t.$options.el===ce[i].el)&&(ce[i].disconnect&&ce[i].disconnect(),!0)}function de(n,i){var o=null;if(E=[],"string"==typeof n&&void 0!==i){B&&console.log(`set ${n} `),T=!0,me.call(A,"beforeupdate",{action:"set",target:null,value:o,preValue:r,action:"set",keyname:n,origin:$}),a.beforeUpdates.forEach((function(e,t){e.call(A,{action:"set",target:null,value:o,preValue:r,action:"set",keyname:n,origin:$})}));var r=e.unit.getKeyValue(n,$);i&&"object"===e.typeof(i)?(o=t.extend(!0,{},i),Object.keys(i).forEach((function(e,t){var a=n+"."+e;me.call(A,a,{target:null,value:i[e],preValue:r,action:"set",keyname:a,origin:$})}))):o=i,e.unit.setKeyValue(n,i,l),e.unit.setKeyValue(n,o,$),me.call(A,n,{target:null,value:o,preValue:r,action:"set",keyname:n,origin:$}),me.call(A,"updated",{action:"set",target:null,value:o,preValue:r,action:"set",keyname:n,origin:$}),a.updateds.forEach((function(e,t){e.call(A,{action:"set",target:null,value:o,preValue:r,action:"set",keyname:n,origin:$})})),"object"==typeof i&&(i instanceof Array?se(l,n.split(u)):se(i)),E=[]}else n&&"object"===e.typeof(n)&&($=t.extend(!0,{},$,n),he(n));return $}function fe(t,n){return function(t,n){"string"==typeof t&&(e.unit.delKey(t,$),n&&n.call(A,t))}(t,(function(e){me(t)})),$}function he(t,n){for(var i in t){var a=void 0===n?i:n+i,o=t[i];me(a,{target:null,value:o,preValue:$[i]||"undefined",action:"set",param:null,keyname:a,origin:$}),o&&"object"===e.typeof(o)&&he(o,i+".")}}function pe(t,n){var i="";return i=t&&"array"===e.typeof(t)?t.map((function(e,t){return v+"_"+s+u+e})):v+"_"+s+u+t,O.on.call(A,i,n),this}function ge(e,t){if(e){var n=v+"_"+s+u+e;O.off.call(A,n,t)}else A.handle={};return this}function me(e){var t=v+"_"+s+u+e;return B&&console.warn(t,"trigger"),arguments[0]=t,O.trigger.apply(A,arguments),b=!1,y=!0,this}return A}}(window.bui||{},window.libs),function(e,t){e.viewport=function(n,i){e.trigger.call(e,"viewportbefore");var a,o=document.querySelector("meta[name=viewport]"),r="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no",l=window.devicePixelRatio,s=document.documentElement.clientWidth,c=document.documentElement.clientHeight,u=parseInt(s)*parseInt(l),d=parseInt(c)*parseInt(l);if(s=s>c?c+24:s,o)e.config.viewport.create&&(o.content=r);else{var f=document.createElement("meta");f.name="viewport",f.content=r;var h=document.head;e.config.viewport.create&&h.appendChild(f),f=null}var p=e.array.index([240,320,360,375,384,393,412,414,435,480,512,540,768,1024,1536,2048,2732,534,854,750],document.documentElement.clientWidth);function g(t){var n=i||750,o=document.head.parentNode,r=t||(s/n*100).toFixed(2);return a=r||48,e.config.viewport.zoom&&(o.style.fontSize=a+"px"),e.trigger.call(e,"viewportinit"),this}return p>-1&&void 0===n?a=[32,42.67,48,50,51.2,52.4,54.93,55.2,58,64,68.27,60,60,60,60,60,60,60,60,60][p]:g(n),{width:function(e){return s||t("body").width()||t("#bui-router").width()||t(".bui-page").width()},height:function(e){return c||t("body").height()||t("#bui-router").height()||t(".bui-page").height()},fontSize:a,screenWidth:function(e){return u},screenHeight:function(e){return d},ratio:function(e){return l},init:g}}}(window.bui||{},window.libs),function(e,t){e.loader=function(n){var i,o=t.extend({},{cache:!0,log:!1,baseUrl:"",relativePath:"pages",needNative:!1,deepView:!1,viewTag:"view",componentTag:"component",deepComponent:!0,scriptSuffix:".js"},e.config.loader,n),r=e.emitter(),l=[],s=[],c={},u={baseUrl:"",modules:{},globals:{}},d={},f={init:function(e){return e=e||{},o=t.extend({},o,e),f.config=o,this},config:o,define:function(n,i,a){var r={moduleName:"",template:"",script:"",path:"",props:null,isComponent:!1,params:null,data:null,depend:[],beforeCreate:null,created:null,beforeLoad:null,loaded:null,hide:null,exports:null,show:null,beforeDestroy:null,destroyed:null},l={},s="";try{var c=v().name?v():function(e){var t=window.location.pathname,n=t.indexOf(".html"),i="",a="";a=n>-1?(i=t.substr(1,n))+".js":(i=t.substr(1))+".js";return{name:i,src:a}}(),f=c.name}catch(e){}var p=[];if(void 0===n)return e.showLog("define第1个参数不能为空"),this;"function"==typeof n?(a=n,s=f,i=[]):"object"===e.typeof(n)?(s=f,i=n.depend||[],a=n.loaded,l=t.extend(!0,{},r,n)):"array"===e.typeof(n)?(a=i,i=n,s=f):"function"==typeof i?(s=n,a=i,i=[]):(s=n,i=i,a=a);var g=d.hasOwnProperty(s)&&d[s].script||c.src,y=window.location.href.substr(0,window.location.href.indexOf("#")).replace("index.html","");g=g.replace(y,""),o.log&&console.log("define "+s),i.length&&(p=m(i,g));if("string"==typeof s&&"function"==typeof a){(l=n&&"object"===e.typeof(n)?t.extend(!0,{},r,d[s],e.config.loader.define,n):t.extend(!0,{},r,d[s],e.config.loader.define)).moduleName=s,l.depend=p,l.style=[],l.script=g,l.path=g.substr(0,g.lastIndexOf("/")+1),l.loaded=function(){var e=[b,d[f]&&d[f].exports,d[f],u.globals],t=[];p.length&&p.forEach((function(e,n){d[e]&&t.push(d[e].exports)}));var n=t.concat(e);return a&&a.apply(this,n)},l.isDefined=!0,h(l)}else e.showLog("define "+s+"模块的参数格式不对");return l},global:function(e){if("object"==typeof e)h({globals:e});else{if("function"!=typeof e)return h().globals;h({globals:e.call(f,u.globals)})}return f},require:b,destroy:function(n){o.log&&console.log("destroy "+n);var i="string"==typeof n?d[n]:null;if(i){i.beforeDestroy&&i.beforeDestroy.call(i);var a=t('script[name="'+n+'"]').attr("src");l=e.array.remove(l,a),t('script[name="'+n+'"]').remove(),delete u.modules[n],d=u.modules,i.destroyed&&i.destroyed.call(i)}},map:h,import:L,importCss:function(t,n){return new Promise((function(i,a){if("string"==typeof t){var r=e.hasRouter?t:e.unit.relativePath(t,o.relativePath),l=document.createElement("link")||{};l.href=r+(o.cache?"":"?t="+(new Date).getTime()),l.setAttribute("rel","stylesheet"),l.setAttribute("type","text/css"),n&&l.setAttribute("id",n),document.head&&document.head.appendChild(l),l=null,i(t,n)}else e.showLog(t+"的格式不正确")}))},importSync:j,importHtml:P,load:w,checkLoad:function(t){var n=!0,i=[];if(d=u.modules,"string"==typeof t){t.indexOf(",")>-1?i=t.split(","):i.push(t)}else t&&"array"===e.typeof(t)&&(i=t||[]);if(i.length)i.forEach((function(e,t){d.hasOwnProperty(e)||(n=!1),d[e]&&!1===d[e].isLoaded&&(n=!1)}));else for(var a in d)d[a]&&!1===d[a].isLoaded&&(n=!1);return n},components:T,component:k,delay:function(n){var i=t.extend(!0,{id:"",deepView:o.deepView,deepComponent:o.deepComponent,delay:!1,everytime:!1,param:null,beforeLoad:null,loaded:null,compiled:null},n),a=e.$(i.id);for(let e=0;e<a.length;e++){let n=a[e],r=n&&n.getAttribute("delay"),l=n&&n.tagName.toLowerCase();("true"===r||i.everytime)&&("true"===r&&l===o.componentTag||i.everytime?(i.isSelf=!0,i.id=n,i.everytime?n.removeAttribute("delay"):n.setAttribute("delay","false"),k(i)):"true"===r&&l===o.viewTag||i.everytime?(i.isSelf=!0,i.id=n,n.removeAttribute("delay"),S(i)):(i.isSelf=!1,l=t(n).find('[delay="true"]')[0]&&t(n).find('[delay="true"]')[0].tagName.toLowerCase(),t(n).find('[delay="true"]').removeAttr("delay"),l===o.componentTag&&k(i),l===o.viewTag&&S(i)))}return this},views:C,view:S,get:function(e){if("string"==typeof e)return u.modules[e]||null},set:p,one:function(e,t){return r.one.apply(f,arguments),this},wait:function(e,t){return r.wait.apply(f,arguments),this},waited:function(e,t){return r.waited.apply(f,arguments),this},on:function(t,n){var i=e.history.getLast("id"),a=arguments,o=e.unit.stringToArray(t);return o.forEach((function(e,t){a[0]=i+"-"+e,r.on.apply(f,a)})),this},off:function(t,n){var i=e.history.getLast("id"),a=arguments,o=e.unit.stringToArray(t);return o.forEach((function(e,t){a[0]=i+"-"+e,r.off.apply(f,a)})),this},trigger:B};function h(n){if(void 0===n)return u;if("object"==typeof n&&(n.hasOwnProperty("modules")||n.hasOwnProperty("baseUrl")||n.hasOwnProperty("globals")))u=t.extend(!0,{},u,n),d=u.modules;else if("object"==typeof n&&n.hasOwnProperty("moduleName")){var i=function(n){var i={id:"",moduleName:"",template:"",data:null,props:null,isComponent:!1,params:null,depend:[],script:"",style:[],isDefined:!1,isLoaded:!1,beforeCreate:null,created:null,beforeLoad:null,loaded:null,show:null,hide:null,beforeDestroy:null,destroyed:null,path:"",exports:{},dependExports:[]},a={};d.hasOwnProperty(n.moduleName)&&(a=t.extend(!0,{},d[n.moduleName]));var o=t.extend(!0,{},i,a,n);n.props&&(o.props=n.props);return o.params=e.history.getParams("url"),o}(n);d[n.moduleName]=i||{},u=t.extend(!0,u,{modules:d}),d=u.modules}return u}function p(t,n){if(n&&"object"===e.typeof(n)){if(n.moduleName=t,n.hasOwnProperty("loaded")&&"function"==typeof n.loaded){var i=n.loaded;n.loaded=function(){d=u.modules;var e=n.moduleName,t=d[e].depend,a=[b,d[e]&&d[e].exports,d[e],u.globals],o=[];t.length&&t.forEach((function(e,t){d[e]&&o.push(d[e].exports)}));var r=o.concat(a);return i&&i.apply(this,r)},n.script=n.moduleName+".js",n.path=n.script.substr(0,n.script.lastIndexOf("/")+1)}n.depend&&n.depend.length&&(n.depend=m(n.depend,n.script)),h(n)}return this}function g(e,t){var n=e,i=t.lastIndexOf("/"),a=t.substr(0,i);return e.indexOf("../")>-1?(e=e.replace(/\..\//g,(function(e){var t=a.lastIndexOf("/");return a=a.substr(0,t),""})),n=a?a+"/"+e:e):e.indexOf("./")>-1&&(n=a+"/"+e.replace(/\.\//g,"")),n}function m(e,t){for(var n=[],i=0;i<e.length;i++){var a=e[i],o=a.indexOf("./")>-1?g(a,t):a;if(o.indexOf(".css")>-1)o.indexOf("css!")>-1?styles.push(o.substr(4)):styles.push(o);else{var r=o.indexOf(".js");r>-1&&(o=o.substr(0,r)),n.push(o),d.hasOwnProperty(o)||h({moduleName:o})}}return n}function v(){var e,n=window.location.href,r=[],l=document.currentScript;if(n.indexOf("#")>-1?r=n.split("#"):r.push(n),i=r[0].replace("/index.html","")+"/",l)return e=l.src.replace(i,""),{name:l.getAttribute("name")||e.substr("0",e.indexOf(o.scriptSuffix)),src:e};try{a()}catch(e){var s=(s=(e.stack||e.sourceURL||e.stacktrace||"").split(/[@ ]/g).pop().replace(/(:\d+)?:\d+$/i,"")).replace(new RegExp(i,"g"),"");return{name:(l=t('script[src="'+s+'"]')[0])?l.getAttribute("name"):s.replace(o.scriptSuffix,""),src:s}}}function b(t,n){if(o.log&&console.log("require "+t),t&&"string"==typeof t){if(t.indexOf(".css")>-1)return L(t,n);if(t.indexOf(".html")>-1)return L(t,n);t=[t]}if(n&&"function"!=typeof n)return e.showLog("require第2个参数格式为function","bui.loader.require"),this;try{(function(t,n){var i=[];function a(t,n){t=t||[],d=u.modules;var r=e.array.uniq(t);r.length>1&&r.forEach((function(e,t){var n=d[e];(n&&1==n.isLoaded||n.loaded)&&r.splice(t,1)})),r.forEach((function(t,l){var s=d[t];if(d[t]&&d[t].style&&d[t]&&d[t].style.length&&N(d[t].style),e.array.compare(i,t)||i.unshift(t),s&&s.isLoaded){if(!1===(s&&s.beforeLoad&&s.beforeLoad.call(s,s.depend)))return!1;l==r.length-1&&(n&&n.apply(s),i=[])}else if(s&&s.loaded){if(c(t,l),!1===(d[t].beforeCreate&&d[t].beforeCreate.call(d[t])))return!1;d[t].created&&d[t].created.call(d[t])}else E(t,(function(){var e=d[t];if(!1===(e&&e.beforeCreate&&e.beforeCreate.call(d[t])))return!1;e&&e.style&&e.style.length&&N(e.style),e&&e.created&&e.created.call(d[t]),c(t,l)}),(function(){l==r.length-1&&(n&&n.apply(null),i=[])}));function c(e,t){var i=d[e];return i&&(i.isDefined=!0),i.id=s?s.id:"",i.props=s?s.props:{},!1!==(i&&i.beforeLoad&&i.beforeLoad.call(i,i.depend))&&(i&&i.depend&&i.depend.length?(o.log&&console.warn(i.moduleName+" depend:"),o.log&&console.log(i.depend),void a(i.depend,n)):void(t==r.length-1&&n&&n.apply(i)))}}))}a(t,(function(){if(function(e){var t=!0,n=e||[];if(d=u.modules,n.length){let e=0;for(;e<n.length;e++){let a=n[e];var i=d[a];if(i&&!1===i.isDefined)return t=!1,o.log&&console.warn("check defined false:"+i.moduleName),o.log&&console.warn("wait modules:"),o.log&&console.warn(n),t}}else for(var a in d)if(d[a]&&!1===d[a].isDefined)return t=!1,o.log&&console.warn("check defined false:"+i.moduleName),t;return t}(i)){var a=[];t.forEach((function(i,o){p(i,{params:e.history.getParams("url")}),y(i),a.push(d[i]&&d[i].exports),o===t.length-1&&n&&n.apply(f,a||[])}))}}))})(t=t.map((function(t,n){return e.unit.resolvePath(t)})),n)}catch(t){e.showLog(t,"bui.loader.require")}return this}function y(t){d=u.modules;var n="string"==typeof t?d[t]||{}:t,i=n.depend||[],a=null,r=[];n.dependExports=[];try{if(i.length)for(var l=0;l<i.length;l++){var s=i[l],c=d[s];c.isLoaded?r[l]=c.exports:r[l]=y(c)||c.exports,c.exports=r[l],n.dependExports.push(r[l]),c.isLoaded=!0}a=n.isLoaded&&!n.isComponent?n.exports:n.loaded&&n.loaded.apply(n,r),n.exports=a||d[n.moduleName]&&d[n.moduleName].exports,n.isLoaded=!0,B(n.moduleName,n,n.exports),o.log&&console.log("execute "+n.moduleName)}catch(t){e.showLog(t,"bui.loader.execute")}return a}function w(n){var i=t.extend(!0,{id:"",cacheHtml:!1,cache:!1,url:"",script:"",param:null,template:null,beforeLoad:null,loaded:null},e.config.loader.load,n);if(i.id){if(i.url){if(!1===("function"==typeof i.beforeLoad?i.beforeLoad.call(f):i.beforeLoad))return this;var a=function(e){var t=d,n={},i=e&&e.indexOf(".html");i>-1?(n.url=e,n.module=e.substr(0,i)):(n.url=t[e]&&t[e].template||e+".html",n.module=e);return n}(i.url);if(i.script){var o=i.script.indexOf(".js");a.module=i.script.substr(0,o)}var r="string"==typeof i.id&&(i.id.indexOf("#")>-1||i.id.indexOf(".")>-1)?i.id.substr(1):i.id;i.id=r,i.name=a.module,i.url=a.url,h({id:r,moduleName:a.module,props:i.param}),e.history.getLast().currentComponent=r,e.history.setComponent({id:i.id,name:i.name,url:i.url,param:i.param||null});var l=h().modules[i.name];if(l&&"function"==typeof l.template){var s=l.template.call(l)||"";return!i.cacheHtml&&e.obj(i.id).html(s),x(i),this}if(i.cacheHtml)return x(i),this;if("function"==typeof a.url){var c=a.url(i)||"";return!i.cacheHtml&&e.obj(i.id).html(c),x(i),this}return L(a.url,(function(t){!i.cacheHtml&&e.obj(i.id).html(t),x(i)}),(function(e){i.onFail&&i.onFail.call(this,a)})),this}e.showLog("url不能为空")}else e.showLog("id不能为空")}function x(t){var n=h().modules[t.name];if(!1===(n.beforeLoad&&n.beforeLoad.call(n,n.depend)))return!1;if(p(t.name,{id:t.id,props:t.param||null,isComponent:!0}),n.isLoaded&&"function"==typeof n.loaded&&!t.cache){n.id=t.id,n.exports=n.loaded&&n.loaded.call(n,n.exports)||n.exports;var i={id:t.id,name:t.name,url:t.url,param:t.param||null,exports:n.exports||{}};return e.history.setComponent(i),window.store&&window.store.$mount&&window.store.$mount(t.id),t.loaded&&t.loaded.call(n,n.exports),B(t.id,i),f}e.checkLoad(t.name);b(t.name,(function(i){var a={id:t.id,name:t.name,url:t.url,param:t.param||null,exports:i||{}};e.history.setComponent(a),window.store&&window.store.$mount&&window.store.$mount(t.id),t.loaded&&t.loaded.call(n,i),B(t.id,a)}))}function k(n){var i=t.extend(!0,{id:"",isSelf:!0,deepComponent:o.deepComponent,cache:!1,cacheHtml:!1,delay:!0,param:null,beforeLoad:null,loaded:null,compiled:null},e.config.loader.component,n),a=null;a=""===i.id?e.$(o.componentTag):i.isSelf?e.$(i.id):e.$(i.id).find(o.componentTag);var r=[],l=[],s=[],c=[],u=h().modules;for(let n=0;n<a.length;n++){let o=a[n];var d=e.guid();!o.id&&o.setAttribute("id",d);var f=e.unit.getAttributes(o),p=f.parentId=i&&i.id||e.history.getLast().id||"bui-page",g=e.$(p).parents("component"),m=i.isSelf?g[0]&&g[0].id:i.id;"array"===e.typeof(p)?m=i.isSelf?g&&g[0].id:p[0].id:"object"==typeof f.parentId&&e.typeof(f.parentId).indexOf("element")>-1&&(m=i.isSelf?g[0]&&g[0].id:p.id);var v=m&&e.history.getComponent(m,"name");if(v)f.parentId=m,f.parentName=v;else{var b=e.history.getLast();f.parentId=b.id,f.parentName=b.name}var y=f.name||o.getAttribute("name"),x="true"===f.rendered||i.cacheHtml;if(y&&(!f.delay||!i.delay)){f=t.extend(!0,{},f,i.param);var k=u[y],T=o.innerHTML,O=k&&"string"==typeof k.template?k.template:y+".html",C=k&&k.script?k.script:y+".js";O=O||y+".html",k&&"function"==typeof k.template?r.push({id:o.id,el:o,name:y,cacheHtml:x,cache:i.cache,deepComponent:i.deepComponent,template:k.template||"",url:O,srcript:C,slot:T,param:f}):(s.push(O),c.push(C),l.push({id:o.id,el:o,name:y,cacheHtml:x,cache:i.cache,deepComponent:i.deepComponent,url:O,srcript:C,slot:T,param:f}))}}return r.length&&(r.forEach((function(e,t){w({id:e.id,url:e.url,param:e.param||null,template:e.template,cacheHtml:e.cacheHtml,cache:e.cache,beforeLoad:i.beforeLoad})})),i.data=r,I(i)),l.length?(j(e.array.merge(s,c),(function(e){!function t(n){var a=l[n];return n==l.length?(i.data=l,I(i),this):a?(a.template=e[n],void w({id:a.id,url:a.url,param:a.param||null,cacheHtml:a.cacheHtml,cache:a.cache,beforeLoad:i.beforeLoad,loaded:function(e){t(n+1)},onFail:function(){t(n+1)}})):this}(0)})),this):(i.compiled&&i.compiled(i.data),B("componentcompiled",i.data),!1)}function T(e){return k(t.extend(!0,{id:"",isSelf:!1,deepComponent:o.deepComponent,cache:!1,cacheHtml:!1,beforeLoad:null,loaded:null,compiled:null},e)),this}function I(t){for(let i=0;i<t.data.length;i++){let a=t.data[i];new RegExp(`<${o.viewTag}.+name=`,"gi").test(a.template)&&C({id:a.id});var n=new RegExp(`<${o.componentTag}.+name=`,"gi");new RegExp(`<${o.componentTag}.+name="${a.name}"`,"gi").test(a.template)?e.showLog(`请检查代码, <${o.componentTag} name="${a.name}"></${o.componentTag}>的模板里面存在循环嵌套`):(t.deepComponent&&n.test(a.template)&&T({id:a.id}),t.loaded&&t.loaded(a),B("componentloaded",a))}t.compiled&&t.compiled(t.data),B("componentcompiled",t.data)}function O(n){for(let l=0;l<n.data.length;l++){let s=n.data[l];if(!s.cacheHtml){s.el.innerHTML=s.template;var i=new RegExp(`<${o.componentTag}.+name`,"gi");new RegExp(`<${o.componentTag}.+name="${s.name}"`,"gi");i.test(s.template)&&T({id:s.id});var a=new RegExp(`<${o.viewTag}.+name="${s.name}"`,"gi"),r=new RegExp(`<${o.viewTag}.+name="${s.name}"`,"gi");if(r.test(s.template)){e.showLog(`请检查代码, <${o.viewTag} name="${s.name}"></${o.viewTag}>的模板里面存在循环嵌套`);continue}n.deepView&&a.test(s.template)&&!r.test(s.template)&&C({id:t(s.el)})}n.loaded&&n.loaded(s),B("viewloaded",s)}n.compiled&&n.compiled(n.data),B("viewcompiled",n.data)}function C(e){return S(t.extend(!0,{id:"",isSelf:!1,deepView:o.deepView,loaded:null,compiled:null},e)),this}function S(n){var i=t.extend(!0,{id:"",isSelf:!0,deepView:o.deepView,loaded:null,compiled:null},n),a=null;a=""===i.id?e.$(o.viewTag):i.isSelf?e.$(i.id):e.$(i.id).find(o.viewTag);var r=[],l=[],s=loader.map().modules;for(let t=0;t<a.length;t++){let n=a[t];var c=n.getAttribute("name"),u=n.getAttribute("delay"),d=s[c],f="true"===n.getAttribute("rendered"),h=e.guid();if(!n.id&&n.setAttribute("id",h),"true"!==u){var p=n.innerHTML,g=d&&d.template?d.template:c+".html";d&&"function"==typeof d.template?l.push({id:n.id,el:n,name:c,cacheHtml:f,template:d.template.call(d)||"",url:g,slot:p}):r.push({id:n.id,el:n,name:c,cacheHtml:f,url:g,slot:p})}}return l.length&&(l.forEach((function(e,t){e.el.innerHTML=e.template,window.store&&window.store.$mount&&window.store.$mount(i.id)})),i.data=l,O(i)),function e(t){if(t==r.length)return i.data=r,void O(i);r[t]&&P(r[t].url,(function(n){r[t].template=n,e(t+1)}),(function(n){r[t].template="",e(t+1)}))}(0),this}function L(n,i,a){return new Promise((function(o,r){if("string"==typeof n)(n=e.unit.resolvePath(n)).indexOf(".css")>-1?(i&&i(n),$(n).then((function(e){o(n)}))):n.indexOf(".html")>-1||n.indexOf(".htm")>-1?P(n).then((function(e){if("function"!=typeof i)return t(i).html(e),a&&a(e),void o(e);i&&i(e),o(e)}),(function(e){a&&a(e),r(e)})):E(n).then((function(e){i&&i(e),o(e)}),(function(e){a&&a(e),r(e)}));else if(n&&"array"===e.typeof(n)){var l=n.map((function(t,n){return(t=e.unit.resolvePath(t)).indexOf(".css")>-1?$(t):t.indexOf(".html")>-1||t.indexOf(".htm")>-1?P(t):E(t)}));Promise.all(l).then((function(e){i&&i(e),o(e)}),(function(e){a&&a(e),r(e)}))}}))}function j(t,n,i){return new Promise((function(a,o){if("string"==typeof t)L(t,n,i);else if(t&&"array"===e.typeof(t)){var r=[];!function i(o){if(o==t.length)return n&&n(r),void a(r);var l=e.unit.resolvePath(t[o]);return l.indexOf(".css")>-1?$(l,(function(e){r.push(e),i(o+1)})):l.indexOf(".html")>-1||l.indexOf(".htm")>-1?P(l,(function(e){r.push(e),i(o+1)}),(function(e){i(o+1)})):E(l,(function(e){r.push(e),i(o+1)}),(function(e){i(o+1)}))}(0)}}))}function P(t,n,i){return new Promise((function(a,r){var l="function"==typeof n;if(t=e.hasRouter?t:e.unit.relativePath(t,o.relativePath),c.hasOwnProperty(t))return l?n&&n.call(f,c[t],200):"string"==typeof n&&e.$(n).html(c[t]),a(c[t],200),this;"string"==typeof t&&bui.ajax({baseUrl:o.baseUrl,url:t,dataType:"html",contentType:"text/html;charset=UTF-8",mimeType:"html",processData:!1,needNative:o.needNative,cache:o.cache,data:null,success:function(o,r,s){c[t]=o,l?n&&n.call(f,o,r,s):"string"==typeof n&&(e.$(n).html(o),i&&i.call(f,o,r,s)),a(o,r)},error:function(e,t,n){l&&i&&i.call(f,e,t,n),r(e,t,n)}})}))}function E(n,i,a){return new Promise((function(r,s){var c;if(d=u.modules,void 0===n||""==n)return a&&a.call(this,n),s(n),this;if(n in d)c=n,n=d[n].script||c+o.scriptSuffix;else{var f=n.indexOf(o.scriptSuffix);f>-1?c=(n=n).substr(0,f):(c=n,n+=o.scriptSuffix)}n=e.hasRouter?n:e.unit.relativePath(n,o.relativePath);var h=document.createElement("script")||{},p=o.cache?"":"?t="+(new Date).getTime(),g=n.indexOf("http://")>-1||n.indexOf("https://")>-1;h.type="text/javascript",h.async=!1,h.src=g?n+p:u.baseUrl+n+p,h.setAttribute("name",c),h.onload=function(){o.log&&console.log("create "+n),i&&i(n),r(n)},h.onerror=function(e){o.log&&console.log("createError "+n),a&&a(n),s(n)};var m=e.array.index(l,n);return d[c]&&d[c].isDefined?(i&&i(n),r(n)):(m>-1&&d.hasOwnProperty(c)&&t('script[name="'+c+'"]').remove(),m>-1&&!d.hasOwnProperty(c)&&t('script[name="'+c+'"]').remove(),document.body&&document.body.appendChild(h),o.cache&&l.push(n)),h=null,this}))}function N(t){return new Promise((function(n,i){t.length;if("array"===e.typeof(t)){var a=t.map((function(e){return $(e)}));return Promise.all(a)}return $(t)}))}function $(t,n){return new Promise((function(i,a){if("string"==typeof t){if(e.array.index(s,t)<0){var r=e.hasRouter?t:e.unit.relativePath(t,o.relativePath),l=document.createElement("link")||{};l.href=r+(o.cache?"":"?t="+(new Date).getTime()),l.setAttribute("rel","stylesheet"),l.setAttribute("type","text/css"),document.head&&document.head.appendChild(l),l=null,s.push(t)}i(t,n)}else e.showLog(t+"的格式不正确")}))}function B(t){f.self=this==window||this==f?null:this;var n=e.history.getLast("id");arguments[0]=n+"-"+t,r.trigger.apply(f,arguments)}return f},window.loader=e.loader(),e.define=loader.define,e.require=loader.require,e.map=loader.map,e.import=loader.import,e.checkLoad=loader.checkLoad,e.checkDefine=loader.checkDefine,e.checkImport=loader.checkImport}(window.bui||{},window.libs),function(e,t){e.toggle=function(n){if("string"==typeof n){var i=n||"";(n={}).id=i}var a,o,r={show:function(t,n){if(c)return;if(d=e.objId(l.id),!f&&!h)return!1;f=!1,"function"==typeof t?(t=t,n=n||o||""):(n=t||o||"",t=null);d[0]&&"none"==d[0].style.display&&d.css("display",s);d.addClass("animated "+n),"showIn"==n||"showOut"==n||"none"==n?(l.revert&&d.removeClass("animated "+n),t&&t.call(r,this),p=!0,f=!0):d.one("webkitAnimationEnd",(function(){try{!p&&d.css("display",s),l.revert&&d.removeClass("animated "+n),t&&t.call(r,this),p=!0,f=!0}catch(t){e.showLog(t,"toggle show method")}}));return this},hide:function(t,n){if(c)return;if(d=e.objId(l.id),!f&&!h)return;h=!1,"function"==typeof t?(t=t,n=n||a||""):(n=t||a||"",t=null);d.css("display",s).addClass("animated "+n),"showIn"==n||"showOut"==n||"none"==n?(d.css("display","none"),l.revert&&d.removeClass("animated "+n),t&&t.call(r,this),p=!1,h=!0):d.one("webkitAnimationEnd",(function(){try{d.css("display","none"),l.revert&&d.removeClass("animated "+n),t&&t.call(r,this),p=!1,h=!0}catch(t){e.showLog(t,"toggle hide method")}}));return this},remove:function(){return d.remove(),this},isShow:function(){return p},destroy:function(e){e=1==e;d&&(d.off(),e&&d.remove());c=!0},widget:function(t){return e.widget.call({},t)},option:function(t,n){return e.option.call(r,t,n)},config:l,init:g},l=r.config=t.extend(!0,{},{id:"",effect:"fadeIn",useBox:!1,revert:!0,inOrder:!1},n),s=l.useBox?"-webkit-box":"block",c=!1,u={show:["fadeIn","fadeInLeft","fadeInRight","fadeInDown","fadeInUp","fadeInLeftBig","fadeInRightBig","fadeInUpBig","fadeInDownBig","zoomIn","bounceIn","rotateIn","rollIn","flipInX","flipInY","lightSpeedIn","showIn","slideInRight","slideInLeft","coverInLeft","coverInRight","zoomSlideInLeft","zoomSlideInRight","pushInLeft","pushInRight"],hide:["fadeOut","fadeOutLeft","fadeOutRight","fadeOutUp","fadeOutDown","fadeOutLeftBig","fadeOutRightBig","fadeOutDownBig","fadeOutUpBig","zoomOut","bounceOut","rotateOut","rollOut","flipOutX","flipOutY","lightSpeedOut","showOut","slideOutRight","slideOutLeft","coverOutLeft","coverOutRight","zoomSlideOutLeft","zoomSlideOutRight","pushOutLeft","pushOutRight"],hideInOrder:["fadeOut","fadeOutRight","fadeOutLeft","fadeOutDown","fadeOutUp","fadeOutRightBig","fadeOutLeftBig","fadeOutUpBig","fadeOutDownBig","zoomOut","bounceOut","rotateOut","rollOut","flipOutX","flipOutY","lightSpeedOut","showOut","slideOutLeft","slideOutRight","coverOutRight","coverOutLeft","zoomSlideOutRight","zoomSlideOutLeft","pushOutRight","pushOutLeft"]},d=null,f=!0,h=!0,p=!1;function g(t){if(c=!1,(t=t||l).id){d=e.objId(t.id),l=r.config=t,d.attr("class")||"";var n=t.effect,i=t.inOrder?e.array.index(u.hideInOrder,n):e.array.index(u.hide,n),s=n&&(e.array.index(u.show,n)>-1?e.array.index(u.show,n):i);return p=!(d[0]&&"none"==d[0].style.display||"none"==d.css("display")),s<0?(o=u.show[0],a=t.inOrder?u.hideInOrder[0]:u.hide[0]):(o=u.show[s],a=t.inOrder?u.hideInOrder[s]:u.hide[s]),this}e.showLog("toggle id不能为空","bui.toggle")}return l.id&&g(l),r}}(window.bui||{},window.libs),function(e,t){e.unit={},e.unit.remToPx=function(e){var t=window&&window.viewport&&window.viewport.fontSize||100;return e=(parseFloat(e)*t).toFixed(2)},e.unit.pxToRem=function(e){var t=window&&window.viewport&&window.viewport.fontSize||100;return e=(parseFloat(e)/t).toFixed(2)},e.unit.pxToRemZoom=function(e){return e=(parseFloat(e)/100).toFixed(2)},e.unit.debounce=function(e,t,n){var i;return function(){var a=n||this,o=arguments,r=function(){i=null,e.apply(a,o)};clearTimeout(i),i=setTimeout(r,t)}},e.unit.throttle=function(e,t,n){var i,a;return t||(t=250),function(){var o=n||this,r=+new Date,l=arguments;i&&r<i+t?(clearTimeout(a),a=setTimeout((function(){i=r,e.apply(o,l)}),t)):(i=r,e.apply(o,l))}},e.unit.startWithCss=function(e){var t=new RegExp("^\\.|^#");return"string"==typeof e&&t.test(e)},e.unit.startWithStr=function(e,t){var n=new RegExp("^"+t);return"string"==typeof e&&n.test(e)},e.unit.startWithId=function(e){var t=new RegExp("^#");return"string"==typeof e&&t.test(e)},e.unit.startWithClass=function(e){var t=new RegExp("^\\.");return"string"==typeof e&&t.test(e)},e.unit.endWithImage=function(e){var t=new RegExp("(.png|.jpg|.gif)$");return"string"==typeof e&&t.test(e)},e.unit.tel=function(t){var n,i="tel:";return 0==(t=String(t)).indexOf("+")&&(i="wtai://wp/mc;"),n=t,window.location.href=i+n,e},e.unit.sms=function(t,n){var i=navigator.userAgent,a=/(iPhone|iPad|iOS)/i.test(i)?"&":"?";return window.location.href="sms:"+t+a+"body="+n,e},e.unit.mailto=function(t){return"string"==typeof(t="email"in t?t:{}).email&&t.email.indexOf("@")>0?window.location.href="mailto:"+t.email+"?subject="+(t.subject||"")+"&body="+(t.body||"")+"&cc="+(t.cc||""):e.showLog(email+"格式不正确"),e},e.unit.openExtral=function(t){var n=[],i="";if((t=String(t)).indexOf("mailto:")>=0)if((i=(n=t.split("mailto:"))[1]).indexOf("?")>-1){var a=i.split("?"),o=e.unit.keyStringToObject(a[1]);o.email=a[0],e.unit.mailto(o)}else e.unit.mailto({email:i});if(t.indexOf("tel:")>=0&&(n=t.split("tel:"),i=parseInt(n[1]),e.unit.tel(i)),t.indexOf("sms:")>=0)if(i=(n=t.split("sms:"))[1],t.indexOf("=")>=0){var r=t.split("=")[1];e.unit.sms(i,r)}else e.unit.sms(i);return e},e.unit.objectToKeyString=function(e,t){var n="";for(var i in e){n+="&"+i+"="+(t?encodeURIComponent(e[i]):e[i])}return n.substr(1)},e.unit.keyStringToObject=function(t,n){var i,a={},o=[];try{for(o=t.split("&"),i=0;i<o.length;i++){var r=n?decodeURIComponent(o[i].split("=")[1]):o[i].split("=")[1];a[o[i].split("=")[0]]=r}}catch(t){e.showLog(t)}return a},e.unit.checkTargetInclude=function(e,n){var i=n,a=[];if(i.indexOf(",")>-1){var o,r=(a=i.split(",")).length;for(o=0;o<r;o++){var l=a[o];l.indexOf(".")>-1&&(a[o]=l.substr(1))}}else i.indexOf(".")>-1?a[0]=i.substr(1):a[0]=i;var s,c=a.length;for(s=0;s<c;s++)if(t(e).hasClass(a[s])||t(e).closest("."+a[s]).length)return!0;return!1},e.unit.jsonToString=function(t){return"object"==typeof t?function(t){var n;if("object"===e.typeof(t)){for(var i in t)t[i]=a(t,i);n=JSON.stringify(t)}else"array"===e.typeof(t)?(t.forEach((function(e,n){t[n]=a(t,n)})),n=JSON.stringify(t)):n=t;function a(t,n){var i=t[n];return i&&"object"===e.typeof(i)?t[n]=function(t){if(t&&"object"===e.typeof(t)){for(var n in t){var i=t[n];"object"==typeof i&&(t[n]=JSON.stringify(i))}return t}}(i):i&&"array"===e.typeof(i)?t[n]=function(t){if(t&&"array"===e.typeof(t))return t.forEach((function(e,n){"object"==typeof e&&(t[n]=JSON.stringify(e))})),t}(i):t[n]=i,t[n]}return n}(t):t},e.unit.stringToJson=function(t){return t&&function t(n){var i,a;try{if(i="object"==typeof n?n:JSON.parse(n),"array"===e.typeof(i))i.forEach((function(e,n){i[n]=t(e)}));else if("object"===e.typeof(i))for(var o in i){var r=i[o];i[o]=t(r)}a=i}catch(e){a=n}return a}(t)},e.unit.stringToArray=function(t){var n=e.typeof(t);return"array"===n?t:"string"===n&&t.indexOf(",")>-1?t.split(","):[t]},e.unit.setKeyValue=function(e,t,n){var i=e&&e.indexOf(".")>-1?e.split("."):[e];return function e(n,a){if(i.length)return e(i.shift(),a[n]||{});a[n]=t}(i.shift(),n)},e.unit.getKeyValue=function(e,t){var n=e&&e.indexOf(".")>-1?e.split("."):[e];return function e(t,i){var a=i[t];if(a&&"string"==typeof a&&a.indexOf("{")>-1&&a.indexOf("}")>-1)try{i[t]=JSON.parse(a)}catch(e){i[t]=a}return void 0!==a&&n.length?e(n.shift(),a):a}(n.shift(),t)},e.unit.getKeyObj=function(e,t){var n=e&&e.indexOf(".")>-1?e.split("."):[e];return function e(t,i){var a=i[t];return!a instanceof Array&&a instanceof Object?e(n.shift(),a):a}(n.shift(),t)},e.unit.getKeyName=function(e){var t=field&&field.indexOf(".")>-1?field.split("."):[field];return function e(n,i){var a=i[n];return!a instanceof Array&&a instanceof Object?e(t.shift(),a):a}(t.shift(),e)},e.unit.delKey=function(e,t){var n=e&&e.indexOf(".")>-1?e.split("."):[e];return function e(i,a){return n.length?e(n.shift(),a[i]):(delete a[i],t)}(n.shift(),t)},e.unit.calcHeight=function(e,n){var i=t(e);i[0]&&(i[0].style.height="calc(100% - "+n+")")},e.unit.resolvePath=function(t){if(!e.hasRouter)return t;var n=t=t||"",i=(router&&router.history&&router.history.getLast()||{url:n}).url||"";if("function"==typeof i)return n;var a=i.lastIndexOf("/"),o=i.substr(0,a);return t.indexOf("../")>-1?(t=t.replace(/\..\//g,(function(e){var t=o.lastIndexOf("/");return o=o.substr(0,t),""})),n=o?o+"/"+t:t):t.indexOf("./")>-1&&(n=o+"/"+t.replace(/\.\//g,"")),n},e.unit.filterField=function(t,n){var i={};if("object"==typeof n){var a="object"===e.typeof(t),o="object"===e.typeof(n),r="array"===e.typeof(t),l="array"===e.typeof(n);if(a){if(o)for(let e in n)i[e]=n[e]?t[n[e]]:t[e];else l&&n.forEach((function(e,n){i[e]=t[e]}));return i}return r?(i=[],l?t.forEach((function(e,t){let a={};n.forEach((function(t,n){a[t]=e[t]})),i.push(a)})):o&&t.forEach((function(e,t){let a={};for(let t in n)a[t]=n[t]?e[n[t]]:e[t];i.push(a)})),i):void 0}},e.unit.fixZero=function(e){return e<10?"0"+e:e},e.unit.getAttributes=function(t){if("object"!=typeof t)return null;var n={},i=/\{.+\}$/g,a=/\[.+\]$/g;return t.attributes&&Object.keys(t.attributes).forEach((function(o,r){var l=t.attributes[o],s=l.value;if(i.test(s)||a.test(s))try{s=JSON.parse(s)}catch(t){s=s,e.showLog(t)}n[l.name]=s})),n},e.unit.resolvePathname=function(e,t){t=t||0;var n=e.lastIndexOf("/"),i=e.substring(t,n);return i.indexOf("/")>-1?i.split("/"):[i]},e.unit.relativeUrl=function(e,t){var n=[];return t.length>=e.length?t.forEach((function(t,i){let a=e[i];a&&t===a||(a&&t!==a?(n.unshift(".."),n.push(t)):n.push(t))})):e.forEach((function(e,i){let a=t[i];a&&e===a||(a&&e!==a?(n.unshift(".."),n.push(a)):n.unshift(".."))})),n},e.unit.relativePath=function(t,n){n=n||"pages";var i=window.self.location.href;if(i.indexOf("source.html?url=")>-1&&i.indexOf("code=")>-1)return t;if(0===t.indexOf("http://")||0===t.indexOf("https://"))return t;var a=window.location.href,o=a.indexOf(n),r=t&&t.indexOf("/")>-1?t.split("/"):[t],l=[];if(o<0){var s=window.location.pathname.toLocaleLowerCase(),c=s.indexOf("www"),u=s.indexOf("src"),d=s.indexOf("dist");if(c>-1){let t=e.unit.resolvePathname(s,c+4);l=e.unit.relativeUrl(t,r)}else if(d>-1){let t=e.unit.resolvePathname(s,d+5);l=e.unit.relativeUrl(t,r)}else{if(!(u>-1))return 0==t.indexOf("/")?t.replace("/",""):t;{let t=e.unit.resolvePathname(s,u+4);l=e.unit.relativeUrl(t,r)}}}else{let t=e.unit.resolvePathname(a,o);l=e.unit.relativeUrl(t,r)}return l.join("/")},e.unit.between=function(t,n,i){var a=!0,o=new Date;if(n=n||0,i=i||e.date.convert(o.getFullYear+"/12/31").getTime(),"number"==typeof t)(t<n||t>i)&&(a=!1);else{n||e.showLog("bui.unit.between 第2个参数为最小日期");try{n=e.date.convert(n).getTime(),i=e.date.convert(i).getTime(),((t=e.date.convert(t).getTime())<n||t>i)&&(a=!1)}catch(t){e.showLog("bui.unit.between 用来检测数字或者日期,请检查参数格式是否正确")}}return a},e.unit.numberunit=function(e){var t=+e,n=t;return t>1e4&&(n=parseFloat(t/1e4).toFixed(1)+"万"),n}}(window.bui||{},window.libs),function(e,t){var n,i,a,o;e.history=(a=[],o={get:function(t,n){if(void 0===t)return a;{let i=n||"name";return e.array.get(a,t,i)}},getLast:function(e){var t=a.length-1,n=a[t]||{};return e?n[e]:n},getPrev:function(e){var t=a.length-2,n=a[t]||{};return e?n[e]:n},getParams:function(e){var t=this.getLast(),n={};switch(e){case"page":n=this.getPageParam()||n;break;case"part":case"component":n=this.getComponentParam()||n;break;case"url":n=t.param||bui.getUrlParams();break;default:n=this.getComponentParam(e)||this.getPageParam(e)||t.param||bui.getUrlParams()}return n},setComponent:function(e){return this.getLast().component[e.id]=e,e},getComponentParam:function(e){var t=this.getLast(),n=e||t.currentComponent;return n&&t.component[n]&&t.component[n].param||null},getComponent:function(t,n){if(void 0!==t){n=n||"exports";var i=this.getLast();return i.component[t]&&i.component[t][n]||null}e.showLog("必须传component id才能获取实例")},getParentComponent:function(){var e=this.getComponentParam();return e&&e.parentId&&this.getComponent(e.parentId)||this.getLast("exports")},getParentParams:function(){var e=this.getComponentParam();return this.getParams(e.parentId)||this.getLast("param")||null},getPage:function(t,n){if(void 0!==t){n=n||"exports";var i=this.getLast(),a=null,o=i.page;if(o.hasOwnProperty(t))a=o[t]&&o[t][n]||{};else if(t){var r=Object.keys(o);for(let e=0;e<r.length;e++){let i=o[r[e]]||{};if(i.name===t)return i[n]}}else{var l=i.currentPage;a=o[l]&&o[l][n]||{}}return a}e.showLog("必须传page id 或者 模块名才能获取实例")},getPageDialog:function(t){if(void 0!==t){var n=this.getLast();return n.page[t]&&n.page[t].dialog||null}e.showLog("必须传page id才能获取对话框信息")},setPage:function(e){var n=this.getLast();if("object"!=typeof e)return e;if(e&&e.hasOwnProperty("id")){var i=t.extend(!0,{},n.page[e.id],e);return n.page[e.id]=i,e}},getPageParam:function(e){var t=this.getLast(),n=e||t.currentPage;return n&&t.page[n]&&t.page[n].param||null},add:function(n){var i=t.extend(!0,{id:"",name:"",url:"",replace:!1,syncHistory:!0,component:{},param:{},part:{},page:{},toggle:null,effect:"push"},n),o=a;if(n.toggle){var r=t.extend(!0,{},i,n);i.toggle=null,o.push(r)}else o.push(i);var l=window.location.origin+window.location.pathname+"#"+i.name,s=e.setUrlParams(l,i.param);return i.syncHistory&&"pushState"in window.history&&window.history.pushState(i,null,s),o},replace:function(n){n=t.extend(!0,{id:"",name:"",url:"",replace:!1,syncHistory:!0,param:{},part:{},page:{},toggle:null,effect:"push"},opts);var i=a,o=i.length-1,r=window.location.origin+window.location.pathname+"#"+n.name,l=e.setUrlParams(r,n.param);if(o>-1){if(opts.toggle){var s=t.extend(!0,{},n,opts);n.toggle=null,i.splice(o,1,s)}else i.splice(o,1,n);n.syncHistory&&"replaceState"in window.history&&window.history.replaceState(n,null,l)}return i},refresh:function(){if(e.hasRouter){var n=o.getLast(),i=loader.get(n.name);loader.import(n.url,(function(a){t("#"+n.id).html(a),e.config.init.auto&&e.init(),router.config.needView&&loader.views(),i.loaded(),router.config.needComponent&&loader.components()}))}else window.location.reload(!0)},removeNext:function(t){var n=a,i=t.index;if(parseInt(i)<0)return e.showLog("index 必须大于或者等于0"),n;var o=n.length-i;n.splice(i,o);var r=this.getLast(),l=window.location.origin+window.location.pathname+"#"+r.name,s=e.setUrlParams(l,r.param);return t.syncHistory&&"replaceState"in window.history&&window.history.replaceState(r.param,null,s),n},removeLast:function(e){var t=a.length-1;return this.removeNext({index:t,syncHistory:!1!==e})},check:function(t){var n=a;return e.array.compare(n,t,"name")||e.array.compare(n,t,"url")||e.array.compare(n,t,"id")},checkComponent:function(t){var n=this.getLast(),i=Object.keys(n.component);return e.array.compare(i,t)},checkPage:function(e,t){var n=this.getLast(),i=Object.keys(n.page);for(let t=0;t<i.length;t++){let a=i[t],o=n.page[a];if(o.name===e||o.id===e)return!0}return!1},epmty:function(e){return a=[]}},n=function(t){var n=(t=t&&t.replace(window.location.origin,"")||window.location.pathname).indexOf(".html"),i=t.indexOf("?"),a="",o="",r="",l=null,s=loader.map().modules;if(i>-1){var c=t.substr(i+1);l=e.unit.keyStringToObject(c,!0)}return n>-1?(o=(a=0==t.indexOf("/")?t.substr(1,n-1):t.substr(0,n-1))+".html",r=a+".js"):(o=s[a=t]&&s[a].template||"",r=s[a]&&s[a].script||""),{pid:a,name:a,url:o,src:r,param:l}}(window.location.href),i=e.guid(),t(document).ready((function(){document.body.setAttribute("id",i)})),a.push({id:e.guid(),pid:n.pid,name:n.pid,url:n.url,src:n.src,param:n.param,page:{},component:{}}),o)}(window.bui||{},window.libs),function(e,t){e.router=function(n){var i,a,o,r=t.extend({},{id:"",progress:!1,syncHistory:!0,autoInit:!0,firstAnimate:!1,path:"",indexModule:{moduleName:"main",template:"pages/main/main.html",script:"pages/main/main.js"},repairPath:!0,errorPage:"",hash:!1,cache:!0,reloadCache:!1,reload:!1,swipe:!1,swipeBack:!1,distance:100,startDistance:5,swipeDistance:50,onSwipeRight:null,onSwipeLeft:null,onSwipeUp:null,onSwipeDown:null,onBeforeSwipeRight:null,onSwipeCancel:null,pageMove:!0,needNative:!1,needView:!1,needComponent:!0,useScroll:"main,.bui-tab-main>ul>li,.bui-dialog-main,.bui-scroll,.bui-scroll-x",beforeBack:null,beforeLoad:null,loaded:null,store:null,width:0,height:0,async:!0,effect:"push",hashPrefix:"#",scriptSuffix:".js",pageSuffix:".html"},e.config.router,n),l=null,s=this,c=null,u=null,d=null,f="",h="",p=!0,g=!0,m=!1,v=!1,b={none:{inRight:"showIn",inLeft:"showIn"},fadein:{inRight:"fadeIn",inLeft:"fadeIn"},fadeinslide:{inRight:"fadeInRight",inLeft:"fadeInLeft"},slide:{inRight:"slideInRight",inLeft:"slideInLeft"},push:{inRight:"pushInRight",inLeft:"pushInLeft"},zoom:{inRight:"zoomIn",inLeft:"zoomIn"},cover:{inRight:"coverInRight",inLeft:"coverInLeft"},zoomslide:{inRight:"zoomSlideInRight",inLeft:"zoomSlideInLeft"},fadeinslideback:{inRight:"fadeInLeft",inLeft:"fadeInRight"},slideback:{inRight:"slideInLeft",inLeft:"slideInRight"},pushback:{inRight:"pushInLeft",inLeft:"pushInRight"},coverback:{inRight:"coverInLeft",inLeft:"coverInRight"},zoomslideback:{inRight:"zoomSlideInLeft",inLeft:"zoomSlideInRight"}},y={},w={},x={},k={},T=!1,I={},O={},C=loader.map(r.indexModule),S=e.history.epmty(),L=C.modules,j=e.storage({local:!1});function P(e){var t=window.location.hash||window.location.search,n=window.location.search,i=n&&n.indexOf("?"),a=(e=0!=e,t&&t.indexOf("?")),o=a>-1?t&&t.substr(1,a-1):window.location.hash.substr(1),l=o&&o.indexOf(r.pageSuffix),s=l>-1?o.substr(0,l):o,c=l>-1?o:o+r.pageSuffix,u={};function d(t,n){for(var i=t&&t.substr(n+1),a=i&&i.split("&"),o=0;o<a.length;o++){var r=e?decodeURIComponent(a[o].split("=")[1]):a[o].split("=")[1];u[a[o].split("=")[0]]=r}}return a>-1&&(d(n,i),d(t,a)),{pid:s,url:c,param:u}}function E(n){var i={id:"",url:"",param:{},effect:"",command:"html",path:r.path,repairPath:r.repairPath,firstAnimate:r.firstAnimate,progress:r.progress,reload:r.reload,autoInit:r.autoInit,needView:r.needView,needComponent:r.needComponent,replace:!1,iframe:!1,decode:!1,part:!1,cache:r.cache,callback:null,beforeLoad:r.beforeLoad,loaded:r.loaded},s=t.extend(!0,{},i,n),f=t.Deferred(),g=w.getLast()||null;S[S.length-2];s.url.indexOf("./")>-1&&(s.url=function(e,t){var n=e,i=t.url.lastIndexOf("/"),a=t.url.substr(0,i);e.indexOf("../")>-1?(e=e.replace(/\..\//g,(function(e){var t=a.lastIndexOf("/");return a=a.substr(0,t),""})),n=a?a+"/"+e:e):e.indexOf("./")>-1&&(n=a+"/"+e.replace(/\.\//g,""));return n}(s.url,g)),s.repairPath&&0===s.url.indexOf("/")&&(s.url=s.url.substr(1)),s.path&&(s.path="/"==s.path[s.path.length-1]?s.path:s.path+"/"),s.url=s.url in L||s.iframe||s.url.indexOf("http:")>-1?s.url:s.path+s.url,document.activeElement.blur();var v=null,b={};s.id=(s.id&&s.id.indexOf("#")>-1?s.id.substr(1):s.id)||"";var k=s.replace||s.part?g.id:s.id||e.guid(),C=e.objId(k);if(!s.url)return e.showLog("url 不能为空","bui.router.load"),f.promise();if(s.url=s.decode?decodeURIComponent(s.url):s.url,s.url.indexOf("tel:")>=0||s.url.indexOf("mailto:")>=0||s.url.indexOf("sms:")>=0)return e.unit.openExtral(s.url),f.promise();if(s.url&&s.url.indexOf("?")>-1){var j=s.url.split("?");b=e.unit.keyStringToObject(j[1]),s.url=j[0]}v=t.extend(!0,{},b,s.param),"undefined"==s.url&&(s.url="main"),s.iframe=Boolean(s.iframe)||"true"==v.iframe,1==s.iframe&&(v.iframe=!0);var P=N(s.url),$=P.pid,B=s.iframe?s.url:P.url,H={id:k,pid:$,name:$,url:"function"==typeof B?s.url:B,replace:s.replace,param:v,component:{},page:{},toggle:null,exports:{},effect:n.effect||r.effect,syncHistory:r.syncHistory};s.part?g:H,o&&o.show(),s.progress&&a&&a.show(),loader.map({moduleName:$,id:k});loader.get(H.pid);if(S.length&&s.effect){var q=S.length-1;S[q].effect=s.effect}!m&&!s.part&&!s.replace&&w.add(H),s.replace&&w.replace(H);var U=H,W="function"==typeof s.beforeLoad?s.beforeLoad.call(V,{prevTarget:g,target:H}):s.beforeLoad;if(z.call(V,"loadbefore",{prevTarget:g,target:H}),z.call(V,"beforeload",{prevTarget:g,target:H}),!1===W)return p=!1,this;if(s.part&&(e.history.setComponent({id:k,pid:$,url:B,param:v}),U.currentComponent=k,S.splice(S.length-1,1,U)),s.part||H,x[$])!function(e){X(I.get(e.pid,"template")),e.part||(K(),!m&&J((function(){e.progress&&a&&a.hide()}))),Z(e)}({pid:$,progress:s.progress,part:s.part}),z.call(V,"complete",{prevTarget:g,target:H}),s.loaded&&s.loaded({prevTarget:g,target:H}),s.callback&&s.callback({prevTarget:g,target:H}),r.needComponent&&loader.components();else{if(s.iframe)return function(t){var n=function(t){var n=t.url.indexOf(".html")>-1||0==t.url.indexOf("http")?t.url:t.url+".html",i=t.param?e.setUrlParams(n,t.param):n,a="",o=e.platform.isIos()?'scrolling="no"':"";return a+='<div id="'+t.id+'" class="bui-router-item bui-router-fixiframe" data-page="'+t.pid+'">',a+='<iframe class="bui-router-iframe" src="'+i+'" '+o+' name="'+t.pid+'"></iframe>',a+="</div>"}({id:t.id,pid:t.pid,url:t.url,param:t.param});c&&c.attr("data-main",t.id).append(n),J((function(){s.progress&&a&&a.hide()}))}({id:k,pid:$,url:s.url,param:v}),f.promise();if(s.part)return R(B,(function(t,n,i){e.objId(k)[s.command](t),Y(G),s.cache&&I.add($,{id:k,pid:$,template:t}),o&&o.hide(),s.progress&&a&&a.hide()}),(function(e,t,n){_(B,e),z.call(V,"loadfail",e,t,n)})),f.promise();R(B,(function(e,t,n){if("object"==typeof e)return _(B,e),!1;X(e),s.cache&&I.add($,{id:k,pid:$,template:e}),K(),s.firstAnimate?J((function(){Y(G),s.progress&&a&&a.hide(),O.add($,{id:k,pid:$,param:v})})):(J((function(){s.progress&&a&&a.hide()})),Y(G),O.add($,{id:k,pid:$,param:v}))}),(function(e,t,n){_(B,e),z.call(V,"loadfail",e,t,n)}))}function _(t,n,i,l){if(o&&o.hide(),s.progress&&a&&a.hide(),w.removeLast(),f.reject(t),"object"==typeof n)return e.showLog("找不到页面"+t,"bui.router.load"),r.errorPage&&function(e){!function(e){var t,n=window.location.href,i=(t=(t=n.indexOf(r.hashPrefix))>-1?t:0)>-1?n.substr(0,t):n;E({url:r.errorPage||i,param:{error:e}}),z.call(V,"error",{target:e,status:404})}(e)}(t),!1}function Y(t){m||y[$]?(U.exports=y[$],Z({pid:$}),T&&J(),t&&t(),r.needComponent&&loader.components()):(loader.checkLoad($)?(Z({pid:$}),r.needComponent&&loader.components(),t&&t()):loader.require($,(function(n){try{if(s.firstAnimate&&s.progress&&a&&a.hide(),y[$]=n||null,H.exports=n,f.resolve(n),p||s.firstAnimate||s.replace){var i=loader.get($);i&&i.show&&i.show({type:"firstload",target:H})}t&&t(),s.loaded&&s.loaded({prevTarget:g,target:H}),s.callback&&s.callback({prevTarget:g,target:H}),r.needComponent&&loader.components()}catch(t){e.showLog(t,"bui.router.load"),f.reject()}})),z.call(V,"complete",{prevTarget:g,target:H}))}function K(){var t=(l=e.objId(U.id))&&l.find(".bui-page");t&&t.length&&s.autoInit&&e.init({id:t,height:h})}function J(t){l=e.objId(k),F(),D();try{if(p||m||s.replace||s.part){!s.firstAnimate&&s.progress&&a&&a.hide(),t&&t(),o&&o.hide(),l&&l.css("zIndex",5);var n="pageshow-"+w.getLast().pid;z.call(V,"pageshow",{type:"load",target:w.getLast()}),z.call(V,n,{type:"load",target:w.getLast()})}else u&&u.hide(),d&&d.show((function(){!s.firstAnimate&&s.progress&&a&&a.hide(),t&&t(),l&&l.css("zIndex",5),o&&o.hide();var e=S[S.length-2]||{},n=w.getLast(),i=loader.get(n.pid),r=e&&e.pid&&loader.get(e.pid)||null,c="pageshow-"+n.pid,u="pagehide-"+e.pid;z.call(V,u,{type:"load",target:S[S.length-2]}),z.call(V,c,{type:"load",target:w.getLast()}),z.call(V,"pagehide",{type:"load",target:S[S.length-2]}),z.call(V,"pageshow",{type:"load",target:w.getLast()}),r&&r.hide&&r.hide({type:"load",target:S[S.length-2]}),i&&i.show&&i.show({type:"load",target:w.getLast()})}))}catch(t){e.showLog(t,"bui.router.doAnimate")}}function X(t){var n="";if(V.store&&(t=V.store.compileHtml(t)),s.part)n=A({content:t}),s.id?C.html(n):e.showLog("id 不能为空","router.loadPart");else if(s.replace){var i=w.getLast();C=S.length?e.objId(i.id):c,i.pid=$,i.url=B,i.param=v;e.array.index(S,$,"pid");n=$ in x?I.get($,"template"):A({content:t}),C.html(n).attr("data-page",$)}else m||(n=M({id:k,content:t,pid:$}),c&&c.attr("data-main",k).append(n));return r.needView&&loader.views({compiled:function(){V.store&&!V.store.config.isPublic&&V.store.config.needCompile&&V.store.compile("#"+k)}}),!V.store||r.needView||V.store.config.isPublic||V.store.config.needCompile&&V.store.compile("#"+k),n}function Z(e){var t=w.getLast(),n=L[e.pid]&&L[e.pid]||{},i=n.loaded,l=i&&i.apply(n,n.dependExports)||n.exports;y[e.pid]=l||null,n.exports=l,t.exports=l,m&&z.call(V,"refresh",{prevTarget:g,target:t}),o&&o.hide(),r.progress&&a&&a.hide(),f.resolve(l),m=!1,p=!1}function G(){var e=S[S.length-2]||null,t=w.getLast();p&&!s.part&&(z.call(V,"firstload",{prevTarget:e,target:t}),p=!1),s.part?z.call(V,"loadpart",{prevTarget:e,target:t}):z.call(V,"load",{prevTarget:e,target:t})}return f.promise()}function N(e){var t="",n=e;C=loader.map(),L=C.modules;var i=n.indexOf(r.pageSuffix);return i>-1?(n=(t=n).substr(0,i),L.hasOwnProperty(n)&&(t=L[n]&&L[n].template||t||"")):t=L[n=n]&&L[n].template||n+r.pageSuffix||"",{pid:n,url:t}}function $(n){var i=this,a={};"function"==typeof n?a.callback=n:a=n||{};var o=t.extend(!0,{index:-1,name:"",beforeBack:r.beforeBack,callback:null,loaded:r.loaded},a),l=parseInt(o.index),s=S.length;if(C=loader.map(),L=C.modules,!(l>0)){var f=w.getLast(),h=s-1,p=f.toggle;if(p)return p.hide(),void F();var m="function"==typeof o.beforeBack?o.beforeBack.call(V,{prevTarget:null,target:f}):a.beforeBack;z.call(V,"beforeback",{prevTarget:null,target:f});var v=loader.get(f.pid);return v&&v.beforeDestroy&&v.beforeDestroy(),!1===m?this:(o.name&&(l=B(o.name)),Math.abs(l)>h&&(l=-h),s>1&&g&&(l<-1&&D(l),g=!1,a.effect&&(u.option({effect:a.effect}),d.option({effect:a.effect})),u&&u.show(),d&&d.hide((function(){var n=s+l;!function(e){c.children().each((function(n,i){n>=e&&t(i).remove()}))}(n),w.removeNext(n),D();var a=F(),r=a.pid;e.objId(a.id).css("zIndex",5),function(){var e;e=y[r]||{};var t=loader.get(a.pid);o.callback&&o.callback.call(i,e,a),o.backed&&o.backed.call(V,{prevTarget:f,target:a}),z.call(V,"back",{prevTarget:f,target:a}),a;var n="pageshow-"+a.pid,l="pagehide-"+f.pid;v&&v.hide&&v.hide({type:"back",target:f}),t&&t.show&&t.show({type:"back",target:a}),z.call(V,l,{type:"back",target:f}),z.call(V,n,{type:"back",target:a}),z.call(V,"pageshow",{type:"back",target:a}),z.call(V,"pagehide",{type:"back",target:f}),v&&v.destroyed&&v.destroyed(),g=!0}()}))),this)}e.showLog("index 参数只能是负数","bui.router.back")}function B(t){var n,i=e.array.indexs(S,t,"pid"),a=i.length;if(a){var o=-(S.length-i[a-1]-1);n=0==o?-1:o}else n=-1;return n}function R(t,n,i){if("string"==typeof t){loader.importHtml(t,(function(e,t,i){e=function(e){var t=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,n=/<body[^>]*>([\s\S]*)<\/body>/.exec(e);if(n&&2===n.length)return n[1].replace(t,"");return e}(e),n&&n(e,t,i),z.call(V,"success",e,t,i)}),(function(e,t,n){i&&i(e,t,n),z.call(V,"fail",e,t,n)}))}else if("function"==typeof t){var a=t&&t();n&&n(a,200,{}),z.call(V,"success",a,200,{})}else e.showLog("url 不能为空","bui.router.requestUrl")}function F(){var t=w.getLast(),n=t.id||"",i=t.effect||r.effect;return n&&(z.call(V,"beforepageshow",{target:t}),d=null,d=e.toggle({id:document.getElementById(n),effect:b[i]&&b[i].inRight||""}),c&&c.attr("data-main",n)),t}function D(t){t=t||-1;var n=S.length+t-1,i=S[n],a=i&&i.id||"",o=i&&i.effect||r.effect;return a&&(z.call(V,"beforepagehide",{target:i}),u=null,u=e.toggle({id:document.getElementById(a),effect:b[o]&&b[o].inLeft||""})),i}function M(e){var t="";return t+='<div id="'+e.id+'" class="bui-router-item" data-page="'+e.pid+'">',t+=e.content||"",t+="</div>"}function A(e){var t="";return t+=e.content}function H(t,n){return e.on.apply(V,arguments),this}function z(t){V.self=this==window||this==V?null:this,e.trigger.apply(V,arguments)}e.hasRouter=!0,w.get=function(){return S},w.add=function(n){if((n=n||{}).toggle){var i=t.extend(!0,{},n);n.toggle=null,S.push(i)}else S.push(n);var a=window.location.origin+window.location.pathname+"#"+n.pid,o=e.setUrlParams(a,n.param);if(!p)return r.syncHistory&&"pushState"in window.history&&window.history.pushState(n,null,o),S;r.syncHistory&&"replaceState"in window.history&&window.history.replaceState(n,null,o)},w.prepend=function(t){t=t||{};var n=window.location.origin+window.location.pathname+"#"+t.pid;e.setUrlParams(n,t.param);return S.unshift(t),S},w.replace=function(t){t=t||{};var n=S.length-1,i=window.location.origin+window.location.pathname+"#"+t.pid,a=e.setUrlParams(i,t.param);return n>-1&&(S.splice(n,1,t),r.syncHistory&&"replaceState"in window.history&&window.history.replaceState(t,null,a)),S},w.getLast=function(e){var t=S.length-1,n=S[t]||{};return e?n[e]:n},w.removeNext=function(t){var n=S.length-t;S.splice(t,n);var i=w.getLast(),a=window.location.origin+window.location.pathname+"#"+i.pid,o=e.setUrlParams(a,i.param);r.syncHistory&&"replaceState"in window.history&&window.history.replaceState(i.param,null,o)},w.removeLast=function(){var e=S.length-1;w.removeNext(e)},w.checkLoad=function(t){return e.array.compare(S,t,"pid")||e.array.compare(S,t,"url")||e.array.compare(S,t,"id")},I.add=function(e,t){return x[e]=t||{},x[e]},I.del=function(e){delete x[e]},I.get=function(e,t){return t?(x[e]||{})[t]:x[e]},I.save=function(){if(S.length>1){var e=i.html();j.set("cacheHtml",e),j.set("cacheHistory",S),j.set("hasCache","true")}},I.load=function(){var t=j.get("cacheHtml",0),n=j.get("cacheHistory",0),a=[];if(n.length>1){i.html(t),c=i.children(".bui-router-main"),$({name:P().pid});try{n.forEach((function(e,t){var n="string"==typeof e?JSON.parse(e):e;a.push(n)}));var o=a[a.length-1];o,loader.require(o.pid,(function(e){y[o.pid]=e||null})),H("back",(function(e){loader.require(e.target.pid,(function(t){y[e.target.pid]=t||null}))}))}catch(t){e.showLog(t)}S=a,F(),D(),p=!1,T=!0,I.clear()}},I.clear=function(){j.remove("cacheHistory"),j.remove("cacheHtml"),j.remove("hasCache")},O.add=function(e,t){return k[e]=t||{},k[e]},O.get=function(e,t){return t?(k[e]||{})[t]:k[e]};var V={init:function(n){if(V.store=n.store||null,delete n.store,n=t.extend(!0,{},r,e.config.router,n),r=V.config=n,"pages/main/main.html"===n.indexModule.template&&"pages/main/main.js"===n.indexModule.script||(C=loader.map(n.indexModule)),v&&"effect"in n&&S.forEach((function(e,t){e.effect=n.effect})),!n.id)return e.showLog("id 不能为空","bui.router.init"),!1;if(i=e.objId(n.id),o=bui.mask({appendTo:i,opacity:0,autoClose:!1}),a=e.loading({display:"block",width:30,height:30,opacity:0}),c=i.children(".bui-router-main"),f=n.width||window&&window.viewport&&window.viewport.width()||document.documentElement.clientWidth||"100%",h=n.height||window&&window.viewport&&window.viewport.height()||document.documentElement.clientHeight||"100%",!c.length){var l=function(e){var t="";String(f).indexOf("%"),String(h).indexOf("%");return t+='<div class="bui-router-main">',t+="</div>"}();i.html(l),c=i.children(".bui-router-main")}return(n.width>0||String(n.width).indexOf("%")>-1)&&c.width(n.width),(n.height>0||String(n.height).indexOf("%")>-1)&&c.height(n.height),function(n){if(function(){var t=j.get("hasCache",0);Boolean(t)&&r.reloadCache?I.load():function(t){try{var n=P();if(n.pid){if(n.pid.indexOf("http://")>-1||n.pid.indexOf("https://")>-1)return n.param.iframe=!0,void E({url:n.pid,param:n.param,iframe:!0});E({url:n.pid,param:n.param})}else E({url:r.indexModule.moduleName,param:n.param||{}})}catch(t){e.showLog(t,"bui.router.loadUrl")}}()}(),n.swipe&&function(n){var a=/hp-tablet/gi.test(navigator.appVersion),o="ontouchstart"in window&&!a,l=0,s=0,c=!1,u=null,d=null,f={x1:0,x2:0,y1:0,y2:0,direction:""};i.on("touchstart",(function(i){var a=i.originalEvent&&i.originalEvent.targetTouches||i.targetTouches,l=o?a[0]:i;f.x1=l.pageX,f.y1=l.pageY,c=t(i.target).closest(r.useScroll).length,S.length>1&&f.x1>0&&f.x1<n.distance&&(u=t("#"+w.getLast().id),d=e.history.getPrev().id?t("#"+e.history.getPrev().id):null)})),i.on("touchmove",(function(i){var a=i.originalEvent&&i.originalEvent.targetTouches||i.targetTouches,h=o?a[0]:i;f.x2=h.pageX,f.y2=h.pageY,a.length>1||i.scale&&1!==i.scale||(c=t(i.target).closest(r.useScroll).length,f.x2-f.x1>0&&!c&&i.preventDefault(),f.direction||(f.direction=e.swipeDirection(f.x1,f.x2,f.y1,f.y2)),"swipeleft"!==f.direction&&"swiperight"!==f.direction||(i.preventDefault(),i.stopPropagation()),l=Math.abs(f.x2-f.x1),s=Math.abs(f.y2-f.y1),"swiperight"===f.direction&&l>n.startDistance&&n.swipeBack&&(d&&d.css("display","block"),n.pageMove&&u&&u.css("transform",`translateX(${l}px)`),i.preventDefault()))})),i.on("touchend",(function(e){(c=t(e.target).closest(r.useScroll).length,"swiperight"===f.direction&&f.x1>n.distance&&n.swipeBack&&(l=0),"swiperight"===f.direction&&l>n.swipeDistance)&&(!1!==(n.onBeforeSwipeRight&&n.onBeforeSwipeRight())&&n.swipeBack&&bui.back(),n.onSwipeRight&&n.onSwipeRight(e),z.call(V,"swiperight"));"swipeleft"===f.direction&&l>n.swipeDistance&&(n.onSwipeLeft&&n.onSwipeLeft(e),z.call(V,"swipeleft")),"swipeup"===f.direction&&s>n.swipeDistance&&!c&&(n.onSwipeUp&&n.onSwipeUp(e),z.call(V,"swipeup")),"swipedown"===f.direction&&s>n.swipeDistance&&!c&&(n.onSwipeDown&&n.onSwipeDown(e),z.call(V,"swipedown")),l<n.swipeDistance&&(d&&d.css("display","none"),u&&u.css("transform","translateX(0)")),l=0,c=!1,f={x1:0,x2:0,y1:0,y2:0,direction:""},u=null,d=null,e.stopPropagation()}))}(n),window.addEventListener("beforeunload",(function(e){r.reloadCache&&I.save(),z.call(s,"beforeunload",{target:S[S.length-1]})})),n.hash)return window.addEventListener("hashchange",(function(t){var n=P(),i=""==n.pid||"undefined"==n.pid?"main":n.pid,a=e.array.indexs(S,i,"pid"),o=a[a.length-1];o>-1?($({index:-(S.length-o-1||1)}),z.call(s,"popstate",{type:"back",prevTarget:S[o-1],target:S[o]})):(E({url:i,param:n.param,iframe:"true"==n.param.iframe,replace:!0}),z.call(s,"popstate",{type:"load",prevTarget:S[S.length-2],target:S[S.length-1]}))})),this;r.syncHistory&&"pushState"in window.history&&window.addEventListener("popstate",(function(t){var n=P(),i=""==n.pid?r.indexModule.moduleName:n.pid,a=B(i);e.array.index(S,i,"pid")>-1?($({index:a,param:n.param}),z.call(s,"popstate",{type:"back",prevTarget:S[a-1],target:S[a]})):(E({url:i,param:n.param,iframe:"true"==n.param.iframe}),z.call(s,"popstate",{type:"load",prevTarget:S[S.length-2],target:S[S.length-1]}))}))}(n),z.call(this,"init",{target:i[0]}),V},option:function(t,n){return v=!0,e.option.call(V,t,n)},config:r,data:{},on:H,off:function(t,n){return e.off.apply(V,arguments),this},trigger:z,load:E,resize:function(e){return(e=e||{}).width=e.width||r.width,e.height=e.height||r.height,window.viewport=bui.viewport(),f=e.width||window&&window.viewport&&window.viewport.width()||document.documentElement.clientWidth||"100%",h=e.height||window&&window.viewport&&window.viewport.height()||document.documentElement.clientHeight||"100%",c.css({width:f,height:h}),z.call(this,"resize",{target:S[S.length-1]}),this},destroy:function(t){return"string"==typeof t&&"main"!==t?(loader.destroy(t),I.del(t),t in y&&delete y[t]):e.showLog("参数只能是字符串"),this},loadPart:function(e){var n=t.Deferred(),i=t.extend(!0,{},{id:"",url:"",param:{},loaded:null},e);return i.loaded=function(t){e.loaded&&e.loaded.call(V,t),n.resolve(t),z.call(V,"loadpart",t)},loader.load(i),n.promise()},replace:function(e){return E({url:(e=e||{}).url||"",param:e.param||{},replace:!0}),this},refresh:function(){var t=S.length-1,n=S[t],i=S.length>1?S[S.length-2]:null;return e.history.refresh(),z.call(V,"refresh",{prevTarget:i,target:n}),this},back:$,isLoad:function(e){var t;return e&&(t=e in y),t},$:function(t){var n=w.getLast(),i=document.getElementById(n.id)||document;return e.obj(t,i)},currentId:function(e){return w.getLast().id},currentPage:function(){var e=w.getLast();return document.getElementById(e.id)},currentModule:function(){return w.getLast()},getPageParams:function(){return w.getLast().param},getPartParams:function(t){return e.history.getComponentParam(t)},getHistory:w.get,preload:function(n){var i=t.Deferred(),a=function(t,a){return R(t.url,(function(i){var o=e.guid(),r=N(t.url).pid,l=(M({id:o,content:i,pid:r}),[]);I.add(r,{id:o,pid:r,template:i}),l.push(r),t.style&&"array"===e.typeof(t.style)?t.style.forEach((function(e,t){l.push(e)})):t.style&&"string"===e.typeof(t.style)&&l.push(t.style),t.script&&"array"===e.typeof(t.script)?t.script.forEach((function(e,t){l.push(e)})):t.script&&"string"===e.typeof(t.script)&&l.push(t.script),loader.import(l,(function(){z.call(V,"preloadafter",{prevTarget:null,target:null}),a&&a(n)}),(function(){z.call(V,"preloadafter",{prevTarget:null,target:null}),a&&a(n)}))}),(function(n){e.showLog(t.url+"请求失败"),i.reject(t.url)})),i.promise()};return n&&"object"===e.typeof(n)?"url"in n&&a(n,(function(){i.resolve(n)})):n&&"array"===e.typeof(n)&&n.forEach((function(e,t){t==n.length-1?"url"in e&&a(e,(function(){i.resolve(n)})):"url"in e&&a(e)})),i},initScroll:function(n){var i=w.getLast(),a=e.objId(i.id),o="object"==typeof n?t(n):a.find(".bui-page");return o.length&&e.init({id:o,height:h}),this},history:{get:w.get,check:w.checkLoad,getLast:w.getLast,add:w.add,removeLast:w.removeLast,replace:w.replace}};return V}}(window.bui||{},window.libs),function(e,t){class n{constructor(n){this._default={log:!1,hasLife:!0,onBeforeInit:null,onInited:null},this._plugin=n||{name:"",depend:null,config:null,param:null,callback:null};let i=e.config.hasOwnProperty(this._plugin.name)?e.config[this._plugin.name]:null;this.config=t.extend(!0,{},this._default,i,this._plugin.config,this._plugin.param),this.initStatus=!1,this.reinitStatus=!1,this.widgets=Object.create(null),this.init()}widget(e){return e&&e in this.widgets?this.widgets[e]:this.widgets}init(e){let n=this,i=e||null;n.config=t.extend(!0,this.config,i);let a=n.config,o=a.hasLife&&a.onBeforeInit&&a.onBeforeInit.call(n,a);return a.log&&console.log(n._plugin.name+" before init"),!1===o||(n._plugin.callback&&n._plugin.callback.call(n,a),a.log&&console.log(n._plugin.name+" init"),a.hasLife&&a.onInited&&a.onInited.call(n,a),a.log&&console.log(n._plugin.name+" after inited"),this.initStatus=!0),n}reinit(){return this.destroy(),this.init(),this.config.log&&console.log(this._plugin.name+" reinit"),this}destroy(e){return this.beforeDestroy&&this.beforeDestroy(),this.beforeDestroy=null,this.widgets={},this.off(),this.initStatus=!1,e&&e.call(this),this.config.log&&console.log(this._plugin.name+" destroyed"),this}prefix(t){return e.config.classNamePrefix+t}showLog(t,n){n=n||"";let i="";return"object"==typeof t&&"message"in t&&"name"in t?i=t.message+":"+t.name+"&&stack:"+t.stack:"string"==typeof t&&(i=t),e.log&&console.error(n+" "+i),e.trace&&console.trace&&console.trace(),this}option(n,i){if("object"!==e.typeof(n)&&void 0===i)return"string"==typeof n?this.config[n]:this.config;{let a=this;if("id"==n)return e.showLog("不允许修改控件的ID参数"),this;if(n&&"object"===e.typeof(n)){let e=t.extend(this.config,n);return a&&a.init(e)}if(this.config.hasOwnProperty(n)){let e={};e[n]=i;let o=t.extend(this.config,e);return a&&a.init(o)}}return this}get emitter(){return e.emitter()}get on(){return this.emitter.on}get off(){return this.emitter.off}get trigger(){return this.emitter.trigger}}e.extend=function(t){new class{constructor(e){this.init(e)}init(i){let a=i.name;return this.checkName(a)?(e[a]=function(e){return t.param=e,new n(t)},this):this}checkName(t){return t?e.hasOwnProperty(t)?(console.warn(`已有相同名为${t}的插件或方法,请重新换个名称注册.`),!1):(this.name=t,!0):(console.warn("插件名字不能为空"),!1)}}(t)}}(window.bui||{},window.libs);t((function(e){!function(t,n){t.extend({name:"page",config:{dialogid:"",url:"",param:null,script:"",appendTo:"",className:"bui-dialog-page",effect:"",pageSuffix:".html",height:0,width:0,iframe:!1,openFirst:!0,closeFirst:!1,autoClose:!1,needRemove:!1,useBox:!0,syncHistory:!1,title:"",buttons:null,mask:!1,life:!0,scroll:!1,needView:!1,needComponent:!0,cache:!0,close:!1,autoload:!0,fullscreen:!0,effect:"fadeInRight",onError:null,beforeClose:null,closed:null,beforeOpen:null,opened:null,beforeLoad:null,loaded:null},callback:function(i){var a=this,o=a.config,r="body"==a.appendTo?n:t.obj,l="",s=!1,c=(loader.map().modules,a.widgets.dialog=t.dialog({autoinit:!1,needRemove:i.needRemove})),u=null,d=!1;function f(e,t){var n="";return n+=`<div class="bui-dialog-main">${e}</div>${t.close?'<div class="bui-dialog-close"><i class="icon-close"></i></div>':""}`}function h(e){var n=loader.map().modules[u.module]||{};if(n.hide&&o.life){var i=t.hasRouter?t.history.getLast():{};n.hide({type:"page",target:i})}"function"==typeof e&&e.call(a,n),o.closed&&o.closed.call(a,n)}function p(n,i){var r=t.history.getLast(),l=(loader.map().modules||{})[n];if(o.cache&&s&&!d)return!o.openFirst&&c.open(),"function"==typeof i&&i.call(a,l.exports),a;if(t.history.setPage({id:c.config.id,name:n,url:o.url,dialog:c,param:o.param}),d=!1,l&&"function"==typeof l.loaded){var u=l.loaded&&l.loaded.call(e,l.exports)||l.exports;t.history.setPage({id:c.config.id,name:n,url:o.url,dialog:c,exports:u,param:o.param});var f=loader.map().modules[n]||{};return f.show&&o.life&&f.show({type:"page",target:r}),"function"==typeof i&&i.call(a,u),a.compile({id:c.config.id}),o.opened&&o.opened.call(a,u),!o.openFirst&&c.open(),this}loader.require(n,(function(e){var l=loader.map().modules[n]||{};t.history.setPage({id:c.config.id,name:n,url:o.url,dialog:c,exports:e,param:o.param}),l.show&&o.life&&l.show({type:"page",target:r}),"function"==typeof i&&i.call(a,e),a.compile({id:c.config.id}),o.opened&&o.opened.call(a,e)})),s=!0}function g(e){var t=loader.map().modules,n={},i=e.indexOf(o.pageSuffix);return i>-1?(n.url=e,n.module=e.substr(0,i)):(n.url=t[e]&&t[e].template||e+o.pageSuffix,n.module=e),n}a.init=function(e){var i=n.extend(!0,{},a.config,e);if(i.onClose=function(){t.hasRouter&&i.syncHistory&&bui.back(),h()},u=g(i.url),i.iframe){var o=t.platform.isIos()?'scrolling="no"':"";return i.content=`<iframe class="bui-router-iframe" src="${i.url}" ${o} ></iframe>`,c.create(i),i.autoload&&c.open(),i.loaded&&i.loaded.call(a,u),a}if(i.script){var s=i.script.indexOf(".js");u.module=i.script.substr(0,s)}return!1===(i.beforeLoad&&i.beforeLoad.call(a,u))?this:(loader.import(u.url,(function(e){"object"!=typeof e?(l=f(e,i),i.id?(c.init(i),r(i.id).html(e)):(i.content=e,c=c.create(i)),i.autoload&&a.open(),i.loaded&&i.loaded.call(a,u)):i.onError&&i.onError.call(a,e)})),a)},a.compile=function(e){var t=n.extend(!0,{id:c.config.id,cacheHtml:!1,cache:!1,needComponent:o.needComponent,needView:o.needView},e);t.needView&&loader.views(t),t.needComponent&&loader.components(t)},a.reload=function(e){var t=o=n.extend(!0,a.config,o,e);if(d=!0,u=g(t.url),t.script){var i=t.script.indexOf(".js");u.module=t.script.substr(0,i)}if(!1===(t.beforeLoad&&t.beforeLoad.call(a,u)))return this;loader.import(u.url,(function(e){"object"!=typeof e?(l=f(e,t),r("#"+(c.config.id||t.dialogid)).html(l),p(u.module),t.loaded&&t.loaded.call(a,u)):t.onError&&t.onError.call(a,e)}))},a.toggle=function(e,t){return a.isOpen()?a.close(t):a.open(e),a},a.isOpen=c.isOpen,a.close=function(e){return!1===(i.beforeClose&&o.beforeClose.call(a))?this:(t.hasRouter&&o.syncHistory&&t.history.removeLast(o.syncHistory),o.closeFirst?(c.close((function(){a.trigger("close"),h(e)})),a):(h(e),c.close(),a.trigger("close"),a))},a.remove=function(e){return c.remove(e),a.trigger("remove"),a},a.open=function(e){if(!1===(o.beforeOpen&&o.beforeOpen.call(a)))return this;if(o.iframe)return c.open(e),a;var n={hide:a.close,show:a.open};return t.hasRouter&&o.syncHistory&&t.history.add({id:c.config.id,name:u.module,url:o.url,replace:!1,param:o.param||{},part:{},page:{},effect:"push",toggle:n,syncHistory:o.syncHistory}),loader.map({moduleName:u.module,id:c.config.id}),t.history.getLast().currentPage=c.config.id,o.openFirst?(c.open((function(){a.trigger("open"),p(u.module,e)})),a):(p(u.module,e),c.open(),a.trigger("open"),a)},a.setParam=function(e){var i=n.extend(!0,{},o.param,e);t.history.setPage({id:c.config.id,param:i})},a.init(o)}})}(window.bui||{},window.libs)}));!function(e,t){e.setUrlParams=function(t,n,i){i=0!=i,n="object"==typeof n?n:{};var a=e.unit.objectToKeyString(n,i);return""==a?t:t+"?"+a},e.getUrlParams=function(t){t=0!=t;var n=window.location.href,i=n.indexOf("?"),a={};if(i>-1){var o=n.substr(i+1);a=e.unit.keyStringToObject(o,t)}return a},e.getUrlParam=function(e){var t=window.location.href,n=new RegExp("(^|&|.)"+e+"=([^&]*)(&|$)","i"),i=t.substr(1).match(n);return null!=i?decodeURIComponent(i[2]):null},e.typeof=function(e){var t=Object.prototype.toString.call(e).slice(8,-1);return t=t.toLowerCase()},e.setting=function(t,n){return"string"==typeof t&&"object"==typeof n?e.config[t]=n:"string"==typeof t&&void 0===n?e.config[t]:e.config}}(window.bui||{}),function(e,t){e.array={},e.array.index=e.inArray=function(e,t,n){var i,a;e instanceof Array?(i=e||[],a=t):(i=t||[],a=e);for(var o=0;o<i.length;o++){var r=i[o];if((r&&r[n]||r)===a)return parseInt(o)}return-1},e.array.compare=e.compareArray=function(e,t,n){var i,a;e instanceof Array?(i=e||[],a=t):(i=t||[],a=e);for(var o=0;o<i.length;o++){var r=i[o];if((r&&r[n]||r)===a)return!0}return!1},e.array.remove=e.removeArray=function(t,n,i){var a,o;return t instanceof Array?(a=t||[],o=n):(a=n||[],o=t||[]),e.array.delete(a,o,i),a},e.array.filter=e.filterArray=function(t,n,i){var a,o;t instanceof Array?(a=t||[],o=n):(a=n||[],o=t);var r=[];for(var l in a)try{var s=a[l]&&a[l][i]||a[l];new RegExp(o).test(s)&&r.push(a[l])}catch(t){e.showLog(t)}return r},e.array.indexs=e.indexArray=function(e,t,n){var i,a;e instanceof Array?(i=e||[],a=t):(i=t||[],a=e);var o=[];for(var r in i){(i[r]&&i[r][n]||i[r])===a&&o.push(+r)}return o},e.array.excess=e.excessArray=function(e,t,n){var i;i=e instanceof Array?e||[]:t||[];var a={},o=[];for(var r in i)try{var l=i[r]&&i[r][n]||i[r];a[l]!==l&&(a[l]=l,o.push(i[r]))}catch(e){}return o},e.array.uniq=function(t,n){var i=[];for(let a=0;a<t.length;a++){let o=void 0===n,r=t[a],l=o?r:r[n]||r;e.array.index(i,l,n)<0&&i.push(r)}return i},e.array.copy=e.copyArray=function(t,n,i){var a=[];if(n=n||0,i=i||t&&t.length,!t||"array"===e.typeof(t))return t.forEach((function(e,t){a.push(e)})),a.splice(n,i)||[]},e.array.empty=function(t){if(!t||"array"===e.typeof(t))return t.splice(0,t.length)},e.array.replace=function(t,n){if(!(t&&"array"!==e.typeof(t)||n&&"array"!==e.typeof(n))){var i=[0,t.length].concat(n);return t.splice.apply(t,i)}},e.array.merge=function(t){if(!t||"array"===e.typeof(t)){var n=arguments,i=n.length-1,a=n[i],o="string"==typeof a;if(o&&n.length>1){let o=i,r=[];for(let e=0;e<o;e++){let i=Array.prototype.slice.call(n[e],0);t.forEach((function(e,t){let n=e[a]||e;i instanceof Array&&i.forEach((function(t,o){let r=t[a]||t;if(n===r){for(let n in t)e[n]=t[n];i.splice(o,1)}}))})),r.push(i)}return e.array.merge(t,...r)}var r=[t.length,0].concat(...Array.prototype.slice.call(arguments,1));return t.splice.apply(t,r),t}},e.array.get=function(t,n,i){if(!t||"array"===e.typeof(t)){for(var a,o=null,r=0;r<t.length;r++){((o=t[r])&&o[i]||o)===n&&(a=o)}return a}},e.array.getAll=function(e,t,n){e=e||[];var i=[],a=null;for(var o in e)try{var r=(a=e[o])&&a[n]||a;t&&t instanceof Array?t.forEach((function(e,t){r===e&&i.push(a)})):r===t&&i.push(a)}catch(e){}return i},e.array.set=function(t,n,i,a){if(!t||"array"===e.typeof(t)){var o=/\d/.test(n)&&"number"==typeof n;if(o&&i)return t.splice(n,1,i),t;for(let r=0;r<t.length;r++){let l=t[r],s=void 0===a?l:l[a]||l;if(o?r===n:s===n){if(a){if(i&&"object"===e.typeof(i))for(let e in i)l[e]=i[e];else l[a]=i;t.splice(r,1,l)}else t.splice(r,1,i);return t}}return t}},e.array.setAll=function(t,n,i,a){if(!t||"array"===e.typeof(t))return t.filter((function(o,r){let l=void 0===a?o:o[a]||o;if(r==n||l===n)if(a){if(i&&"object"===e.typeof(i))for(let e in i)o[e]=i[e];else o[a]=i;t.splice(r,1,o)}else t.splice(r,1,i)})),t},e.array.delete=function(t,n,i){if(!t||"array"===e.typeof(t)){var a=[],o=e.array.copy(t);return n&&"array"===e.typeof(n)?n.forEach((function(e,t){r(void 0!==i&&e[i]||e)})):r(n),a}function r(e){var n=0;for(let r=0;r<o.length;r++){let l=r-n,s=t.length!==o.length,c=s?t[l]||{}:t[r]||{};if((void 0!==i?c[i]:c)===e)return s?t.splice(l,1):t.splice(r,1),a.push(r),void++n}}},e.array.deleteIndex=function(t,n){if(!t||"array"===e.typeof(t)){var i=[];return n&&"array"===e.typeof(n)?n.forEach((function(n,a){i.push(t[n]),e.array.remove(t,t[n])})):(i.push(t[n]),e.array.remove(t,t[n])),i}}}(window.bui||{}),function(e,t){e.storage=function(t){var n=1,i=!0,a="",o=!1,r=!0;"number"==typeof t||"string"==typeof t?n=0==parseInt(t)?0:parseInt(t)||1:"object"==typeof t&&(n=t&&0==t.size?0:t.size||1,r=!t||0!=t.local,i=!t||0!=t.reverse,o=!(!t||1!=t.deep),a=t.prefix||"");var l=i?"push":"unshift",s=r?localStorage:sessionStorage;function c(t,n,i){t=a+t;var r,l=s.getItem(t)||"";try{r=o?l&&e.unit.stringToJson(l):l&&JSON.parse(l)}catch(t){r=l,e.showLog(t.name+": "+t.message,"bui.storage.get")}if("number"==typeof n&&i)r=r&&r[n]&&r[n][i]||void 0;else if("string"==typeof n){var c=e.array.index(r,n,i);r=r&&r[c]}else r="number"==typeof n?r&&r[n]||void 0:r;return r}return{get:c,getAll:function(e){for(var t={},n=parseInt(e)||0,i=0;i<localStorage.length;i++){var o=localStorage.key(i);o.substr(a.length);if(a&&0===o.indexOf(a))try{var r=JSON.parse(s.getItem(o));t[o]=void 0!==e?r[n]:r}catch(e){t[o]=s.getItem(o)}if(""===a)try{t[o]=JSON.parse(s.getItem(o))}catch(e){t[o]=s.getItem(o)}}return t},set:function(t,i,o){t=a+t;var r=1==n?null:s.getItem(t),c=[],u="",d=o?i[o]:i;if(null===r){c.push(i),u=JSON.stringify(c);try{s.setItem(t,u)}catch(e){"QuotaExceededError"==e.name&&console.log("超出本地存储限额！")}}else{var f=JSON.parse(r);if(e.array.compare(f,d,o)){e.array.remove(f,d,o),f[l](i);try{u=JSON.stringify(f),s.setItem(t,u)}catch(e){"QuotaExceededError"==e.name&&console.log("超出本地存储限额！")}}else{f[l](i),f.length>n&&0!=n&&("unshift"==l?f.pop():f.shift());try{u=JSON.stringify(f),s.setItem(t,u)}catch(e){"QuotaExceededError"==e.name&&console.log("超出本地存储限额！")}}}return this},remove:function(t,n,i){if("string"==typeof(t=a+t)){var o=c(t)||[];if("number"==typeof n){var r="number"==typeof i?i:r;o.splice(n,r);try{var l=JSON.stringify(o)||"";s.setItem(t,l)}catch(t){e.showLog(t.name+": "+t.message,"bui.storage.remove")}}else if("string"==typeof n){var u=e.array.remove(o,n,i);try{l=JSON.stringify(u)||"";s.setItem(t,l)}catch(t){e.showLog(t.name+": "+t.message,"bui.storage.remove")}}else s.removeItem(t);return this}e.showLog("要删除的字段名只能是字符串","bui.storage.remove")},clear:function(){if(a)for(var e=0;e<localStorage.length;e++){var t=localStorage.key(e);0===t.indexOf(a)&&s.removeItem(t)}else s.clear();return this}}}}(window.bui||{}),function(e,t){var n;e.platform=(n=navigator.userAgent,{isAndroid:function(e){return/(Android|Linux)/i.test(n)},isIphone:function(e){return/(iPhone)/i.test(n)},isIpad:function(e){return/(iPad)/i.test(n)},isIos:function(e){return/(iPhone|iPad|iOS)/i.test(n)},isWeiXin:function(e){return/(micromessenger)/i.test(n)},isBingotouch:function(e){return/(crosswalk)/i.test(n)},isMac:function(){return/Macintosh/i.test(n)},isIphoneX:function(e){var t=!1,n=3==window.devicePixelRatio&&375==window.screen.width&&812==window.screen.height,i=2==window.devicePixelRatio&&414==window.screen.width&&896==window.screen.height,a=3==window.devicePixelRatio&&414==window.screen.width&&896==window.screen.height;return(n||i||a)&&(t=!0),t},isWindow:function(e){return/Windows NT/i.test(n)}})}(window.bui||{}),function(e,t){e.date={},e.date.format=function(e,t){if(null==e)return"";var n=this.convert(e);t=t||"yyyy-MM-dd";var i={"M+":n.getMonth()+1,"d+":n.getDate(),"h+":n.getHours(),"m+":n.getMinutes(),"s+":n.getSeconds(),"q+":Math.floor((n.getMonth()+3)/3),S:n.getMilliseconds()};for(var a in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(n.getFullYear()+"").substr(4-RegExp.$1.length))),i)new RegExp("("+a+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?i[a]:("00"+i[a]).substr((""+i[a]).length)));return t},e.date.convert=function(e,t){if(e&&e.constructor==Date)return e;if("number"==typeof e&&13===String(e).length)return new Date(e);e=String(e);var n=new Date,i=n.getFullYear(),a=n.getMonth()+1,o=n.getDate();if((e=e.replace(/[-|年|月]/gim,"/").replace(/[时|分|秒|小时|分钟]/gim,":").replace(/^(\d{4}\/\d+?)($|\s)/,(function(e,t){return t+"/1"})).replace(/[日|号]/gim,"").replace(/^(\d{1,2}\/\d{1,2}?)($|\s)/,(function(e,t){return n.getFullYear()+"/"+t}))).indexOf("T")>-1&&-1==e.indexOf("GMT")){var r=(e=e.replace("T"," ")).indexOf(".")>-1?e.split("."):[e];return new Date(r[0])}if(e.indexOf("GMT")>-1){var l=(r=e.split(" "))[3]+"/"+{Jan:"1",Feb:"2",Mar:"3",Apr:"4",May:"5",Jun:"6",Jul:"7",Aug:"8",Sep:"9",Oct:"10",Nov:"11",Dec:"12"}[r[1]]+"/"+r[2]+" "+r[4];return new Date(l)}return e.indexOf("/")<0&&e.indexOf(":")>-1&&(e=i+"/"+a+"/"+o+" "+e),4===e.length?e+="/1/1 00:00:00":"MM"===t||"M"===t?e=i+"/"+e+"/1 00:00:00":"dd"!==t&&"d"!==t||(e=i+"/"+a+"/"+e+" 00:00:00"),new Date(e)},e.date.after=function(e,t,n){t=0===t?0:t||1;var i=this.convert(e).getTime()+1e3*parseInt(t)*3600*24;return this.format(i,n||"yyyy-MM-dd")},e.date.afterTime=function(e,t,n){var i=0===t?0:t||30,a=this.format(new Date,"yyyy/MM/dd")+" "+e,o=new Date(a).getTime()+1e3*i*60;return this.format(o,n||"hh:mm")},e.date.count=function(t,n,i){var a,o;switch(i){case"number":a=t,o=n;break;case"hour":let e=this.format(new Date,"yyyy/MM/dd"),i=e+" "+t,r=this.convert(i),l=e+" "+n,s=this.convert(l);a=r.getTime(),o=s.getTime();break;case"date":default:a=this.convert(t).getTime(),o=this.convert(n).getTime()}var r=a-o;r=Math.abs(r);var l=parseInt(r/1e3/3600/24,10),s=parseInt(r/1e3/3600%24,10),c=parseInt(r/1e3/60%60,10),u=parseInt(r/1e3%60,10);return{value:r,day:l,hour:s,minute:c,second:u,tip:`${l}天 ${e.unit.fixZero(s)}:${e.unit.fixZero(c)}:${e.unit.fixZero(u)}`}},e.date.countMonth=function(e){var t=this.convert(e),n=t.getMonth()+1;return t.setMonth(n),t.setDate(0),t.getDate()},e.date.toWeek=function(e,t){var n=this.convert(e),i=null;switch(t){case 1:i=["周日","周一","周二","周三","周四","周五","周六"];break;default:i=t||["星期天","星期一","星期二","星期三","星期四","星期五","星期六"]}return i[n.getDay()]},e.date.today=function(e){return e=e||"M-d",this.format(new Date,e)},e.date.fromnow=function(e){var t=+new Date,n=this.convert(e).getTime(),i="",a=this.count(t,n,"date"),o=t>n?"前":"后";return a.day?i=a.day+"天"+o:a.hour?i=a.hour+"小时"+o:a.minute?i=a.minute+"分钟"+o:a.second&&(i=a.second+"秒"+o),i}}(window.bui||{}),function(e,t){e.animate=function(n){if("object"==typeof n&&n.id)n=n||{};else{var i=n||"";(n={}).id=i}var a,o,r,l,s={origin:function(e){var t=String(e);return a.css({"-webkit-transform-origin":t,"transform-origin":t}),this},transition:p,property:function(e,t){var n={};"object"==typeof e?(n=e,t=""):"string"==typeof e&&(n[e]=t||"");return a.css(n),this},open3D:function(e){return e=parseFloat(e)||100,o=!0,a.parent().css({perspective:e+"px"}),this},transform:function(e,t){a.css({"-webkit-transform":e,transform:e}),t&&"none"!=p&&a.one("webkitTransitionEnd",(function(){t.call(s,this)}));return this},start:function(e){var t=o?u.join("")+"translateZ(0)":u.join("");try{d[m]=[],d[m].push(l.join("")),l=[],m++}catch(e){}a.css({"-webkit-transform":t,transform:t}),"none"!=f?a.one("webkitTransitionEnd",(function(){e&&e.call(s,this)})):e&&e.call(s,this);return this},stop:function(e){a.css({"-webkit-transform":"",transform:""}),"none"!=f&&a.one("webkitTransitionEnd",(function(){e&&e.call(s,this)}));return g(),this},clear:g,left:function(e){e=e;var t=Math.abs(parseFloat(e));e="string"==typeof e&&e.indexOf("%")>-1?"-"+e:r?-t/100+"rem":-t+"px";var n="translateX("+e+")";return l.push(n),u.push(n),this},right:function(e){e=e;var t=Math.abs(parseFloat(e));e="string"==typeof e&&e.indexOf("%")>-1?e:r?t/100+"rem":t+"px";var n="translateX("+e+")";return l.push(n),u.push(n),this},up:function(e){e=e;var t=Math.abs(parseFloat(e));e="string"==typeof e&&e.indexOf("%")>-1?"-"+e:r?-t/100+"rem":-t+"px";var n="translateY("+e+")";return l.push(n),u.push(n),this},down:function(e){e=e;var t=Math.abs(parseFloat(e));e="string"==typeof e&&e.indexOf("%")>-1?e:r?t/100+"rem":t+"px";var n="translateY("+e+")";return l.push(n),u.push(n),this},scale:function(e){var t=String(e),n="scale("+(e=t.indexOf(",")>-1?t:e+",1")+")";return l.push(n),u.push(n),this},scaleX:function(e){var t="scaleX("+(e=String(e))+")";return l.push(t),u.push(t),this},scaleY:function(e){var t="scaleY("+(e=String(e))+")";return l.push(t),u.push(t),this},rotate:function(e){var t=String(e),n="rotate("+(e=t.indexOf("deg")>-1?t:t+"deg")+")";return l.push(n),u.push(n),this},rotateX:function(e){var t=String(e),n="rotateX("+(e=t.indexOf("deg")>-1?t:t+"deg")+")";return l.push(n),u.push(n),this},rotateY:function(e){var t=String(e),n="rotateY("+(e=t.indexOf("deg")>-1?t:t+"deg")+")";return l.push(n),u.push(n),this},skew:function(e){var n=String(e),i=[];n.indexOf(",")>-1?(i=n.split(","),e="",t.each(i,(function(t,n){t<2&&(e+=n.indexOf("deg")>-1?","+n:","+n+"deg")})),e=e.substr(1)):e=n.indexOf("deg")>-1?n:n+"deg,0";var a="skew("+e+")";return l.push(a),u.push(a),this},skewX:function(e){var t=String(e),n="skewX("+(e=t.indexOf("deg")>-1?t:t+"deg")+")";return l.push(n),u.push(n),this},skewY:function(e){var t=String(e),n="skewY("+(e=t.indexOf("deg")>-1?t:t+"deg")+")";return l.push(n),u.push(n),this},reverse:function(e){var t,n=0,i=d.reverse();return function e(r){var l=r[n]||[],s=r[n+1]||[];t=o?l.join("")+"translateZ(0)":l.join(""),t=u.join("")+t.replace(/\(.*?\)/g,"(0)"),a.css({"-webkit-transform":"",transform:""}),n++;try{a.one("webkitTransitionEnd",(function(){if(!s||!s.length)return n=0,void(historyCache=[]);e(i)}))}catch(e){}}(i),this},widget:function(t){return e.widget.call({},t)},option:function(t,n){return e.option.call(s,t,n)},config:c,init:h},c=s.config=t.extend(!0,{},{id:"",zoom:!0,open3D:!1,animates:[]},n),u=[],d=[],f="all 300ms ease-out";function h(t){if(t.id)return(a=e.objId(t.id)).css({"-webkit-transition":f,transition:f}),o=t.open3D,r=t.zoom,l=t.animates||[],c=s.config=t,this;e.showLog("animate id不能为空","bui.animate")}function p(e,t){var n=t||"ease-out";return f="number"==typeof e?"all "+e+"ms "+n:0==e||"none"==e?"none":1==e?"all 300ms "+n:e||"all 300ms "+n,a.css({"-webkit-transition":f,transition:f}),this}function g(){return l=[],u=[],d=[],m=0,this}h(c);var m=0;return s}}(window.bui||{},window.libs),function(e,t){e.mask=function(n){var i,a,o={id:"",appendTo:"",className:"",opacity:.3,background:"",zIndex:100,autoTrigger:!1,autoClose:!1,onBeforeInit:null,onInited:null,callback:null},r={name:"mask",handle:{},on:function(t,n){return e.on.apply(r,arguments),this},off:y,hide:b,show:function(t){if(p)return;(d=e.objId(c))&&d.length?(d.css("display","block"),!h&&u.css("position","relative"),a=!0):m(l);return w.call(r,"show"),this},isShow:function(){return a},remove:v,destroy:function(e){v(),u&&u.off("click.mask");y("show"),y("hide"),p=!0},widget:function(t){return e.widget.call({},t)},option:function(t,n){return e.option.call(r,t,n)},config:l,init:g},l=r.config=t.extend(!0,{},o,e.config.mask,n),s=e.guid(),c=l.id?l.id.indexOf("#")>-1?l.id.substring(1):l.id:s,u=(t("body"),e.objId(l.appendTo)),d=null,f=!1,h=!1,p=!1;function g(n){p=!1;var a=t.extend(!0,o,l,n);return a.onBeforeInit&&a.onBeforeInit.call(r,a),a.appendTo=a.appendTo||"body",u=e.objId(a.appendTo),h=u[0]&&"COMPONENT"===u[0].tagName,l=r.config=a,i=u.css("position"),a.autoTrigger&&m(a),d=e.objId(a.id),a.onInited&&a.onInited.call(r,a),this}function m(n){if(!p){var i=t.extend(!0,{},o,l,n),s=function(t){var n=t.background?t.background:"rgba(0,0,0,"+t.opacity+")",i="";return i+'<div id="'+c+'" class="'+e.prefix("mask")+" "+t.className+'" style="background:'+n+";z-index:"+t.zIndex+'"></div>'}(i);return(d=e.objId(c))&&d.length?d.css("display","block"):(u.append(s),!h&&u.css("position","relative"),d=e.objId(c)),a=!0,w.call(r,"show"),f||function(e){d.off("click.bui").on("click.bui",(function(t){e.callback&&e.callback.call(r,t),e.autoClose&&b(),t.stopPropagation()})),f=!0}(i),this}}function v(){if(!p)return d&&d.remove(),d=null,u.css("position",i||"static"),a=!1,f=!1,w.call(r,"hide"),this}function b(){if(!p)return d&&d.css("display","none"),!h&&u.css("position","relative"),a=!1,w.call(r,"hide"),this}function y(t,n){return e.off.apply(r,arguments),this}function w(t){r.self=this==window||this==r?null:this,e.trigger.apply(r,arguments)}return g(l),r}}(window.bui||{},window.libs),function(e,t){e.loading=function(n){var i,a={name:"loading",handle:{},on:function(t,n){return e.on.apply(a,arguments),this},off:k,start:b,stop:w,isLoading:function(){return f},pause:function(){if(d)return;return c&&c.addClass("bui-loading-pause"),T.call(this,"pause"),this},text:y,showRing:function(){if(d)return;return c=e.objId(l),c.children(".bui-loading-cell").css("display","inline-block"),c.removeClass("bui-loading-pause"),this},hideRing:function(){if(d)return;return c=e.objId(l),c.children(".bui-loading-cell").css("display","none"),c.addClass("bui-loading-pause"),this},show:function(n){var i=n||{};if(d)return;var a=t.extend(!0,o,i);(c=e.objId(a.id))&&c.length?(y(a.text),c[0].style.display="-webkit-box",m&&m.show(),T.call(this,"show")):b(a);o.timeout&&(h&&clearTimeout(h),h=setTimeout((function(e){x()}),o.timeout));return f=!0,this},hide:x,destroy:function(e){e=1==e;w(),r&&r.off("click.bui");k("show"),k("hide"),k("start"),k("stop"),k("pause"),k("remove"),m&&m.destroy(e),d=!0},widget:function(t){var n={mask:m||{}};return e.widget.call(n,t)},option:function(t,n){return e.option.call(a,t,n)},config:o,init:v},o=a.config=t.extend(!0,{},{appendTo:"",width:30,height:30,text:"",onlyText:!1,mask:!0,zIndex:"",autoTrigger:!1,autoClose:!0,timeout:0,opacity:0,display:"block",template:null,onBeforeInit:null,onInited:null,callback:null},e.config.loading,n),r=(t("body"),null),l=e.guid(),s=l+"-mask",c=e.objId(l),u=!1,d=!1,f=!1,h=null;o.id=l;var p=o.callback;o.callback=function(e){o.autoClose&&w(),p&&p.call(a,e)};var g=t.extend(!0,{},o,{id:s}),m=o.mask?e.mask(g):null;function v(i){d=!1;var s=t.extend(!0,{},o,i);return s.onBeforeInit&&s.onBeforeInit.call(a,n),s.appendTo=s.appendTo||"body",r=t(s.appendTo),o=a.config=s,s.autoTrigger&&c.length<1&&b(s),c=e.objId(l),s.onInited&&s.onInited.call(a,s),this}function b(n){if(!d){var i=t.extend(!0,{},o,n);if(c=e.objId(l),c.children(".bui-loading-cell"),c.hasClass("bui-loading-pause"))c.removeClass("bui-loading-pause"),T.call(this,"start");else{c.length&&c.remove();var s=function(t){var n=(t=t||{}).text,i=r.width()||document.documentElement.clientWidth,o=n&&"block"==t.display?parseInt(t.height)+30:parseInt(t.height),s=-i/2,c=-o/2,u="block"==t.display?e.prefix("loading-block"):e.prefix("loading-inline"),d="";return d+='<div id="'+l+'" class="'+e.prefix("loading")+" "+u+'" style="width:'+i+"px;height:"+o+"px;line-height:"+o+"px;margin-left:"+s+"px;margin-top:"+c+"px;"+(t.zIndex?"z-index:"+t.zIndex:"")+'" >',t.onlyText||(d+='<div class="'+e.prefix("loading-cell")+'" style="width:'+parseFloat(t.width)+"px;height:"+parseFloat(t.height)+'px;"></div>'),d+='<div class="'+e.prefix("loading-text")+'">'+t.text+"</div>",d+="</div>",t&&t.template?t.template.call(a,t):d}(i);r.append(s),m&&m.show(),T.call(this,"show")}return i.timeout&&(h&&clearTimeout(h),h=setTimeout((function(){w()}),i.timeout)),u||function(e){var t=e||o;r.off("click.bui","#"+l).on("click.bui","#"+l,(function(e){t.callback&&t.callback.call(a,e),e.stopPropagation()})),u=!0}(i),f=!0,this}}function y(t){if(!d)return c=e.objId(l),i=c.children(".bui-loading-text"),void 0===t?i&&i.text():(i&&i.html(t),this)}function w(){if(!d)return(c=e.objId(l))&&c.remove(),c=null,m&&m.remove(),u=!1,f=!1,T.call(this,"remove"),T.call(this,"hide"),this}function x(){if(!d)return c=e.objId(l),(o.appendTo||c&&c.length)&&(c.css("display","none"),m&&m.hide()),f=!1,T.call(this,"hide"),this}function k(t,n){return e.off.apply(a,arguments),this}function T(t){a.self=this==window||this==a?null:this,e.trigger.apply(a,arguments)}return v(o),a}}(window.bui||{},window.libs),function(e,t){e.slide=function(n){var i,a,o,r,l,s,c,u,d,f,h,p,g,m,v,b,y,w,x,k,T,I,O,C,S,L,j,P={name:"slide",handle:{},on:ve,off:be,to:oe,load:function(n){var i=t.extend(!0,{},{id:null,url:"",preload:!1,param:{},success:null,fail:null},n),a=i.url||"",o=null,u=s.length?$+1:0;if(i.id)o=e.obj(i.id);else{var d=s.eq(u);d.length?o=d:(!function(t){var n,i=e.guid(),a=(t=t||1,"");for(n=0;n<t;n++)a+='<li id="'+i+'" style="-webkit-box-flex:1;box-flex:1;width:'+g+"px;height:"+b+'px;"></li>';r.append(a),s=r.children();var o=g*s.length;c=s.length,l.width(o)}(),s=r.children(),o=s.eq(u))}if(a)if($=u,M[u]=i.param,a in R){var f="cache";e.array.compare(D,u)||(D.push(u),o.html(R[a]),i.success&&i.success.call(P,R[a],f),ye.call(P,"load",R[a],f)),i.preload||oe(u)}else loader.importHtml(a,(function(t,n){t?(R[a]=t,e.array.compare(D,u)||(D.push(u),o.html(R[a]),i.success&&i.success.call(P,R[a],n),ye.call(P,"load",t,n)),i.preload||oe(u)):(i.fail&&i.fail.call(o,t,n),ye.call(P,"loadfail",t,n))}),(function(e,t){i.fail&&i.fail.call(P,e,t),ye.call(P,"loadfail",e,t)}));return this},resize:function(e){var i=t.extend(!0,{},n,e);return J(i),X(i),oe($,"none"),this},getPageParams:function(e){return M[e="number"==typeof e?e:$]||{}},getPages:Z,$active:ge,currentMain:ge,currentMenu:function(e){var t=void 0===e?$:e;return o.eq(t)[0]},prev:se,next:ce,stop:le,start:function(e){re(e)},lock:fe,index:function(){return E.loop?$-1:$},unlock:he,destroy:function(e){e=1==e;le(),a&&(a.off("click.bui"),e&&a.remove());i&&(i.off(),e&&i.remove());be("stop"),be("play"),be("first"),be("last"),be("to")},widget:function(t){var n={loading:F};return e.widget.call(n,t)},option:function(t,n){return e.option.call(P,t,n)},config:E,init:K},E=P.config=t.extend(!0,{},{id:"",menu:".bui-slide-head > ul",children:".bui-slide-main > ul",main:".bui-slide-main",header:"header",footer:"footer",item:"li",prev:".bui-slide-prev",next:".bui-slide-next",alignClassName:"",alignPage:"center",stopHandle:"",width:0,height:0,data:null,zoom:!0,transition:200,interval:5e3,relative:!1,swipe:!0,animate:!0,delay:!1,bufferEffect:!0,visibleNum:1,scrollNum:1,distance:40,direction:"x",autoplay:!1,loop:!1,cross:!1,autoheight:!1,autoinit:!0,scroll:!1,index:0,fullscreen:!1,autopage:!1,autoload:!1,needLoading:!1,async:!0,template:null,callback:null,onBeforeTouchstart:null,onBeforeTouchmove:null,onBeforeTouchend:null,onBeforeTo:null,onBeforeInit:null,onInited:null,onStart:null,onMove:null,onEnd:null},e.config.slide,n),N={},$=0,B=!1,R={},F=null,D=[],M=[],A=!1,H={x:{},y:{}},z=/hp-tablet/gi.test(navigator.appVersion),V="ontouchstart"in window&&!z,q="",U=0,W=0,_=!1,Y=!1;N={x1:0,x2:0,y1:0,y2:0,direction:""};try{E.autoinit&&K(E)}catch(t){e.showLog(t)}function K(n){var c=t.extend(!1,E,n);if(!1===(c.onBeforeInit&&c.onBeforeInit.call(P,c)))return this;if(c.id){if(i=e.obj(c.id),c.relative){var u=i.parent().width();c.width=u}if(E=P.config=c,q=c.direction,"function"==typeof c.template)i.html(c.template.call(P,c.data||[])||"");else if(c.data&&!c.template){if(i.find(c.main).length<=0){var d=function(e){return`<div class="${e.main.substr(1)}">\n              <ul class="bui-slide-main-ul">\n              </ul>\n            </div>`}(c);i.html(d)}var f=i.find(c.children),h=me.call(P,c.data);f.html(h)}if(c.needLoading&&(F=bui.loading({appendTo:i})),a=0==c.menu.indexOf("#")?e.obj(c.menu):i.find(c.menu).eq(0),o=a.children(),r=i.find(c.children).eq(0),l=r.parent(),s=r.children(),C=s.length,c.loop&&s.length){var p=s.eq(s.length-1).clone(!0),g=s.eq(0).clone(!0);r.prepend(p).append(g);var m=(s=r.children()).length-1;be("afterto"),ve("afterto",(function(e){0==e&&oe(m-1,"none"),e==m&&oe(1,"none")})),oe(1,"none"),!i.hasClass(".bui-slide-loop")&&i.addClass("bui-slide-loop")}if(c.cross&&s.length){function v(e){var t=s.eq(e);t.removeClass("bui-cross-prev").removeClass("bui-cross-next"),t.prev().removeClass("bui-cross-next").addClass("bui-cross-prev"),t.next().removeClass("bui-cross-prev").addClass("bui-cross-next")}!i.hasClass(".bui-slide-cross")&&i.addClass("bui-slide-cross"),be("to",v),ve("to",v),c.loop?oe(1,"none"):oe(0,"none")}return J(c),X(c),(O=c.autoplay)&&re(),B||(!function(){var e=function(e){var n=t(this).hasClass("active"),i=t(this).index(),a=t(this).attr("disabled"),o=t(this).hasClass("disabled")||""==a||"true"==a||"disabled"==a;if(e.currentIndex=i,e.prevIndex=$,!1===(E.onBeforeTo&&E.onBeforeTo.call(P,e)))return!1;n||o||(E.animate?oe(i):oe(i,"none"),O&&re()),e.stopPropagation()};0==E.menu.indexOf("#")?a.off("click.bui","li").on("click.bui","li",e):i.off("click.bui",E.menu+" li").on("click.bui",E.menu+" li",e);i.off("click.bui",E.prev).on("click.bui",E.prev,se),i.off("click.bui",E.next).on("click.bui",E.next,ce);var n=E.children+" "+E.item;E.data&&i.off("click.bui",n).on("click.bui",n,(function(e){var n=t(e.currentTarget),i=n.attr("href"),a="true"==n.attr("data-reload"),o="true"==n.attr("data-iframe"),r="true"==n.attr("data-page"),l="true"==n.attr("data-close"),s="true"==n.attr("data-synchistory");i&&r?bui.page({url:i,iframe:o,close:l,synchistory:s}):i&&bui.load({url:i,reload:a,iframe:o}),ye.call(P,"click",e),E.callback&&E.callback.call(P,e,P),e.stopPropagation()})),he(),E.swipe||fe();B=!0}(),A=!0),$=r.children(".active").length?r.children(".active").index():$||c.index,parseInt(c.index)>0?oe(c.index,"none"):oe($,"none"),c.onInited&&c.onInited.call(P,c),this}e.showLog("slide id不能为空","bui.slide.init")}function J(e){k=document.documentElement.clientWidth,T=document.documentElement.clientHeight,e.height=String(e.height).indexOf("%")>-1?parseFloat(e.height)/100*T:parseFloat(e.height),e.width=String(e.width).indexOf("%")>-1?parseFloat(e.width)/100*k:parseFloat(e.width),s=r.children();var t=i.parents(".bui-page"),n=(i.parents("main"),i[0]&&i[0].offsetTop||0),o=t.children(e.header),l=(o[0]&&o[0].offsetHeight,t.children(e.footer)),u=l[0]&&l[0].offsetHeight||0;y=T-(u||0)-n,y=i.parent("main").length?i.parent("main").height():y,w=0==e.height?y:e.height;var m="static"==a.parent().css("position")?a.css("position"):a.parent().css("position");x=i.find(e.menu).length?"absolute"==m||"fixed"==m?w:w-(a[0]&&a[0].offsetHeight||0):w,p=e.fullscreen?T:0==e.height?x:e.height,h=e.fullscreen?k:e.width||k,c=s.length,g="x"==q?h/E.visibleNum:h,b="y"==q?p/E.visibleNum:p,I="y"==E.direction?b*E.scrollNum:g*E.scrollNum,d=h*c/E.visibleNum,f=p*c/E.visibleNum}function X(e){s=r.children(),C=e.loop?s.length-2:s.length,H={x:{swipeDir:"swipeleft",swipeDir2:"swiperight",width:I},y:{swipeDir:"swipeup",swipeDir2:"swipedown",width:I}},l[(S={x:{parentInitKey:"width",parentInitValue:d,boxCss:"display:-webkit-box;display:box;-webkit-box-align: start;-webkit-box-pack: center;width:100%;",boxItemCSS:"-webkit-box-flex:1;box-flex:1;width:"+g+"px;height:"+b+"px;"},y:{parentInitKey:"height",parentInitValue:f,box:"display:-webkit-box;display:box;-webkit-box-align: start;-webkit-box-pack: center;width:100%;-webkit-box-orient: vertical;box-orient: vertical;",boxItemCSS:"-webkit-box-flex:1;box-flex:1;width:"+g+"px;height:"+b+"px;"}})[q].parentInitKey](S[q].parentInitValue);var n,a=s.length;for(n=0;n<a;n++){var c=s[n].getAttribute("data-scroll"),u=null==c?E.scroll:"false"!=c;S[q].boxItemCSS=S[q].boxItemCSS+(u?"overflow:auto;":"overflow:hidden;"),s[n].style.cssText=S[q].boxItemCSS}try{r[0]&&(r[0].style.cssText=S[q].boxCss)}catch(e){console.log("请检查下children参数是否正确.","bui.slide id:"+E.id)}var p="y"==q&&E.visibleNum>1?x/E.visibleNum:x,m=E.zoom?w/100+"rem":w+"px",v=E.zoom?p/100+"rem":p+"px";E.zoom;if(E.fullscreen?(t("main").css({position:"static"}),i.addClass("bui-slide-fullscreen").css({position:"absolute",top:0,left:0,right:0,bottom:0,"z-index":10,overflow:"hidden",width:h,height:T}),s.addClass(E.alignClassName||"bui-box-center").css("height",T)):(i.css({position:"relative",overflow:"hidden",width:h,height:m}),s.addClass(E.alignClassName).height(v)),E.autoheight&&i.addClass("bui-slide-autoheight"),E.autopage){var y=function(e,t){var n,i="",a=(t=t||1,e);for(i+=`<div class="bui-slide-head bui-align-${E.alignPage}">`,i+="<ul >",n=1;n<Number(a)+1;n++)i+="<li "+(n==t?'class="active"':"")+">"+n+"</li>";return i+="</ul >",i+="</div >"}(Z(),r.find(".active").index()+1);i.children(".bui-slide-head").remove(),i.append(y),o=i.find(E.menu).eq(0).children()}}function Z(){var e=C,t=parseInt(e/E.visibleNum),n=parseInt(e/E.scrollNum),i=1==E.visibleNum?t:t+1,a=1==E.scrollNum?n:n+1,o=1==E.scrollNum||E.scrollNum==e?i:a;return o=E.loop?o+2:o}function G(t){var n=t.originalEvent&&t.originalEvent.targetTouches||t.targetTouches,i=V?n[0]:t;if(N.x1=i.pageX,N.y1=i.pageY,N.direction="",!1===(E.onBeforeTouchstart&&E.onBeforeTouchstart.call(P,t,N)))return!1;E.stopHandle&&e.unit.checkTargetInclude(t.target,E.stopHandle)?_=!1:(L=-$*I,j=-$*I,n.length>1||t.scale&&1!==t.scale?ne("x"==q?L:j):(O&&(le(),O=!0),ye.call(P,"touchstart",t,N),E.onStart&&E.onStart.call(P,t,N,P),_=!0))}function Q(n){var i=n.originalEvent&&n.originalEvent.targetTouches||n.targetTouches;if(i.length>1||n.scale&&1!==n.scale)ne("x"==q?L:j);else if(_){var a=V?i[0]:n;if(N.x2=a.pageX,N.y2=a.pageY,!1===(E.onBeforeTouchmove&&E.onBeforeTouchmove.call(P,n,N)))return!1;N.direction||(N.direction=e.swipeDirection(N.x1,N.x2,N.y1,N.y2)),"swipeleft"!==N.direction&&"swiperight"!==N.direction||(n.preventDefault(),n.stopPropagation()),ye.call(P,"touchmove",n,N);try{if("y"==q&&E.scroll){var o=t(n.target).closest(".active"),r=o[0].scrollTop||0,l=o[0].scrollHeight||0,s=o[0].offsetHeight||0;if("swipedown"===N.direction&&r>1)return void(Y=!1);if("swipeup"===N.direction&&l-r-s>=2)return void(Y=!1)}}catch(n){}m=N.x2-N.x1,v=N.y2-N.y1,H.x.move=L+m,H.x.absDelta=Math.abs(m),H.y.move=j+v,H.y.absDelta=Math.abs(v);var c=Z();N.direction!==H[q].swipeDir&&N.direction!==H[q].swipeDir2||(E.delay&&H[q].absDelta>E.distance&&ne(H[q].move,"none"),E.delay||((E.bufferEffect||0==$&&c>1&&("swipeleft"==N.direction||"swipeup"==N.direction)||$==c-1&&c>1&&("swiperight"==N.direction||"swipedown"==N.direction)||$>0&&$<c-1&&c>1)&&ne(H[q].move,"none"),n.preventDefault()),E.onMove&&E.onMove.call(P,n,N,P)),Y=!0}}function ee(e){switch(ye.call(P,"touchend",e,N),N.direction){case"swiperight":case"swipedown":e.currentIndex=$-1;break;case"swipeleft":case"swipeup":e.currentIndex=$+1}if(e.prevIndex=$,!1===(E.onBeforeTouchend&&E.onBeforeTouchend.call(P,e,N)))return!1;if(Y){if(m=N.x2-N.x1,v=N.y2-N.y1,H.x.delta=L,H.x.absDelta=Math.abs(m),H.y.delta=j,H.y.absDelta=Math.abs(v),"x"!=E.direction||"swipeleft"!=N.direction&&"swiperight"!=N.direction){if("y"==E.direction&&("swipeup"==N.direction||"swipedown"==N.direction))t=E.onBeforeTo&&E.onBeforeTo.call(P,e)}else var t=E.onBeforeTo&&E.onBeforeTo.call(P,e);if(!1===t)return ne(H[q].delta),"swipeleft"!=N.direction&&"swiperight"!=N.direction||e.stopPropagation(),U+=N.y2-N.y1,W+=N.x2-N.x1,N.lastX=W,N.lastY=U,N={x1:0,x2:0,y1:0,y2:0,direction:""},_=!1,Y=!1,ae(),!1;H[q].absDelta>E.distance?(te.call(this,e,N,H),E.onEnd&&E.onEnd.call(P,e,N,P)):H[q].absDelta<E.distance&&ne(H[q].delta),O&&re(),"swipeleft"!=N.direction&&"swiperight"!=N.direction||e.stopPropagation(),U+=N.y2-N.y1,W+=N.x2-N.x1,N.lastX=W,N.lastY=U,N={x1:0,x2:0,y1:0,y2:0,direction:""},_=!1,Y=!1,ae()}}function te(e,t,i){var a;if(ue(),$=r.children(".active").index(),t.direction==i[q].swipeDir){var o=s.length,l=o-E.visibleNum,c=o%E.scrollNum!=0?l+1:l/E.scrollNum+1;if($>=c-1)a=$,i[q].delta=-a*i[q].width,ne(i[q].delta),$=a,de(a),ye.call(P,"last",a);else if(a=$+1,i[q].delta=-a*i[q].width,ne(i[q].delta),$=a,de(a),n.autoload)pe($);else{s.eq($);if(n.loop&&$>C)return;ye.call(P,"to",a)}ye.call(P,"next",a)}else if(t.direction==i[q].swipeDir2)if($>0){if(a=$-1,i[q].delta=-a*i[q].width,ne(i[q].delta),$=a,de(a),n.autoload)pe($);else{s.eq($);if(n.loop&&0==$)return;ye.call(P,"to",a)}ye.call(P,"prev",a)}else a=$,i[q].delta=-a*i[q].width,ne(i[q].delta),$=a,de(a),ye.call(P,"first",a)}function ne(e,t){var n=E.transition;t=t||"all "+n+"ms",e=e||0;switch(q){case"x":ie(e+"px",0,t,l);break;case"y":ie(0,e+"px",t,l)}return this}function ie(e,t,n,a){var o=t||0;"y"==q&&E.zoom&&String(t).indexOf("%")<=-1&&(o=parseInt(t)/100+"rem");a=a||i;var r=e=e||0,l=String(e).indexOf("%")>-1?String(e):r,s=String(t).indexOf("%")>-1?String(t):o;n="number"==typeof n?"all "+n+"ms":n||"all 300ms";try{a.css({"-webkit-transition":n,transition:n,"-webkit-transform":"translate("+l+","+s+")",transform:"translate("+l+","+s+")"})}catch(e){console.log(e.message)}}function ae(e){l.one("webkitTransitionEnd",(function(){l.css({"-webkit-transition":"none",transition:"none"}),e&&e.call(P,$),ye.call(P,"afterto",$)}))}function oe(e,i,a){ue();var r=0,l=null;a=0!=a;if("string"==typeof e&&e.indexOf(".html")>-1){var c=[];o.each((function(n,i){var a=t(i).attr("href")||void 0;c[n]=a,a==e&&(r=n)}))}else r=parseInt(e);"function"==typeof i&&(l=i,i="");var u={x:{transform:-r*parseFloat(I)},y:{transform:-r*parseFloat(I)}},d=Z();if(t(".bui-slide-video video").each((function(e,t){this.pause()})),r>=d||r<0)return!1;if(ne(u[q].transform,i),$=r,de(r),O&&re(),n.autoload)pe($);else{s.eq($);if(!a)return;ye.call(P,"to",r)}return ae(l),this}function re(e){e=e||E.interval;le(),O=!0;var t=$;u=setInterval((function(){var e=Z();t>=0&&t<e-1?t+=1:t=0,oe(t)}),e),ye.call(P,"play")}function le(e){if(u)try{window.clearInterval(u),O=!1,ye.call(P,"stop")}catch(e){}return this}function se(){var e=$-1;return E.loop&&e<1&&(e=parseInt(C/E.scrollNum)),oe(e),ye.call(P,"prev",e),this}function ce(){var e=$+1;return E.loop&&e>parseInt(C/E.scrollNum)+1&&(e=1),oe(e),ye.call(P,"next",e),this}function ue(t){a=0==(t=E).menu.indexOf("#")?e.obj(t.menu):i.find(t.menu).eq(0),o=a.children(),r=i.find(t.children).eq(0),l=r.parent(),s=r.children()}function de(e){e=e||0,s.removeClass("active"),s.eq(e).addClass("active"),o.removeClass("active"),o.eq(e).addClass("active")}function fe(){return i.off("touchstart",E.children,G).off("touchmove",E.children,Q).off("touchend",E.children,ee).off("touchcancel"),ye.call(P,"lock"),this}function he(e){return i.on("touchstart",E.children,G).on("touchmove",E.children,Q).on("touchend",E.children,ee).on("touchcancel",(function(){ne("x"==q?L:j)})),ye.call(P,"unlock"),this}function pe(t){var n=s.eq(t),i=o.eq(t).attr("href")||"";if(e.array.compare(D,t))return ye.call(P,"to",t,"200"),!1;E.autoload&&(i?(i=e.unit.resolvePath(i))in R?(n.html(R[i]),D.push(t),!A&&ye.call(P,"load",t,status),!A&&ye.call(P,"to",t,status),A=!1):(R[i]="",F&&F.show(),loader&&loader.import(i,(function(e){R[i]=e,n.html(e),D.push(t),ye.call(P,"load",t,status),!A&&ye.call(P,"to",t,status),A=!1,F&&F.hide()}),(function(e,n){ye.call(P,"loadfail",t,n),F&&F.hide()}))):(!A&&ye.call(P,"to",t),A=!1))}function ge(e){var t=void 0===e?$:e;return s.eq(t)[0]}function me(e){var t="";return(e=e||[]).length&&e.forEach((function(e,n){var i=e.title?`<div class="bui-slide-title">${e.title}</div>`:"",a=e.background?`<div class="bui-slide-img" style="background-image:url(${e.background})"></div>`:`<div class="bui-slide-img"><img src="${e.image}" alt="${e.title||""}"/></div>`,o="";if("video"==e.type||e.video){var r=e.video||{};o=`<div class="bui-slide-video">\n                        <video class="bui-video" src="${e.src||r.src}" width="${e.width||r.width||"100%"}" height="${e.height||r.height||"100%"}" poster="${e.poster||r.poster||""}" ${e.preload||r.preload?"preload":""} ${e.muted||r.muted?"muted":""} ${e.autoplay||r.autoplay?"autoplay":""} ${e.controls||r.controls?"controls":""} ${e.loop||r.loop?"loop":""} ${e.fullscreen||r.fullscreen?"fullscreen":""}></video>\n                        </div>`}t+=`<li data-id="${e.id||""}" href="${e.url||""}" data-reload="${e.reload||!1}" data-iframe="${e.iframe||!1}" data-page="${e.page||!1}" data-close="${e.page||!0}" data-synchistory="${e.synchistory||!1}">\n                  ${o||a}\n                  ${i}\n                  </li>`})),t}function ve(t,n){return e.on.apply(P,arguments),this}function be(t,n){return e.off.apply(P,arguments),this}function ye(t){P.self=this==window||this==P?null:this,e.trigger.apply(P,arguments)}return P}}(window.bui||{},window.libs),function(e,t){var n,i;e.swipe=(n=null,i=null,function(a){var o,r,l,s,c,u,d,f,h,p,g,m,v={name:"swipe",handle:{},active:function(){return n},isActive:function(){return F},on:function(t,n){return e.on.apply(v,arguments),this},off:de,close:function(){if(!R)return le(),this},open:function(e){if(!R){var t=e||{};t.transition=t.transition||b.transition,t.index=t.index||0;var n,i=t.target;switch(z=i,i){case"swiperight":t.target=h.eq(t.index),n=t.target.parent().index(),t.handle=x?o.children().eq(n).children(b.handle):r,B=t.handle,t.target,s=h.attr("data-moving")||m,T&&ee(t);break;case"swipeleft":t.target=f.eq(t.index),n=t.target.parent().index(),t.handle=x?o.children().eq(n).children(b.handle):r,B=t.handle,t.target,s=f.attr("data-moving")||m,I&&Q(t);break;case"swipedown":t.target=g.eq(t.index),n=t.target.parent().index(),t.handle=x?o.children().eq(n).children(b.handle):r,B=t.handle,t.target,s=g.attr("data-moving")||m,C&&ne(t);break;case"swipeup":t.target=p.eq(t.index),n=t.target.parent().index(),t.handle=x?o.children().eq(n).children(b.handle):r,B=t.handle,t.target,s=p.attr("data-moving")||m,O&&te(t);break;default:t.target=h.eq(t.index),n=t.target.parent().index(),t.handle=x?o.children().eq(n).children(b.handle):r,B=t.handle,t.target,T&&ee(t)}return fe.call(v,"open",i),this}},destroy:function(e){e=1==e,o&&(o.off(),e&&o.remove()),de("open"),de("close"),R=!0},lock:ue,unlock:function(){if(!R)return o.on("touchmove",J).on("touchend",X).on("touchcancel",(function(){})),fe.call(v,"unlock"),this},init:U},b=v.config=t.extend(!0,{},{id:"",handle:".handle",swiperight:".swiperight",swipeleft:".swipeleft",swipeup:".swipeup",swipedown:".swipedown",direction:"x",stopHandle:"",hasChild:!1,handleMove:!0,targetMove:!0,alwaysTrigger:!1,width:0,height:0,movingDistance:280,initDistance:0,zoom:!1,distance:40,autoinit:!0,onBeforeTouchstart:null,onBeforeTouchmove:null,onBeforeTouchend:null,onBeforeInit:null,onInited:null,transition:300},e.config.swipe,a),y={},w=b.direction,x=b.hasChild,k=!1,T=!1,I=!1,O=!1,C=!1,S=!1,L=!1,j=!1,P=!1,E=b.handleMove,N=b.targetMove,$=!1,B=null,R=!1,F=!1,D=/hp-tablet/gi.test(navigator.appVersion),M="ontouchstart"in window&&!D,A=!1,H=!1,z=(y={x1:0,x2:0,y1:0,y2:0,direction:"",deltax:0,movingleft:0,movingright:0,movingup:0,movingdown:0,scrollObj:null},""),V=b.initDistance,q=document.documentElement;function U(i){var a=t.extend(!0,b,i);if(a.onBeforeInit&&a.onBeforeInit.call(v,a),R=!1,a.id)return o=e.obj(a.id),c=a.width>0?a.width:q.clientWidth,u=a.height>0?a.height:q.clientHeight,r=o.children(a.handle),l=x?o.children():o,f=l.children(a.swipeleft),h=l.children(a.swiperight),p=l.children(a.swipeup),g=l.children(a.swipedown),m=parseFloat(a.movingDistance),s=m,Y(),k||(W(),k=!0),n&&n.close(),$||(ue(),o.on("touchstart",K).on("touchmove",J).on("touchend",X).on("touchcancel",(function(){})),$=!0),a.onInited&&a.onInited.call(v,a),this;e.showLog("swipe id不能为空","bui.swipe.init")}function W(e){l.css({width:c,position:"relative",overflow:"hidden"}),!x&&l.css({height:u}),r.css({position:"relative","z-index":10});try{var t=f.attr("data-moving")||m,n=h.attr("data-moving")||m,i=p.attr("data-moving")||m,a=g.attr("data-moving")||m,o=_(t),s=_(n),d=_(i),v=_(a);I&&f.css({width:o}),T&&h.css({width:s}),C&&g.css({height:v}),O&&p.css({height:d})}catch(e){}}function _(e){return b.zoom?e/100+"rem":e+"px"}function Y(){"x"==w?(T=!!h.length,I=!!f.length):"y"==w?(C=!!g.length,O=!!p.length):"xy"==w&&(C=!!g.length,O=!!p.length,I=!!f.length,T=!!h.length)}function K(n){var i=n.originalEvent&&n.originalEvent.targetTouches||n.targetTouches;if(i.length>1||n.scale&&1!==n.scale)A=!1;else if(b.stopHandle&&e.unit.checkTargetInclude(n.target,b.stopHandle))A=!1;else{var a=M?i[0]:n;if(y.id=b.id,y.x1=a.pageX,y.y1=a.pageY,y.direction="",d=t(n.target).closest(b.handle),!1===(b.onBeforeTouchstart&&b.onBeforeTouchstart.call(v,n,y)))return!1;fe.call(v,"touchstart",n,y);var o=t(n.target).closest(".bui-scroll"),s=t(n.target).closest(".bui-tab-main li.active"),c=t(n.target).closest("main"),u=t(n.target).closest(".swipedown"),k=t(n.target).closest(".swipeup"),S=u.length?u:k.length?k:d;if(y.scrollObj=o.length?o:s.length?s:c.length?c:u.length?u:S,y.scrollObj.scrollTop(),x&&!F&&(l=(r=d).parent(),f=l.children(b.swipeleft),h=l.children(b.swiperight),p=l.children(b.swipeup),g=l.children(b.swipedown),Y(),l.index(),W(),(0==b.height||""==l[0].style.height)&&l.height(d[0]&&d[0].offsetHeight)),y.movingleft=parseInt(f.attr("data-moving")||m),y.movingright=parseInt(h.attr("data-moving")||m),y.movingup=parseInt(p.attr("data-moving")||m),y.movingdown=parseInt(g.attr("data-moving")||m),d.length){var L=!1;switch(w){case"x":L=!(!I&&!T);break;case"y":L=!(!O&&!C);break;case"xy":L=!!(I||T||O||C)}}A=null==L||1==L}}function J(t){var a=t.originalEvent&&t.originalEvent.targetTouches||t.targetTouches;if(a.length>1||t.scale&&1!==t.scale)le();else{var l=M?a[0]:t;if(y.x2=l.pageX,y.y2=l.pageY,!1===(b.onBeforeTouchmove&&b.onBeforeTouchmove.call(v,t,y)))return!1;if(fe.call(v,"touchmove",t,y),n&&t.stopPropagation(),A){var c=y.scrollObj.scrollTop()<=0,u=(y.scrollObj[0]&&y.scrollObj[0].scrollHeight)-(y.scrollObj[0]&&y.scrollObj[0].offsetHeight)-y.scrollObj.scrollTop()<=2,m=y.y2-y.y1>0,w=y.y2-y.y1<0;if(j){if(m&&c)return H=!1,void t.preventDefault();if(w&&u&&t.preventDefault(),w&&!u)return void(H=!1);if(m&&!c)return void(H=!1)}if(C&&!j&&(m&&c&&t.preventDefault(),w&&u&&t.preventDefault()),!C&&m&&c&&t.preventDefault(),P){if(m&&c&&t.preventDefault(),w&&u)return t.preventDefault(),void(H=!1);if(w&&!u)return void(H=!1);if(m&&!c)return void(H=!1)}y.direction||(y.direction=e.swipeDirection(y.x1,y.x2,y.y1,y.y2)),"swipeleft"!==y.direction&&"swiperight"!==y.direction||t.preventDefault();try{if("swipeup"===y.direction||"swipedown"===y.direction){var x=o[0].scrollTop||0,k=(o[0].scrollHeight,d[0].scrollTop,d[0].scrollHeight,y.scrollObj[0]&&y.scrollObj[0].scrollTop||0),$=y.scrollObj[0]&&y.scrollObj[0].offsetHeight||0,B=y.scrollObj[0]&&y.scrollObj[0].scrollHeight||0,R=!1,D=!1;x<=0&&k<=0&&(R=!0),B-k-$<=2&&(D=!0)}}catch(t){}var z="swiperight"==y.direction||"swipeleft"==y.direction?y.x2-y.x1:y.y2-y.y1,q=0;y.deltax=F?Math.abs(z):Math.abs(z)+V,!T||"swiperight"!=y.direction||L||F||i?!R||!C||"swipedown"!=y.direction||j||F||i?!I||"swipeleft"!=y.direction||S||F||i?!D||!O||"swipeup"!=y.direction||P||F||i?"swipeleft"==y.direction&&L?(s=y.movingright,q=Z(y,y.movingright),N&&ce(-y.deltax,0,"none",i||h),E&&ce(-q,0,"none",r),fe.call(v,"movingleft",t,y),H=!0,t.stopPropagation()):"swipeup"==y.direction&&j?(s=y.movingdown,q=Z(y,y.movingdown),N&&ce(0,-y.deltax,"none",i||g),E&&ce(0,-q,"none",r),fe.call(v,"movingup",t,y),H=!0,t.preventDefault(),t.stopPropagation()):"swiperight"==y.direction&&S?(s=y.movingleft,q=Z(y,y.movingleft),N&&ce(y.deltax,0,"none",i||f),E&&ce(q,0,"none",r),fe.call(v,"movingright",t,y),H=!0,t.stopPropagation()):"swipedown"==y.direction&&P&&(s=y.movingup,q=Z(y,y.movingup),N&&ce(0,y.deltax,"none",i||p),E&&ce(0,q,"none",r),fe.call(v,"movingdown",t,y),H=!0,t.preventDefault(),t.stopPropagation()):(s=y.movingup,q=G(y,y.movingup),N&&ce(0,q,"none",p),E&&ce(0,-y.deltax,"none",r),fe.call(v,"movingup",t,y),H=!0,t.preventDefault(),t.stopPropagation()):(s=y.movingleft,q=G(y,y.movingleft),N&&ce(q,0,"none",f),E&&ce(-y.deltax,0,"none",r),fe.call(v,"movingleft",t,y),H=!0,t.stopPropagation()):(s=y.movingdown,q=Z(y,y.movingdown),N&&ce(0,q,"none",g),E&&ce(0,y.deltax,"none",r),fe.call(v,"movingdown",t,y),H=!0,t.preventDefault(),t.stopPropagation()):(s=y.movingright,q=Z(y,y.movingright),N&&ce(q,0,"none",h),E&&ce(y.deltax,0,"none",r),fe.call(v,"movingright",t,y),H=!0,t.stopPropagation())}}}function X(e){if(fe.call(v,"touchend",e,y),!1===(b.onBeforeTouchend&&b.onBeforeTouchend.call(v,e,y)))return!1;if(H){var t="swiperight"==y.direction||"swipeleft"==y.direction?Math.abs(y.x2-y.x1):Math.abs(y.y2-y.y1),n="";switch(y.direction){case"swiperight":n="swipeleft";break;case"swipeleft":n="swiperight";break;case"swipeup":n="swipedown";break;case"swipedown":n="swipeup"}T&&"swiperight"==y.direction&&t>b.distance&&!L&&!F?(ee(),fe.call(v,y.direction,e,y),fe.call(v,"open",y.direction)):I&&"swipeleft"==y.direction&&t>b.distance&&!S&&!F?(Q(),fe.call(v,y.direction,e,y),fe.call(v,"open",y.direction)):O&&"swipeup"==y.direction&&t>b.distance&&!P&&!F?(te(),fe.call(v,y.direction,e,y),fe.call(v,"open",y.direction)):C&&"swipedown"==y.direction&&t>b.distance&&!j&&!F?(ne(),fe.call(v,y.direction,e,y),fe.call(v,"open",y.direction)):F&&t<b.distance?(I&&S&&Q(),T&&L&&ee(),O&&P&&te(),C&&j&&ne(),fe.call(v,y.direction,e,y),b.alwaysTrigger&&fe.call(v,"open",y.direction)):F&&t>b.distance?(I&&S&&ae(),T&&L&&ie(),O&&P&&oe(),C&&j&&re(),fe.call(v,y.direction,e,y),fe.call(v,"close",n)):!F&&t<b.distance&&("swipeleft"===y.direction&&I&&!S&&ae(),"swiperight"===y.direction&&T&&!L&&ie(),"swipeup"===y.direction&&O&&!P&&oe(),"swipedown"===y.direction&&C&&!j&&re(),b.alwaysTrigger&&fe.call(v,"close",n),fe.call(v,y.direction,e,y)),z=y.direction,A=!1,H=!1,e.stopPropagation()}}function Z(e,t){var n=-t+e.deltax;return n=n>0?0:n}function G(e,t){var n=t-e.deltax;return n=n>t?t:n}function Q(e){(e=e||{}).transition=e.transition||b.transition,e.target=e.target||f,e.handle=e.handle||r,n&&n.close(),F=!0,S=!0,x&&(n=v,i=f,q.addEventListener("click",se,!0)),N&&ce(0,0,e.transition,e.target),E&&ce(-s,0,e.transition,e.handle)}function ee(e){(e=e||{}).transition=e.transition||b.transition,e.target=e.target||h,e.handle=e.handle||r,n&&n.close(),F=!0,L=!0,x&&(n=v,i=h,q.addEventListener("click",se,!0)),N&&ce(0,0,e.transition,e.target),E&&ce(s,0,e.transition,e.handle)}function te(e){(e=e||{}).transition=e.transition||b.transition,e.target=e.target||p,e.handle=e.handle||r,n&&n.close(),F=!0,P=!0,x&&(n=v,i=p,q.addEventListener("click",se,!0)),N&&ce(0,0,e.transition,e.target),E&&ce(0,-s,e.transition,e.handle)}function ne(e){(e=e||{}).transition=e.transition||b.transition,e.target=e.target||g,e.handle=e.handle||r,n&&n.close(),F=!0,j=!0,x&&(n=v,i=g,q.addEventListener("click",se,!0)),N&&ce(0,0,e.transition,e.target),E&&ce(0,s,e.transition,e.handle)}function ie(e){(e=e||{}).transition=e.transition||b.transition,e.target=h,e.handle=B||r,F=!1,L=!1,x&&(n=null,i=null,B=null,q.removeEventListener("click",se,!0)),N&&ce(-(s+1),0,e.transition,e.target),E&&ce(V,0,e.transition,e.handle)}function ae(e){(e=e||{}).transition=e.transition||b.transition,e.target=f,e.handle=B||r,F=!1,S=!1,x&&(n=null,i=null,B=null,q.removeEventListener("click",se,!0)),N&&ce("101%",0,e.transition,e.target),E&&ce(-V,0,e.transition,e.handle)}function oe(e){(e=e||{}).transition=e.transition||b.transition,e.target=p,e.handle=B||r,F=!1,P=!1,x&&(n=null,i=null,B=null,q.removeEventListener("click",se,!0)),N&&ce(0,"100%",e.transition,e.target),E&&ce(0,-V,e.transition,e.handle)}function re(e){(e=e||{}).transition=e.transition||b.transition,e.target=g,e.handle=B||r,F=!1,j=!1,x&&(n=null,i=null,B=null,q.removeEventListener("click",se,!0)),N&&ce(0,-s,e.transition,e.target),E&&ce(0,V,e.transition,e.handle)}function le(){L&&ie(),S&&ae(),j&&re(),P&&oe(),fe.call(v,"close",z)}function se(e){var i=t(e.target),a=i.closest(f).length||i.closest(h).length||i.closest(p).length||i.closest(g).length||e.target.className.indexOf("bui-mask")>-1||e.target.className.indexOf("bui-click")>-1;n&&(a||(n.close(),e.stopPropagation()))}function ce(e,t,n,i){var a=i||o,r=(e=e||0,t=t||0,b.zoom?parseFloat(e)/100+"rem":parseFloat(e)+"px"),l=b.zoom?parseFloat(t)/100+"rem":parseFloat(t)+"px",s=String(e).indexOf("%")>-1?e:r,c=String(t).indexOf("%")>-1?t:l;return n="number"==typeof n?"all "+n+"ms":n||"all 300ms",a.css({"-webkit-transition":n,transition:n,"-webkit-transform":"translate("+s+","+c+")",transform:"translate("+s+","+c+")"}).one("webkitTransitionEnd",(function(){a.css({"-webkit-transition":"none",transition:"none"})})),this}function ue(){if(!R)return o.off("touchmove",J).off("touchend",X).off("touchcancel",(function(){})),fe.call(v,"lock"),this}function de(t,n){return e.off.apply(v,arguments),this}function fe(t){v.self=this==window||this==v?null:this,e.trigger.apply(v,arguments)}return b.autoinit&&U(b),v})}(window.bui||{},window.libs),function(e,t){e.sidebar=function(n){var i,a={name:"sidebar",handle:{},on:function(t,n){return e.on.apply(a,arguments),this},off:p,active:function(){return i.active()},isActive:function(){return s},open:f,close:h,lock:function(){return i.lock(),g.call(this,"lock"),this},unlock:function(e){return i.unlock(),g.call(this,"unlock"),this},destroy:function(e){e=1==e;u&&u.off("click.bui");p("open"),p("close"),r&&r.destroy(e),i&&i.destroy(e)},widget:function(t){var n={swipe:i,mask:r};return e.widget.call(n,t)},option:function(t,n){return e.option.call(a,t,n)},config:o,init:d},o=a.config=t.extend(!0,{},{id:"",trigger:"",handle:".bui-page",swiperight:".swiperight",swipeleft:".swipeleft",handleMove:!0,zIndex:121,mask:!0,width:280,opacity:.1,height:0,zoom:!0,onBeforeTouchstart:null,onBeforeTouchmove:null,onBeforeTouchend:null,autoinit:!0,onBeforeInit:null,onInited:null,distance:40},e.config.sidebar,n),r=null,l=null,s=!1,c=!1,u=null;function d(n){var d=t.extend(!0,o,n);return d.onBeforeInit&&d.onBeforeInit.call(a,d),o=a.config=d,d.trigger&&(u=e.obj(d.trigger)),l=e.obj(d.handle),i||(i=e.swipe({id:d.id,handle:d.handle,movingDistance:d.width,swiperight:d.swiperight,swipeleft:d.swipeleft,direction:"x",hasChild:!1,width:0,height:0,onBeforeTouchstart:d.onBeforeTouchstart,onBeforeTouchmove:d.onBeforeTouchmove,onBeforeTouchend:d.onBeforeTouchend,handleMove:d.handleMove,zoom:d.zoom,distance:d.distance,transition:300})),o.mask&&!r&&(r=bui.mask({id:d.id+"-mask",appendTo:l,autoTrigger:!1,zIndex:d.zIndex-1,opacity:d.opacity,callback:function(){i.close()}})),c||(!function(){var e=this;i.on("open",(function(t){u&&u.addClass("active"),r&&r.show(),l.css("overflow-y","hidden"),s=!0,g.call(e,"open",t)})),i.on("close",(function(){u&&u.removeClass("active"),r&&r.hide(),l.css("overflow-y","auto"),s=!1,g.call(e,"close")})),u&&u.off("click.bui").on("click.bui",(function(e){if(!t(this).hasClass("disabled")){var n=t(this).attr("data-target")||"swiperight";s?h():f({target:n})}})),c=!0}(),d.height>0&&e.obj(d.id).height(d.height)),d.onInited&&d.onInited.call(a,d),this}function f(e){var t=e||{};return t.target=t.target||"swiperight",t.transition=t.transition||300,i.open(t),this}function h(){return i.close(),this}function p(t,n){return e.off.apply(a,arguments),this}function g(t){a.self=this==window||this==a?null:this,e.trigger.apply(a,arguments)}return o.autoinit&&d(o),a}}(bui||{},libs),function(e,t){e.listview=function(n){var i,a,o,r={name:"listview",active:function(){return i.active()},lock:function(){return i.lock(),d.call(this,"lock"),this},unlock:function(e){return i.unlock(),d.call(this,"unlock"),this},open:function(e){var t=e||{};return t.target=t.target||("right"==l.position?l.swipeleft.substr(1):l.swiperight.substr(1)),t.transition=t.transition||300,t.index=t.index||0,i.open(t),this},close:function(){return i.close(),this},destroy:function(e){e=1==e;o&&(o.off("click.bui"),o=null);a&&(a.off("click.bui"),e&&a.remove(),a=null);u("open"),u("close"),i&&i.destroy(e),l=null,r=null},widget:function(t){var n={swipe:i};return e.widget.call(n,t)},option:function(t,n){return e.option.call(r,t,n)},config:l,init:c},l=r.config=t.extend(!0,{},{id:"",data:[],handle:".bui-btn",swiperight:".swiperight",swipeleft:".swipeleft",position:"right",width:0,height:0,menuWidth:160,menuHeight:0,distance:80,zoom:!1,autoinit:!0,template:null,onBeforeTouchstart:null,onBeforeTouchmove:null,onBeforeTouchend:null,onBeforeInit:null,onInited:null,callback:null},e.config.listview,n),s=!1;function c(n){var c=t.extend(!0,l,n);return c.onBeforeInit&&c.onBeforeInit.call(r,c),l=r.config=c,a=e.obj(c.id),(o=a.children()).length&&function(e){e.height>0&&a.height(e.height);e.data&&e.data.length?o.each((function(n,i){var a=t(i),o=a.attr("status"),l=e.menuHeight>0?e.menuHeight:i.offsetHeight;if(!o){var s="function"==typeof e.template?e.template.call(r,e.data):function(e){var n="",i="right"==e.position?e.swipeleft.substr(1):e.swiperight.substr(1);return n+='<div class="bui-listview-menu '+i+'">',t.each(e.data,(function(e,t){n+='    <div class="bui-btn '+t.classname+'">'+t.text+"</div>"})),n+="</div>"}(e);a.append(s).attr("status","1")}i.style.height||t(i).height(l)})):o.each((function(n,i){var a=e.menuHeight>0?e.menuHeight:i.offsetHeight;i.style.height||t(i).height(a)}))}(c),s||function(e){var t=this,n=function(t){t.ui=r,e.callback&&e.callback.call(r,t,i)};a.off("click.bui",".bui-listview-menu .bui-btn").on("click.bui",".bui-listview-menu .bui-btn",n),(i=bui.swipe({id:e.id,handle:e.handle,movingDistance:e.menuWidth,swiperight:e.swiperight,swipeleft:e.swipeleft,direction:"x",hasChild:!0,width:e.width,height:0,zoom:e.zoom,distance:e.distance,onBeforeTouchstart:e.onBeforeTouchstart,onBeforeTouchmove:e.onBeforeTouchmove,onBeforeTouchend:e.onBeforeTouchend,transition:300})).on("open",(function(e){d.call(t,"open",e)})),i.on("close",(function(e){d.call(t,"close",e)})),s=!0}(c),c.onInited&&c.onInited.call(r,c),this}function u(t,n){return e.off.apply(r,arguments),this}function d(t){r.self=this==window||this==r?null:this,e.trigger.apply(r,arguments)}return l.autoinit&&c(l),r}}(window.bui||{},window.libs),function(e,t){e.btn=function(n){var i,a,o,r,l={},s={load:function(n){n=n;var c=0;i.off("click.bui",r).on("click.bui",r,(function(i){var r=t(this),u=l.beforeCallback||l.beforeLoad;if(!1===(u&&u.call(s,i)))return i.preventDefault(),i.stopPropagation(),!1;var d=n||r.attr("href"),f=r.attr("target"),h="true"===r.attr("iframe"),p="true"===r.attr("firstAnimate"),g=r.attr("disabled"),m=r.hasClass("disabled")||""==g||"true"==g||"disabled"==g;if(d&&!m&&!(d&&d.indexOf("javascript:")>-1)){var v=r.attr("param")||"",b=v&&v.indexOf("{")>-1&&v.indexOf("}")>-1?JSON.parse(r.attr("param")):{};(r.attr("progress")?"false"!=r.attr("progress"):a)&&e.loading({autoTrigger:!0,display:"block",opacity:0,timeout:l.timeout});var y=+new Date;if(y-c<350)return!1;c=y;var w={url:d,param:b,replace:o,firstAnimate:p,iframe:h};return"_blank"==f?e.run({id:d,data:b}):e.load(w),i.preventDefault(),i.stopPropagation(),!1}}))},submit:function(n,a){a=a||{};var o=null;l.id&&l.handle?i.off("click.bui",r).on("click.bui",r,s):i.click(s);function s(i){if(!1===(l.beforeCallback&&l.beforeCallback.call(this,i)))return i.preventDefault(),i.stopPropagation(),!1;var r=this,s=t(r).css("background-color");if(!t(this).hasClass("disabled")&&"true"!=t(this).attr("disabled")){var c="none"==s?"#fff":s;if(a.appendTo=r,a.background=a.background||c,a.display=a.display||"inline",a.width=a.width||15,a.height=a.height||15,a.text=a.text||"加载中",a.autoClose=1==a.autoClose,a.autoTrigger=0!=a.autoTrigger,o){if(o.isLoading())return;o.show()}else o=e.loading(a);return n&&n.call(r,o,i)}}},click:function(e){var n=0;l.id&&l.handle?i.off("click.bui",r).on("click.bui",r,a):i.click(a);function a(i){if(!1===(l.beforeCallback&&l.beforeCallback.call(this,i)))return i.preventDefault(),i.stopPropagation(),!1;if(!t(this).hasClass("disabled")&&"true"!=t(this).attr("disabled")){var a=+new Date;return!(a-n<350)&&(n=a,e&&e.call(this,i))}}},off:function(){return i.off("click.bui",r),this}};return function(n){n&&"object"===e.typeof(n)?(l.id=n.id||"",l.handle=n.handle||"",l.progress="progress"in n&&n.progress,l.replace="replace"in n&&n.replace,l.timeout=n.timeout||3e3,l.beforeCallback=n.beforeCallback||null,i=t(l.id)):"string"==typeof n&&(l.id=n||"",l.handle="",l.progress=!1,l.replace=!1,l.timeout=3e3,l.beforeCallback=null,i=e.obj(l.id));r=l.handle,a=l.progress,o=l.replace}(n),s}}(window.bui||{},window.libs),function(e,t){e.dialog=function(n){var i,a,o,r,l={id:"",dialogid:"",title:"",effect:"zoomIn",content:"",className:"",appendTo:"",position:"center",style:null,fullscreen:!1,useBox:!1,width:0,height:0,mask:!0,opacity:.3,render:!1,needRemove:"",autoClose:!0,close:!0,scroll:!0,closeText:"",zoom:!1,zIndex:101,buttons:[],onBeforeClose:null,onBeforeOpen:null,onBeforeInit:null,autoinit:!0,onInited:null,onMask:null,onClose:null,callback:null},s={name:"dialog",selector:S,$el:S,$:S,handle:{},on:function(t,n){return e.on.apply(s,arguments),this},off:L,open:function(n){if(p||w)return;var o={width:c.width,height:c.height,zoom:c.zoom,fullscreen:c.fullscreen,position:c.position,scroll:c.scroll,onBeforeOpen:c.onBeforeOpen,useBox:c.useBox,effect:"",callback:null},l=o;"function"==typeof n?l.callback=n:"string"==typeof n?l.effect=n:n&&"object"===e.typeof(n)&&(l=t.extend(!0,{},o,n));var u=l.onBeforeOpen&&l.onBeforeOpen.call(s,{toggle:a});if(I.call(s,"beforeopen",{toggle:a}),!1===u)return this;var h=c.useBox?"-webkit-box":"block";if(i&&i.css("display",h),0==(i.attr("status")||0)){d=String(l.width).indexOf("%")>-1?b*parseFloat(l.width)/100:l.width||i.width(),f=String(l.height).indexOf("%")>-1?y*parseFloat(l.height)/100:l.height||i.height();var m=e.unit.pxToRemZoom(d),v=e.unit.pxToRemZoom(f),x=l.zoom?m+"rem":d+"px",k=l.zoom?v+"rem":f+"px",T=l.zoom?"-"+v/2+"rem":"-"+f/2+"px",O=l.zoom?"-"+m/2+"rem":"-"+d/2+"px";if(l.fullscreen&&"custom"!=l.position||i.css({width:x,height:k}),"center"!=l.position||l.fullscreen||i.css({top:"50%","margin-top":T,left:"50%","margin-left":O,right:"auto"}),l.fullscreen&&i.addClass("bui-dialog-fullscreen"),l.scroll&&!l.useBox){var S=i.children(".bui-dialog-head"),L=i.children(".bui-dialog-foot"),j=i.children(".bui-dialog-main"),P=S.length?S.height():0,E=L.length?L.height():0,N=i.height()-P-E;j.css({height:N})}i.attr("status","1")}r&&r.show(),a.show((function(e){p=!0,l.callback&&l.callback.call(s,{toggle:a}),I.call(s,"openafter",{toggle:a}),I.call(s,"afteropen",{toggle:a})}),l.effect),g||C();return I.call(s,"open",{toggle:a}),this},close:T,isOpen:p,top:function(t){return t=t||c.zIndex+e.$(".bui-dialog").length,e.$(".bui-dialog").css("z-index",c.zIndex),e.$(".bui-mask").css("z-index",c.zIndex-1),i.css("z-index",t),r&&e.$("#"+r.config.id).css("z-index",t-1),s.config.zIndex=t,c.zIndex=t,this},template:k,toggle:function(e,t){s.isOpen()?s.close(t):s.open(e);return this},create:function(e){var n=e||{};l.title=c.title||"提示",l.content=c.content||"",l.close=!1,l.render=!0,l.autoClose=c.autoClose,l.mask=c.mask,l.buttons=c.buttons&&c.buttons.length?c.buttons:["确定"],l.callback=c.callback||null;var i=t.extend(!0,l,n);return I.call(s,"create"),x(i)},remove:O,destroy:function(){var e=1==e;i&&(i.off("click.bui"),i.remove(),i=null);L("open"),L("close"),r&&r.destroy(e),a&&a.destroy(e),w=!0},widget:function(t){var n={toggle:a,mask:r};return e.widget.call(n,t)},option:function(t,n){return e.option.call(s,t,n)},config:c,init:x},c=s.config=t.extend(!1,{},l,e.config.dialog,n),u="",d="",f="",h="fadeInDown",p=!1,g=!1,m=""!==c.needRemove?c.needRemove:!!c.render,v={},b=window&&window.viewport&&window.viewport.width()||document.documentElement.clientWidth,y=window&&window.viewport&&window.viewport.height()||document.documentElement.clientHeight,w=!1;function x(n){var l=t.extend(!0,c,n);switch(l.onBeforeInit&&l.onBeforeInit.call(s,l),l.appendTo=l.appendTo||e.hasRouter&&router.currentPage()||"body",w=!1,o=l.effect,m=""!==l.needRemove?l.needRemove:!!l.render,b=window&&window.viewport&&window.viewport.width()||document.documentElement.clientWidth,y=window&&window.viewport&&window.viewport.height()||document.documentElement.clientHeight,l.position){case"top":u="bui-dialog-top",o=l.effect||"fadeInDown";break;case"bottom":u="bui-dialog-bottom",o=l.effect||"fadeInUp";break;case"left":u="bui-dialog-left",o=l.effect||"fadeInLeft";break;case"right":u="bui-dialog-right",o=l.effect||"fadeInRight";break;case"center":u="bui-dialog-center",o=l.effect||h;break;case"custom":u="bui-dialog-custom",o=l.effect||h}l.fullscreen&&(u="bui-dialog-fullscreen",o=l.effect||h),l.render?(l.id=l.dialogid||e.guid(),function(n){var i=k(n),a=e.$("#"+n.id);a.length&&a.remove();t(n.appendTo).append(i)}(l),i=e.objId(l.id)):((i=e.obj(l.id)).addClass(u).css("z-index",l.zIndex),l.useBox&&i.addClass("bui-box-vertical")),l.style&&i.css(l.style),d=i.width()>b?b:i.width(),f=i.height()>y?y:i.height(),i.css("display","none"),a||(a=e.toggle({id:l.id,effect:o,useBox:l.useBox})),c=s.config=l;try{var p="object"==typeof l.id?t(l.id).attr("id")+"-mask":l.id+"-mask";n.mask&&!r&&(r=e.mask({id:p,opacity:n.opacity,appendTo:i.parent(),autoTrigger:!1,onlyOne:!0,autoClose:!1,zIndex:parseInt(n.zIndex,10)-1,callback:function(e){if(!1===(n.onMask&&n.onMask.call(s,e)))return!1;c.autoClose&&(m?T(O):T())}}))}catch(t){e.showLog(t)}return g&&!c.render||C(),l.onInited&&l.onInited.call(s,l),s}function k(e){var n="",i=e.useBox?"bui-box-vertical ":"";return n+='<div id="'+e.id+'" class="bui-dialog '+i+u+" "+e.className+'" style="display:block;z-index:'+e.zIndex+'">',e.title&&(n+='\t<div class="bui-dialog-head">'+e.title+"</div>"),n+='\t<div class="bui-dialog-main">',e.content&&(n+=e.content),n+="\t</div>",e.buttons&&e.buttons.length&&(n+='\t<div class="bui-dialog-foot"><div class="bui-box">',t(e.buttons).each((function(e,t){n+='\t\t<div class="bui-btn span1 '+(t.className||"")+'" value="'+(t.value||"")+'">'+(t.name||t)+"</div>"})),n+="\t</div></div>"),e.close&&(n+='   <div class="bui-dialog-close">'+(e.closeText?e.closeText:'<i class="icon-close"></i>')+"</div>"),n+="</div>"}function p(e){return p}function T(t){if(p&&!w){var n={};"function"==typeof t?n.callback=t:"string"==typeof t?(n.effect=t,n.callback=c.onClose):t&&"object"===e.typeof(t)&&(n=t),n.onBeforeClose=c.onBeforeClose;var i=n.onBeforeClose&&n.onBeforeClose.call(s,{toggle:a});if(I.call(s,"beforeclose",{toggle:a}),!1===i)return this;try{a.hide((function(e){p=!1,n.callback&&n.callback.call(s,{toggle:a})}),n.effect),r&&r.hide(),I.call(this,"close",{toggle:a})}catch(t){e.showLog(t,"bui.dialog.close")}return this}}function I(e,t){if(v[e]instanceof Array)for(var n=v[e],i=0,a=n.length;i<a;i++)n[i](t)}function O(){try{i.remove(),r&&r.remove(),I.call(this,"remove")}catch(t){e.showLog(t,"bui.dialog.remove")}return this}function C(){return i.off("click.bui",".bui-dialog-close").on("click.bui",".bui-dialog-close",(function(e){m?T(O):T(),c.onClose&&c.onClose.call(s,e,s),e.stopPropagation()})),i.on("click.bui",".bui-dialog-foot .bui-btn",(function(e){if(e.target=this,!1===(c.callback&&c.callback.call(s,e,s)))return!1;c.autoClose&&(m?T(O):T()),e.stopPropagation()})),g=!0,this}function S(t){return e.selector.call(i,t)}function L(t,n){return e.off.apply(s,arguments),this}function I(t){s.self=this==window||this==s?null:this,e.trigger.apply(s,arguments)}return c.id&&c.autoinit&&x(c),s}}(bui||{},libs),function(e,t){e.alert=function(n,i){var a=e.dialog(),o={className:"bui-alert",title:"",width:580,height:360,scroll:!0,zIndex:121,position:"center",autoClose:!0,zoom:!0,buttons:[{name:"确定",className:"primary-reverse"}]};o.callback=i||function(){};var r=t.extend(o,e.config.alert),l="";try{l="string"==typeof n&&n.indexOf("<")>-1&&n.indexOf(">")>-1?"<xmp>"+n+"</xmp>":!n||"object"!==e.typeof(n)&&"array"!==e.typeof(n)?n&&"function"===e.typeof(n)?n.toString():n:JSON.stringify(n),r.content='<div class="bui-dialog-text bui-box-center" style="height:100%;">'+l+"</div>"}catch(t){e.showLog(t,"bui.alert")}return a.create(r).open(),a}}(window.bui||{},window.libs),function(e,t){e.confirm=function(n,i){var a=e.dialog(),o={className:"bui-confirm",title:"",width:580,height:360,scroll:!0,zIndex:121,autoClose:!0,zoom:!0,position:"center",buttons:[{name:"取消",className:""},{name:"确定",className:"primary-reverse"}]};o.callback=i||function(){};var r={};return"object"==typeof n?(n.content='<div class="bui-dialog-text bui-box-center" style="height:100%;">'+n.content+"</div>",r=t.extend(o,e.config.confirm,n)):((r=t.extend(o,e.config.confirm)).content='<div class="bui-dialog-text bui-box-center" style="height:100%;">'+n+"</div>",r.callback=i||function(){}),a.create(r).open(),a}}(window.bui||{},window.libs);t((function(e){!function(t,n){t.prompt=function(i,a){var o=t.dialog(),r={className:"bui-prompt",title:"",width:580,height:400,scroll:!0,autoClose:!1,zoom:!0,zIndex:121,position:"center",buttons:[{name:"取消",className:""},{name:"确定",className:"primary-reverse"}]};r.callback=a||function(){},r.placeholder="",r.row=1,r.type="text",r.value="",r.onChange=null;var l={},s="",c="";switch("object"==typeof i?s=(l=n.extend(r,t.config.prompt,i)).content||"":((l=n.extend(r,t.config.prompt)).callback=a||function(){},s=i||""),l.type){case"number":l.content='<div class="bui-prompt-main bui-box-vertical"> <div class="bui-prompt-label">'+s+'</div> <div class="span1"> <input class="bui-prompt-text" placeholder="'+l.placeholder+'" type="'+l.type+'" value="'+l.value+'"/> </div> </div>';break;default:l.content='<div class="bui-prompt-main bui-box-vertical"> <div class="bui-prompt-label">'+s+'</div> <div class="span1"> <textarea class="bui-prompt-text" placeholder="'+l.placeholder+'" rows="'+l.row+'" >'+l.value+"</textarea> </div> </div>"}return o.create(l).open(),n("#"+o.config.id).on("change",".bui-prompt-text",(function(t){c=this.value,l.onChange&&l.onChange.call(e,t)})),o.value=function(e){return void 0===e?c:(n("#"+o.config.id).find(".bui-prompt-text").val(e),c=e)},o.focus=function(e){n("#"+o.config.id).find(".bui-prompt-text").focus()},o}}(window.bui||{},window.libs)}));!function(e,t){e.hint=function(n,i){if("number"==typeof n||"string"==typeof n){var a=n||"";(n={}).content=a,n.onClose=i||null}else"object"==typeof n&&(n=n);var o,r,l={name:"hint",handle:{},on:function(t,n){return e.on.apply(l,arguments),this},off:v,remove:m,hide:function(e,t){var n=this;"function"==typeof e?(e=e,t=t||s.effect||""):(t=e||s.effect||"",e=null);u&&(h=!1,u.hide((function(){e&&e.call(l,{toggle:u}),b.call(n,"hide",{toggle:u})}),t));return this},show:function(e,t){var n=this;"function"==typeof e?(e=e,t=t||s.effect||""):(t=e||s.effect||"",e=null);u&&(h=!0,u.show((function(t){b.call(n,"show",{toggle:u}),e&&e.call(l,{toggle:u})}),t));s.autoClose&&(r&&clearTimeout(r),r=setTimeout((function(){s.autoTrigger?m():u.hide(),s.onClose&&s.onClose.call(l)}),s.timeout));return this},text:function(e){return d.find(".bui-hint-inner").length&&d.find(".bui-hint-inner").html(e),this},isShow:function(){return h},destroy:function(e){e=1==e;d.off("click.bui"),u&&u.destroy(e),v("show"),v("hide")},widget:function(t){var n={toggle:u};return e.widget.call(n,t)},option:function(t,n){return e.option.call(l,t,n)},config:s,init:g},s=l.config=t.extend(!0,{},{appendTo:"",content:"",timeout:2e3,autoClose:!0,showClose:!1,autoTrigger:!0,useBox:!0,opacity:1,background:"",effect:"fadeInUp",skin:"",position:"bottom",width:0,height:0,onBeforeInit:null,onInited:null,onClose:null,onHided:null},e.config.hint,n),c=0,u=null,d=null,f="",h=!1,p=!1;function g(n){var i=t.extend(!0,s,n);return i.onBeforeInit&&i.onBeforeInit.call(l,i),o=e.guid(),f="top"===i.position?"fadeInDown":"bottom"===i.position?"fadeInUp":i.effect,s=l.config=i,function(n,i,a,o){var r,l="12"+a,c=o?e.obj(o):t("body");switch(s.position){case"top":r="bui-hint-top";break;case"bottom":r="bui-hint-bottom";break;case"center":r="bui-hint-center"}var u=s.height;s.width=String(s.width).indexOf("%")>-1?750*parseFloat(s.width)/100:parseFloat(s.width),s.height=parseFloat(s.height)||0;var d=s.background?"background:"+s.background:"",f=s.width>0?"width:"+s.width/100+"rem;margin-left:-"+s.width/100/2+"rem;":"",h=s.height>0?"height:"+s.height/100+"rem;":"",p="auto"==u?"height:auto;":h,g="center"===s.position&&s.width>0?"margin-top:-"+s.height/100/2+"rem;":"",m=d+";z-index:"+l+";opacity:"+s.opacity+";"+f+p+g,v='<div id="'+n+'" class="bui-hint '+r+" "+s.skin+'" style="'+m+'"><span class="bui-hint-inner">'+i+"</span>"+(s.showClose?'<div class="bui-hint-close"><i class="icon-close"></i></div>':"")+"</div>";c.append(v),o&&c.css("position","relative")}(o,i.content,c,i.appendTo),++c,d=e.objId(o),u||(u=e.toggle({id:d,effect:f,useBox:i.useBox})),h=!0,i.autoTrigger?u.show():u.hide("showIn"),i.autoClose&&(r&&clearTimeout(r),r=setTimeout((function(){i.autoTrigger?m(i.onHided):u.hide(i.onHided),i.onClose&&i.onClose.call(l)}),i.timeout)),p||function(e){e.showClose&&d.off("click.bui",".bui-hint-close").on("click.bui",".bui-hint-close",(function(t){e.autoTrigger?m(e.onHided):u.hide(e.onHided),e.onClose&&e.onClose.call(l,t)})),p=!0}(i),i.onInited&&i.onInited.call(l,i),this}function m(e){var t=this;return u&&(h=!1,u.hide((function(){u.remove(),e&&e.call(l),b.call(t,"remove",{toggle:u}),u=null}))),this}function v(t,n){return e.off.apply(l,arguments),this}function b(t){l.self=this==window||this==l?null:this,e.trigger.apply(l,arguments)}return g(s),l}}(window.bui||{},window.libs),function(e,t){e.pullrefresh=function(n){var i,a,o,r,l,s,c,u="."+e.prefix("scroll-head"),d="."+e.prefix("scroll-main"),f="."+e.prefix("scroll-foot"),h={id:"",stopHandle:"",childrenTop:u,childrenMain:d,handleMove:"main",header:".bui-page header",footer:".bui-page footer",distance:90,maxDistance:0,autoLoad:!0,lastUpdated:!1,height:0,cacheHeight:!0,refreshTips:{start:"刷新中..",release:"松开刷新",end:"下拉刷新",fail:"刷新失败,请检查下网络再试试",success:"刷新成功"},autoinit:!0,stopPropagation:!1,onBeforeTouchstart:null,onBeforeTouchmove:null,onBeforeTouchend:null,onBeforeInit:null,onBeforeRefresh:null,onInited:null,onRefresh:null},p={name:"pullrefresh",handle:{},on:function(t,n){return e.on.apply(p,arguments),this},off:q,reverse:function(e,t,n){x||(k.show({text:g.refreshTips.success,onlyText:!1}),H(e,t),O.one("webkitTransitionEnd",(function(){k&&k.hide().pause(),x=!1,n&&n.call(p)})));return this},refresh:function(){H(g.distance/2,!0),k.start({text:g.refreshTips.start,onlyText:!1}),g.onRefresh&&c()},setHeight:V,resize:function(e){var t=e||{height:0,width:0};this.setHeight(t),t&&t.width>0&&i.width(t.width);return this},fail:function(){x=!0,H(),e.hint(g.refreshTips.fail),U.call(p,"fail")},lock:function(e){return m=!0,i.off("touchstart",B).off("touchmove",D).off("touchend",M).off("touchcancel",H),H(),e&&e.call(p),U.call(p,"lock"),this},unlock:A,destroy:function(e){e=1==e;i&&(i.off(),e&&i.remove());k&&k.destroy(e),q("refresh"),q("movingdown"),q("swipedown")},widget:function(t){var n={loading:k};return e.widget.call(n,t)},option:function(t,n){return e.option.call(p,t,n)},config:g,init:E},g=p.config=t.extend(!0,{},h,e.config.pullrefresh,n),m=!1,v=(new Date).getTime(),b=0,y=!1,w=!1,x=!1,k=null,T=/hp-tablet/gi.test(navigator.appVersion),I="ontouchstart"in window&&!T,O=null,C=0,S=0,L=!1,j=!1,P={x1:0,x2:0,y1:0,y2:0,direction:""};function E(n){var l=t.extend(!0,g,n);if(l.onBeforeInit&&l.onBeforeInit.call(p,l),l.id)return i=e.obj(l.id),g=p.config=l,i[0],a=i.children(u),o=i.children(d),r=i.children(f),O="head"===l.handleMove?a:o,c=N,s=l.refreshTips.end,k||(k=e.loading({appendTo:a,width:15,height:15,autoClose:!1,text:s,onlyText:!0,display:"inline",autoTrigger:!1,mask:!1})),l.autoLoad&&(y=!0,k.start({text:l.refreshTips.start,onlyText:!1}),c()),w||function(e){m||A();w=!0}(),V(l.height),l.onInited&&l.onInited.call(p,l),this;e.hint("pullrefresh id不能为空")}function N(){v=(new Date).getTime(),g.onBeforeRefresh&&g.onBeforeRefresh.call(p),g.onRefresh&&g.onRefresh.call(p),U.call(p,"refresh")}g.autoinit&&E(g);var $=0;function B(n){var o=n.originalEvent&&n.originalEvent.targetTouches||n.targetTouches,r=I?o[0]:n;if(P.x1=r.pageX,P.y1=r.pageY,P.direction="",$=i.scrollTop(),g.stopHandle&&e.unit.checkTargetInclude(n.target,g.stopHandle))L=!1;else if(o.length>1||n.scale&&1!==n.scale)L=!1;else{var l,c,u;if(!1===(g.onBeforeTouchstart&&g.onBeforeTouchstart.call(p,n,P)))return!1;s=g.lastUpdated?(l=(new Date).getTime()-v,c=Math.floor(l/36e5),u=Math.floor(l/6e4),c<=0&&u<=0?"刚刚更新":c<=0&&u>0?u+"分钟前更新":"上次更新时间:"+(c<10?"0"+c:c)+":"+(u<10?"0"+u:u)):g.refreshTips.end,U.call(p,"touchstart",n,P),"head"===g.handleMove&&a.css("zIndex",10),t(window).scrollTop()<=0&&$<=0&&g.onRefresh&&!y?(L=!0,t(this).css("touch-action","none")):(L=!1,a.css("zIndex",0)),g.stopPropagation&&n.stopPropagation()}}var R=!1,F=!1;function D(t){var n=t.originalEvent&&t.originalEvent.targetTouches||t.targetTouches||[];if(L)if(n.length>1||t.scale&&1!==t.scale)H();else{var i=I?n[0]:t;if(P.x2=i.pageX,P.y2=i.pageY,!1===(g.onBeforeTouchmove&&g.onBeforeTouchmove.call(p,t,P)))return!1;P.direction||(P.direction=e.swipeDirection(P.x1,P.x2,P.y1,P.y2)),U.call(p,"touchmove",t,P),"swipeleft"!==P.direction&&"swiperight"!==P.direction||t.preventDefault(),P.y2-P.y1>0&&$<=0&&t.preventDefault(),"swipedown"==P.direction?(U.call(p,"movingdown",t,P),H((l=Math.abs(P.y2-P.y1))/2,!1),l>=g.distance?R||(k.show({text:g.refreshTips.release,onlyText:!1}).pause(),R=!0):F||(k.show({text:s,onlyText:!1}).pause(),F=!0),j=!0,g.maxDistance>g.distance&&l>=g.maxDistance&&(k.show({text:g.refreshTips.start,onlyText:!1}),y=!0,g.onRefresh&&c(),j=!1,R=!1,F=!1,C+=(P={}).y2-P.y1,S+=P.x2-P.x1,P.lastX=S,P.lastY=C,P={x1:0,x2:0,y1:0,y2:0,direction:""},L=!1,j=!1),t.preventDefault(),t.stopPropagation()):"swipeup"==P.direction&&(U.call(p,"movingup",t,P),j=!0,t.stopPropagation()),k&&k.pause()}else H()}function M(e){return U.call(p,"touchend",e,P),!1!==(g.onBeforeTouchend&&g.onBeforeTouchend.call(p,e,P))&&(t(this).css("touch-action","auto"),j?("swipedown"==P.direction?(U.call(p,P.direction,e,P),l>=g.distance?(H(g.distance/2),k.show({text:g.refreshTips.start,onlyText:!1}).start(),y=!0,g.onRefresh&&c()):H(),e.stopPropagation(),R=!1,F=!1,P={}):"swipeup"==P.direction&&(U.call(p,P.direction,e,P),e.stopPropagation()),C+=P.y2-P.y1,S+=P.x2-P.x1,P.lastX=S,P.lastY=C,P={x1:0,x2:0,y1:0,y2:0,direction:""},L=!1,j=!1,void a.css("zIndex",0)):(P={x1:0,x2:0,y1:0,y2:0,direction:""},L=!1,void(j=!1)))}function A(e){return m=!1,i.on("touchstart",B).on("touchmove",D).on("touchend",M).on("touchcancel",H),e&&e.call(this),U.call(p,"unlock"),this}function H(e,t){y=!1;var n=(t=0!=t)?"all 300ms ease-out":"none";return z(0,(e=e||0)+"px",n,O),r.length&&("head"===g.handleMove?r.find(".bui-loading-text").text(""):z(0,e+"px",n,r)),this}function z(e,t,n,a){a=a||i;var o=e=e||0,r=t=t||0,l=String(e).indexOf("%")>-1?String(e):o,s=String(t).indexOf("%")>-1?String(t):r;n="number"==typeof n?"all "+n+"ms":n||"all 300ms";try{a.css({"-webkit-transition":n,transition:n,"-webkit-transform":"translate("+l+","+s+")",transform:"translate("+l+","+s+")"}),a.one("webkitTransitionEnd",(function(){a.css({"-webkit-transition":"none",transition:"none"}),k.hide()}))}catch(e){console.log(e.message)}}function V(t){e.$(".bui-page");var n=i.parents(".active").length?i.parents(".active"):i.parents(".bui-tab-main"),a=((n.length?n.height():i.parents(".bui-tab").height())||i.parents(".bui-page").height()||i.parents(".bui-dialog-main"))-(i[0]&&i[0].offsetTop),o=t?parseFloat(t):a;0==b&&(b=o);g.cacheHeight;i.height(b)}function q(t,n){return e.off.apply(p,arguments),this}function U(t){p.self=this==window||this==p?null:this,e.trigger.apply(p,arguments)}return p}}(window.bui||{},window.libs),function(e,t){e.scroll=function(n){var i,a,o,r,l,s,c,u,d,f="."+e.prefix("list"),h="."+e.prefix("scroll-head"),p="."+e.prefix("scroll-main"),g="."+e.prefix("scroll-foot"),m={id:"",childrenTop:h,childrenMain:p,childrenBottom:g,children:f,stopHandle:"",header:".bui-page header",footer:".bui-page footer",handle:"li",distance:100,endDistance:5,height:0,page:1,pageSize:10,stopPropagation:!1,handleMove:"main",lastUpdated:!0,autoRefresh:!1,autoNext:!0,autoScroll:!0,refresh:!0,cacheHeight:!0,refreshPage:!0,scroll:!0,delayTime:100,direction:"y",scrollTips:{start:"努力加载中..",end:"上拉加载更多",nodata:"没有更多内容",last:"没有更多内容",fail:"点击重新加载"},refreshTips:{start:"刷新中..",release:"松开刷新",end:"下拉刷新",fail:"点击加载",success:"刷新成功"},autoinit:!0,onBeforeTouchstart:null,onBeforeTouchmove:null,onBeforeTouchend:null,onBeforeInit:null,onInited:null,onScrolling:null,onBeforeRefresh:null,onRefresh:null,onBeforeLoad:null,onLoad:null},v={name:"scroll",handle:{},on:function(t,n){return e.on.apply(v,arguments),this},off:M,reverse:function(e){return u&&u.reverse(),e&&e.call(v,u),this},updateCache:R,updatePage:R,getPage:function(){return b.page},getCache:function(e){return P},clearCache:function(e){return void(P={})},resize:function(e){var t=e||{height:0,width:0};w=0,this.setHeight(t),t&&t.width>0&&i.width(t.width);return this},fail:function(e,t){return k=!0,x.show({text:b.scrollTips.fail,onlyText:!0,callback:function(n){$(e,t)}}),u&&u.lock(),this},filter:function(t,n){var i,a,o=[];if(t&&n)for(i in P){var r=e.array.filter(P[i],t,n)||[];if(r.length)for(a in r)o.push(r[a])}return o},to:F,toBottom:function(e){i[0]&&(i[0].scrollTop=i[0].scrollHeight,e&&e.call(v));return this},scrollTop:function(e){var n=0;n="object"==typeof e||"string"==typeof e&&e.indexOf("#")>-1?t(e)[0].offsetTop:parseInt(e)||0;return a.scrollTop=n,this},lock:function(){return i.off("scroll"),A.call(v,"lock"),this},unlock:function(t){return i.on("scroll",e.unit.debounce(N,b.delayTime)),A.call(v,"unlock"),this},lockrefresh:function(){return u.lock(),this},unlockrefresh:function(){return u.unlock(),this},refresh:function(){return F(1),u&&u.refresh(),this},load:function(e){return S=e=e||S,c&&c.call(v,S,L),this},nextPage:function(){return c&&c.call(v,++S,L),this},prevPage:function(){S-- >0&&c&&c.call(v,S--,L);return this},setHeight:D,isRefresh:function(){return C},destroy:function(e){e=1==e;i&&(i.off("scroll"),e&&i.remove());u&&u.destroy(e),x&&x.destroy(e),M("loadpage"),M("lastpage"),M("scrolltop"),M("scrollbottom"),M("scrollend")},widget:function(t){var n={pullrefresh:u,loading:x};return e.widget.call(n,t)},option:function(t,n){return e.option.call(v,t,n)},config:b,init:E},b=v.config=t.extend(!0,{},m,e.config.scroll,n),y=b.page,w=0,x=null,k=!1,T=!0,I=!0,O=!1,C=!1,S=b.page,L=b.pageSize,j=!1,P={};function E(n){var o=t.extend(!0,b,n);if(o.onBeforeInit&&o.onBeforeInit.call(v,o),t(window),o.id){i=e.obj(o.id),S=o.page,L=o.pageSize,b=v.config=o,T=!0,I=!0,O=!1,C=!1,a=i[0],i.children(h),l=i.children(p),r=i.children(g),l.css({position:"relative"}),x||(x=e.loading({appendTo:r,width:20,height:20,autoClose:!1,text:o.scrollTips.start,zIndex:10,display:"inline",autoTrigger:!1,mask:!1})),s=B,c=$,u?u.init({id:o.id,onBeforeRefresh:o.onBeforeRefresh,onRefresh:s,distance:o.distance,maxDistance:o.maxDistance,lastUpdated:o.lastUpdated,height:o.height,cacheHeight:o.cacheHeight,stopPropagation:o.stopPropagation,handleMove:o.handleMove,refreshTips:o.refreshTips,autoLoad:o.autoRefresh}):o.refresh&&o.onRefresh?((u=e.pullrefresh({id:o.id,onBeforeRefresh:o.onBeforeRefresh,onRefresh:s,distance:o.distance,stopHandle:o.stopHandle,maxDistance:o.maxDistance,lastUpdated:o.lastUpdated,header:o.header,footer:o.footer,height:o.height,handleMove:o.handleMove,cacheHeight:o.cacheHeight,stopPropagation:o.stopPropagation,onBeforeTouchstart:o.onBeforeTouchstart,onBeforeTouchmove:o.onBeforeTouchmove,onBeforeTouchend:o.onBeforeTouchend,refreshTips:o.refreshTips,autoLoad:o.autoRefresh})).lock(),k=!0):"y"===o.direction&&D(o.height),"x"===o.direction&&i.addClass("bui-box-center").attr("direction","x");try{c&&c.call(v,S,L)}catch(t){e.showLog(t,"bui.scroll.init")}return j||o.scroll&&function(t){i.off("scroll").on("scroll",e.unit.debounce(N,t.delayTime)),j=!0}(o),o.onInited&&o.onInited.call(v,o),this}e.hint("scroll id不能为空")}function N(e){var t=e.target,n=t.scrollTop||0,i=t.scrollLeft||0;"y"===b.direction?0==n?A.call(v,"scrolltop",e):t.scrollTop+t.clientHeight>=(t&&t.scrollHeight-b.endDistance)&&b.onLoad&&(b.page=v.config.page=++S,b.autoScroll&&c&&c.call(v,b.page,L),A.call(v,"scrollbottom",e)):0==i?A.call(v,"scrolltop",e):t.scrollLeft+t.clientWidth>=(t&&t.scrollWidth-b.endDistance)&&b.onLoad&&(b.page=v.config.page=++S,b.autoScroll&&c&&c.call(v,b.page,L),A.call(v,"scrollbottom",e)),A.call(v,"scrollend",e),b.onScrolling&&b.onScrolling.call(v,e,v)}function $(e,t){return C=!1,I&&!O&&(b.page=v.config.page=e,b.onBeforeLoad&&b.onBeforeLoad.call(v,e,t),b.onLoad&&x&&x.start({text:b.scrollTips.start,onlyText:!1}),b.onLoad&&b.onLoad.call(v,e,t)),k&&b.refresh&&u&&u.unlock(),this}function B(){I=!0,O=!1,T=!0,C=!0,b.refreshPage&&(S=y,L=b.pageSize,P={}),b.page=v.config.page=S,A.call(v,"refresh",S),b.onRefresh&&b.onRefresh.call(v,S,L)}function R(t,n,a){a=0!=a;if(!n||"array"!=e.typeof(n))return x&&x.stop(),e.showLog("scroll 控件的updatePage 第2个参数,必须是一个数组,如果是list控件,检测field的data映射是否准确","bui.scroll.updatePage"),void(n=[]);n=n,d&&clearTimeout(d),d=setTimeout((function(){var e=parseInt(i.height()),o=parseInt(i.find(b.childrenMain)[0]&&i.find(b.childrenMain)[0].scrollHeight);if(a)if(n&&n.length>L-1){if(I=!0,O=!1,T=!1,x&&x.start({text:b.scrollTips.end,onlyText:!0}),o>=10&&o<e&&b.autoNext&&b.onLoad){var r=++S;c&&c.call(v,r,L)}A.call(v,"loadpage",n,S)}else{I=!1,O=!0;var l=T&&n&&n.length<1?b.scrollTips.nodata:b.scrollTips.last;x&&x.start({text:l,onlyText:!0}),A.call(v,"loadpage",n,S),A.call(v,"lastpage",n,S)}else I=!1,O=!0,x&&x.stop();return P[t]=n}),10)}function F(e,t){e=e||0;o=i.find(b.children).children(b.handle);var n=i.height(),r=parseFloat(o.height()),l=a.scrollHeight,s=r*parseInt(e)-r;return l>n&&(a.scrollTop=s,A.call(v,"to",e),t&&t.call(v,parseInt(e))),this}function D(t){e.$(".bui-page");var n=i.parents(".active").length?i.parents(".active"):i.parents(".bui-tab-main"),a=((n.length?n.height():i.parents(".bui-tab").height())||i.parents(".bui-page").height())-(i[0]&&i[0].offsetTop),o=t?parseFloat(t):a;0==w&&(w=o);b.cacheHeight;i.height(w)}function M(t,n){return e.off.apply(v,arguments),this}function A(t){v.self=this==window||this==v?null:this,e.trigger.apply(v,arguments)}return b.autoinit&&E(b),v}}(window.bui||{},window.libs),function(e,t){e.list=function(n){var i,a,o,r,l,s={name:"list",handle:{},on:function(t,n){return e.on.apply(s,arguments),this},off:y,empty:function(){return a.html(""),this},updatePage:function(){var e=l.getPage();return l.updatePage(e,r),this},getPage:function(){return l.getPage()},refresh:function(){return w.call(this,"refreshbefore"),l.refresh(),this},reload:function(){return w.call(this,"refreshbefore"),b(),this},resize:function(e){return l.resize(e),this},modify:function(e){return c=s.config=t.extend(!0,{},s.config,e),f=c.data,this},destroy:function(e){e=1==e;i&&(i.off("click.bui"),e&&i.remove(),i=null);y("refreshbefore"),y("refresh"),y("success"),y("fail"),l&&l.destroy(e)},widget:function(t){var n={scroll:l,ajax:o};return e.widget.call(n,t)},option:function(n,i){return"data"==n&&void 0!==i?function(n,i){var a;if("string"==typeof i)try{a=JSON.parse(i)}catch(t){return void e.showLog("data 参数必须为对象","bui.list.modifyData")}else a=i;return f=t.extend(!0,{},p,a)}(0,i):e.option.call(s,n,i)},config:c,init:g},c=s.config=t.extend(!0,{},{id:"",url:"",data:{},method:"GET",dataType:"json",headers:{},contentType:null,timeout:2e4,field:{page:"page",size:"pageSize",data:""},scrollTips:{start:"努力加载中..",end:"上拉加载更多",nodata:"没有更多内容",last:"没有更多内容",fail:"点击重新加载"},refreshTips:{start:"刷新中..",release:"松开刷新",end:"下拉刷新",fail:"点击加载",success:"刷新成功"},lastUpdated:!1,cacheHeight:!0,ajax:null,page:1,pageSize:10,autoNext:!0,refreshPage:!0,autoUpdatePage:!0,autoScroll:!0,stopPropagation:!1,autoinit:!0,urlrule:!1,native:!0,needNative:!1,relative:!1,refresh:!0,direction:"y",stopHandle:"",children:".bui-list",handle:".bui-btn",header:".bui-page header",footer:".bui-page footer",height:0,commandRefresh:"html",commandLoad:"append",scroll:!0,localData:null,template:null,onBeforeTouchstart:null,onBeforeTouchmove:null,onBeforeTouchend:null,onBeforeInit:null,onInited:null,onBeforeRefresh:null,onRefresh:null,onLoad:null,onFail:null,callback:null},e.config.list,n),u=c.url,d=c.page,f=(c.page,{}),h=!1,p=c.data;function g(n){var o=c=t.extend(!0,c,n);o.onBeforeInit&&o.onBeforeInit.call(s,o),i=e.obj(o.id),a=i.find(o.children),c=s.config=o,f=c.data;var r=0==c.refresh?null:b,u={id:o.id,children:o.children,handle:o.handle,header:o.header,footer:o.footer,page:o.page,pageSize:o.pageSize,distance:o.distance,stopHandle:o.stopHandle,maxDistance:o.maxDistance,height:o.height,refresh:o.refresh,autoNext:o.autoNext,refreshPage:o.refreshPage,autoScroll:o.autoScroll,scroll:o.scroll,cacheHeight:o.cacheHeight,stopPropagation:o.stopPropagation,scrollTips:o.scrollTips,refreshTips:o.refreshTips,direction:o.direction,lastUpdated:o.lastUpdated,handleMove:o.handleMove,onBeforeTouchstart:o.onBeforeTouchstart,onBeforeTouchmove:o.onBeforeTouchmove,onBeforeTouchend:o.onBeforeTouchend,onBeforeRefresh:o.onBeforeRefresh,onBeforeLoad:o.onBeforeLoad,onRefresh:r,onLoad:v};return"html"!=o.commandRefresh&&(o.refreshPage=!1),o.urlrule&&(o.url=m(o)),l?l.init(u):l=e.scroll(u),s.toBottom=l.toBottom,s.scrollTop=l.scrollTop,s.to=l.to,h||function(e){e.callback&&i.off("click.bui",e.handle).on("click.bui",e.handle,(function(t){e.callback.call(s,t)})),h=!0}(o),o.onInited&&o.onInited.call(s,o),this}function m(e){return u.replace("(page)",e.page).replace("(size)",e.pageSize)}function v(i,u,d){var h=this,g=d||c.commandLoad;if(f=t.extend(!0,{},p,c.data,f),c.field.page.length&&e.unit.setKeyValue(c.field.page,i,f),c.field.size.length&&e.unit.setKeyValue(c.field.size,u,f),c.page=s.config.page=i,c.data=f,!c.localData)return c.urlrule&&(c.url=m(c)),c.success=v,c.fail=function(e,t,n){w.call(h,"fail",e,i,n),c.onFail&&c.onFail.call(s,e,i,n),l&&l.fail(i,u,e)},o=c.ajax?c.ajax(c):e.ajax(c),this;function v(t,o,u){var d,f,p;d="string"==typeof t?t&&JSON.parse(t)||{}:t||{};var m,v,b,y;if("string"==typeof(f=c&&c.field&&""==c.field.data?d||[]:"object"===e.typeof(d)&&e.unit.getKeyValue(c.field.data,d)||[])&&/\[?.+\]$/g.test(f))try{p=JSON.parse(f)}catch(t){p=f,e.showLog(t)}else p=f;f=p&&"array"===e.typeof(p)?p:[],c.localData&&(m=i,v=c.pageSize,f=(y=(m-1)*v)+v>=(b=f).length?b.slice(y,b.length):b.slice(y,y+v));var x=n.template&&n.template.call(s,f,d,i)||"";a&&a[g](x);var k=l&&l.isRefresh()||!1;w.call(h,"success",t,i,u);try{k?(c.onRefresh&&c.onRefresh.call(s,l,d,u),w.call(h,"refresh",t,i,u),c.refresh&&l.reverse()):(w.call(this,"onloadbefore"),c.onLoad&&c.onLoad.call(s,l,d,u),w.call(h,"onload",t,i,u)),c.localData?c.autoUpdatePage&&h&&h.updatePage(i,f):c.autoUpdatePage&&l&&l.updatePage(i,f),r=f}catch(e){}}v(c.localData)}function b(){var e=d;c.refreshPage||(e=s.config.page+1);var t=c.pageSize;return w.call(this,"refreshbefore"),v(e,t,c.commandRefresh),this}function y(t,n){return e.off.apply(s,arguments),this}function w(t){s.self=this==window||this==s?null:this,e.trigger.apply(s,arguments)}return c.autoinit&&g(c),s}}(window.bui||{},window.libs),function(e,t){e.searchbar=function(n){var i,a,o,r,l={name:"searchbar",handle:{},on:function(t,n){return e.on.apply(l,arguments),this},off:d,search:function(e){var t=e||a;return a=t,f.call(this,"search",{},t),s.callback&&s.callback.call(this,{},t),this},reset:function(){return o.val(""),r.hide(),this},value:function(e){if(void 0===e)return o.val();o.val(e),e&&r.show();return l},destroy:function(e){e=1==e;i&&(i.off(),e&&i.remove());d("search"),d("remove"),d("input")},widget:function(t){return e.widget.call({},t)},option:function(t,n){return e.option.call(l,t,n)},config:s,init:u},s=l.config=t.extend(!0,{},{id:"",handle:".icon-search,.btn-search",handleRemove:".icon-removefill",delayTime:400,onInput:null,onChange:null,onRemove:null,autoinit:!0,onBeforeInit:null,onInited:null,callback:null},e.config.searchbar,n),c=!1;function u(n){var u=t.extend(!0,s,n);return u.onBeforeInit&&u.onBeforeInit.call(l,u),i=e.obj(u.id),l.$el=i,s=l.config=u,o=i.find("input"),(r=i.find(u.handleRemove)).length<1&&(o.after('<i class="'+u.handleRemove.substr(1)+'"></i>'),r=i.find(u.handleRemove)),r.hide(),c||function(e){i.off("click.bui",e.handle).on("click.bui",e.handle,(function(t){document.activeElement.blur();var n=o.val();a=n,f.call(l,"search",t,n),e.callback&&e.callback.call(l,t,n)})),i.off("click.bui",e.handleRemove).on("click.bui",e.handleRemove,(function(n){document.activeElement.blur(),o.val("");var i=o.val();a=i,t(this).hide(),f.call(l,"remove",n,i),e.onRemove&&e.onRemove.call(l,n,i)}));var n=!1,s=null;e.onInput&&i.off("input","input").on("compositionstart",(function(){n=!0})).on("compositionend",(function(t){n=!1;var i=o.val();e.onInput.call(l,t,i)})).on("input","input",(function(t){var i=o.val();a=i,i?r.show():r.hide(),f.call(l,"input",t,i),n||(s&&clearTimeout(s),s=setTimeout((function(){e.onInput.call(l,t,i),s=null}),e.delayTime))})),e.onChange&&i.off("change","input").on("change","input",(function(t){var n=o.val();a=n,n?r.show():r.hide(),f.call(l,"change",t,n),e.onChange.call(l,t,n)})),c=!0}(u),u.onInited&&u.onInited.call(l,u),this}function d(t,n){return e.off.apply(l,arguments),this}function f(t){l.self=this==window||this==l?null:this,e.trigger.apply(l,arguments)}return s.autoinit&&u(s),l}}(bui||{},libs),function(e,t){e.select=function(n){var i,a,o,r,l,s,c={name:"select",handle:{},on:function(t,n){return e.on.apply(c,arguments),this},off:R,value:E,values:function(){var e=[];return w.forEach((function(t,n){e.push({value:t,name:y[n],index:x[n],icon:k[n]})})),e},allValues:function(){var e=[];return u.data&&u.data.forEach((function(t,n){var i=l.eq(n).find("input").prop("checked");t.checked=i,e.push(t)})),e},index:function(){return x.join(",")},active:$,unactive:function(t){var n=[];String(t).indexOf(",")>-1?n=t.split(","):n.push(parseInt(t));return n.forEach((function(t,n){var i=l.eq(t).find("input"),a=i.val(),o=i.attr("text");e.array.delete(y,o),e.array.delete(w,a),i.prop("checked",null)})),F.call(c,"change",{}),this},disabled:function(){var e=i;return e&&e.addClass("disabled"),this},enabled:function(){var e=i;return e&&e.removeClass("disabled"),this},disabledSelect:function(e){if(void 0===e)l.find("input").attr("disabled",!0);else{if("number"!=typeof e)return void console.log("index 必须为数字");l.eq(e).find("input").attr("disabled",!0)}return this},enabledSelect:function(e){if(void 0===e)l.find("input").removeAttr("disabled");else{if("number"!=typeof e)return void console.log("index 必须为数字");l.eq(e).find("input").removeAttr("disabled")}return this},template:b,empty:function(){return a.html(""),u.data=[],I=!1,this},text:N,show:j,hide:P,selectAll:function(){if("checkbox"==u.type){$(u.data.map((function(e,t){return t})).join(","))}else $(0);return this},selectNone:B,reset:function(){return B(),N(T),this},clearSearch:function(){a.find(".bui-searchbar-close").trigger("click")},unselect:function(){if("checkbox"==u.type){var t=y.map((function(e,t){return e}));w.map((function(e,t){return e}));y=[],w=[],u.data&&u.data.forEach((function(n,i){var a=l.eq(i).find("input");e.array.index(t,n[p])>-1?a.prop("checked",null):(a.prop("checked",!0),y.push(n[p]),w.push(n[g]))})),E(w.join(",")||""),N(y.join(",")||"")}else B();return this},unselected:function(t){var n=[];String(t).indexOf(",")>-1?n=t.split(","):n.push(t);return n.forEach((function(t,n){u.data.forEach((function(n,i){var a=n[p]||n,o=n[g]||n;t!=o&&t!=a||(l.eq(i).find("input").prop("checked",null),e.array.remove(y,a),e.array.remove(w,o))}))})),F.call(c,"change",{}),this},destroy:function(e){e=1==e;a&&(a.off(),e&&a.remove());i&&(i.off("click.bui"),e&&i.remove());return s&&s.destroy(e),I=!1,R("show"),R("hide"),R("change"),R("select"),R("check"),R("uncheck"),this},widget:function(t){var n={dialog:s||{}};return e.widget.call(n,t)},option:function(t,n){return e.option.call(c,t,n)},config:u,init:O},u=c.config=t.extend(!0,{},{id:"",trigger:"",triggerChildren:".span1",handle:".bui-list .bui-btn",className:"",name:"",appendTo:"",data:[],popup:!0,title:"",autoClose:!1,placeholder:"",field:{name:"name",value:"value",image:"image",icon:"icon"},height:0,width:0,mask:!0,zIndex:110,change:!0,toggle:!1,effect:"fadeInUp",type:"select",direction:"left",position:"bottom",fullscreen:!1,needSearch:!1,value:"",buttons:[],onChange:null,autoinit:!0,onBeforeOpen:null,onBeforeInit:null,template:null,onInited:null,callbackHandle:".bui-dialog-foot .bui-btn",callback:null},e.config.select,n),d=e.guid(),f=u.name||e.guid(),h=!0,p=u.field.name,g=u.field.value,m=u.field.image,v=u.field.icon,b=null,y=[],w=[],x=[],k=[],T="",I=!1;function O(n){var f,O,$=t.extend(!0,u,n);if($.onBeforeInit&&$.onBeforeInit.call(c,$),$.appendTo=$.appendTo||e.hasRouter&&router.currentPage()||"body",y=[],w=[],x=[],k=[],d=$.id?e.obj($.id).attr("id"):d,u=c.config=$,b="function"==typeof $.template?$.template:L,$.data&&$.data.length||I)var B=b.call(this,$.data);if(c.template=b,$.popup)if(s)a.find(".bui-dialog-list").html(B);else{if($.id)a=e.obj($.id);else{var R=function(e){var n="",i='<div class="bui-searchbar bui-box">\n                                    <div class="span1">\n                                        <div class="bui-input">\n                                            <i class="icon-search"></i>\n                                            <input type="search" value="" placeholder="请输入关键字" />\n                                            <div class="bui-searchbar-close"><i class="icon-removefill"></i></div>\n                                        </div>\n                                    </div>\n                                </div>',a='<div class="bui-dialog-result"></div>',o=u.templateTitle?u.templateTitle.call(c,u)||"":`<div class="bui-dialog-title">${u.title}</div>`;u.popup&&(n+='<div id="'+d+'" class="bui-dialog bui-dialog-select">',(u.title||u.needSearch)&&(n+=`<div class="bui-dialog-head">\n                                ${u.title||u.templateTitle?o:""}\n                                ${u.needSearch?i:""}\n                            </div>`),n+='  <div class="bui-dialog-main">');u.popup&&(n+='<div class="bui-dialog-list"></div>',n+=""+(u.needSearch?a:""),n+="  </div>",u.buttons.length>0&&(n+='    <div class="bui-dialog-foot bui-box">',t.each(u.buttons,(function(e,t){n+='        <div class="span1">',n+='             <div class="bui-btn '+(t.className||"")+'" value="'+(t.value||"")+'">'+(t.name||t)+"</div>",n+="        </div>"})),n+="    </div>"),n+="</div>");return n}();t($.appendTo).append(R),(a=e.obj(d)).find(".bui-dialog-list").html(B)}s=e.dialog({id:d,effect:$.effect,mask:$.mask,zIndex:$.zIndex,position:$.position,autoClose:!1,height:$.height,width:$.width,zoom:!1,fullscreen:$.fullscreen,onMask:function(e){P()}}),$.appendTo&&$.id&&(t($.appendTo).append(a.prop("outerHTML")),a.remove(),a=t($.id))}else{if(!$.id)return void e.hint("select id 必须有");a=e.obj($.id),($.data&&$.data.length||I)&&a.html(B)}return c.$el=a,l=a.find($.handle),$.data&&$.data.length<1&&(f=[],O=[],l.find("input").each((function(e,n){var i=t(this);if(!(i.length<1)){var a=i.val(),o=i.attr("text"),r=i.attr("image"),l=i.attr("icon"),s=i.is(":checked");u.data[e]={},u.data[e][p]=o,u.data[e][g]=a,u.data[e][m]=r,u.data[e][v]=l,f.push(a),O.push(o),s&&C({name:o,value:a,index:e})}}))),function(n){n.trigger&&(i=e.obj(n.trigger),T=n.placeholder||i.text()||n.title,r=i.find(n.triggerChildren).length?i.find(n.triggerChildren):i,o=n.placeholder||t.trim(r.html()||""),n.placeholder&&r.html(n.placeholder),i.off("click.bui").on("click.bui",(function(e){var i=n.onBeforeOpen&&n.onBeforeOpen.call(c);t(this).hasClass("disabled")||0==i||j()})));function l(e){e?(g.css("display","block"),p.css("display","block")):(g.css("display","none"),p.css("display","none"))}var s=function(i){var a=t(i.target[i.target.length-1]);if(!a.attr("disabled")){var o=a.val(),r=a.attr("text"),l=a.attr("index"),s="INPUT"!==i.srcElement.nodeName?a.is(":checked"):!a.is(":checked");i.target=a[0],i.index=l,s?s&&(n.toggle||"checkbox"==n.type)&&(F.call(c,"uncheck",i),e.array.remove(y,r),e.array.remove(w,o),e.array.remove(x,l),e.array.remove(k,l)):(F.call(c,"check",i),C({name:r,value:o,index:l})),h&&n.onChange&&n.onChange.call(c,i),E(w.join(",")||"",i),N(y.join(",")||""),i.stopPropagation()}},u=function(e){var i=null;e.srcElement=e.originalEvent&&e.originalEvent.srcElement||e.srcElement,i=t(this).find("input"),e.target=[i[0]],s.call(c,e),n.popup&&n.autoClose&&P(),F.call(c,"select",e),e.stopPropagation()},d=n.needSearch?".bui-dialog-list "+n.handle:n.handle;a.off("click.bui",d).on("click.bui",d,u);var f=function(e){n.callback&&n.callback.call(c,e,c),e.stopPropagation()};a.off("click.bui",n.callbackHandle).on("click.bui",n.callbackHandle,f);var p=a.find(".bui-searchbar-close"),g=a.find(".bui-dialog-result"),m=a.find(".bui-searchbar input");n.data&&n.data.length&&n.needSearch&&(a.find(".btn-search").click((function(e){var t=a.find(".bui-searchbar input").val();S(t),l(t),e.stopPropagation()})),m.on("input",(function(e){var n=t(this).val();S(n),l(n),e.stopPropagation()})),p.click((function(e){m.val(""),g.css("display","none"),t(this).css("display","none"),e.stopPropagation()})),a.on("click.bui",".bui-dialog-result .bui-btn",(function(i){var a=t(this).find("input"),o="INPUT"!==i.srcElement.nodeName?a.is(":checked"):!a.is(":checked"),r=a.attr("text"),l=a.attr("value"),s=e.array.index(n.data,l,"value");o&&(n.toggle||"checkbox"==n.type)?(a.prop("checked",!1),F.call(c,"uncheck",i),e.array.remove(y,r),e.array.remove(w,l),e.array.remove(x,s),e.array.remove(k,s),n.onChange&&n.onChange.call(c,i)):(a.prop("checked",!0),F.call(c,"check",i),C({name:r,value:l,index:s}),n.onChange&&n.onChange.call(c,i)),E(w.join(",")||"",i),N(y.join(",")||""),i.stopPropagation()})));I=!0}($),$.value&&E($.value),$.onInited&&$.onInited.call(c,$),this}function C(e){var t=parseInt(e.index,10);switch(u.type){case"radio":case"select":w=[],x=[],k=[],(y=[]).push(e.name),w.push(e.value),k.push(e.icon),x.push(t);break;case"checkbox":y.push(e.name),w.push(e.value),k.push(e.icon),x.push(t)}}function S(t){var n=e.array.filter(u.data,t,u.field.name),i=`没有与此相关的结果:<span class="danger-reverse">${t}</span>`,o=e.guid();n.length&&(i=L(n,o)),a.find(".bui-dialog-result").css("display","block").html(i)}function L(n,i){var a=i||f,o="",r="";return t.each(n,(function(n,i){var o="string"==typeof i?i:i[p]||i||"",l=i&&i[m]?i[m]||i:"",s=i&&i[v]?i[v]||i:"",c=i&&i[g]?i[g]||i:i||o||n,d={name:a,value:c,text:o,index:n};l&&(d.image=l),s&&(d.icon=s),i=i&&"object"===e.typeof(i)?i:{};var f=function(t){t=t||{};var n=document.createElement("input");for(var i in t)"string"!=typeof t[i]&&"number"!=typeof t[i]||n.setAttribute(i,t[i]);switch(u.type){case"mulelect":n.setAttribute("type","checkbox"),n.setAttribute("class",u.className||"bui-choose");break;case"select":n.setAttribute("type","radio"),n.setAttribute("class",u.className||"bui-choose");break;case"radio":n.setAttribute("type","radio"),n.setAttribute("class",u.className||"bui-radio");break;case"checkbox":n.setAttribute("type","checkbox"),n.setAttribute("class",u.className||"bui-choose");break;default:n.setAttribute("type","checkbox")}return e.array.compare(w,t.value)&&n.setAttribute("checked","true"),n}(t.extend(!0,{},i,d)).outerHTML;if(r+='    <div class="bui-btn bui-box bui-btn-line">',"left"==u.direction&&(r+=f),l){var h=e.unit.endWithImage(l)?'<div class="thumbnail"><img src="'+l+'" alt="" /></div>':'<div class="thumbnail '+l+'"></div>';r+=h}if(s){var b=e.unit.endWithImage(s)?'<i class="icon"><img src="'+s+'" alt="" /></i>':'<i class="icon '+s+'"></i>';r+=b}"center"==u.direction?(r+='        <div class="span1" align="center">'+o+"</div>",r+=f):r+='        <div class="span1">'+o+"</div>","right"==u.direction&&(r+=f),r+="    </div>"})),o+='    <div class="bui-list bui-list-select">',o+=r,o+="    </div>"}function j(e){F.call(this,"beforeshow");var t={};return"function"==typeof e?t.callback=function(){e&&e.call(c),F.call(c,"show")}:"string"==typeof e?t.effect=e:"object"==typeof e&&(t=e),u.popup&&s?(!s.isOpen()&&s.open(t),F.call(c,"show")):(a.css("display","block"),t.callback?t.callback():F.call(c,"show")),this}function P(e){F.call(this,"beforehide");var t={};return"function"==typeof e?t.callback=function(){e&&e.call(c)}:"string"==typeof e?t.effect=e:"object"==typeof e&&(t=e),u.popup&&s?(s.isOpen()&&s.close(t.effect||t.callback),F.call(c,"hide")):(a.css("display","none"),t.callback?t.callback():F.call(c,"hide")),this}function E(t,n){if(void 0===t)return w.join(",");n=n||event,l=a.find(u.handle);var o=[],s=[],d=[],f=[],m=[],b=[];"string"==typeof t&&t.indexOf(",")>-1?b=t.split(","):t instanceof Array?b=t:t&&b.push(t),u.data&&u.data.forEach((function(t,n){var i=t&&"object"===e.typeof(t)&&t.hasOwnProperty(p)?String(t[p]):String(t),a=t&&"object"===e.typeof(t)&&t.hasOwnProperty(v)?String(t[v]):"",r=t&&"object"===e.typeof(t)&&t.hasOwnProperty(g)?String(t[g]):String(t)||String(n),c=l.eq(n).find("input");if(""==t)return c.prop("checked",!1),y=[],w=[],x=[],void(k=[]);var h=e.array.index(b,i);e.array.index(b,r)>-1||h>-1?("radio"!=u.type&&"select"!=u.type||(s=[],d=[],m=[],f=[]),s.push(i),d.push(r),f.push(a),m.push(n),o[n]=c,c.prop("checked",!0)):c.prop("checked",!1)})),y=s.slice(0),w=d.slice(0),x=m.slice(0),k=f.slice(0);var I=n||{target:o[o.length-1],index:x};F.call(c,"change",I),!h&&u.onChange&&u.onChange.call(c,n),i&&u.change&&(i.attr("value",d.join(",")),r.text(y.join(",")||T)),a.attr("value",d.join(",")),h=!1}function N(e){return void 0===e?y.join(","):(i&&u.change&&(i.attr("text",e),r.html(e||o)),a.attr("text",e),this)}function $(e){var t=[];return String(e).indexOf(",")>-1?t=e.split(","):t.push(parseInt(e)),y=[],w=[],t.forEach((function(e,t){u.data[e]&&y.push(u.data[e][p]||u.data[e]),u.data[e]&&w.push(u.data[e][g]||u.data[e]||t)})),"checkbox"==u.type||"mulselect"==u.type?(N(y.join(",")),E(w.join(","))):(N(y[0]),E(w[0])),this}function B(){return y=[],w=[],x=[],k=[],l.find("input").prop("checked",null),E(""),N(""),F.call(this,"reset"),this}function R(t,n){return e.off.apply(c,arguments),this}function F(t){c.self=this==window||this==c?null:this,e.trigger.apply(c,arguments)}return u.autoinit&&O(u),c}}(window.bui||{},window.libs),function(e,t){e.dropdown=function(n){var i,a,o,r,l,s,c={name:"dropdown",handle:{},on:function(t,n){return e.on.apply(c,arguments),this},off:k,active:b,disabled:function(){var e=a;return e&&e.addClass("disabled"),this},enabled:function(){var e=a;return e&&e.removeClass("disabled"),this},value:v,values:function(){return{name:g,value:p}},reset:function(){return p="",v(""),y(h),w(),this},text:y,hide:w,show:function(){return a.addClass("active"),s.css("display","block"),T.call(this,"show"),this},hideAll:x,destroy:function(e){e=1==e;i&&(i.off("click.bui"),e&&i.remove());a&&(a.off("click.bui"),e&&a.remove());t("body").off("click.bui"),k("show"),k("hide")},widget:function(t){return e.widget.call({},t)},option:function(t,n){return e.option.call(c,t,n)},config:u,init:m},u=c.config=t.extend(!0,{},{id:"",handle:".bui-btn",handleChildren:".span1",target:".bui-list",targetHandle:".bui-btn",data:null,position:"bottom",showArrow:!1,showActive:!0,autoClose:!0,stopPropagation:!1,width:0,value:"",relative:!0,change:!0,autoinit:!0,template:null,onBeforeInit:null,onInited:null,callback:null,onChange:null},e.config.dropdown,n),d=document.documentElement.clientWidth,f=!1,h="",p="",g="";function m(n){var p=t.extend(!0,u,n);if(p.onBeforeInit&&p.onBeforeInit.call(c,p),p.id){if(i=e.obj(p.id),c.$el=i,u=c.config=p,a=i.children(p.handle),s=p.target?i.find(p.target):a.next(),h=a.text(),p.data&&p.data.length){var g="function"==typeof p.template?p.template.call(c,p.data):function(e){var t="";return t+='<ul class="bui-list">',e.map((function(e,n){t+='<li class="bui-btn" value="'+e.value+'">'+e.name+"</li>"})),t+="</ul>"}(p.data);s.length?s.remove()&&a.after(g):i.append(g),s=i.find(p.target)}r=p.relative,o=i.attr("position")||p.position;var m=i[0]&&i[0].offsetLeft>=document.documentElement.clientWidth?0:i[0]&&i[0].offsetLeft,y=p.width?"auto":-m+"px",k={bottom:{menuPosition:"bui-menu-bottom",arrowPosition:"bui-arrow-up",left:y},top:{menuPosition:"bui-menu-top",arrowPosition:"bui-arrow-down",left:y},left:{menuPosition:"bui-menu-left",arrowPosition:"bui-arrow-right",left:"auto"},right:{menuPosition:"bui-menu-right",arrowPosition:"bui-arrow-left",left:"100%"}};if(l=p.width>0?p.width:r?d:p.width,parseFloat(l)>0&&s.width(l),function(e,t){s.addClass(e),r&&s.css({left:t})}(p.showArrow?k[o].arrowPosition+" "+k[o].menuPosition:k[o].menuPosition,k[o].left),p.value)v(p.value);else{var I=s.find(p.targetHandle+".active").eq(0).index();I>-1&&b(I)}return f||function(e){var n=function(n){if(!t(this).hasClass("disabled")){var i=t(this).hasClass("active"),a=e.target?t(this).parent().find(e.target):t(this).next();x(),i?(t(this).removeClass("active"),a.css("display","none"),T.call(c,"hide")):(t(this).addClass("active"),a.css("display","block"),T.call(c,"show")),n.stopPropagation()}},o=function(n){var i=t(this),a=i.parent(),o=v(),r=i.attr("value")||"";t.trim(i.text()),null!=a.attr("change")?a.attr("change"):e.change;e.showActive&&i.addClass("active").siblings().removeClass("active"),v.call(this,r),u.autoClose&&w(),n.target=this,e.callback&&e.callback.call(c,n),o!==r&&e.onChange&&e.onChange.call(c,n),u.stopPropagation&&n.stopPropagation()};a.off("click.bui").on("click.bui",n),i.off("click.bui",e.targetHandle).on("click.bui",e.targetHandle,o);var r=function(e){x(),e.stopPropagation()};u.autoClose&&t("body").off("click.bui").on("click.bui",":not(.bui-dropdown)",r),f=!0}(p),p.onInited&&p.onInited.call(c,p),this}e.showLog("dropdown id不能为空","bui.dropdown.init")}function v(n){if(void 0===n)return a.attr("value");var i="htmllielement"===e.typeof(this),o=i&&t(this).parent(),r=i?t(this).parents(".bui-dropdown").children(u.handle):a,l=i?o.find(u.targetHandle):s.find(u.targetHandle);if(l.removeClass("active"),u.data&&u.data.length){if(""==n)return p="",void r.attr("value",n);var d=e.array.index(u.data,String(n),"value"),f=e.array.index(u.data,String(n),"name");d>-1?(l.eq(d).addClass("active"),r.attr("value",n),u.change&&y.call(this,u.data[d].name),p=n):f>-1&&(l.eq(f).addClass("active"),r.attr("value",u.data[f].value),u.change&&y.call(this,n),p=u.data[f].value)}else l.each((function(e,i){var a=i.innerText,o=i.getAttribute("value");a!=n&&o!=n||(t(this).addClass("active"),r.attr("value",o),u.change&&y.call(this,a),p=o)}));u.change||T.call(c,"change")}function b(e){e=parseInt(e);var n=s.find(u.targetHandle).eq(e);n.length>=0&&(v(n.attr("value")||t.trim(n.text())||""),u.showActive&&n.addClass("active").siblings().removeClass("active"));return this}function y(n){if(void 0===n)return g||t.trim(a.text());var i="htmllielement"===e.typeof(this)?t(this).parents(".bui-dropdown").children(u.handle):a,o=i.children(u.handleChildren);return o.length?o.text(n):i.text(n),g=n,T.call(c,"change"),this}function w(){return a.removeClass("active"),s.css("display","none"),T.call(this,"hide"),this}function x(){return t(".bui-dropdown > .bui-btn").removeClass("active"),t(".bui-dropdown > .bui-list").css("display","none"),T.call(this,"hide"),this}function k(t,n){return e.off.apply(c,arguments),this}function T(t){c.self=this==window||this==c?null:this,e.trigger.apply(c,arguments)}return u.autoinit&&m(u),c}}(window.bui||{},window.libs),function(e,t){e.accordion=function(n){var i,a,o={name:"accordion",handle:{},on:function(t,n){return e.on.apply(o,arguments),this},off:p,showFirst:function(){l.length>1?l.each((function(e,t){d(0,t)})):d(0);return g.call(this,"show",{target:i[0]}),this},showAll:function(){return(i=h()).each((function(e,n){t(n).addClass("active").next(r.target).css("display","block")})),g.call(this,"showall",{target:i}),this},hideAll:f,disabled:function(e){var t;t="number"==typeof e?i.eq(e):i;return t&&t.addClass("disabled"),this},enabled:function(e){var t;t="number"==typeof e?i.eq(e):i;return t&&t.removeClass("disabled"),this},destroy:function(e){l&&(l.off("click.bui"),l.remove(),l=null);p("hide"),p("show")},show:function(e){e=Number(e)||0;var t=i.eq(e).length?i.eq(e):i,n=a.eq(e).length?a.eq(e):t.next(r.target);return t.addClass("active"),n.css("display","block"),g.call(this,"show",{target:i[e]}),this},hide:function(e){e=Number(e)||0;var t=i.eq(e).length?i.eq(e):i,n=a.eq(e).length?a.eq(e):t.next(r.target);return t.removeClass("active"),n.css("display","none"),g.call(this,"hide",{target:i[e]}),this},widget:function(t){return e.widget.call({},t)},option:function(t,n){return e.option.call(o,t,n)},config:r,init:c},r=o.config=t.extend(!0,{},{id:"",handle:"dt",target:"dd",height:0,targetHeight:0,single:!1,stopPropagation:!1,lock:!1,autoinit:!0,onBeforeInit:null,onInited:null,callback:null},e.config.accordion,n),l=null,s=!1;function c(n){var c=t.extend(!0,r,n);return c.onBeforeInit&&c.onBeforeInit.call(o,c),document.documentElement.clientWidth,document.documentElement.clientHeight,l=e.obj(c.id)||e.obj("."+e.prefix("accordion")),r=o.config=c,i=h(),a=c.target.indexOf("#")>-1?e.obj(c.target):l.children(c.target),function(e){i.removeClass("active"),a.css("display","none"),parseFloat(e.targetHeight)>0&&a.height(e.targetHeight);parseFloat(e.height)>0&&l.height(e.height)}(c),s||function(e){var n=function(n){if(!t(this).hasClass("disabled")&&!t(this).attr("href")){if(!1===(e.callback&&e.callback.call(o,n)))return!1;u.call(this,n,e),(e.stopPropagation||!t(this).attr("href"))&&n.stopPropagation()}};e.handle.indexOf("#")>-1?!e.lock&&i.off("click.bui").on("click.bui",n):!e.lock&&l.off("click.bui").on("click.bui",e.handle,n);s=!0}(c),c.onInited&&c.onInited.call(o,c),this}function u(n,a){var r=t(this),l=r.hasClass("active"),s=(i.index(this),a.target.indexOf("#")>-1?e.obj(a.target):r.next(a.target));a.single?l?(r.removeClass("active"),s.css("display","none"),g.call(o,"hide",n)):(f(),r.addClass("active"),s.css("display","block"),g.call(o,"show",n)):l?(r.removeClass("active"),s.css("display","none"),g.call(o,"hide",n)):(r.addClass("active"),s.css("display","block"),g.call(o,"show",n))}function d(e,n){e=e||0;(n?t(n):l).children(r.handle).eq(e).addClass("active").next(r.target).css("display","block")}function f(){return(i=h()).each((function(e,n){t(n).removeClass("active").next(r.target).css("display","none")})),g.call(this,"hideall",{target:i}),this}function h(){return r.handle.indexOf("#")>-1?e.obj(r.handle):l.children(r.handle)}function p(t,n){return e.off.apply(o,arguments),this}function g(t){o.self=this==window||this==o?null:this,e.trigger.apply(o,arguments)}return r.autoinit&&c(r),o}}(window.bui||{},window.libs),function(e,t){e.rating=function(n){var i,a,o,r,l,s={name:"rating",handle:{},on:function(t,n){return e.on.apply(s,arguments),this},off:m,disabled:function(e){(e=0!=e)?(i.off("click.bui",c.handle),v.call(s,"disabled")):g();return this},enabled:g,show:function(e){var t=function(e){var t,n="",i=(e=String(e)||String(r),0),a=c.stars,o=[];o=e.indexOf(".")>-1?e.split("."):[e,0];var l=parseInt(o[0]);for(t=o[1]/10*100+"%",i=0;i<a;i++)i<l&&(n+='<div class="bui-rating-cell" ><div class="bui-rating-cell-full" style="width:100%;">&nbsp;</div></div>'),i==l&&(n+='<div class="bui-rating-cell" ><div class="bui-rating-cell-full" style="width:'+t+';">&nbsp;</div></div>'),i>l&&(n+='<div class="bui-rating-cell" ><div class="bui-rating-cell-full" style="width:0;">&nbsp;</div></div>');return n}(e);i.attr("value",e).html(t),r=e},value:p,reset:function(){return p(c.value),this},destroy:function(e){e=1==e;i&&(i.off("click.bui"),e&&i.remove());m("change")},widget:function(t){return e.widget.call({},t)},option:function(t,n){return e.option.call(s,t,n)},config:c,init:d},c=s.config=t.extend(!0,{},{id:"",handle:".bui-rating-cell",fullClassName:"bui-rating-cell-full",halfClassName:"bui-rating-cell-half",half:!1,stars:5,value:0,disabled:!1,render:!0,autoinit:!0,onBeforeInit:null,onChange:null,onInited:null,callback:null},e.config.rating,n),u=!1;function d(n){var r=t.extend(!0,c,n);if(r.onBeforeInit&&r.onBeforeInit.call(s,r),r.id)return i=e.obj(r.id),s.$el=i,c=s.config=r,a=r.fullClassName,o=r.halfClassName,function(t){if(t.render){var n=function(t){e.guid();var n="",i=0,a=t.stars;for(i=0;i<a;i++)n+='<div class="bui-rating-cell" ></div>';return n}(t);i.html(n),l=i.children(t.handle)}else l=i.children(t.handle);p(t.value)}(r),u||f(r),r.onInited&&r.onInited.call(s,r),this;e.hint("rating id不能为空")}function f(e){if(!e.disabled){var n=String(e.value).indexOf(".")>-1?1:0;i.off("click.bui",e.handle).on("click.bui",e.handle,(function(i){var a=t(this).index(),o=parseInt(p()),r=0;h(r=e.half&&n%2==0?a+.5:a+1),p(r),n++,o!==r&&e.onChange&&e.onChange.call(s,i),e.callback&&e.callback.call(s,i),i.stopPropagation()}))}u=!0}function h(e){var n=[];e=String(e),c.half&&e.indexOf(".")>-1?n=e.split("."):n.push(e),l.removeClass(a).removeClass(o),l.each((function(e,i){var r=parseInt(n[0]);1==n.length&&e<r?t(i).addClass(a):2==n.length&&(e<r&&t(i).addClass(a),e==r&&t(i).addClass(o))}))}function p(e){return void 0!==e&&/^-?\d+(\.\d+)?$/.test(e)?(i.attr("value",e),h(e),r=e,v.call(s,"change",e)):r=i.attr("value"),r}function g(e){return c.disabled=!1,f(c),v.call(s,"enabled"),this}function m(t,n){return e.off.apply(s,arguments),this}function v(t){s.self=this==window||this==s?null:this,e.trigger.apply(s,arguments)}return c.autoinit&&d(c),s}}(window.bui||{},window.libs),function(e,t){e.actionsheet=function(n){var i,a,o,r={name:"actionsheet",handle:{},on:function(t,n){return e.on.apply(r,arguments),this},off:h,disabled:function(e){var t=a;return t&&t.addClass("disabled"),this},enabled:function(){var e=a;return e&&e.removeClass("disabled"),this},hide:d,show:f,destroy:function(e){e=1==e;a&&a.off("click.bui");h("hide"),h("show"),i&&i.destroy(e)},widget:function(t){var n={dialog:i};return e.widget.call(n,t)},option:function(t,n){return"buttons"==t&&void 0!==n?function(t,n){if(n&&"array"===e.typeof(n)){var i=u(n);e.obj(l.id).find(".bui-list").html(i)}}(0,n):e.option.call(r,t,n)},config:l,init:c},l=r.config=t.extend(!1,{},{id:"",appendTo:".bui-page",trigger:"",handle:".bui-btn",position:"bottom",effect:"fadeInUp",zIndex:110,width:0,mask:!0,opacity:.6,data:null,buttons:[],template:null,cancelText:"取消",autoinit:!0,onMask:null,onBeforeOpen:null,onBeforeClose:null,onBeforeInit:null,onInited:null,callback:null},e.config.actionsheet,n),s=!1;function c(n){var c,h,g=t.extend(!0,l,n);if(g.onBeforeInit&&g.onBeforeInit.call(r,g),a=e.obj(g.trigger),l=r.config=g,s)e.obj(l.id).find(".bui-list").html(u(g.data||g.buttons));else{var m="function"==typeof g.template?g.template.call(r,g.data||g.buttons):function(e){var t=parseFloat(l.width),n=t>0?"width:"+t+"px;left:50%;right:0;margin-left:-"+t/2+"px;":"",i="";e&&e.length&&(i+='<div id="'+l.id+'" class="bui-actionsheet" style="'+n+'">',i+='    <ul class="bui-list">',i+=u(e),i+="    </ul>",l.cancelText&&(i+='    <div class="bui-btn" value="cancel">'+l.cancelText+"</div>"),i+="</div>");return i}(g.data||g.buttons);e.obj(g.appendTo).append(m)}return i||(i=e.dialog({id:l.id,position:g.position,mask:g.mask,effect:g.effect,opacity:g.opacity,zIndex:g.zIndex,onBeforeOpen:g.onBeforeOpen,onBeforeClose:g.onBeforeClose,onMask:function(){d(),g.onMask&&g.onMask()}})),o=i.$el(),o.find(g.handle),s||(c=function(e){e.target=this,l.callback&&l.callback.call(r,e,r),p.call(r,"click",e)},h=function(e){t(this).hasClass("disabled")||f.call(this)},o&&o.off("click.bui",l.handle).on("click.bui",l.handle,c),a&&a.off("click.bui").on("click.bui",h),s=!0),g.onInited&&g.onInited.call(r,g),this}function u(e){var n="";return t.each(e,(function(e,t){n+='        <li class="bui-btn '+(t.className||"")+'" value="'+(t.value||"")+'">'+(t.name||"")+"</li>"})),n}function d(e){p.call(this,"beforehide");var t={};return"function"==typeof e?t.callback=function(){e&&e.call(r),p.call(r,"hide")}:"string"==typeof e?t.effect=e:"object"==typeof e&&(t=e),i.isOpen()&&i.close(t),this}function f(e){p.call(this,"beforeshow");var t={};return"function"==typeof e?t.callback=function(){e&&e.call(r),p.call(r,"show")}:"string"==typeof e?t.effect=e:"object"==typeof e&&(t=e),!i.isOpen()&&i.open(t),this}function h(t,n){return e.off.apply(r,arguments),this}function p(t){r.self=this==window||this==r?null:this,e.trigger.apply(r,arguments)}return l.id=l.id||e.guid(),l.autoinit&&c(l),r}}(window.bui||{},window.libs),function(e,t){e.number=function(n){var i,a,o,r={name:"number",handle:{},on:function(t,n){return e.on.apply(r,arguments),this},off:b,$el:function(t){return e.selector.call(o,t)},disabled:function(n){g();var i=this&&"htmldivelement"===e.typeof(this)?t(this):a;(n=0!=n)?i.attr("disabled","disabled"):i.removeAttr("disabled");return this},reset:function(){var e=l.value||l.min;return p.call(this,e),e},value:function(e){var t=0;void 0!==e?(p.call(this,e),t=e):t=h.call(this);return t},values:function(t){o.length<1&&(o=u.find(l.id));if(t&&"array"===e.typeof(t))return Array.prototype.slice.call(o).forEach((function(e,n){(e.id||e.getAttribute("name")||"")==t[n].id&&(e.querySelector("input").value=t[n].value)})),this;var n=[];Array.prototype.slice.call(o).forEach((function(e,t){var i=e.id||e.getAttribute("name")||"",a=e.querySelector("input").value;n.push({id:i,value:a})}));return n},prev:m,next:v,destroy:function(e){e=1==e;(o=u.find(l.id))&&(o.off("click.bui"),o.off("input"),e&&o.remove());b("prev"),b("next"),b("change")},widget:function(t){return e.widget.call({},t)},option:function(t,n){return e.option.call(r,t,n)},config:l,init:d},l=r.config=t.extend(!0,{},{parentId:".bui-page",id:".bui-number",min:0,max:100,step:1,value:1,disabled:!1,render:!0,tips:!1,autocheck:!0,decimal:1,name:"",prev:".bui-number-prev",input:"input",next:".bui-number-next",onInput:null,autoinit:!0,inited:null,onBeforeInit:null,onInited:null,onChange:null,callback:null},e.config.number,n),s=!1,c=!1,u=null;function d(n){var d=t.extend(!0,l,n);return d.onBeforeInit&&d.onBeforeInit.call(r,d),d.max,d.min,i=d.step,u=e.obj(d.parentId),"object"==typeof d.id?(o=e.obj(d.id),c=!1):"string"==typeof d.id&&0===d.id.indexOf("#")?(o=e.obj(d.id),c=!0):(o=u.find(d.id),c=!1),l=r.config=d,d.render&&function(t){var n=function(t){var n="";return n+='    <div class="bui-number-prev"><i class="icon-minus"></i></div>',n+='    <input class="bui-number-input" type="text" name="'+(t.name||e.guid())+'" value="'+t.value+'"/>',n+='    <div class="bui-number-next"><i class="icon-plus"></i></div>'}(t);o.html(n)}(d),o.children(d.prev),o.children(d.next),a=o.children(d.input),s||function(n){var i=".bui-number "+n.input,a=".bui-number "+n.prev,d=".bui-number "+n.next,h=function(e){var i=t(this).val();e.value=f(i),n.onInput&&n.onInput.call(r,e),e.stopPropagation()},g=function(e){var i=n.autocheck&&isNaN(parseFloat(t(this).val(),10))?0:parseFloat(t(this).val(),10);/^[-\\+]?([0-9])+$/i.test(i)&&p.call(this,f(i)),e.value=f(i),n.onChange&&n.onChange.call(r,e),e.stopPropagation()},b=function(e){var i=t(this).next(l.input);e.value=i.val(),m.call(i,e),n.callback&&n.callback.call(r,e),e.preventDefault(),e.stopPropagation()},y=function(e){var i=t(this).prev(l.input);e.value=i.val(),v.call(i,e),n.callback&&n.callback.call(r,e),e.preventDefault(),e.stopPropagation()};c?(n.onInput&&o.off("input",n.input).on("input",n.input,e.unit.debounce(h,400)),o.off("change",n.input).on("change",n.input,g),o.off("click.bui",n.prev).on("click.bui",n.prev,b),o.off("click.bui",n.next).on("click.bui",n.next,y)):(n.onInput&&u.off("input",i).on("input",i,e.unit.debounce(h,400)),u.off("change",i).on("change",i,g),u.off("click.bui",a).on("click.bui",a,b),u.off("click.bui",d).on("click.bui",d,y));s=!0}(d),d.disabled&&a.attr("disabled","disabled"),p(d.value),d.target=a,d.value=d.value,d.onInited&&d.onInited.call(r,d),d.inited&&d.inited.call(r,d),this}function f(e,t,n){return t=t||l.min,n=n||l.max,e<t?e=t:e>n&&(e=n),e}function h(){g();var n=this&&"htmldivelement"===e.typeof(this)?t(this):a;return parseInt(n.val(),10)}function p(n){g();var i=this&&"object"===e.typeof(this)?a:t(this);return Array.prototype.slice.call(i).forEach((function(t,i){var a=t.getAttribute("max")||t.parentElement.getAttribute("data-max")||l.max,o=t.getAttribute("min")||t.parentElement.getAttribute("data-min")||l.min,s=l.autocheck?function(e,t,n){var i=e||0;i>n&&(i=n);i<t&&(i=t);i&&i>=t&&i<=n&&(i=i);return i}(n,o,a):n;t.value=s;this&&e.typeof(this);y.call(r,"change",{target:t,value:n}),l.onChange&&l.onChange.call(r,{target:t,value:n})})),this}function g(){"object"==typeof l.id?(o=e.obj(l.id),c=!1):"string"==typeof l.id&&0===l.id.indexOf("#")?(o=e.obj(l.id),c=!0):(o=u.find(l.id),c=!1),o.children(l.prev),o.children(l.next),a=o.children(l.input)}function m(){g();var n=this&&"htmldivelement"===e.typeof(this)?t(this):event?t(event.target).parent().next():a,o=+n.val();o-=i;var s=/^-?\d*\.\d+$/.test(i)?parseFloat(o).toFixed(l.decimal):o;return p.call(n,s),y.call(r,"prev",s),this}function v(){g();var n=this&&"htmldivelement"===e.typeof(this)?t(this):event?t(event.target).parent().prev():a,o=+n.val();o+=i;var s=/^-?\d*\.\d+$/.test(i)?parseFloat(o).toFixed(l.decimal):o;return p.call(n[0],s),y.call(r,"next",s),this}function b(t,n){return e.off.apply(r,arguments),this}function y(t){r.self=this==window||this&&this.hasOwnProperty("widget")?null:this,e.trigger.apply(r,arguments)}return l.autoinit&&d(l),r}}(bui||{},libs),function(e,t){e.stepbar=function(n){var i,a,o={name:"stepbar",handle:{},on:function(t,n){return e.on.apply(o,arguments),this},off:u,value:c,next:function(e){var t=c()+1;return d.call(this,"next",t),c(t,e)},prev:function(e){var t=c()-1;return d.call(this,"prev",t),c(t,e)},destroy:function(e){e=1==e;i&&(i.off("click.bui"),e&&i.remove());u("next"),u("prev"),u("change")},widget:function(t){return e.widget.call({},t)},option:function(t,n){return e.option.call(o,t,n)},config:r,init:s},r=o.config=t.extend(!0,{},{id:null,handle:".bui-stepbar-cell",hasNumber:!1,lineCenter:!1,click:!0,autoinit:!0,data:[],template:null,value:null,onBeforeInit:null,onInited:null,callback:null},e.config.stepbar,n),l=!1;function s(n){var s=t.extend(!0,r,n);if(s.onBeforeInit&&s.onBeforeInit.call(o,s),s.id){i=e.obj(s.id),r=o.config=s;var u,d,f="function"==typeof s.template?s.template.call(o,s.data):(u=s.data,d="",t.each(u,(function(e,t){var n=r.hasNumber?e+1:"",i=r.hasNumber?"bui-stepbar-number ":"",a=t.className||"";d+='<div class="bui-stepbar-cell '+i+a+'">',d+='    <span class="bui-stepbar-dot">'+n+"</span>",d+='    <div class="bui-stepbar-text">',t.title&&(d+="        <h3>"+t.title+"</h3>"),t.subtitle&&(d+='        <p class="bui-stepbar-time">'+t.subtitle+"</p>"),t.content&&(d+='        <p class="bui-stepbar-desc">'+t.content+"</p>"),d+="    </div>",d+="</div>"})),d);return s.lineCenter&&i.addClass("bui-stepbar-center"),s.data.length&&i.html(f),o.$el=i,a=i.children(),l||function(e){var n=function(n){e.click&&c(t(this).index());e.callback&&e.callback.call(o,n,o)};i.off("click.bui",e.handle).on("click.bui",e.handle,n),l=!0}(s),"number"==typeof s.value&&c(s.value),s.onInited&&s.onInited.call(o,s),this}e.hint("stepbar id不能为空")}function c(e,n){return n=n||"","number"==typeof e?(e=e>=a.length-1?a.length-1:e<0?0:e,a.each((function(i,a){i<e&&t(a).removeClass("active "+n).addClass("visited"),i==e&&t(a).removeClass("visited "+n).addClass("active "+n),i>e&&t(a).removeClass("visited active "+n)})),d.call(this,"change",e),e):e=i.children(".active").index()}function u(t,n){return e.off.apply(o,arguments),this}function d(t){o.self=this==window||this==o?null:this,e.trigger.apply(o,arguments)}return r.autoinit&&s(r),o}}(window.bui||{},window.libs);var n=function(e){var t=this,n={updateValuesOnTouchmove:!1,rotateEffect:!1,momentumRatio:7,freeMode:!1};for(var i in e=e||{},n)void 0===e[i]&&(e[i]=n[i]);function a(e){return window.cancelAnimationFrame?window.cancelAnimationFrame(e):window.webkitCancelAnimationFrame?window.webkitCancelAnimationFrame(e):window.mozCancelAnimationFrame?window.mozCancelAnimationFrame(e):window.clearTimeout(e)}function o(e,t){for(var n=0;n<e.length;n++){var i=e[n].style;i.webkitTransform=i.MsTransform=i.msTransform=i.MozTransform=i.OTransform=i.transform=t}return e}function r(e,t){"string"!=typeof t&&(t+="ms");for(var n=0;n<e.length;n++){var i=e[n].style;i.webkitTransitionDuration=i.MsTransitionDuration=i.msTransitionDuration=i.MozTransitionDuration=i.OTransitionDuration=i.transitionDuration=t}return e}function l(e,t){var n,i,a,o;return void 0===t&&(t="x"),a=window.getComputedStyle(e,null),window.WebKitCSSMatrix?((i=a.transform||a.webkitTransform).split(",").length>6&&(i=i.split(", ").map((function(e){return e.replace(",",".")})).join(", ")),o=new WebKitCSSMatrix("none"===i?"":i)):n=(o=a.MozTransform||a.OTransform||a.MsTransform||a.msTransform||a.transform||a.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,")).toString().split(","),"x"===t&&(i=window.WebKitCSSMatrix?o.m41:16===n.length?parseFloat(n[12]):parseFloat(n[4])),"y"===t&&(i=window.WebKitCSSMatrix?o.m42:16===n.length?parseFloat(n[13]):parseFloat(n[5])),i||0}t.params=e,t.cols=[],t.initialized=!1;var s,c,u,d,f,h,p=(s=navigator.userAgent,c=s.match(/(Android);?[\s\/]+([\d.]+)?/),u=s.match(/(iPad).*OS\s([\d_]+)/),d=s.match(/(iPod)(.*OS\s([\d_]+))?/),f=!u&&s.match(/(iPhone\sOS)\s([\d_]+)/),h=!!c,u||d||f||navigator.userAgent.toLowerCase().indexOf("safari")>=0&&navigator.userAgent.toLowerCase().indexOf("chrome")<0&&!h);return t.setValue=function(e,n){var i=0;if(0===t.cols.length)return t.value=e,void t.updateValue(e);for(var a=0;a<t.cols.length;a++)t.cols[a]&&!t.cols[a].divider&&(t.cols[a].setValue(e[i],n),i++)},t.updateValue=function(e){for(var n=e||[],i=[],a=0;a<t.cols.length;a++)t.cols[a].divider||(n.push(t.cols[a].value),i.push(t.cols[a].displayValue));n.indexOf(void 0)>=0||(t.value=n,t.displayValue=i,t.params.onChange&&t.params.onChange(t,t.value,t.displayValue))},t.initPickerCol=function(e,n){var i=$(e),s=i.index(),c=t.cols[s];if(!c.divider){var u,d,f,h,g;c.container=i,c.wrapper=c.container.find(".picker-items-col-wrapper"),c.items=c.wrapper.find(".picker-item"),c.replaceValues=function(e,n,i){c.destroyEvents(),c.values=e,c.displayValues=n;var a=t.columnHTML(c,!0);c.wrapper.html(a),c.items=c.wrapper.find(".picker-item"),c.calcSize(),c.setValue(i||c.values[0],0,!0),c.initEvents()},c.calcSize=function(){var e,n;t.params.rotateEffect&&(c.container.removeClass("picker-items-col-absolute"),c.width||(c.container[0].style.width="")),e=0,n=c.container[0].offsetHeight,c.wrapper[0].offsetHeight,u=c.items[0].offsetHeight,d=u*c.items.length,f=n/2-d+u/2,h=n/2-u/2,c.width&&(e=c.width,parseInt(e,10)===e&&(e+="px"),c.container[0].style.width=e),t.params.rotateEffect&&(c.width||(c.items.each((function(){var t=$(this);t[0].style.width="auto",e=Math.max(e,t[0].offsetWidth),t[0].style.width=""})),c.container[0].style.width=e+2+"px"),c.container.addClass("picker-items-col-absolute"))},c.calcSize(),o(c.wrapper,"translate3d(0,"+h+"px,0)"),r(c.wrapper,"0ms"),c.setValue=function(e,t,n){void 0===t&&(t="");var i=c.wrapper.find('.picker-item[data-picker-value="'+e+'"]').index();void 0!==i&&-1!==i||(i=0);var a=-i*u+h;o(c.wrapper,"translate3d(0,"+a+"px,0)"),r(c.wrapper,t+"ms");try{c.updateItems(i,a,t,n)}catch(e){}},c.updateItems=function(e,n,i,a){void 0===n&&(n=l(c.wrapper[0],"y")),void 0===e&&(e=-Math.round((n-h)/u)),e<0&&(e=0),e>=c.items.length&&(e=c.items.length-1);var s=c.activeIndex;c.wrapper.find(".picker-selected").removeClass("picker-selected"),r(c.items,i);var d=c.items.eq(e).addClass("picker-selected");o(d,""),t.params.rotateEffect&&c.items.each((function(){var e=$(this),t=(e.index()*u-(h-n))/u,i=Math.ceil(c.height/u/2)+1,a=-18*t;a>180&&(a=180),a<-180&&(a=-180),Math.abs(t)>i?e.addClass("picker-item-far"):e.removeClass("picker-item-far"),o(e,"translate3d(0, "+(-n+h)+"px, "+(p?-110:0)+"px) rotateX("+a+"deg)")})),(a||void 0===a)&&(c.value=d.attr("data-picker-value"),c.displayValue=c.displayValues?c.displayValues[e]:c.value,s!=e&&(c.onChange&&c.onChange(t,c.value,c.displayValue),t.updateValue()))},n&&c.updateItems(0,h,0);var m,v,b,y,w,x,k,T,I,O,C=!0;c.initEvents=function(e){var t=/hp-tablet/gi.test(navigator.appVersion),n="ontouchstart"in window&&!t,i=n?"touchstart":"mousedown",a=n?"touchmove":"mousemove",o=n?"touchend":"mouseup",r=e?"off":"on";c.container[r](i,S),c.container[r](a,L),c.container[r](o,j),"mouseup"==o&&document.documentElement.addEventListener("mouseleave",j,!1),c.items[r]("click",P)},c.destroyEvents=function(){c.initEvents(!0)},c.initEvents()}function S(e){if(!v&&!m){var t=e.originalEvent||e;t.preventDefault(),m=!0,b=y=t.targetTouches?t.targetTouches[0].pageY:t.pageY,w=(new Date).getTime(),C=!0,x=T=l(c.wrapper[0],"y")}}function L(e){if(m){var n=e.originalEvent||e;n.preventDefault(),C=!1,y=n.targetTouches?n.targetTouches[0].pageY:n.pageY,v||(a(g),v=!0,x=T=l(c.wrapper[0],"y"),r(c.wrapper,"0ms")),n.preventDefault(),k=void 0,(T=x+(y-b))<f&&(T=f-Math.pow(f-T,.8),k="min"),T>h&&(T=h+Math.pow(T-h,.8),k="max"),o(c.wrapper,"translate3d(0,"+T+"px,0)"),c.updateItems(void 0,T,0,t.params.updateValuesOnTouchmove),O=T-I||T,(new Date).getTime(),I=T}}function j(e){if(m&&v){var n;m=v=!1,r(c.wrapper,""),k&&o(c.wrapper,"min"===k?"translate3d(0,"+f+"px,0)":"translate3d(0,"+h+"px,0)"),n=(new Date).getTime()-w>300?T:T+O*t.params.momentumRatio,n=Math.max(Math.min(n,h),f);var i=-Math.floor((n-h)/u);t.params.freeMode||(n=-i*u+h),o(c.wrapper,"translate3d(0,"+parseInt(n,10)+"px,0)"),c.updateItems(i,n,"",!0),setTimeout((function(){C=!0}),100)}else m=v=!1}function P(e){if(C){a(g);var t=$(this).attr("data-picker-value");c.setValue(t)}}},t.columnHTML=function(e,t){var n="",i="";if(e.divider)i+='<div class="picker-items-col picker-items-col-divider '+(e.textAlign?"picker-items-col-"+e.textAlign:"")+" "+(e.cssClass||"")+'">'+e.content+"</div>";else{for(var a=0;a<e.values.length;a++)n+='<div class="picker-item" data-picker-value="'+e.values[a]+'">'+(e.displayValues?e.displayValues[a]:e.values[a])+"</div>";i+='<div class="picker-items-col '+(e.textAlign?"picker-items-col-"+e.textAlign:"")+" "+(e.cssClass||"")+'"><div class="picker-items-col-wrapper">'+n+"</div></div>"}return t?n:i},t.layout=function(){var e,n;t.cols=[];var i="";for(n=0;n<t.params.cols.length;n++){var a=t.params.cols[n];i+=t.columnHTML(t.params.cols[n]),t.cols.push(a)}e='<div class="'+("picker-modal picker-columns "+(t.params.cssClass||"")+(t.params.rotateEffect?" picker-3d":""))+'"><div class="picker-modal-inner picker-items">'+i+'<div class="picker-center-highlight"></div></div></div>',t.pickerHTML=e},t.init=function(){t.initialized||(t.layout(),t.container=$(t.pickerHTML),t.container.addClass("picker-modal-inline"),$(t.params.container).html(t.container),t.container.find(".picker-items-col").each((function(){var e=!0;(!t.initialized&&t.params.value||t.initialized&&t.value)&&(e=!1),t.initPickerCol(this,e)})),t.value?t.setValue(t.value,0):t.params.value&&t.setValue(t.params.value,0)),t.initialized=!0},t.init(),t};!function(e,t){e.picker=function(e){return new n(e)}}(window.bui||{}),function(e,t){e.pickerdate=function(){function n(e,t){if(e&&e.constructor==Date)return e;if("number"==typeof e&&13===String(e).length)return new Date(e);e=String(e);var n=new Date,i=n.getFullYear(),a=n.getMonth()+1,o=n.getDate();return(e=e.replace(/[-|年|月]/gim,"/").replace(/[时|分|秒|小时|分钟]/gim,":").replace(/^(\d{4}\/\d+?)($|\s)/,(function(e,t){return t+"/1"})).replace(/[日|号]/gim,"").replace(/^(\d{1,2}\/\d{1,2}?)($|\s)/,(function(e,t){return n.getFullYear()+"/"+t}))).indexOf("/")<0&&e.indexOf(":")>-1&&(e=i+"/"+a+"/"+o+" "+e),4===e.length?e+="/1/1 00:00:00":"MM"===t||"M"===t?e=i+"/"+e+"/1 00:00:00":"dd"!==t&&"d"!==t||(e=i+"/"+a+"/"+e+" 00:00:00"),new Date(e)}function i(i){var a,o,r,l,s,c,u,d,f,h,p=e.guid(),g={id:p,title:"",height:260,popup:!0,mask:!0,autoinit:!0,zIndex:110,bindValue:!1,handleParent:"",position:"bottom",effect:"fadeInUp",appendTo:"",rotateEffect:!1,buttons:[{name:"取消",className:""},{name:"确定",className:"primary-reverse"}],onBeforeInit:null,onInited:null,onMask:function(){y&&y.close()},callback:null},m=null,v=this,b=function(){},y=null,w=t.extend(!0,{},g,i);w.appendTo=w.appendTo||e.hasRouter&&router.currentPage()||"body",w.callback=function(e){var o=i.callback&&i.callback.call(v,e);if(!1===o)return!1;if(1==o||void 0===o)if("取消"==t(e.target).text().trim()||"cancel"==t(e.target).text().trim()||"关闭"==t(e.target).text().trim())try{var r=n(a);v.value(r)}catch(e){}else a=v.value();m=null};var x={},k=["FullYear","Month","Date"],T=["Hours","Minutes","Seconds"],I={FullYear:"year",Month:"month",Date:"date",Hours:"hour",Minutes:"minute",Seconds:"second"},O=[];function C(e){var t=new Date("1970/1/1");return O.forEach((function(n,i){t["set"+n](e[x[n]].value-("Month"==n?1:0))})),t}function S(e){var t=n(e);return O.map((function(e,n){return t["get"+e]()+("Month"==e?1:0)}))}function L(){if(!t(this).hasClass("disabled")){if(w.bindValue){m=t(this),v.el=this;var e=m.val()||m.text();v.value(e)}y&&!y.isOpen()&&y.open()}}this.config={},this.option=function(){},this.cols=function(e){e=e||{};var t=[];return f=[],d=[],x={},O=[],k.forEach((function(n,i){"none"!==e[I[n]]&&(O.push(n),t.push(n))})),T.forEach((function(t,n){"none"!==e[I[t]]&&(O.push(t),f.push(t))})),t.forEach((function(t,n){x[t]=d.length,d.push(E[t](e[I[t]]))})),f.forEach((function(n,i){0==i&&0!=t.length?d.push(E.Space()):d.push(E.Divider()),0==t.length&&(d[0].content=""),x[n]=d.length,d.push(E[n](e[I[n]]))})),v.picker&&(v.picker.params.cols=d,v.picker.initialized=!1,v.picker.init()),this},this.id=function(e){e&&!s&&(s=e)},this.reset=function(){return v.picker&&(v.picker.initialized=!1,v.picker.init()),this},this.empty=function(){return v.picker&&e.obj(i.handle).val(""),this},this.min=function(e){var t=(new Date).getFullYear()-1+"/01/01 00:00:00";return r=n(e||w.min||t),this},this.max=function(e){var t=(new Date).getFullYear()+1+"/12/31 00:00:00";return l=n(e||w.max||t),this},this.value=function(e){if(e){var t=S(n(e,v.config.formatValue));return v.picker.setValue(t,0),this}return u(v.picker,v.value,v.displayValue)},this.handler=function(t){return t&&o!==t&&(o=t,i.handleParent?e.$(i.handleParent).off("click.bui",o).on("click.bui",o,L):e.$(o).off("click.bui").on("click.bui",L),L.hasOpen=!1,o=t),this};var j={y:function(e,t){return e.getFullYear().toString().slice(-t)},M:function(e,t){return((t>1?"0":"")+(e.getMonth()+1)).slice(-2)},d:function(e,t){return((t>1?"0":"")+e.getDate()).slice(-2)},h:function(e,t){return((t>1?"0":"")+e.getHours()).slice(-2)},m:function(e,t){return((t>1?"0":"")+e.getMinutes()).slice(-2)},s:function(e,t){return((t>1?"0":"")+e.getSeconds()).slice(-2)}};this.formatValue=function(e){return u=function(t,n,i){var a=C(t.cols);return e.replace(/y+|M+|d+|h+|m+|s+/g,(function(e){return j[e[0]](a,e.length)}))},v.picker&&v.picker.updateValue(),this},this.formatDate=function(e,t){if(null==e)return"";var i=n(e);t=t||"yyyy-MM-dd";var a={"M+":i.getMonth()+1,"d+":i.getDate(),"h+":i.getHours(),"m+":i.getMinutes(),"s+":i.getSeconds(),"q+":Math.floor((i.getMonth()+3)/3),S:i.getMilliseconds()};for(var o in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(i.getFullYear()+"").substr(4-RegExp.$1.length))),a)new RegExp("("+o+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?a[o]:("00"+a[o]).substr((""+a[o]).length)));return t},this.onChange=function(t){var n=this;return c=w.bindValue?function(i){m?m[0]&&"INPUT"===m[0].nodeName?m.val(i):m.text(i):e.obj(o).each((function(e,t){"INPUT"===t.nodeName?t.value=i:t.innerTEXT=i})),t&&t.call(n,i)}:t||b,N.call(this,"change",h),this},this.popup=function(n){if(n.popup&&!y){var i='<div id="'+p+'" class="bui-dialog" >';n.title&&(i+='<div class="bui-dialog-head">'+n.title+"</div>"),i+='<div class="bui-dialog-main"><div id="'+p+'-picker"></div></div>',n.buttons&&n.buttons.length&&(i+='<div class="bui-dialog-foot bui-box">',t.each(n.buttons,(function(e,t){var n="object"==typeof t&&"className"in t?" "+t.className:"",a="object"==typeof t&&"name"in t?t.name:t;i+='<div class="span1"><div class="bui-btn'+n+'">'+a+"</div></div>"})),i+="</div>"),i+="</div>";t(n.appendTo).append(i);s=e.obj(p+"-picker")}else s=e.obj(n.id);return this};var P=function(e,t,n){var i=C(e.cols),a=r["get"+t](),o=l["get"+t](),s=i.getTime(),c=r.getTime(),u=l.getTime();return s<c&&i["get"+t]()<a?("Month"==t&&(a+=1),void e.cols[x[t]].setValue(a)):s>u&&i["get"+t]()>o?("Month"==t&&(o+=1),void e.cols[x[t]].setValue(o)):void(n&&(s<c||s>u)&&e.cols[x[n]].onChange(e))},E={};function N(t){v.self=this==window||this==v?null:this,e.trigger.apply(v,arguments)}E.FullYear=function(e){return{values:(e=e||{values:function(){for(var e=[],t=r.getFullYear(),n=l.getFullYear(),i=t;i<=n;i++)e.push(i);return e}()}).values,displayValues:e.displayValues,onChange:function(e,t,n){P(e,"FullYear",x.Month?"Month":"")}}},E.Month=function(e){return{values:(e=e||{values:[1,2,3,4,5,6,7,8,9,10,11,12],displayValues:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]}).values,displayValues:e.displayValues,textAlign:"right",onChange:function(e,t,n){for(var i=new Date,a=e.cols[x.FullYear]?e.cols[x.FullYear].value:i.getFullYear(),o=e.cols[x.Month]?e.cols[x.Month].value:i.getMonth()+1,r=new Date(a,parseInt(o),0).getDate(),l=[],s=1;s<=r;s++)l.push(s);var c=e.cols[x.Date];c&&c.replaceValues&&c.replaceValues(l,null,c.value<r?c.value:r),P(e,"Month",x.Date?"Date":"")}}},E.Date=function(e){return{values:(e=e||{values:function(){var e=31,t=[];do{t.unshift(e)}while(e--);return t}(),displayValues:function(){var e=31,t=[];do{t.unshift(e+"天")}while(e--);return t}()}).values,displayValues:e.displayValues,onChange:function(e,t,n){P(e,"Date")}}},E.Space=function(){return{divider:!0,content:"  "}},E.Hours=function(e){return{values:(e=e||function(){for(var e=[],t=[],n=0;n<24;n++)e.push(n),t.push(("0"+n).slice(-2));return{values:e,displayValues:t}}()).values,displayValues:e.displayValues,onChange:function(e,t,n){P(e,"Hours",x.Minutes?"Minutes":"")}}},E.Divider=function(){return{divider:!0,textAlign:"center",content:":"}},E.Minutes=function(e){return{values:(e=e||function(){for(var e=[],t=[],n=0;n<60;n++)e.push(n),t.push(("0"+n).slice(-2));return{values:e,displayValues:t}}()).values,displayValues:e.displayValues,onChange:function(e,t,n){P(e,"Minutes",x.Seconds?"Seconds":"")}}},E.Seconds=function(e){return{values:(e=e||function(){for(var e=[],t=[],n=0;n<60;n++)e.push(n),t.push(("0"+n).slice(-2));return{values:e,displayValues:t}}()).values,displayValues:e.displayValues,onChange:function(e,t,n){P(e,"Seconds")}}},v.init=function(i){var o,f,p,g=t.extend(!0,w,i);g.onBeforeInit&&g.onBeforeInit.call(v,g),v.config=g,v.min(g.min),v.max(g.max),v.cols(g.cols),v.id(g.id),v.$el=e.obj(g.handle)||null,v.el=v.$el?v.$el[0]:null,v.handler(g.handle),v.popup(g),v.onChange(g.onChange),v.formatValue(g.formatValue||"yyyy-MM-dd hh:mm:ss"),v.picker=e.picker({container:s,rotateEffect:g.rotateEffect,value:S(g.value?n(g.value):(o=r,f=l,p=new Date,p.getTime()<o.getTime()?o:p.getTime()>f.getTime()?f:p)),onChange:function(e,t,n){var i=u(e,t,n);h!=i&&(h=i,c&&c.call(v,i),N.call(this,"change",i))},cols:d}),g.popup&&!y&&((y=e.dialog.call(v,g))&&y.on("open",(function(){a=u(v.picker,v.value,v.displayValue),v.picker&&(v.picker.initialized=!1,v.picker.init()),N.call(v,"show")})),y&&y.on("close",(function(){N.call(v,"hide")}))),g.onInited&&g.onInited.call(v,g)},w.autoinit&&v.init(w),this.name="pickerdate",this.disabled=function(){var t=e.obj(o);return t&&t.addClass("disabled"),this},this.open=function(e){return y.open(e),this},this.isOpen=function(){return y.isOpen()},this.close=function(e){return y.close(e),this},this.modifyTitle=function(t){return e.obj(p).find(".bui-dialog-head").html(t),this},this.enabled=function(){var t=e.obj(o);return t&&t.removeClass("disabled"),this},this.destroy=function(e){e=1==e;this.off("show"),this.off("hide"),this.off("change"),y&&y.destroy(e),v=null},this.widget=function(t){var n={dialog:y||{}};return e.widget.call(n,t)},this.on=function(t,n){return e.on.apply(v,arguments),this},this.off=function(t,n){return e.off.apply(v,arguments),this}}return function(e){return new i(e)}}()}(window.bui||{},window.libs),function(e,t){e.levelselect=function(n){var i=t.extend(!0,{},{popup:!0,data:[],height:300,appendTo:"",title:"所在地区",trigger:null,placeholder:"请选择",level:3,visibleNum:2,scrollNum:1,log:!1,mask:!0,zIndex:121,autoClose:!0,fullscreen:!1,position:"bottom",effect:"fadeInUp",showValue:!0,onMask:null,value:[],autoinit:!0,onChange:null,onBeforeInit:null,template:null,onInited:null,toggle:!1,field:{name:"n",icon:"icon",image:"image",value:"",data:["c","a"]}},n),a=[],o=bui.guid(),r=o+"-slide",l=null,s=null,c=0,u=[],d=null,f=[],h=[],p=[],g=[],m=null,v={name:"levelselect",init:y,show:w,hide:function(e){S.call(this,"beforehide");var t={};"function"==typeof e?t.callback=function(){e&&e.call(v),S.call(v,"hide")}:"string"==typeof e?t.effect=e:"object"==typeof e&&(t=e);m&&m.close(t)},widget:function(t){var n={dialog:m,slide:d,select:f};return e.widget.call(n,t)},value:k,reset:function(){return f.forEach((function(e,t){e.value(""),0==t?(I(t,i.placeholder),e.text(i.placeholder),d&&d.to(t)):(I(t,""),e.text(""))})),this},setNav:I,destroy:function(e){for(let e=0;e<f.length;e++)f[e].destroy(),g[e].text(""),p[e].off("change"),h[e].off("click");m.destroy(),m=null,d.destroy(),d=null,a=[],l=null,s=null,c=0,u=[],f=[],h=[],p=[],g=[],C("change"),C("lastchange")},option:function(t,n){return e.option.call(v,t,n)},to:function(e,t){return d&&d.to(e,t),this},prev:function(){return d&&d.prev(),this},next:function(){return d&&d.next(),this},on:function(t,n){return e.on.apply(v,arguments),this},off:C,trigger:S};n.appendTo=n.appendTo||e.hasRouter&&router.currentPage()||"body";var b=n.id?t(n.id):t(n.appendTo);function y(n){var y=i=v.config=t.extend(!0,{},i,n);y.onBeforeInit&&y.onBeforeInit.call(v,y);var I="";y.popup?(m||(I=function(e){var t="";return t+='<div id="'+o+'" class="bui-dialog bui-levelselect" style="display:none;">',t+='    <div class="bui-dialog-head">'+e.title+"</div>",t+='    <div class="bui-dialog-main">',t+=O(e),t+="    </div>",t+='    <div class="bui-dialog-close"><i class="icon-close"></i></div>',t+="</div>"}(y),b.append(I),m=bui.dialog({id:o,height:y.height,mask:y.mask,scroll:!1,zIndex:y.zIndex,autoClose:y.autoClose,fullscreen:y.fullscreen,position:y.position,effect:y.effect,onMask:y.onMask})),l=e.obj(o)):(I=O(y),b.append(I),l=e.objId(o)),v.$el=l,s=e.objId(r);var C=0;for(C=0;C<y.level;C++)!function(n){p[n]=e.$(".select-level-val-"+n,l),h[n]=e.$(".select-level-"+n,s),y.trigger&&(g[n]=e.$(y.trigger).eq(n)),f[n]||(f[n]=bui.select({id:h[n],type:"select",direction:"right",field:{name:y.field.name,icon:y.field.icon,image:y.field.image,value:y.field.value||y.field.name},popup:!1,toggle:y.toggle,data:[],template:y.template}),f[n].on("change",(function(i){y.log&&console.log("change",n);var o=f[n].index()||0,r=f[n].value()||"",l=f[n].text()||f[n].value();u[n]={name:l,value:r,index:o};var s=[];"string"==typeof y.field.data?s=a[n][o][y.field.data]||a[n][o]:y.field.data&&"array"===e.typeof(y.field.data)&&y.field.data.forEach((function(e,t){a[n][o][y.field.data[t]]&&a[n][o][y.field.data[t]].length&&(s=a[n][o][y.field.data[t]])})),a[n+1]=s,f[n+1]&&f[n+1].option("data",s),f[n+2]&&f[n+2].option("data",[]),h[n]&&h[n].find(".bui-btn").removeClass("active"),t(i.target).parents(".bui-btn").addClass("active"),T(n),p[n]&&p[n].text(l),p[n+1]&&p[n+1].text(y.placeholder),p[n+2]&&p[n+2].text(""),g[n]&&g[n].text(l),g[n+1]&&g[n+1].text(y.placeholder),g[n+2]&&g[n+2].text(""),i.context={trigger:g[n],selector:p[n],index:n,select:f[n],data:a[n]};var c=a[n],b=a[n+1]||[];S.call(v,"change",i,c,b),y.onChange&&y.onChange.call(v,i,c,b),(n==y.level-1||b.length<1)&&S.call(v,"lastchange",i,c,b),1==y.visibleNum&&(y.log&&console.log("next"),d.next()),y.popup&&!m.isOpen()||(n==y.level-1?(y.log&&console.log("close"),y.autoClose&&m&&m.close()):0!=n&&(y.log&&console.log("next"),d.next()))})),p[n].on("click.bui",(function(){var e=t(this).index(),n=d.index();1==y.visibleNum?d.to(e):(e>n?d.next():d.prev(),t(this).addClass("active").siblings().removeClass("active"))})))}(C);!function(t){e.$(t.trigger).click((function(){w()}))}(y);var L=window&&window.viewport&&window.viewport.height()||t(window).height(),j=y.fullscreen?L:String(y.height).indexOf("%")>-1?L*parseFloat(y.height)/100:y.height;y.popup&&m?m.on("open",(function(e){c=j-l.find(".select-value").height()-l.children(".bui-dialog-head").height(),x(y)})):(c=j,x(y)),p[0]&&p[0].text(y.placeholder),g[0]&&g[0].text(y.placeholder),a[0]=y.data,f[0].option("data",a[0]),y.value&&k(y.value),y.onInited&&y.onInited.call(this,y)}function w(e){S.call(this,"beforeshow");var t={};"function"==typeof e?t.callback=function(){e&&e.call(v),S.call(v,"show")}:"string"==typeof e?t.effect=e:"object"==typeof e&&(t=e),m&&m.open(t)}function x(e){d||(d=bui.tab({id:r,height:c,scroll:!0,zoom:!1,visibleNum:e.visibleNum,scrollNum:e.scrollNum}).lock()).on("to",(function(e){T(e)}))}function k(t){if(void 0===t)return u;t&&"array"===e.typeof(t)?t.forEach((function(e,t){"string"==typeof e?f[t].value(e):"object"==typeof e&&(f[t].text(e.name||""),f[t].value(e.value||""))})):e.showLog("levelselect.value() 参数是一个数组类型")}function T(e){t(".select-value div",l).removeClass("active"),t(".select-value div",l).eq(e).addClass("active")}function I(e,n){return t(".select-value div",l).eq(e).html(n),g[e].html(n),this}function O(e){var t="",n=0;if(e.popup||(t+='<div id="'+o+'" class="bui-levelselect">'),e.showValue){for(t+='    <div class="bui-box select-value">',n=0;n<e.level;n++)t+='        <div class="select-level-val-'+n+'"></div>';t+="    </div>"}for(t+='<div id="'+r+'" class="bui-tab bui-levelselect-tab">',t+='    <div class="bui-tab-main">',t+="        <ul>",n=0;n<e.level;n++)t+="            <li>",t+='                <div class="select-level-'+n+'"></div>',t+="            </li>";return t+="        </ul>",t+="    </div>",t+="</div>",e.popup||(t+="</div>"),t}function C(t,n){return e.off.apply(v,arguments),this}function S(t){v.self=this==window||this==v?null:this,e.trigger.apply(v,arguments)}return i.onBeforeInit&&i.onBeforeInit.call(v,i),i.autoinit&&y(i),v}}(window.bui||{},window.libs);t((function(e){!function(t,n){t.tab=function(i){var a=e.config=n.extend(!0,{},{id:"",menu:".bui-tab-head > ul",children:".bui-tab-main > ul",header:"header",footer:"footer",main:".bui-tab-main",item:"li",prev:".bui-tab-prev",next:".bui-tab-next",data:null,navscroll:!1,loadall:!1,position:"top",BiconBadge:!0,iconPosition:"left",loaded:null,compiled:null,sideWidth:0,align:"center",alignClassName:"",stopHandle:"",width:0,height:0,relative:!1,zoom:!1,swipe:!0,animate:!0,bufferEffect:!1,visibleNum:1,scrollNum:1,distance:40,direction:"x",autoplay:!1,autoheight:!1,scroll:!0,index:0,fullscreen:!1,autopage:!1,autoload:!1,autoinit:!0,template:null,async:!0,callback:null,onBeforeInit:null,onInited:null,onStart:null,onMove:null,onEnd:null},t.config.slide,i),o=null,r=null,l=t.guid();function s(e,n){if(e&&!/[0-9]/.test(e))return this;var i=t.$(a.id).find(a.menu).children().eq(e),o=void 0!==n?n:"",r=i.find(".bui-badges"),l=i.find("i");return r.size()?r.text(n):l.size()&&a.iconBadge?l.append(`<span class="bui-badges">${o}</span>`):i.append(`<span class="bui-badges">${o}</span>`),this}function c(e){var n=t.$(a.id).find(a.menu).children();return void 0!==e?n.eq(e).find(".bui-badges").remove():n.find(".bui-badges").remove(),this}function u(e,n){var i=templatesNav(n||r);t.$(e).html(i)}function d(e){var t="left"==a.position||"right"==a.position?" bui-tab-sidenav":"",n=`${a.navscroll?'<div class="bui-navbar">':""}<ul class="bui-nav ${l}-menu ${t}">`;return e&&e.forEach((function(e,t){n+=function(e,t){var n="",i=function(e,t){return e.icon?e.icon.indexOf("&#")>-1?`<i class="icon">${e.icon}</i>`:`<i class="${e.icon}"></i>`:""}(e)||function(e,t){return e.image?`<i class="icon"><img src="${e.image}" /></i>`:""}(e),o=e.className?""+e.className:"";switch(a.iconPosition){case"left":n+=`<li class="bui-btn bui-align-${a.align} ${o}">${i}${e.title}</li>`;break;case"right":n+=`<li class="bui-btn bui-align-${a.align} bui-box ${o}"><div class="span1">${e.title}</div>${i}</li>`;break;case"bottom":n+=`<li class="bui-btn bui-align-${a.align} bui-box-vertical ${o}"><div class="span1">${e.title}</div>${i}</li>`;break;default:n+=`<li class="bui-btn bui-align-${a.align} bui-box-vertical ${o}">${i}<div class="span1">${e.title}</div></li>`}return n}(e)})),n+="</ul>\n                "+(a.navscroll?"</div>":"")}function f(e){var t="",n=a.menu.indexOf("#")>-1?"":function(e){var t=`<div class="bui-tab-head ${"bottom"==a.position?"bui-tab-foot":""}">`;return t+=d(e),t+"</div>"}(e),i=function(e){var t=`${"left"==a.position||"right"==a.position?'<div class="span1">':""}<div class="bui-tab-main"><ul class="${l}-main">`;return e&&e.forEach((function(e,n){t+=`<li class="bui-tab-main-item">\n                            <component id="${e.id}" class="delay-item" name="${e.name}" delay="true"></component>\n                        </li>`})),t+="</ul></div>",t+="left"==a.position||"right"==a.position?"</div>":""}(e);switch(a.position){case"top":t=n+i;break;case"bottom":t=i+n;break;default:t=n+i}return t}return function(e){var i,h;r=n.extend(!0,e.data),e.data&&(e.menu=`.${l}-menu`,e.children=`.${l}-main`,i=r,h=(a.template||f)(i),t.$(a.id).html(h),e.data=null);var p=t.$(".bui-tab-sidenav");if(r&&"left"==e.position){e.sideWidth&&p.width(e.sideWidth);var g=e.sideWidth||p.width();e.width=e.width||n(window).width()-g,t.$(e.id).addClass("bui-tab-left"),t.$(e.id).css({"margin-left":g}),p.css("left",-g)}else if(r&&"right"==e.position){e.sideWidth&&p.width(e.sideWidth);g=e.sideWidth||p.width();e.width=e.width||n(window).width()-g,t.$(e.id).addClass("bui-tab-right"),p.css({left:"100%"})}return o=t.slide(e),"left"!=e.position&&"right"!=e.position||t.$(e.id).css({overflow:"visible"}),r&&o.on("to",(function(){var e=this.index(),t=r&&r[e]||{},n=a.loadall?".delay-item":"#"+t.id;loader.delay({id:n,param:t.param,everytime:t.everytime,loaded:a.loaded,compiled:a.compiled})})).to(e.index),o.name="tab",o.templateNav=d,o.renderNav=u,o.addBadge=s,o.removeBadge=c,o}(a)}}(window.bui||{},window.libs)}));!function(e,t){e.input=function(n){var i,a,o,r,l,s={name:"input",handle:{},empty:function(){return a.val(""),a.next().css("display","none"),c.showLength&&r.text(0),this},value:function(e){if(void 0!==e)return a.val(e),l.trigger(c.event),this;return a.val()},reset:function(){return a.val(""),l.trigger(c.event),this},toggleType:function(){"text"==a.attr("type")?a.attr("type","password"):a.attr("type","text");return this},on:function(t,n){return e.on.apply(s,arguments),this},off:function(t,n){return e.off.apply(s,arguments),this},widget:function(t){return e.widget.call({},t)},option:function(t,n){return e.option.call(s,t,n)},config:c,init:d},c=s.config=t.extend(!0,{},{id:"",target:"input,textarea",event:"input",iconClass:".icon-remove",showIcon:!0,showLength:!1,maxLength:0,onInput:null,onBlur:null,onFocus:null,autoinit:!0,onBeforeInit:null,onChange:null,onInited:null,callback:null},e.config.searchbar,n),u=!1;function d(n){var d=t.extend(!0,c,n);if(d.onBeforeInit&&d.onBeforeInit.call(s,d),c=s.config=d,""!=d.id&&null!==d.id){if(i=e.obj(d.id),s.$el=i,l=i.find(d.target),a=l.eq(0),o=e.unit.startWithClass(d.iconClass)?d.iconClass:"."+d.iconClass,!u){if(function(e){var n=!1;l.on(e.event,(function(i){var a=this.value,c=t(this).parent(),u=c.find(o);a,a.length>0&&e.showIcon?u&&u.length?u.css("display","block"):(c.append('<i class="'+o.replace(/\./g," ").substr(1)+'"></i>'),u=l.find(o)):u&&u.css("display","none"),e.showLength&&(r=c.find("em")).text(a.length),n||(e.onInput&&e.onInput.call(s,i),f.call(s,"input",i))})).on("compositionstart",(function(){n=!0})).on("compositionend",(function(t){n=!1;var i=a.val();e.onInput&&e.onInput.call(s,t,i)})),e.onChange&&l.off("change").on("change",(function(t){e.onChange.call(s,t),f.call(s,"change",t)})),e.onFocus&&l.off("focus").on("focus",(function(n){var r=this.value;r,a=t(this),e.showIcon&&(i.find(o).css("display","none"),r&&t(this).next().css("display","block")),e.onFocus.call(s,n),f.call(s,"focus",n)})),e.onBlur&&l.off("blur").on("blur",(function(t){var n=e.onBlur&&e.onBlur.call(s,t);1==n||null===n?this.value:"",f.call(s,"blur",t)})),e.showIcon&&i.off("click.bui",o).on("click.bui",o,(function(t){e.callback&&e.callback.call(s,t),f.call(s,"click",t)})),u=!0}(d),d.showLength){var h=function(e){a.parent();return'<span class="bui-input-length"><em>0</em>/'+e.maxLength+"</span>"}(d);i.append(h)}d.maxLength>0&&l.attr("maxlength",d.maxLength)}return d.showLength&&l.trigger(d.event),d.onInited&&d.onInited.call(s,d),this}}function f(t){s.self=this==window||this==s?null:this,e.trigger.apply(s,arguments)}return c.autoinit&&d(c),s}}(bui||{},libs),function(e,t){e.timer=function(n){var i=t.extend({},{interval:1e3,target:null,reduce:!0,onEnd:null,onProcess:null,fixZero:!0,type:"number",time:10,times:0},n),a=i.reduce,o=i.target?e.obj(i.target):null,r=0,l=!1,s=i.times||i.time,c=!1,u=f(i),d=null;function f(t){var n=null;switch(t.type){case"minute":n=60*parseInt(s,10);break;case"hour":n=60*parseInt(s,10)*60;break;case"day":n=60*parseInt(s,10)*60*24;break;case"date":n=(e.date.convert(s).getTime()-(new Date).getTime())/1e3;break;case"second":default:n=parseInt(s,10)}return a||(s=n,n=0),n}function h(t){var n=new Date,a=e.date.format(n,"yyyy-MM-dd"),r=0,l=0,s=0,c="",u=parseInt(t%60,10);switch(i.type){case"minute":c=`${p(l=parseInt(t/60,10))}:${p(u)}`;break;case"hour":r=parseInt(t/60/60,10),l=parseInt(t/60%60,10),c=`${p(r)}:${p(l)}:${p(u)}`;break;case"date":a=e.date.format(i.times||i.time,"yyyy-MM-dd"),s=parseInt(t/60/60/24,10),r=parseInt(t/60/60%24,10),l=parseInt(t/60%60,10),c=`剩余${s}天 ${p(r)}:${p(l)}:${p(u)}`;break;case"day":a=e.date.format(n.getTime()+1e3*t,"yyyy-MM-dd"),s=parseInt(t/60/60/24,10),r=parseInt(t/60/60%24,10),l=parseInt(t/60%60,10),c=`剩余${s}天 ${p(r)}:${p(l)}:${p(u)}`;break;case"second":c=`${p(l=parseInt(t/60,10))}:${p(u)}`;break;case"number":l=parseInt(t/60,10),c=""+p(parseInt(t,10))}return{date:a,day:s,hour:r,minute:l,second:u,count:t,value:c,target:o&&o[0]}}function p(e){return e<10&&i.fixZero?"0"+e:e}var g=a?function e(){l&&(u=r,l=!1);var t=h(u);return u<=0?(u=0,o&&o.text(t.value),i.onEnd&&i.onEnd.call(this,t),clearTimeout(d),void(c=!1)):(o&&o.text(t.value),i.onProcess&&i.onProcess.call(this,t),u--,c=!0,d=setTimeout((function(){e()}),i.interval),this)}:function e(){l&&(u=r,l=!1);var t=h(u);return u>=s?(o&&o.text(t.value),u=s,i.onEnd&&i.onEnd.call(this,t),clearTimeout(d),void(c=!1)):(o&&o.text(t.value),i.onProcess&&i.onProcess.call(this,t),u++,c=!0,d=setTimeout((function(){e()}),i.interval),this)};return{name:"timer",stop:function(e){r=0,u=f(i),clearTimeout(d),d=null,e&&e.call(this)},start:g,restart:function(){return r=0,u=f(i),d=clearTimeout(d),g(),this},status:function(){return c},pause:function(){return r=u,l=!0,clearTimeout(d),this}}}}(window.bui||{},window.libs),function(e,t){e.extend({name:"floor",config:{id:"",menu:"",handle:".bui-btn",floorItem:".bui-floor-item",footer:".bui-floor-footer",area:.5,delay:200,height:"inherit",distance:1,onScroll:null,onScrollTop:null,onScrollBottom:null,onLoaded:null},callback:function(n){var i=this,a=null,o=null,r=null,l=null,s=!0,c=!1,u=!0,d=!0,f=null,h=0,p=[];function g(){p=[],l.each((function(e,t){var n={top:"none"===this.style.display?-1:this.offsetTop,display:this.style.display};p.push(n)}))}i.init=function(n){var f=t.extend(!0,i.config,n);if(i.config=f,f.id||e.showLog("id 不能为空"),a=e.$(f.id),o=e.$(f.menu),r=o&&o.find(f.handle),l=a.find(f.floorItem),a.find(f.footer),"string"==typeof f.height&&"inherit"!==f.height){var m=t(window).height()-e.$("header").height()-e.$("footer").height()-a[0].offsetTop;m=f.height.indexOf("%")>-1?t(window).height()*parseInt(f.height,10)/100:m,a.height(m).css("position","relative"),h=m}else"number"==typeof f.height&&f.height>0?(a.height(f.height).css("position","relative"),h=f.height):h=a.height();g(),c||function(e){var n=function(n){if(s){var a=t(this).scrollTop();0===a&&(n.index=0,i.trigger("scrolltop",n),e.onScrollTop&&e.onScrollTop.call(i,n)),a>5&&u&&(g(),u=!1);var o=h*parseFloat(e.area),l=0;for(l=0;l<p.length;l++){var c=p[l];if(c.top>-1){var d=c.top-a;if(c.top==a&&0==a)return r&&r.removeClass("active"),r&&r.eq(l).addClass("active"),n.index=l,void i.trigger("scrollto",n);d<o&&(r&&r.removeClass("active"),r&&r.eq(l).addClass("active"),n.index=l,i.trigger("scrollto",n))}}parseInt(a+this.offsetHeight,10)==parseInt(this.scrollHeight,10)&&(n.index=p.length-1,i.trigger("scrollbottom",n),e.onScrollBottom&&e.onScrollBottom.call(i,n))}i.trigger("scroll",n),e.onScroll&&e.onScroll.call(i,n)};a.scroll(n),o&&o.off("click.bui",e.handle).on("click.bui",e.handle,(function(e){s=!1,d&&(g(),d=!1);var n=t(this).index();i.to(n),i.trigger("click",e)})),a.parents("main").css("position","relative"),c=!0}(f),f.onLoaded&&f.onLoaded.call(i,f)},i.to=function(e,t){r=o&&o.find(i.config.handle);var n=p[e]&&p[e].top||0;a[0].scrollTop=n,r&&r.removeClass("active"),r&&r.eq(e).addClass("active"),f&&clearTimeout(f),f=setTimeout((function(){s=!0}),i.config.delay),t&&t.call(i,e),i.trigger("to",e);var l={target:a[0],index:e};i.trigger("scrollto",l)},i.destroy=function(e){e=1==e;a&&(a.off("click.bui"),a.off("scroll"),e&&a.remove(),a=null),o&&(o.off("click.bui"),o=null),i.off("click"),i.off("to"),i.off("scroll"),i.off("scrollto"),i.off("scrolltop"),i.off("scrollbottom"),c=!1},i.init(i.config)}})}(window.bui||{},window.libs),function(e,t){e.ajax=function(n){var i=t.Deferred(),a=null,o=t.extend(!0,{},{baseUrl:"",data:{},method:"GET",dataType:"json",timeout:6e4,headers:{},processData:!0,mimeType:"none",cache:!0,async:!0,needJsonString:!1,contentType:null,localData:null,transformRequest:null,transformResponse:null,native:!0,needNative:!1},e.config.ajax,n),r=o.success,l=o.fail||o.error;null===o.contentType&&"get"==o.method.toLocaleLowerCase()?o.contentType="text/html;charset=UTF-8":null===o.contentType&&"post"==o.method.toLocaleLowerCase()?o.contentType="application/x-www-form-urlencoded":o.contentType=o.contentType;"object"==typeof n&&void 0!==n.needNative?n.needNative:e.isWebapp;if(o.needJsonString)try{o.data="object"==typeof o.data?JSON.stringify(o.data):o.data}catch(e){o.data=o.data}if(o.data=o.transformRequest&&o.transformRequest.call(i,o.data)||o.data,!o.url)return e.showLog("url不能为空","bui.ajax"),i;if(o.url.indexOf("://")>-1?o.url=o.url:o.url.indexOf("./")>-1||o.url.indexOf("../")>-1?o.url=bui.unit.resolvePath(o.url):o.url=o.baseUrl+o.url,o.proxy){var s=o.url.indexOf(o.proxy),c=s>-1?s+1:-1;o.url=o.url.substr(c)}if(i.abort=function(){a&&a.abort()},o.localData)return o.localData=o.transformResponse&&o.transformResponse.call(i,o.localData)||o.localData,r&&r(o.localData,200),i.resolve(o.localData,200),i;if(o.needNative){if(void 0===e.native.ajax)return u(o),i;try{i=e.native.ajax&&e.native.ajax(o)||i}catch(e){}}else u(o);function u(e){e.success=function(t,n,a){var o=null;if("string"==typeof t&&"json"==e.dataType)try{o=JSON.parse(t)}catch(e){o=t}else o=t||{};o=e.transformResponse&&e.transformResponse.call(i,o)||o,r&&r(o,n,a),i.resolve(o,n,a)},e.error=function(t,n,a){var o;if("string"==typeof t&&"json"==e.dataType)try{o=JSON.parse(t)}catch(e){o=t}else o=t||{};l&&l(o,n,a),i.reject(o,n,a)};var n=e.type&&e.type.toUpperCase();e.type=n||e.method.toUpperCase(),a=t.ajax(e)}return i},e.get=function(n,i,a){var o={method:"GET"};o.url=n,o.data=i||{};var r=null,l=a&&a[0];return r=a&&"array"===e.typeof(a)&&"object"==e.typeof(l)?t.extend(!0,{},e.config.get,o,l):o,bui.ajax(r)},e.post=function(n,i,a){var o={method:"POST",contentType:"application/x-www-form-urlencoded"};o.url=n,o.data=i||{};var r=null,l=a&&a[0];return(r=a&&"array"===e.typeof(a)&&"object"==e.typeof(l)?t.extend(!0,{},e.config.post,o,l):o).contentType.indexOf("application/json")>-1&&(r.data="object"==typeof r.data?JSON.stringify(r.data):r.data),bui.ajax(r)},e.put=function(n,i,a){var o={method:"PUT",contentType:"application/json"};o.url=n,o.data=i||{};var r=null,l=a&&a[0];return(r=a&&"array"===e.typeof(a)&&"object"==e.typeof(l)?t.extend(!0,{},e.config.put,o,l):o).contentType.indexOf("application/json")>-1&&(r.data="object"==typeof r.data?JSON.stringify(r.data):r.data),bui.ajax(r)},e.delete=function(n,i,a){var o={method:"DELETE",contentType:"application/json"};o.url=n,o.data=i||{};var r=null,l=a&&a[0];return(r=a&&"array"===e.typeof(a)&&"object"==e.typeof(l)?t.extend(!0,{},e.config.delete,o,l):o).contentType.indexOf("application/json")>-1&&(r.data="object"==typeof r.data?JSON.stringify(r.data):r.data),bui.ajax(r)},e.all=function(n){var i=null;return i=n&&"array"===e.typeof(n)?n:Array.prototype.slice.apply(arguments),t.when.apply(null,i)}}(window.bui||{},window.libs),function(e,t){e.load=function(n){var i,a={url:"",param:{},reload:!!e.hasRouter&&router.config.reload,replace:!1,native:!0,needNative:!1},o=t.extend(!0,{},a,e.config.load,n),r={},l=o.url;if(o.url)if(document.activeElement.blur(),l.indexOf("tel:")>=0||l.indexOf("mailto:")>=0||l.indexOf("sms:")>=0)e.unit.openExtral(l);else{if(l&&l.indexOf("?")>-1){var s=l.split("?");r=e.unit.keyStringToObject(s[1]),o.url=s[0]}try{var c="string"==typeof o.param&&JSON.parse(o.param)||o.param||{};o.param=t.extend(!0,{},r,c)}catch(t){return void e.showLog("param 参数值必须是一个{}对象","bui.load:web")}n&&n.needNative||e.nativeRouter?e.native.load&&e.native.load(o):(i=e.setUrlParams(o.url,o.param),o.reload?window.location.href=e.hasRouter?"index.html#"+i:i:!o.replace||e.hasRouter?e.hasRouter?window.router.load(o):window.location.href=i:window.location.replace(i))}else e.showLog("url 不能为空!","bui.load:web")}}(window.bui||{},window.libs),function(e,t){e.getPageParams=function(n){var i=t.Deferred(),a={callback:null,native:!0,needNative:!1};n=n||{};var o=t.extend(!0,{},a,e.config.getPageParams);"function"==typeof n?o.callback=n:n&&"object"===e.typeof(n)&&(o=t.extend(!0,{},a,e.config.getPageParams,n));"object"==typeof n&&void 0!==n.needNative?n.needNative:e.isWebapp;if(n&&n.needNative||e.nativeRouter)return i=e.native.getPageParams&&e.native.getPageParams(o)||i;if(e.hasRouter){var r=window.router.getPageParams&&window.router.getPageParams()||e.getUrlParams();o.callback&&o.callback(r),i.resolve(r)}else{var l=e.getUrlParams();o.callback&&o.callback(l),i.resolve(l)}return i}}(window.bui||{},window.libs),function(e,t){e.back=function(n){var i,a={index:-1,name:"",delay:!0,native:!0,beforeBack:!0,callback:null};"function"==typeof n?(a.callback=n,i=t.extend(!0,{},a,e.config.back)):i=n&&"object"===e.typeof(n)?t.extend(!0,{},a,e.config.back,n):t.extend(!0,{},a,e.config.back);"object"==typeof n&&void 0!==n.needNative?n.needNative:e.isWebapp;var o=e.hasRouter&&router.history&&router.history.getLast()||null;if(!1!==("function"==typeof i.beforeBack?i.beforeBack.call(this,{prevTarget:null,target:o}):i.beforeBack))if(n&&n.needNative||e.nativeRouter)e.native.back&&e.native.back(i);else{if(e.hasRouter)if(window.router.config.syncHistory){var r=e.history.get(),l=r.length-1;if(i.name){var s=e.array.indexs(r,i.name,"name"),c=s.length;i.index=c?-(r.length-s[c-1]-1):-1}if(Math.abs(i.index)>=r.length&&(i.index=-l),Math.abs(i.index)>=window.history.length&&window.router.config.hash&&(i.index=window.router.config.reloadCache?-l:-(window.history.length-1)),0==i.index&&(i.index=-1),window.router.config.hash&&!window.router.config.reloadCache)return void d();(r.length>1||window.history.length>1)&&d()}else window.router.back&&window.router.back(i);else d();var u=null}function d(){var t=(e.hasRouter&&e.history.getPrev()||{}).exports||{};window.history.go(i.index),u&&clearTimeout(u),i.delay&&i.callback?u=setTimeout((function(){e.hasRouter?i.callback.call(router,t):i.callback.call(e,{})}),500):i.callback&&i.callback()}}}(window.bui||{},window.libs),function(e,t){e.refresh=e.history.refresh}(window.bui||{}),function(e,t){e.run=function(n){var i={};"string"==typeof n?i.id=n:n&&"object"===e.typeof(n)&&(i=t.extend(!0,{},{id:"",name:"",data:null,onFail:null,native:!0,needNative:!0},e.config.run,n));var a=String(i.id);"object"==typeof n&&void 0!==n.needNative?n.needNative:e.isWebapp;if(n.needNative)e.native.run&&e.native.run(i);else if(a.indexOf("http://")>-1||a.indexOf("https://")>-1){var o=e.setUrlParams(i.id,i.data);if(e.platform.isIos())return void(window.location.href=o);(window.open("","_blank")||window.open("","_newtab")).location.href=o}}}(window.bui||{},window.libs),function(e,t){e.fileselect=function(n){var i,a,o,r=t.extend(!0,{},{native:!0,needNative:!1,needCompress:!1,appendTo:"",quality:.8,from:"camera",width:800,height:800,duration:10,onSuccess:null,onFail:null,mediaType:"picture"},e.config.fileselect,n),l=this,s={add:function(n){c=null;var i=t.extend(!0,{needChangeData:!0,needCompress:!1,name:"resize.jpg"},r,n);(u=i).mimeType=n.mimeType?n.mimeType:"",f?(n.from?"picture"===n.from||"photo"===n.from||"savephoto"===n.from?a.removeAttr("capture"):a.attr("capture",n.from):a.removeAttr("capture"),e.platform.isIos()&&"function"==typeof FastClick?a[0].dispatchEvent(new Event("click")):a.trigger("click")):o.add(i);return this},remove:function(t,n){n=n||"name";if(!f)return d=o.remove(t,n);if("string"==typeof t){d.length&&e.array.remove(d,t,n);var i=d.length?d[d.length-1].data:null;return c=i,a[0].value="",d}return this},clear:function(){d=[],c=null,f?a[0].value="":o.clear();return d},value:function(){c=f?c:o.value();return c},data:function(){d=f?d:o.data();return d},toFile:x,toBase64:function(n){var i=t.extend(!0,{needCompress:!1,destinationType:"data",mimeType:"",needChangeData:!1},n);if(i.data=i.data||c,i.mimeType=n.mimeType?n.mimeType:i.data&&i.data.type||"image/jpeg",f)try{w(i)}catch(t){e.showLog(t)}else o.toBase64(i);return this},resize:w,toBlob:k,currentIndex:function(){var e="";e=f?d.length-1:o.data().length-1;return e},currentName:function(){var e="";e=f?d[d.length-1].name:o.value().name;return e},init:y},c=null,u=null,d=[],f="object"==typeof n&&void 0!==n.needNative?!n.needNative:e.isWebapp,h="*",p=!1,g=null,m=null,v=null,b=null;function y(n){var y=t.extend(!0,r,n);switch(r.appendTo=y.appendTo||e.hasRouter&&router.currentPage()||"body",y.mediaType){case"allmedeia":h="*";break;case"picture":case"image":h="image/*";break;case"video":h="video/*";break;case"audio":h="audio/*";break;default:h=y.mediaType}return d=[],g=new Image,m=new FileReader,v=document.createElement("canvas"),b=v.getContext("2d"),f?(!function(){if(null==a){i=bui.guid();var e=r.from?'capture="'+r.from+'"':"",n='<input type="file" accept="'+h+'" name="uploadFiles" id="'+i+'" '+e+' style="display:none"/>';t(r.appendTo).append(n),a=t("#"+i)||t('input[name="uploadFiles"]')}}(),p||(a.on("change",(function(t){var n=this.files;if(!(n.length<1)){n.length>1&&e.showLog("一次只能选一张图片","bui.fileselect:web");var i=n[0];c=i;var a={name:i.name,data:i,type:i.type,size:i.size};d.push(a),u.needCompress?(u.data=i,u.mimeType=u.mimeType?u.mimeType:i.type,w(u)):u.onSuccess&&u.onSuccess.call(l,i,d),this.value=""}})),p=!0)):o=e.native.fileselect&&e.native.fileselect.call(this,n,{module:s})||{},this}function w(n){var i=t.extend(!0,{destinationType:"file",data:null,mimeType:"",quality:.8,width:800,height:800,needCompress:!0,needChangeData:!1,onSuccess:null,onFail:null},r,n);g.onload=function(){var t=this.width,n=this.height,a=null,o=i.width,r=i.height,s=t,u=n;i.needCompress&&(t>o||n>r)&&(t/n>o/r?(s=o,u=Math.round(o*(n/t))):(u=r,s=Math.round(r*(t/n)))),v.width=s,v.height=u,b.clearRect(0,0,s,u),b.drawImage(g,0,0,s,u);var f=v.toDataURL(i.mimeType||i.data&&i.data.type||"image/jpeg",i.quality),h=function(e){return e.indexOf(".png")>-1||e.indexOf(".jpg")>-1||e.indexOf(".gif")>-1||e.indexOf(".jpeg")>-1?e.substr(0,e.lastIndexOf(".")):e}(i.data.name)||"";switch(i.destinationType){case"file":a=x(f,h);break;case"blob":a=k(f);break;case"data":a=f}if(i.needChangeData){c=a;var p=e.array.index(d,i.data.name,"name");p>-1&&(d[p].data=a,a.size&&(d[p].size=a.size),a.type&&(d[p].type=a.type))}return i.onSuccess&&i.onSuccess.call(l,a,d),a},g.onerror=function(){i.onFail&&i.onFail.call(l,g.src)},m.onload=function(e){g.src=e.target.result};try{var a=i.data&&i.data.type||"";a="object"==typeof a?a.type||"":a||"",i.data&&0==a.indexOf("image")&&m.readAsDataURL(n.data)}catch(t){e.showLog(t)}}function x(t,n){try{n=n||"file";for(var i=t.split(","),a=(i[0].match(/:(.*?);/)||[])[1]||"image/jpeg",o=a.split("/")[1],r=atob(i[1]),l=r.length,s=new Uint8Array(l);l--;)s[l]=r.charCodeAt(l);return new File([s],n+"."+o,{type:a})}catch(t){e.showLog(t)}}function k(e){for(var t=e.split(","),n=t[0].match(/:(.*?);/)[1],i=atob(t[1]),a=i.length,o=new Uint8Array(a);a--;)o[a]=i.charCodeAt(a);return new Blob([o],{type:n})}return y(r),s}}(bui||{},libs),function(e,t){e.file=function(n){var i,a,o,r,l,s={getFolder:d,removeFolder:function(e){var n=t.extend(!0,{},e);c.needNative?l.removeFolder(n):d({root:n.root,folderName:n.folderName,create:n.create,onSuccess:function(e,t){e.removeRecursively((function(){n.onSuccess&&n.onSuccess.call(s,e,t)}),(function(t){var i={msg:"删除 "+n.folderName+" 文件失败"};n.onFail&&n.onFail.call(s,i,e)}))},onFail:function(e){var t={msg:"删除 "+n.folderName+" 文件失败"};n.onFail&&n.onFail.call(s,t)}});return this},getFile:p,getFileName:h,removeFile:function(e){var n=t.extend(!0,{},e);c.needNative?l.removeFile(n):p({root:n.root,create:n.create,folderName:n.folderName,fileName:n.fileName,onSuccess:function(e,t){e.remove((function(){n.onSuccess&&n.onSuccess.call(s,e,t)}),(function(t){var i={msg:"删除 "+n.fileName+" 文件失败"};n.onFail&&n.onFail.call(s,i,e)}))},onFail:function(e){var t={msg:"删除 "+n.fileName+" 文件失败"};n.onFail&&n.onFail.call(s,t)}});return this},toBase64:function(e){return r.toBase64(e),this},open:function(t){var n=t||{};if(!n.url)return;c.needNative?l.open(n):e.showLog("web暂不支持open方法","bui.file.open:web");return this},init:u},c=s.config=t.extend(!0,{},{size:10,native:!0,needNative:!1},e.config.file,n);"object"==typeof n&&void 0!==n.needNative?n.needNative:e.isWebapp;function u(n){return r=e.fileselect(n),a=function(n){var a=t.Deferred();n.needNative?l=e.native.file&&e.native.file(n,{fileselect:r,module:s})||{}:(i="bui.app",o=1024*parseInt(c.size)*1024,window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,navigator.webkitPersistentStorage&&navigator.webkitPersistentStorage.requestQuota(o,(function(e){window.requestFileSystem(window.PERSISTENT,e,(function(e){a.resolve(e)}),u)})));function u(e){var t="";try{switch(e.code){case FileError.QUOTA_EXCEEDED_ERR:t="QUOTA_EXCEEDED_ERR";break;case FileError.NOT_FOUND_ERR:t="NOT_FOUND_ERR";break;case FileError.SECURITY_ERR:t="SECURITY_ERR";break;case FileError.INVALID_MODIFICATION_ERR:t="INVALID_MODIFICATION_ERR";break;case FileError.INVALID_STATE_ERR:t="INVALID_STATE_ERR";break;default:t="Unknown Error"}}catch(e){}var n={msg:t};a.reject(n)}return a}(n),!n.needNative&&d({root:!0,create:!0}),this}function d(e){var n={folderName:i,root:!1,create:!1,msg:"",param:{create:!1,exclusive:!1},onSuccess:null,onFail:null},o=t.extend({},n,e),r="";if(o.create?(r="创建 ",o.param.create=!0):(r="获取 ",o.param.create=!1),c.needNative)l.getFolder(o);else{var u=f(o.folderName);u=o.root?u:i+"/"+u,a.done((function(e){e.root.getDirectory(u,o.param,(function(t){o.onSuccess&&o.onSuccess.call(s,t,e)}),(function(e){var t={msg:r+u+" 文件夹失败"};o.onFail&&o.onFail.call(s,t)}))})).fail((function(e){o.onFail&&o.onFail.call(s,{msg:"文件系统还没准备好."})}))}return this}function f(e){return"."==e[0]||"/"==e[0]||" "==e[0]?f(e.slice(1)):"."!=e[0]&&"/"!=e[0]&&" "!=e[0]?e:void 0}function h(e){return e&&e.indexOf("/")>-1?e.slice(e.lastIndexOf("/")+1,e.indexOf("?")>-1?e.indexOf("?"):void 0):e}function p(e){var n=t.extend({},{fileName:"",folderName:"",root:!1,create:!1,param:{create:!1,exclusive:!1},onSuccess:null,onFail:null},e),a="";if(n.create?(a="创建 ",n.param.create=!0):(a="获取 ",n.param.create=!1),n.fileName&&!(n.fileName.indexOf(".")<0)){if(c.needNative)l.getFile(n);else{var o=h(n.fileName);d({root:n.root,folderName:n.folderName,create:!0,onSuccess:function(e,t){var r=e.name==i?e.name+"/"+o:i+"/"+e.name+"/"+o;t.root.getFile(r,n.param,(function(e){n.onSuccess&&n.onSuccess.call(s,e,t)}),(function(e){var t={msg:a+o+" 文件失败"};n.onFail&&n.onFail.call(s,t)}))},onFail:function(e){n.onFail&&n.onFail(e)}})}return this}n.onFail&&n.onFail()}return u(c),s}}(window.bui||{},window.libs),function(e,t){e.upload=function(n){var i,a,o,r,l,s,c,u={url:"",data:null,headers:{},showProgress:!0,timeout:6e4,contentType:!1,processData:!1,autoClose:!0,native:!0,needNative:!1,method:"POST",fileKey:"file",dataType:"json",mediaType:"picture",from:"picture",onProgress:null,onMask:function(){y()},onSuccess:null,onFail:null},d=t.extend(!0,{},u,e.config.upload,n),f=t.Deferred(),h={init:m,add:function(e){return e.onSuccess=e.onSuccess?e.onSuccess.bind(h):null,e.onFail=e.onFail?e.onFail.bind(h):null,a.add(e),this},remove:function(e,t){var n=v(),i=n.length;if(i<1)return this;/\d/.test(e)&&e.indexOf(".")<0?a.remove(n[e].name,t):"string"==typeof e?a.remove(e,t):a.remove(n[i-1].name,t);return this},resize:function(e){return a.resize(e),this},currentIndex:function(){return a.currentIndex()},currentName:function(){return a.currentName()},clear:function(){return a.clear(),this},data:v,start:b,startAll:function(e){var n=t.extend(!0,{needFileinfo:!1},d,e),i=n[n.fileKey]||a.data();n.data||(n.data={});let o=[];for(let e=0;e<i.length;e++){i[e];!function(e){if(!(e>i.length-1)){if(n.data[n.fileKey]=i[e]&&i[e].data,n.needFileinfo)for(var t in i[e])"data"!==t&&(n.data[t]=i[e]&&i[e][t]);var a=n.onSuccess,r=n.onFail;n.onSuccess=function(t){a&&a.call(h,t),o[e]=t,e==i.length-1&&n.onEnd&&n.onEnd.call(h,o)},n.onFail=function(t){r&&r.call(h,t),o[e]=t,e==i.length-1&&n.onEnd&&n.onEnd.call(h,o)},b(n)}}(e)}return f},stop:y,toBase64:function(e){return a.toBase64(e),this},widget:function(t){var n={loading:i,fileselect:a,ajax:o};return e.widget.call(n,t)}},p=d.showProgress,g=d.onProgress;"object"==typeof n&&void 0!==n.needNative?n.needNative:e.isWebapp;function m(t){return i=e.loading({display:"block",width:30,height:30,opacity:0,autoClose:t.autoClose,callback:t.onMask}),a=e.fileselect.call(h,{native:t.native,needNative:t.needNative,from:t.from,mediaType:t.mediaType}),t&&t.needNative&&(r=e.native.upload&&e.native.upload(t,{loading:i,fileselect:a,module:h})||{}),t.data?(b(t),this):this}function v(){return a.data()}function b(e){var n=t.extend(!0,{},d,e);if(s=n.url,l=a.value(),p=n.showProgress,l){if(p&&i.show(),n&&n.needNative)return r.start(n)||f;var c=n.data,u=Object.keys(c),g=new FormData,m=!1;return u.forEach((function(e,t){n.fileKey===e&&(m=!0),g.append(e,c[e])})),!m&&g.append(n.fileKey,l),n.data=g,function(e){var n=e.onSuccess,i=e.onFail;return o=t.ajax({url:s,type:e.method,data:e.data,cache:e.cache,headers:e.headers,dataType:e.dataType,contentType:e.contentType,processData:e.processData,timeout:e.timeout,xhr:function(){var e=t.ajaxSettings.xhr();if(w&&e.upload)return e.upload.addEventListener("progress",w,!1),e},success:function(e){x(),n&&n.call(h,e),f.resolve(e)},error:function(e,t,n){x(),i&&i.call(h,e,t),f.reject(e,t,n)}}),f}(n)}}function y(e){return d&&d.needNative?r.stop(e):(i&&i.stop(),o&&o.abort(),e&&e.call(h,i,o)),this}function w(e){window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame,window.requestAnimationFrame((function(){if(e.lengthComputable){var t=Math.round(100*e.loaded/e.total);c=t.toString()+"%",t<100?(n=c,p&&i&&i.show({text:n})):x(),g&&g.call(h,c)}var n}))}function x(){return i&&i.stop(),this}return m(d),h}}(window.bui||{},window.libs),function(e,t){e.download=function(n){var i,a,o,r,l,s,c={open:function(e){return a.open(e),this},getFile:function(e){var n=t.extend(!0,{autoDown:!0},u,e),i=e.fileName||a.getFileName(n.url);a.getFile({fileName:i,folderName:n.folderName,onSuccess:function(e,t){n.onSuccess&&n.onSuccess.call(c,e.fullPath||e,e,t)},onFail:function(e){n.autoDown=b(n)}})},removeFile:function(t){if(!t.fileName)return e.showLog("请告诉我们你要删除哪个文件, fileName "),this;return t.folderName=t.folderName||u.folderName,a.removeFile(t),this},removeFolder:function(e){return e.folderName=e.folderName||u.folderName,a.removeFolder(e),this},start:b,stop:y,toBase64:function(e){return a.toBase64(e),this},init:v,widget:function(t){var n={loading:g,file:a,ajax:i};return e.widget.call(n,t)}},u=c.config=t.extend(!0,{},{url:"",data:{},headers:{},method:"GET",showProgress:!0,timeout:6e4,fileName:"",folderName:"download",native:!0,needNative:!0,onProgress:null,onSuccess:null,onFail:null},e.config.download,n),d="object"==typeof n&&void 0!==n.needNative?!n.needNative:e.isWebapp,f=u.showProgress,h=u.onProgress,p=u.onFail,g=null,m=null;function v(t){return g=t.showProgress&&e.loading({display:"block",width:30,height:30,opacity:0,callback:function(){y()}}),a=e.file({native:t.native,needNative:t.needNative}),t.needNative?o=e.native.download&&e.native.download(t,{file:a,loading:g,module:c})||{}:function(e){if(a.getFolder({folderName:e.folderName,create:!1,onSuccess:function(e,t){l=e.fullPath},onFail:function(t){a.getFolder({folderName:e.folderName,create:!0,onSuccess:function(e,t){l=e.fullPath},onFail:function(e){p&&p.call(c,e)}})}}),!e.url)return;b(e)}(t),this}function b(e){var n=t.extend(!0,{},u,e);r=n.needEncode?encodeURI(n.url):n.url,h=n.onProgress,(f=n.showProgress)&&g&&g.show({text:"0%"}),l+"/"+(e.fileName||a.getFileName(n.url)),n.needNative?o.start(n):(n.cache=!1,n.contentType=!1,n.processData=!1,i=t.ajax({url:r,type:n.method,data:n.data,cache:n.cache,headers:n.headers,contentType:n.contentType,processData:n.processData,timeout:n.timeout,xhr:function(){var e=t.ajaxSettings.xhr();if(w&&e)return e.addEventListener("progress",w,!1),e},success:function(t){var i=e.fileName||a.getFileName(n.url);a.getFile({fileName:i,folderName:n.folderName,create:!0,onSuccess:function(e,t){n.onSuccess&&n.onSuccess.call(c,e.fullPath,t)}})},fail:function(e){x(),n.onFail&&n.onFail.call(c,e)}}))}function y(e){d?(x(),i&&i.abort(),m&&window.cancelAnimationFrame(m)):o.stop(),e&&e.call(c,g,i)}function w(e){window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame,m=window.requestAnimationFrame((function(){if(e.lengthComputable){var t=Math.round(100*e.loaded/e.total);s=t.toString()+"%",t<100?(n=s,f&&g&&g.show({text:n})):x(),h&&h.call(c,s)}var n}))}function x(){f&&g&&g.stop()}return v(u),c}}(window.bui||{},window.libs),function(e,t){e.currentPlatform="webapp",e.on("pagereadybefore",(function(){e.platform.isWindow()||e.platform.isMac()?window.viewport=e.viewport(40):window.viewport=e.viewport(),e.config.init.auto&&e.init(),!e.hasRouter&&e.config.component.auto&&loader.components({id:"body"})})),e.webready=function(n){t(document).ready((function(){e.trigger.call(e,"pagereadybefore"),n&&n.call(e),e.trigger.call(e,"pageready")}))},e.ready=function(n){e.isWebapp=void 0===e.isWebapp?e.debug:e.isWebapp;var i=t.Deferred();if(e.isWebapp)t(document).ready((function(){e.trigger.call(e,"pagereadybefore"),n&&n.call(e),e.trigger.call(e,"pageready"),i.resolve()}));else{if(void 0===e.native.ready)return e.showLog("当前 bui.isWebapp = false; 但bui.js为webapp版本,不支持原生方法,请使用 buijs update -p xxx, 更换bui.js为对应xxx平台版本;"),e.webready(n),i;i=e.native.ready&&e.native.ready(n)||i}return i}}(window.bui||{},window.libs),function(e,t){e.checkVersion=function(n){n=n||{};var i,a,o,r,l,s=t.extend(!0,{id:"",target:"i",title:"版本更新",tips:{nowVersion:"",minVersion:"您的版本太低,需要卸载安装最新版才能正常使用!",fail:"网络超时,请检测网络再次尝试"},field:{data:""},currentVersion:"",currentVersionCode:"",width:580,height:500,mask:!0,needTips:!0,baseUrl:"",url:"",data:{},native:!0,needNativeRun:!0,needNative:!1,method:"GET",buttons:[{name:"取消",className:""},{name:"立即下载",className:"primary-reverse"}],timeout:2e4,callback:null,onSuccess:null,onFail:null},e.config.checkVersion,n),c=t("body"),u=t(s.id),d=!1,f=parseInt(s.currentVersionCode||e.config.versionCode),h=s.currentVersion||e.config.version,p=s.tips.minVersion,g=s.tips.nowVersion||"您目前的版本"+h+",已经是最新了 ^_^",m=s.target.indexOf("#")>-1?e.obj(s.target):u?u.find(s.target):null,v=e.confirm;function b(){e.platform.isIos()?e.run({id:l,native:s.native,needNative:s.needNativeRun}):e.run({id:r,native:s.native,needNative:s.needNativeRun})}!function(n){!function(n){e.ajax(n).done((function(h){var m=h&&"object"===e.typeof(h)?h:{},x=s.field.data?e.unit.getKeyValue(s.field.data,m):m,k=parseInt(x.minVersionCode);r=x.downloadUrl||"",l=x.iosDownloadUrl||"",a=x.remark||"检测到新版本"+o+",是否立即下载",i=parseInt(x.versionCode),o=x.versionName,x.forced="false"!=x.forced&&0!=x.forced,x.isForced||x.forced?(y(),f<k?v({title:n.title,content:p,width:n.width,height:n.height,mask:n.mask,autoClose:!1,buttons:[{name:"立即下载",className:"primary-reverse"}],callback:function(){try{b()}catch(t){e.showLog(t)}}}):f>k&&f<i?v({title:n.title,content:a,buttons:n.buttons,width:n.width,height:n.height,mask:n.mask,callback:function(){try{"立即下载"==t(event.target).text().trim()&&b()}catch(t){e.showLog(t)}}}):(w(),n.needTips&&e.hint(g))):f<i?y():w(),s.onSuccess&&s.onSuccess(x),!d&&s.id&&function(n){s.id&&u.length?u.off("click").on("click",r):c.off("click",s.id).on("click",s.id,r);function r(){f<i?(y(),v({title:"新版本"+o,content:a,buttons:n.buttons,width:n.width,height:n.height,mask:n.mask,callback:function(e){"立即下载"==t(e.target).text().trim()&&b()}})):(w(),e.hint(g)),n.callback&&n.callback.call(this)}d=!0}(n)})).fail((function(t){s.onFail&&s.onFail(),n.tips.fail&&e.hint(n.tips.fail)}))}(n)}(s);var y=function(){m&&m.find(".bui-badges").length||m&&m.append('<span class="bui-badges"></span>')},w=function(){m&&m.find(".bui-badges").remove()}}}(window.bui||{},window.libs),function(e,t){e.native.ajax=function(n){var i=t.Deferred(),a=t.extend(!0,{},n);try{var o=function(e,t){var n;if("string"==typeof e&&"json"==a.dataType)try{n=JSON.parse(e)}catch(t){n=e}else n=e||{};n=a.transformResponse&&a.transformResponse.call(i,n)||n,a.success&&a.success(n,t,null),i.resolve(n,t)},r=function(e,t){var n;if("string"==typeof e&&"json"==a.dataType)try{n=JSON.parse(e)}catch(t){n=e}else n=e||{};a.fail&&a.fail(n,t,null),i.reject(n,t)};if(a.url.indexOf("://")<0&&(a.url.indexOf(".html")>-1||a.url.indexOf(".json")>-1||a.url.indexOf(".js")>-1)){var l="_www/"+(0===a.url.indexOf("/")?a.url.replace("/",""):a.url);return void plus.io.resolveLocalFileSystemURL(l,(function(e){e.file((function(e){var t=new plus.io.FileReader;t.readAsText(e,"utf-8"),t.onloadend=function(e){var t=e.target.result;o(t,200)}}))}),(function(e){r(e,200)}))}"html"!=a.mimeType&&"html"!=a.dataType||(a.data=null),t.ajax({xhr:function(){return new plus.net.XMLHttpRequest},success:o,error:r,url:a.url,contentType:a.contentType,mimeType:a.mimeType,dataType:a.dataType,processData:a.processData,type:a.method,method:a.method,timeout:a.timeout,headers:a.headers,cache:a.cache,async:a.async,data:a.data})}catch(t){e.showLog("原生请求需要在 bui.isWebapp = false 状态下才有效.")}return i}}(bui||{},libs),function(e,t){e.native.load=function(e){var t=e.url,n=window.location.href,i=e.param;if(e.effect=e.effect||"slide-in-right",e.transition=e.transition||200,t.indexOf("http://")<0||t.indexOf("https://")<0||t.indexOf("file://")<0||t.indexOf("/")<0){var a=n.lastIndexOf("/");n.lastIndexOf(".");t=n.substring(0,a)+"/"+t,e.url=t;var o=t.slice(t.lastIndexOf("/")+1,t.lastIndexOf(".")>-1?t.lastIndexOf("."):void 0),r=plus.webview.create(e.url,o,{scrollIndicator:"none",scalable:!1,popGesture:"none"},i);r.addEventListener("loaded",(function(){r.show(e.effect,e.transition)}),!1)}}}(window.bui||{}),function(e,t){e.native.getPageParams=function(e){var n=t.Deferred();return Cordova.exec((function(t){try{var i="string"==typeof t?JSON.parse(t):t;e.callback&&e.callback(i)}catch(e){}n.resolve(i)}),null,"Page","getPageParams",[]),n}}(bui||{},libs),function(e,t){e.native.back=function(e){var t=plus.webview.currentWebview();plus.webview.close(t),e.callback&&e.callback(t)}}(window.bui||{}),function(e,t){e.native.refresh=function(e){plus.webview.currentWebview().reload(!0)}}(window.bui||{}),function(e,t){e.native.run=function(e){plus.runtime.openURL(e.id,(function(){e.onFail&&e.onFail()}),e.name)}}(window.bui||{}),function(e,t){e.native.fileselect=function(n,i){var a=n,o={add:function(e){r=null;var n=t.extend(!0,{width:800,height:800},a,e);try{u.call(this,n)}catch(e){bui.alert(e)}return this},remove:function(t,n){n=n||"name";if("string"==typeof t){var i=(s=e.array.remove(s,t,n)).length?s[s.length-1].data:null;return r=i,s}return this},clear:function(){return r=null,s=[]},value:function(){return r},data:function(){return s},toBase64:function(e){var t=(e=e||{}).data||r;e.onSuccess,e.onFail;t=t.indexOf("/storage")>-1||t.indexOf("/var")>-1?t:plus.io.convertLocalFileSystemURL(t);var n=new Image;n.src=t,e.width&&(n.width=e.width);e.height&&(n.height=e.height);n.onload=function(){var t=function(e){var t=document.createElement("canvas"),n=e.width,i=e.height;n>i?n>100&&(i=Math.round(i*=100/n),n=100):i>100&&(n=Math.round(n*=100/i),i=100);return t.width=n,t.height=i,t.getContext("2d").drawImage(e,0,0,n,i),t.toDataURL("image/png",.8)}(n);e.onSuccess&&e.onSuccess(t)}},init:c},r=null,l="_doc/",s=[];function c(){s=[]}function u(t){var n=this;switch(t.from){case"camera":plus.camera.getCamera().captureImage((function(e){plus.io.resolveLocalFileSystemURL(e,(function(e){d(t,e)}),(function(e){t.onFail&&t.onFail.call(n,e)}))}),(function(e){console.log("error"+e)}),{filename:l+e.guid(null)+".jpg"});break;default:plus.gallery.pick((function(e){plus.io.resolveLocalFileSystemURL(e,(function(e){d(t,e)}),(function(e){t.onFail&&t.onFail.call(n,e)}))}),(function(e){}),{filter:"image"})}return this}function d(e,t){var n=this;if(e.needCompress){e.name=t.name,e.url=t.toLocalURL();var i=e.onSuccess;return e.onSuccess=function(e){var t=f(e);i&&i.call(n,t,s)},void function(e){var t=l+e.name,n=this;try{plus.zip.compressImage({src:e.url,dst:t,width:e.width,height:e.height,quality:e.quality,overwrite:!0},(function(i){e.onSuccess&&e.onSuccess.call(n,t,s)}),(function(i){e.onFail&&e.onFail.call(n,t,s)}))}catch(e){bui.showLog("compressImage 出现了问题.")}}(e)}var a=f(t);e.onSuccess&&e.onSuccess.call(n,a,s)}function f(t){var n=null,i="";if("string"==typeof t){var a=(n=r=t).lastIndexOf("/");i=n.substr(a+1)}else n=r=t.toLocalURL(),i=t.name;var o=n.lastIndexOf("?"),l=o<0?void 0:o,c="image/"+n.slice(n.lastIndexOf(".")+1,l);if(!e.array.compare(s,i,"name")){var u={name:i,data:t,type:c};s.push(u)}return n}return c(),o}}(window.bui||{},window.libs),function(e,t){e.native.upload=function(e,n){var i,a,o=e,r={init:d,start:f,stop:function(e){return l&&l.stop(),e&&e.call(r,l,undefined),this}},l=(n=n||{}).loading||function(){},s=n.fileselect||function(){},c=null,u=o.showProgress;o.onProgress;function d(e){e.data&&f(e)}function f(e){var n=t.extend(!0,{},o,e);if(a=encodeURI(e.url),i=s.value(),e.data?n.data[n.fileKey]=n.data[n.fileKey]||i:(n.data={},n.data[n.fileKey]=i),u=n.showProgress,i)return u&&l.show(),function(e){function t(e){var t=e.lastIndexOf("/");return e.substr(t+1)}c=plus.uploader.createUpload(a,{method:e.method},(function(t,n){200==n?(h(),e.onSuccess&&e.onSuccess.call(r,t.responseText,t)):(h(),e.onFail&&e.onFail.call(r,t,n))}));for(let n in e.data)if(e.fileKey===n){t(e.data[n]);c.addFile(e.data[n],{key:e.fileKey})}else c.addData(n,e.data[n]);for(let t in e.headers)c.setRequestHeader(t,e.headers[t]);c.start()}(n),this}function h(){return l&&l.stop(),this}return d(o),r}}(window.bui||{},window.libs),function(e,t){e.native.file=function(n,i){var a,o={getFolder:s,removeFolder:function(e){var n=t.extend(!0,{},e);if(!n.folderName)return this;var i=a+n.folderName;return plus.io.resolveLocalFileSystemURL(i,(function(e){e.removeRecursively((function(t){n.onSuccess&&n.onSuccess.call(o,i,e)}),(function(t){var a={url:i,msg:"删除 "+n.folderName+" 文件失败"};n.onFail&&n.onFail.call(o,a,e)}))})),this},getFile:function(e){var n=t.extend({},{fileName:"",folderName:"",root:!1,create:!1,param:{create:!1,exclusive:!1},onSuccess:null,onFail:null},e),i="";n.create?(i="创建 ",n.param.create=!0):(i="获取 ",n.param.create=!1);if(!n.fileName||n.fileName.indexOf(".")<0)return void(n.onFail&&n.onFail.call(o));var r=c(n.fileName),l=a+n.folderName+"/"+(n.fileName||r);return plus.io.resolveLocalFileSystemURL(l,(function(e){n.onSuccess&&n.onSuccess.call(o,l,e)}),(function(e){var t={url:l,msg:i+r+" 文件失败"};n.onFail&&n.onFail.call(o,t)})),this},getFileName:c,removeFile:function(e){var n=t.extend(!0,{},e),i=a+n.folderName+"/"+n.fileName;return plus.io.resolveLocalFileSystemURL(i,(function(e){e.remove((function(t){n.onSuccess&&n.onSuccess.call(o,i,e)}),(function(t){var a={url:i,msg:"删除 "+n.fileName+" 文件失败"};n.onFail&&n.onFail.call(o,a,e)}))})),this},open:function(e){var t=e||{};if(!t.url)return this;if(t.url.indexOf("http")>-1)return plus.runtime.openWeb(t.url),this;return plus.runtime.openFile(t.url,{},(function(e){t.onFail&&t.onFail.call(o,e)})),this},init:l},r=n;(i=i||{}).fileselect,e.isWebapp||r.native;function l(e){return plus.runtime.appid||"bui.app",a="_doc/",s({root:!0,create:!0}),this}function s(e){var n={folderName:a,root:!1,create:!1,msg:"",param:{create:!1,exclusive:!1},onSuccess:null,onFail:null},i=t.extend({},n,e),r="";i.create?(r="创建 ",i.param.create=!0):(r="获取 ",i.param.create=!1);var l=a+i.folderName;return plus.io.resolveLocalFileSystemURL(l,(function(e){i.onSuccess&&i.onSuccess.call(o,e,l)}),(function(e){var t={msg:r+name+" 文件失败"};i.onFail&&i.onFail.call(o,t)})),this}function c(e){return e&&e.indexOf("/")>-1?e.slice(e.lastIndexOf("/")+1,e.indexOf("?")>-1?e.indexOf("?"):void 0):e}return l(),o}}(window.bui||{},window.libs),function(e,t){e.native.download=function(n,i){var a,o,r,l={start:h,stop:function(){p(),c&&c.abort()},pause:function(){p(),c&&c.pause()},resume:function(){p(),c&&c.resume()},toBase64:function(e){return u.toBase64(e),this},init:f},s=l.config=t.extend(!0,{},{url:"",data:{},headers:{},method:"GET",showProgress:!0,timeout:6e4,fileName:"",folderName:"download",tips:{start:"开始下载...",process:"链接服务器...",finished:"下载完成"},native:!0,onProgress:null,onSuccess:null,onFail:null},e.config.download,n),c=null,u=(i=i||{}).file,d=i.loading;e.isWebapp||s.native,s.showProgress,s.onProgress,s.onFail;function f(e){return r="_doc/"+e.folderName+"/",e.url?(h(e),this):this}function h(e){var t=e;a=t.url,o=encodeURI(a);t.onProgress;t.showProgress&&d.show({text:"0%"});var n=r+(t.fileName||function(e){var t=e.lastIndexOf("/")+1,n=e.substr(t),i=n.indexOf("?")>-1;return i?n.substr(0,i):n}(a));(c=plus.downloader.createDownload(o,{method:t.method||"GET",data:t.data||{},filename:n,timeout:t.timeout||3e4,headers:t.headers},(function(e,n){200==n?t.onSuccess&&t.onSuccess.call(l,e.filename,e,d):(p(),t.onFail&&t.onFail.call(l,n,d)),c=null}))).addEventListener("statechanged",(function(e,n){if(c)switch(e.state){case 1:t.showProgress&&d.text(s.tips.start);break;case 2:t.showProgress&&d.text(s.tips.process);break;case 3:var i=e.downloadedSize/e.totalSize*100,a=parseInt(i);t.showProgress&&d.text("正在下载:"+a+"%"),"100"==a&&(t.showProgress&&d.stop(),c=null);break;case 4:t.showProgress&&d.text(s.tips.finished)}})),c.start()}function p(){d&&d.stop()}return f(s),l}}(window.bui||{},window.libs),function(e,t){e.currentPlatform="dcloud",e.native.ready=function(n){var i=t.Deferred();return e.platform.isMac()||e.platform.isWindow()?(e.showLog("要调用手机原生功能,需要打包或在Hbuilder真机调试器中打开","bui.native.ready:Dcloud"),e.webready(n),i):(window.plus?(n&&n.call(e),i.resolve()):document.addEventListener("plusready",(function(t){e.trigger.call(e,"pagereadybefore"),n&&n.call(e),e.trigger.call(e,"pageready"),i.resolve()}),!1),i)}}(window.bui||{},window.libs),function(e,t){e.init=function(n){var i,a={id:".bui-page",height:0,header:"header",main:"main",footer:"footer",reduceRem:0};if("object"==e.typeof(n))i=t.extend({},a,e.config.init,n);else{var o={};o.height=n,i=t.extend({},a,o)}var r=i.height||document.documentElement.clientHeight||t("body").height()||t("#bui-router").height()||t(".bui-page").height();if(!(e.obj(i.main).length<1)){try{var l=e.obj(i.id),s=i.header.indexOf("#")>-1?e.obj(i.header)[0]:l.children(i.header)[0],c=i.footer.indexOf("#")>-1?e.obj(i.footer)[0]:l.children(i.footer)[0],u=i.main.indexOf("#")>-1?e.obj(i.main):l.children(i.main),d=s?s.offsetHeight:0,f=c?c.offsetHeight:0,h=i.reduceRem>0?e.unit.remToPx(i.reduceRem):0,p=r-d-f-h;if(parseInt(p)>0)u.height(p);else{var g=d+f+h+"px";e.unit.calcHeight(u,g)}}catch(t){e.showLog(t,"bui.init")}return p}},window.addEventListener?window.addEventListener("load",(function(t){e.trigger.call(e,"onload")}),!1):window.attachEvent("onload",(function(t){e.trigger.call(e,"onload")})),t(document).ready((function(){e.isWebapp=void 0===e.isWebapp?e.debug:e.isWebapp,e.trigger.call(e,"pagebefore"),"function"==typeof FastClick&&FastClick.attach(document.body),e.trigger.call(e,"pageinit")}));try{var n="hidden"in document?"hidden":"webkitHidden"in document?"webkitHidden":"",i=n.replace(/hidden/i,"visibilitychange");document.addEventListener(i,(function(t){document[n]?e.trigger.call(e,"pagehide",t):e.trigger.call(e,"pageshow",t)}))}catch(e){}try{navigator.control.gesture(!1),navigator.control.longpressMenu(!1)}catch(e){}}(window.bui||{},window.libs)}));
