/* @preserve 
 * @name: BUI v1.5.5  
 * @detail: BUI 是一个免费的UI交互框架, 用于快速定制开发WebApp,微信,混合移动应用(Bingotouch,Link,Dcloud,Apicloud,Appcan等).
 * @site: http://www.easybui.com/ 
 * Copyright © 2016-2019 BUI. All Rights Reserved. 
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t():"function"==typeof define&&define.amd?define(t):t()}(0,function(){"use strict";function e(e,t){return t={exports:{}},e(t,t.exports),t.exports}window.libs=window.Zepto||window.jQuery||{},window.bui={},window.router={},function(e){e.debug=!0,e.hasRouter=!1,e.isWebapp,e.currentPlatform="",e.log=!0,e.trace=!1,e.native={},e.config={},e.config.namespace="bui",e.config.classNamePrefix=e.config.namespace+"-",e.config.version="1.5.5",e.config.versionCode=20191130,e.version=e.config.version,e.versionCode=e.config.versionCode,e.config.viewport={zoom:!0,create:!0},e.config.init={auto:!0},e.config.ready={},e.config.ajax={},e.config.get={},e.config.put={},e.config.delete={},e.config.post={},e.config.back={},e.config.load={},e.config.getPageParams={},e.config.refresh={},e.config.run={},e.config.checkVersion={},e.config.dialog={},e.config.confirm={},e.config.alert={},e.config.hint={},e.config.prompt={},e.config.loading={},e.config.mask={},e.config.list={},e.config.listview={},e.config.scroll={},e.config.pullrefresh={},e.config.select={},e.config.sidebar={},e.config.slide={},e.config.actionsheet={},e.config.dropdown={},e.config.accordion={},e.config.stepbar={},e.config.rating={},e.config.number={},e.config.file={},e.config.fileselect={},e.config.upload={},e.config.download={},e.config.swipe={},e.config.router={},e.config.loader={},e.config.store={}}(window.bui);var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},r=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)};!function(e,n){e.prefix=function(t){return e.config.classNamePrefix+t},e.showLog=function(n,i){i=i||"";var o="";"object"==(void 0===n?"undefined":t(n))&&"message"in n&&"name"in n?o=n.message+":"+n.name+"&&stack:"+n.stack:"string"==typeof n&&(o=n),e.log&&console.error(i+" "+o),e.trace&&console.trace&&console.trace()},e.guid=function(e){function t(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return(e=void 0===e?"bui":e||"")+t().substr(e.length)+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},e.swipeDirection=function(e,t,n,i){var o=t-e,a=i-n,r=Math.abs(o),l=Math.abs(a);return!(r<9&&l<9)&&(r/l>3?o>0?"swiperight":"swipeleft":a>0?"swipedown":"swipeup")},e.obj=function(i,o){var a=null;o=o||null;var r=e.hasRouter?router.currentPage()||"body":"body";r=o||r;var l=n(r),c=/^(\d)/,s=/^[a-zA-z]/,u=/^\[.+\]$/,d=/^#\d/,f=/^\.\d/,h="string"==typeof i,p=/^(html|head|body|header|main|footer|ul|li|section|dt|dd|div|span|img|article|i|strong|input|textarea|select|h1|h2|h3|h4|h5|h6|p)$/gi;if("object"===(void 0===i?"undefined":t(i)))return a=n(i);if(h&&c.test(i))return a=l.find("[id='"+i+"']");if(h&&s.test(i)){var g=p.test(i)||u.test(i)?i:"#"+i;return a=l.find(g)}return d.test(i)?a=l.find("[id='"+i.substr(1)+"']"):f.test(i)?a=l.find("[class='"+i.substr(1)+"']"):i&&(a=l.find(i)),a},e.$=e.obj,e.objId=function(t){return e.obj(t,"html")},e.selector=function(e){return void 0===e?this:n(e,this)},e.widget=function(e){return e&&e in this?this[e]:this},e.option=function(t,i){if("object"!==e.typeof(t)&&void 0===i)return"string"==typeof t?this.config[t]:this.config;if("id"==t)return e.showLog("不允许修改控件的ID参数"),this;if(t&&"object"===e.typeof(t)){var o=n.extend(this.config,t);return this.init(o)}if(this.config.hasOwnProperty(t)){var a={};a[t]=i;var o=n.extend(this.config,a);return this.init(o)}return this}}(window.bui||{},window.libs),function(e,n){e.emitter=function(){function n(){this.handle=Object.create(null)}return n.prototype.on=function(t,n,i){"function"==typeof n?(i=n,n=this):(i=i,n=n||this),n.handle=n.handle||{};var o=null;return o=t&&"array"===e.typeof(t)?t:t&&t.indexOf(",")>-1?t.split(","):[t],o.forEach(function(e,t){void 0===n.handle[e]&&(n.handle[e]=[]),n.handle[e].push(i)}),n},n.prototype.off=function(n,i,o){if("function"==typeof i?(o=i,i=this):"function"==typeof o?(o=o,i=i||this):i=this,void 0===n)i.handle=Object.create(null);else if("string"==typeof n&&"function"==typeof o){var a=i.handle[n]||[];e.array.remove(a,o)}else if("string"==typeof n){"object"!==t(i.handle)&&(i.handle={});var r=n.indexOf(",")>-1?n.split(","):[n];r.forEach(function(e,t){i.handle[e]=[]})}return i},n.prototype.one=function(e,t){function n(){t&&t.apply(i,arguments),i.off(e,n)}var i=this;return this.on(e,n),this},n.prototype.trigger=function(e){try{if(this.handle[arguments[0]]instanceof Array){var t=this.handle[arguments[0]],n=[].slice.apply(arguments);n.shift();for(var i=0,o=t.length;i<o;i++)t[i]&&t[i].apply(this.self||this,n)}}catch(e){}return this},n.prototype.notify=function(){try{for(var e in this.handle)if(this.handle[e]instanceof Array)for(var t=this.handle[e],n=0,i=t.length;n<i;n++)t[n]&&t[n].apply(this.self||this)}catch(e){}return this},function(e){return new n}}();var i=e.emitter();e.on=i.on,e.off=i.off,e.trigger=i.trigger,e.one=i.one}(window.bui||{},window.libs),function(e,n){e.store=function(i){function a(){Ee=e.hasRouter?router.$:n,Ne="object"===t(se.el)?n(se.el):Ee(se.el),Le=Ne&&Ne.parent(),Pe=Ne&&Ne.children(),Ue.$el=Ne,Ue.$parent=Le,Ue.$children=Pe,Ue.$data=ue;for(var i in pe)pe[i]=pe[i].bind(Ue);return Ue.$methods=pe,pe&&h(),ge&&p(),ae.call(Ue,"beforemount"),se.beforeMounts.forEach(function(e,t){e.call(Ue)}),K(ue),l(),ve&&c(),fe&&f(),me?se.needCompile&&router&&router.on("complete",function(e){se.needCompile&&g(),Re&&se.mounteds.forEach(function(t,n){t.call(Ue,e)}),De=n.extend(!0,{},ue),ye=!1,xe=!0,ae.call(Ue,"mounted",e),Re=!1,Fe=[]}):(Re||oe(),we&&r(),se.needCompile&&g(),se.mounteds.forEach(function(e,t){e.call(Ue)}),De=n.extend(!0,{},ue),ye=!1,xe=!0,Fe=[],ae.call(Ue,"mounted"),Re=!1),this}function r(){var e=Ne.html();return e=m(e),Ne.html(e),this}function l(){for(var e in ue)!function(e){Object.defineProperty(Ue,e,{configurable:!0,get:function(){Me&&console.log("1. module getting "+e,Fe),!ye&&xe?(ye=!0,xe=!1,Fe=[]):(ye=!1,xe=!1);var t=ue[e];return Array.isArray(t)&&Se.target&&(ke[e]=[],ke[e].push(Se.target)),t},set:function(t){Me&&console.log("2. module setting "+e,Fe),Fe=[],ue[e]=t,De[e]=t}})}(e)}function c(){try{Object.keys(ve).forEach(function(e,t){d(e,ve[e])})}catch(t){e.showLog(t)}}function s(t){return ne("nexttick",function(n){try{t&&t.call(Ue,n)}catch(n){e.showLog(n)}}),this}function u(t,n){var i="nexttick-"+t;return Te.hasOwnProperty(i)?this:(Te[i]=n,ne("nexttick",function(n){if(n.keyname===t)try{Ie[t].pop(),0==Ie[t].length&&Te[i]&&Te[i].call(Ue,n)}catch(n){e.showLog(n)}}),this)}function d(t,n){return ne(t,function(t){try{var i=[t.value,t.preValue||"",t];if("init"!==t.action){var o=n;switch(e.typeof(o)){case"function":o.apply(Ue,i);break;case"array":o.forEach(function(e,t){e.apply(Ue,i)});break;case"string":new Function(o+"("+t.value+","+(t.preValue||"")+")")();break;default:o.apply(Ue,i)}}}catch(t){e.showLog(t)}}),this}function f(){try{Object.keys(fe).forEach(function(t){if(ue.hasOwnProperty(t))return void e.showLog("不能跟data的键值相同:"+t);var n=fe[t];Object.defineProperty(Ue,t,{get:function(){var e,i="function"==typeof n?n.bind(this):n.get.bind(this);return Se.target=function(){var e=i();ae(t,{target:null,value:e,action:"set",keyname:t,param:[],origin:De}),Se.target=null,Fe=[]},e=i(),Se.target=null,Fe=[],e},set:n&&"object"===e.typeof(n)?n.set||function(){}:function(){}})})}catch(t){e.showLog(t)}}function h(){try{Object.keys(pe).forEach(function(t){if(ue.hasOwnProperty(t))return void e.showLog("不能跟data的键值相同:"+t);Object.defineProperty(Ue,t,{get:function(){return pe[t].bind(this)},set:function(){}})})}catch(t){e.showLog(t)}}function p(){try{Object.keys(ge).forEach(function(t){if(ue.hasOwnProperty(t))return void e.showLog("不能跟data的键值相同:"+t);Object.defineProperty(Ue,t,{get:function(){return ge[t].bind(this)},set:function(){}})})}catch(t){e.showLog(t)}}function g(i){try{var o=null,a=null;void 0===i?(o=Ne,a=se):"string"==typeof i?(o=Ee(i),a=se):i&&"object"===(void 0===i?"undefined":t(i))&&(o=Ee(i.el),a=n.extend(!0,{},se,i));var r=!0;if(a.beforeCompiles.forEach(function(e,t){if(!1===(r=e.call(Ue,a)))return!1}),!1===r)return Fe=[],!1;O(o),w(o),x(o),I(o),k(o),Be=!0,v(),Fe=[],a.compileds.forEach(function(e,t){e.call(Ue,a)})}catch(t){e.showLog(t)}return this}function v(){return Ne.find("[ref]").each(function(){var t=this.getAttribute("ref"),n=Ce.hasOwnProperty(t),i=null;n&&"htmldivelement"===e.typeof(Ce[t])?(i=[Ce[t]],i.push(this),Ce[t]=i):n&&"array"===e.typeof(Ce[t])?Ce[t].push(this):Ce[t]=this}),this}function m(t){try{var i=this,o=t||"",a=new RegExp("{{[\\s]?"+de+he+"(.*?)}}","mg");return o=o.replace(a,function(t,o){var a=o.split(de+he);""===n.trim(a[0])&&a.shift();var r=a.length>0&&e.unit.getKeyValue(a.join("."),De)||"";return"function"==typeof r?r.call(i):r})}catch(t){e.showLog(t)}}function b(t,n){var i=void 0;if(t in He)i=He[t];else{if(void 0===(i=e.unit.getKeyValue(t,n)))return void(Me&&console.warn("请检查 "+t+" 在bui.store scope:"+de+" 中有没有声明定义"));He[t]=i}return i}function w(t){try{var n=t,i=[],o=n.html()||"",a=o.match(ze)||[],r=e.array.uniq(a);r.length&&r.forEach(function(t,o){var a=n.find("["+t+"*="+de+"]");a.length&&a.each(function(n,o){var a=this,r="",l=W.call(this,""+t),c=l[0]&&l[0].keyname||"",s=c.indexOf(".length"),u=s>-1?c.substr(0,s):c,d=l[0]&&l[0].param;b(u,Ue);var f=W.call(this,"b-linked");if(f.length&&f.forEach(function(t,n){ne(t.keyname,function(t){ae(c,{target:null,value:e.unit.getKeyValue(c,Ue),action:"set",keyname:c,param:d,origin:De})})}),"b-show"===t)switch(l[0]&&l[0].rule){case"!":r="b-hide";break;default:r="b-show"}else r=t;if(me){var h=e.array.compare(qe[r],u);!h&&qe[r].push(u),!h&&ne(u,Ve[r].bind(a))}else!Re&&oe(u),ne(u,Ve[r].bind(a));e.array.compare(i,u)||i.push(u),Fe=[],ye=!1,xe=!0})}),y(i)}catch(t){e.showLog(t)}}function y(e){e.forEach(function(e,t){ae(e,{target:null,action:"init",value:He[e],param:null,keyname:e,origin:De}),Fe=[]})}function x(t){function i(t){var n=t.target.value,i=W.call(this,"b-model"),o=i[0]&&i[0].keyname||"";if(""===o)return e.showLog("b-model的值不能为空"),!1;Q(o,n),Fe=[],t.stopPropagation()}function o(t){try{var n=this,i=this.getAttribute("value")||this.checked,o=this.getAttribute("type"),a=W.call(this,"b-model"),l=a[0].keyname,c=null,s=this.getAttribute("check-value"),u=this.getAttribute("uncheck-value");(s||u)&&(i=this.checked?s:u),c=b(l,Ue);var d=/\{.+\}$/g,f=d.test(i),h=f?null:r.find('[type="checkbox"][b-model="'+de+"."+l+'"][value="'+i+'"],\n                [type="radio"][b-model="'+de+"."+l+'"][value="'+i+'"]');switch(o){case"checkbox":this.checked&&(c&&"array"===e.typeof(c)?!e.array.compare(c,i)&&e.unit.getKeyValue(l,Ue).push(i):Q(l,i),this.checked=!0),this.checked||(c&&"array"===e.typeof(c)?e.array.remove(e.unit.getKeyValue(l,Ue),i):Q(l,i),this.checked=!1),h&&h.each(function(e,t){this.checked=n.checked});break;case"radio":default:Q(l,i)}Fe=[],t.stopPropagation()}catch(t){e.showLog(t)}}function a(t){try{var i=n(this).val(),o=(this.selectedIndex,this.multiple),a=W.call(this,"b-model"),r=a[0].keyname,l=null;switch(l=b(r,Ue),o){case!0:"array"!==e.typeof(l)&&e.showLog(r+"的类型必须为数组"),i.splice(0,0,0,i.length+1),l.splice.apply(l,i);break;default:Q(r,i)}Fe=[],t.stopPropagation()}catch(t){e.showLog(t)}}var r=t,l='[type="text"][b-model*='+de+'],\n                                [type="search"][b-model*='+de+'],\n                                [type="password"][b-model*='+de+'],\n                                [type="url"][b-model*='+de+'],\n                                [type="number"][b-model*='+de+'],\n                                [type="email"][b-model*='+de+'],\n                                [type="range"][b-model*='+de+'],\n                                [type="tel"][b-model*='+de+"],\n                                textarea[b-model*="+de+"]";if("input"===se.modelEvent){var c=!1;r.off("input compositionstart compositionend",l).on(be,l,function(e){c||i.call(e.target,e)}).on("compositionstart",l,function(e){c=!0,e.stopPropagation()}).on("compositionend",l,function(e){c=!1,i.call(e.target,e),e.stopPropagation()})}else r.off(be,l).on(be,l,i);var s='[type="checkbox"][b-model*='+de+'],\n                                [type="radio"][b-model*='+de+"]";r.off("change",s).on("change",s,o);var u="select[b-model*="+de+"]";r.off("change",u).on("change",u,a)}function k(e){e.off("change","[b-checked*="+de+"]").on("change","[b-checked*="+de+"]",function(e){var t=this.checked;Q(W.call(this,"b-checked")[0].keyname,t),Fe=[],e.stopPropagation()})}function I(e){var t=e;t.off("click.bui","[b-click*="+de+"]").on("click.bui","[b-click*="+de+"]",function(e){var t=T.call(this,e,"b-click");if(!1===t)return!1;void 0===t&&e.stopPropagation()}),t.off("touchstart","[b-touchstart*="+de+"]").on("touchstart","[b-touchstart*="+de+"]",function(e){if(!1===T.call(this,e,"b-touchstart"))return!1}),t.off("touchmove","[b-touchmove*="+de+"]").on("touchmove","[b-touchmove*="+de+"]",function(e){if(!1===T.call(this,e,"b-touchmove"))return!1}),t.off("touchend","[b-touchend*="+de+"]").on("touchend","[b-touchend*="+de+"]",function(e){if(!1===T.call(this,e,"b-touchend"))return!1}),t.off("focus","[b-focus*="+de+"]").on("focus","[b-focus*="+de+"]",function(e){if(!1===T.call(this,e,"b-focus"))return!1}),t.off("change","[b-change*="+de+"]").on("change","[b-change*="+de+"]",function(e){if(!1===T.call(this,e,"b-change"))return!1}),t.off("blur","[b-blur*="+de+"]").on("blur","[b-blur*="+de+"]",function(e){if(!1===T.call(this,e,"b-blur"))return!1}),t.off("submit","[b-submit*="+de+"]").on("submit","[b-submit*="+de+"]",function(e){if(!1===T.call(this,e,"b-submit"))return!1})}function T(t,n){var i=W.call(this,n),o=i[0].keyname,a=i[0].param,r=null;a.push(t);try{r=b(o,Ue);var l="function"==typeof r&&r.apply(Ue,a);return Fe=[],ae(o,{target:this,value:r,action:"set",keyname:o,param:a,origin:De}),l}catch(t){e.showLog(t)}}function O(t){var n=t,i=n.find("[b-template*="+de+"]"),o=[];if(Ie={},i.length)try{i.each(function(t,n){var i=this,a=Ee(i),r=W.call(this,"b-template"),l=r[0].keyname,c=r[0].param,s=de+he;if(!c[0])return void console.error('b-template 需要传数据源, 格式为: b-template="page.template(page.sources)"');var u="string"==typeof c[0]&&c[0].replace(new RegExp(s),"")||"",d=a.attr("b-command"),f=d||"html",h=a.attr("b-children")||a.children()[0]&&a.children()[0].tagName;b(u,Ue);me&&oe(u),Ie.hasOwnProperty(u)?Ie[u].push(u):Ie[u]=[u],ne(u,function(t){try{var n,i=t.param;switch(t.action){case"push":case"unshift":n=i;break;case"splice":n=i.slice(2)||"";break;default:n=t.value}if(l in ge){c=c.map(function(e,t){if("string"==typeof e&&0==e.indexOf(de+he)&&t>0){return b(e.replace(new RegExp(s),""),De)}return e}),c[0]=n;var o=void 0!==n&&"undefined"!==n&&ge[l]&&ge[l].apply(Ue,c);void 0===o&&(o="",e.showLog(l+"模板方法需要返回内容，例如：return html;")),me&&(a=Ee('[b-template*="'+(s+u)+'"]'));var r=t.preValue||[];0==r.length&&a.empty();var d=h?a.children(h):a.children(),p=d,g=i&&i.length||0,v=null;switch(Re=!0,t.action){case"push":if(a.append(o),d=a.children(h),g&&g==d.length)w(d);else if(g>1)for(var m=p.length,y=m;y<d.length;y++)v=d.eq(m+y-1),w(v);else v=d.last(),w(v);break;case"unshift":if(a.prepend(o),d=a.children(h),g&&g==d.length)w(d);else if(g>1)for(var y=0;y<g;y++)v=d.eq(y),w(v);else v=d.first(),w(v);break;case"pop":d.last().remove(),d=a.children(h),v=d.last(),w(v);break;case"shift":d.first().remove(),d=a.children(h),v=d.first(),w(v);break;case"length":break;case"splice":var x=parseInt(i[0]),k=parseInt(i[1]);k>=r.length&&(a.empty(),d=a.children(h));var I=d.length,T=I>0;if(0==k)if(T&&I-1>=x){d.eq(x).before(o),d=a.children(h);for(var y=0;y<n.length;y++)v=d.eq(x+y),w(v)}else{a.append(o),d=a.children(h);for(var y=0;y<n.length;y++)v=d.eq(I+y),w(v)}else if(k>0){if(void 0!==i[2])if(T&&I-1>=x){d.eq(x).before(o),d=a.children(h);for(var y=0;y<n.length;y++)v=d.eq(x+y),w(v)}else{a.append(o),d=a.children(h);for(var y=0;y<n.length;y++)v=d.eq(I+y),w(v)}for(var y=0;y<k;y++)d.eq(x+n.length+y).remove()}break;case"reverse":case"sort":a.html(o);break;default:a[f](o)}ae.call(Ue,"nexttick",t)}else e.showLog("找不到对应的模板,请检查下 scope:"+de+" 的templates是否存在"+l,"bui.store")}catch(t){e.showLog(t)}}),e.array.compare(o,u)||o.push(u),Fe=[]}),y(o)}catch(t){e.showLog(t)}}function C(t){var n=j.call(this,t,"b-text"),i="",o=e.typeof(t.value),a=n.attr("b-text"),r=W.call(this,"b-text"),l=(r[0].keyname,r[0].param);switch(o){case"array":i=S(t,a);break;case"function":i=t.value.apply(Ue,l);break;default:i=t.value}n.text(i),Fe=[]}function j(e,t){var i=de+he+e.keyname;return me?n("["+t+'="'+i+'"]'):Ee(this)}function S(e,t){return t.indexOf(".length")>-1?e.value.length||0:e.value instanceof Array?e.value.join(","):e.value}function E(t){var n=j.call(this,t,"b-html"),i="",o=e.typeof(t.value),a=n.attr("b-html"),r=W.call(this,"b-html"),l=(r[0].keyname,r[0].param);switch(o){case"array":i=S(t,a);break;case"function":i=t.value.apply(Ue,l);break;default:i=t.value}n.html(i),Fe=[]}function N(e){var t=j.call(this,e,"b-value");me?t.each(function(t,n){L.call(this,e)}):L.call(t[0],e),Fe=[]}function L(t){var n=this.getAttribute("type"),i=this.value,o=this,a=this.getAttribute("b-value");switch(n){case"radio":i==t.value?this.checked=!0:this.checked=!1;break;case"checkbox":"array"===e.typeof(t.value)&&t.value.forEach(function(e,t){i==e&&(o.checked=!0)});break;default:this.value=S(t,a)}}function P(e){var t=j.call(this,e,"b-model");me?t.each(function(t,n){F.call(this,e)}):F.call(t[0],e)}function F(e){var t=this.getAttribute("type"),i=this.value,o=(e.param,this);if("SELECT"===this.nodeName&&this.multiple)return void(e.value.length>1?e.value.forEach(function(e,t){"string"==typeof e?n(o).find("option[value="+e+"]").attr("selected",!0):n(o).find("option[value="+e.value+"]").attr("selected",!0)}):this.value=e.value[0]);switch(t){case"radio":i==e.value?this.checked=!0:this.checked=!1;break;case"checkbox":if(i&&e.value instanceof Array)switch(e.action){case"push":case"unshift":e.param.filter(function(e,t){if(i===e)return void(o.checked=!0)});break;case"pop":case"shift":e.param.filter(function(e,t){i===e&&(o.checked=!1)});break;case"splice":var a=e.param,r=parseInt(a[1]),l=a.slice(2);0==r?l.forEach(function(e,t){i===e&&(o.checked=!0)}):r>0&&(e.preValue.forEach(function(t,n){n<=e.param[1]&&(o.checked=!1)}),e.value.forEach(function(e,t){i===e&&(o.checked=!0)}));break;case"length":break;default:e.value.filter(function(e,t){i==e&&(o.checked=!0)})}else e.value===i?this.checked=!0:this.checked=!1;break;default:this.value=e.value}Fe=[]}function B(e){var t=j.call(this,e,"b-show");e.value?this.removeAttribute("style"):t.css("display","none"),Fe=[]}function R(e){var t="!"+de+he+e.keyname,i=me?n('[b-show="'+t+'"]'):Ee(this);e.value?i.css("display","none"):i.css("display","block")}function D(e){this.checked=!!e.value,Fe=[]}function A(e){var n=j.call(this,e,"b-bind"),i=this,o=e.keyname,a=e.value;if("object"===(void 0===a?"undefined":t(a))){for(var r in a)!function(t){ne(o+"."+t,function(n){M(j.call(i,e,"b-bind"),t,n.value)}),M(n,t,a[t])}(r)}else{var l="string"==typeof o&&o.split(".");M(n,l[l.length-1],a)}}function M(e,n,i){switch(n){case"disabled":i?e.attr(n,i):e.removeAttr(n);break;case"checked":e.prop(n,i);break;default:var o="object"===(void 0===i?"undefined":t(i))?JSON.stringify(i):i;e.attr(n,o)}Fe=[]}function z(e){var t=j.call(this,e,"b-src");t.attr("src",e.value),Fe=[]}function V(e){var t=j.call(this,e,"b-id");t.attr("id",e.value),Fe=[]}function q(e){var t=j.call(this,e,"b-href");t.attr("href",e.value),Fe=[]}function H(e){var n=j.call(this,e,"b-style"),i=this;if("object"===t(e.value)){for(var o in e.value)!function(t){ne(e.keyname+"."+t,function(n){j.call(i,e,"b-style").css(t,n.value)}),n.css(e.value)}(o)}else n.css(e.keyname,e.value);Fe=[]}function U(n){var i=j.call(this,n,"b-class"),o=this;this.classList;if("object"===t(n.value))if("array"===e.typeof(n.value))i.attr("class",""),n.value.forEach(function(e,t){!i.hasClass(e)&&i.addClass(e)});else{for(var a in n.value)!function(e){var t=n.value[e],a=n.preValue&&n.preValue[e]||"";ne(n.keyname+"."+e,function(t){_(j.call(o,n,"b-class"),e,t.value)}),_(i,e,t,a)}(a)}else{var r="string"==typeof n.keyname&&n.keyname.split(".");_(i,r[r.length-1],n.value,n.preValue)}Fe=[]}function _(e,t,n,i){"boolean"==typeof n?(n&&e.addClass(t),!n&&e.removeClass(t)):"string"==typeof n?(me&&e.removeClass(n),i&&e.removeClass(i),n&&!e.hasClass(n)&&e.addClass(n),""===n&&e.removeClass(i)):(Boolean(n)&&e.addClass(t),!Boolean(n)&&e.removeClass(t))}function W(t){var n=[],i=this,o=this.getAttribute(t)||"",a=o.indexOf("&")>-1?o.split("&"):o&&[o]||[];try{a.forEach(function(e,o){var a={},r=$.call(i,e,t);a.scope=de,a.rule=r.rule,a.keyname=r.name,a.param=r.param,a.eventType=r.eventType,a.eventProperty=r.eventProperty,n.push(a)})}catch(t){e.showLog("参数处理出错")}return n}function $(t,i){try{var o=/([^\(|\)]+)/g,a=t?t.match(o):[],r="",l="",c=null,s=[],u=null,d=this,f="",h=n(d).attr("b-target"),p=h?n(d).parents(h)[0]||d:d,g="",v="";if(c=a[0]&&a[0].indexOf(de+he)>-1?a[0].split(de+he):[de,a[0]],f=c[0].split(de),f=f[0]||f[1]||"",r=de,l=c[1]||"",l.indexOf("$index")>-1){var m=n(p).index();l=l.replace("$index",m)}else if(l.indexOf("$id")>-1){var b=p.id;l=l.replace("$id",b)}else if(l.indexOf("$parentIndex")>-1){var w=n(p).parent().index();l=l.replace("$parentIndex",w)}if(void 0!==a[1]){var y=a[1]||"";try{var x=/\{.+\}$/g,k=/\[.+\]$/g,I=/(\"(.*?)\".*?)|(\w[-\w.+]*@([A-Za-z0-9][-A-Za-z0-9]+\.)+[A-Za-z]{2,14})|(^((https|http|ftp|rtsp|mms)?:\/\/)[^\,]+)|([a-zA-Z0-9][-a-zA-Z0-9\._]{0,62})|(\{.+\})|(\[.+])|([$\w\.]+)|([\d\.]+)|([\u4e00-\u9fa5|\w|\d]+)/g,T=y?y.match(I):[];s=T.map(function(t,o){var a=t.replace(/^\"|\"$/g,""),r=n(p).attr("b-target"),l=r?n(p).parents(r)[0]||p:p;switch(t){case"$this":a=l;break;case"$index":a=n(l).index();break;case"$parentIndex":a=n(l).parent().index();break;case"$parent":a=l.parentNode;break;case"$children":a=n(l).children();break;case"$id":a=l.id;break;case"$text":a=l.textContent;break;case"$value":a=l.value;break;case"$html":a=l.innerHTML}if("b-template"!==i){var c=de+he;e.unit.startWithStr(a,c)&&(a=e.unit.getKeyValue(a.split(c)[1],Ue))}return x.test(t)||k.test(t)?JSON.parse(t):a})}catch(t){e.showLog(t,"getArguments"),s=[]}}void 0!==a[2]&&(u=a[2].indexOf(".")>-1?a[2].split("."):[a[2]],g=u[0],v=u[1]||"")}catch(n){e.showLog("参数格式错误:"+t)}return{scope:r,rule:f,name:l,param:s,eventType:g,eventProperty:v}}function K(e,t){return Y(e,t)}function Y(t,n){function i(t,n){var i=t[n];if(i instanceof Array?X(i,n):J(t,n),i&&"object"===e.typeof(i))return K(i)}if(n&&"array"===e.typeof(n))if(n.length>1){var o=n.pop(),a=e.unit.getKeyValue(n.join("."),t);i(a,o)}else i(t,n[0]);else Object.keys(t).forEach(function(e){i(t,e)})}function J(n,i){var o=n[i],a="function"==typeof o?o.call(Ue):o,r=[];Object.defineProperty(n,i,{enumerable:!0,configurable:!0,get:function(e){return Me&&console.log("3. data getting "+i+":",a),je.target=this,(ye||!ye&&xe)&&Fe.push(i),Se.target&&r.push(Se.target),a},set:function(n){if(n===a)return Fe=[],Oe=!1,ye=!1,xe=!0,!0;je.target===this&&(Fe=[]),je.target=this,(!xe||!ye&&xe)&&Fe.push(i);var o=Fe.join(".");!Oe&&ae.call(Ue,"beforeupdate",{action:"set",value:n,preValue:a,keyname:o,origin:De}),!Oe&&se.beforeUpdates.forEach(function(e,t){e.call(Ue,{action:"set",value:n,preValue:a,keyname:o,origin:De})}),Me&&console.log("4. data setting "+o,n);var l=e.unit.getKeyValue(o,De);return a=n,r.forEach(function(e){return e()}),!Oe&&ae(o,{action:"set",value:a,preValue:l,keyname:o,origin:De}),e.unit.setKeyValue(o,a,De),a instanceof Array?K(ue,Fe):"object"===(void 0===a?"undefined":t(a))&&(se.deep&&K(n),a&&Object.keys(a).forEach(function(e,t){var n=i+"."+e;Fe=[],ae(n,{target:null,value:a[e],preValue:l&&l[e],action:"set",keyname:n,origin:De})})),!Oe&&ae.call(Ue,"updated",{action:"set",value:a,preValue:l,keyname:o,origin:De}),!Oe&&se.updateds.forEach(function(e,t){e.call(Ue,{action:"set",value:a,preValue:l,keyname:o,origin:De})}),Fe=[],Oe=!1,ye=!1,xe=!0,!0}})}function X(t,n){var i=[],o=Array.prototype,a=Object.create(o);return["push","pop","shift","unshift","splice","sort","reverse"].forEach(function(t){var r=o[t];Object.defineProperty(a,t,{enumerable:!0,configurable:!0,value:function(o){var a=[].concat(Array.prototype.slice.call(arguments));ae.call(Ue,"beforeupdate",{target:null,action:t,param:a,value:this,prevValue:[],keyname:n,origin:De}),i.push(n),ue.hasOwnProperty(n)||i.unshift(Fe.join("."));var l=i.join("."),c=this.slice(0),s=r.apply(this,a);switch(Me&&console.log("5. "+l+" action "+t+" "),t){case"pop":case"shift":a=[s]}e.unit.setKeyValue(l,this,De);var u=Ne.find('[b-template*="'+de+"."+l+'"]');return ae(l,{target:u,action:t,param:a,value:this,preValue:c,keyname:n,origin:De}),ke[i[0]]&&"array"===e.typeof(ke[i[0]])&&ke[i[0]].forEach(function(e){return e()}),i=[],Fe=[],ye=!1,xe=!0,ae.call(Ue,"updated",{target:u,action:t,param:a,value:this,preValue:c,keyname:n,origin:De}),se.updateds.forEach(function(e,i){e.call(Ue,{target:u,action:t,param:a,value:this,preValue:c,keyname:n,origin:De})}),s}})}),a.$index=function(t,n){return e.array.index(this,t,n)},a.$include=function(t,n){return e.array.compare(this,t,n)},a.$empty=function(){return e.array.empty(this)},a.$replace=function(t){return e.array.replace(this,t)},a.$merge=function(){var t;return(t=e.array).merge.apply(t,[this].concat(Array.prototype.slice.call(arguments)))},a.$get=function(t,n){return e.array.get(this,t,n)},a.$set=function(t,n,i){return e.array.set(this,t,n,i)},a.$delete=function(t,n){return e.array.delete(this,t,n)},t.__proto__=a,t}function Z(t){if(void 0===t)return De=De;if("string"==typeof t){var n=e.unit.getKeyValue(t,De);return Fe=[],n}return De}function Q(i,a){var r="string"==typeof i,l=[],c=null;if(Fe=[],r&&void 0!==a){var s,u;Me&&console.log("set "+i+" "),Oe=!0,ae.call(Ue,"beforeupdate",(s={action:"set",target:null,value:c,preValue:d},o(s,"action","set"),o(s,"keyname",i),o(s,"origin",De),s)),se.beforeUpdates.forEach(function(e,t){var n;e.call(Ue,(n={action:"set",target:null,value:c,preValue:d},o(n,"action","set"),o(n,"keyname",i),o(n,"origin",De),n))});var d=e.unit.getKeyValue(i,De);a&&"object"===e.typeof(a)?(c=n.extend(!0,{},a),l.push(i),Object.keys(a).forEach(function(e,t){var n=i+"."+e;ae.call(Ue,n,{target:null,value:a[e],preValue:d,action:"set",keyname:n,origin:De})})):c=a,e.unit.setKeyValue(i,a,ue),e.unit.setKeyValue(i,c,De),Ae[i]=c,ae.call(Ue,i,{target:null,value:c,preValue:d,action:"set",keyname:i,origin:De}),ae.call(Ue,"updated",(u={action:"set",target:null,value:c,preValue:d},o(u,"action","set"),o(u,"keyname",i),o(u,"origin",De),u)),se.updateds.forEach(function(e,t){var n;e.call(Ue,(n={action:"set",target:null,value:c,preValue:d},o(n,"action","set"),o(n,"keyname",i),o(n,"origin",De),n))}),"object"===(void 0===a?"undefined":t(a))&&(a instanceof Array?K(ue,i.split(he)):K(a)),Fe=[]}else i&&"object"===e.typeof(i)&&(De=n.extend(!0,{},De,i),te(i));return De}function G(t,n){return"string"==typeof t&&(e.unit.delKey(t,De),n&&n.call(Ue,t)),De}function ee(e,t){return G(e,function(t){ae(e)}),De}function te(t,n){for(var i in t){var o=void 0===n?i:n+i,a=t[i];ae(o,{target:null,value:a,preValue:De[i]||"undefined",action:"set",param:null,keyname:o,origin:De}),a&&"object"===e.typeof(a)&&te(a,i+".")}}function ne(t,n){var i="";return i=t&&"array"===e.typeof(t)?t.map(function(e,t){return de+he+e}):de+he+t,je.on.call(Ue,i,n),this}function ie(e,t){return Te.hasOwnProperty(e)?this:(ne(e,t),Te[e]=t,this)}function oe(e,t){if(e){var n=de+he+e;je.off.call(Ue,n,t)}else Ue.handle={};return this}function ae(e){var t=de+he+e;return Me&&console.warn(t,"trigger"),arguments[0]=t,je.trigger.apply(Ue,arguments),ye=!1,xe=!0,this}function re(){return Fe=[],ye=!1,xe=!0,Oe=!1,this}function le(){return Fe=[],se.beforeDestroys.forEach(function(e,t){e.call(Ue)}),ye=!1,xe=!0,Oe=!1,oe(),se.beforeMounts=[],se.beforeCompiles=[],se.compileds=[],se.mounteds=[],se.beforeUpdates=[],se.updateds=[],se.destroyeds.forEach(function(e,t){e.call(Ue)}),this}var ce={el:null,scope:"",data:null,extends:null,mixins:[],beforeMounts:[],beforeCompiles:[],compileds:[],beforeUpdates:[],mounteds:[],updateds:[],beforeDestroys:[],destroyeds:[],computed:null,methods:null,watch:null,templates:null,beforeMount:null,mounted:null,beforeCompile:null,compiled:null,beforeUpdate:null,updated:null,beforeDestroy:null,destroyed:null,isPublic:!1,modelEvent:"input",scopeSplit:".",delayInput:200,needStatic:!1,needCompile:!0,deep:!0,log:!1,autoinit:!0},se=null;se=function(t){var i=null,o=t&&t.extends?[t.extends]:[];e.array.merge(ce.mixins,o,t.mixins||[],[t]);var a=n.extend(!0,{},ce,e.config.store);return ce.mixins.forEach(function(e,t){e.beforeMount&&ce.beforeMounts.push(e.beforeMount),e.beforeCompile&&ce.beforeCompiles.push(e.beforeCompile),e.beforeUpdate&&ce.beforeUpdates.push(e.beforeUpdate),e.updated&&ce.updateds.push(e.updated),e.compiled&&ce.compileds.push(e.compiled),e.mounted&&ce.mounteds.push(e.mounted),e.beforeDestroy&&ce.beforeDestroys.push(e.beforeDestroy),e.destroyed&&ce.destroyeds.push(e.destroyed),i=n.extend(!0,a,e)}),i=n.extend(!0,ce,i)}(i);var ue=se.data,de=se.scope||e.guid(),fe=se.computed,he=se.scopeSplit,pe=se.methods,ge=se.templates,ve=se.watch||ce.watch,me=(se.delayInput,se.isPublic),be=se.modelEvent,we=se.needStatic,ye=!1,xe=!0,ke={},Ie={},Te={},Oe=!1,Ce={},je=e.emitter(),Se={target:null};se.el?se.el=se.el:se.el=me?"body":".bui-page";var Ee=null,Ne=null,Le=null,Pe=null,Fe=[],Be=!1,Re=!0,De=ue,Ae={},Me=void 0===se.log?ce.log:se.log,ze=/b-text|b-html|b-value|b-show|b-hide|b-checked|b-src|b-href|b-bind|b-style|b-class|b-model/gim,Ve={"b-text":C,"b-html":E,"b-value":N,"b-show":B,"b-hide":R,"b-checked":D,"b-bind":A,"b-src":z,"b-id":V,"b-href":q,"b-class":U,"b-model":P,"b-style":H},qe={"b-text":[],"b-html":[],"b-value":[],"b-show":[],"b-hide":[],"b-checked":[],"b-bind":[],"b-src":[],"b-href":[],"b-class":[],"b-model":[],"b-style":[]},He={},Ue=(n.extend(!0,{},ue,pe,ve,fe,ge),{$methods:pe,$refs:Ce,$options:se,$templates:ge,config:se,watch:d,nextTick:s,oneTick:u,get:Z,set:Q,delete:ee,del:ee,observer:K,compile:g,$mount:g,compileHtml:m,clearKey:re,destroy:le,init:a,on:ne,off:oe,one:ie,trigger:ae});try{se.autoinit&&a()}catch(t){e.showLog(t)}return Ue}}(window.bui||{},window.libs),function(e,t){function n(n,i){function o(t){var n=i||750,o=document.head.parentNode,a=t||(p/n*100).toFixed(2);return u=a||48,e.config.viewport.zoom&&(o.style.fontSize=u+"px"),e.trigger.call(e,"viewportinit"),this}function a(e){return p||t("body").width()||t("#bui-router").width()||t(".bui-page").width()}function r(e){return g||t("body").height()||t("#bui-router").height()||t(".bui-page").height()}function l(e){return v}function c(e){return m}function s(e){return h}e.trigger.call(e,"viewportbefore");var u,d=document.querySelector("meta[name=viewport]"),f="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no",h=window.devicePixelRatio,p=document.documentElement.clientWidth,g=document.documentElement.clientHeight,v=parseInt(p)*parseInt(h),m=parseInt(g)*parseInt(h);if(d)e.config.viewport.create&&(d.content=f);else{var b=document.createElement("meta");b.name="viewport",b.content=f;var w=document.head;e.config.viewport.create&&w.appendChild(b),b=null}var y=[240,320,360,375,384,412,414,435,480,512,540,768,1024,1536,2048,2732,534,854,750],x=[32,42.67,48,50,51.2,54.93,55.2,58,64,68.27,60,60,60,60,60,60,60,60,60],k=e.array.index(y,document.documentElement.clientWidth);return k>-1&&void 0===n?u=x[k]:o(n),{width:a,height:r,fontSize:u,screenWidth:l,screenHeight:c,ratio:s,init:o}}e.viewport=n}(window.bui||{},window.libs),
function(e,n){e.loader=function(i){function o(e){return e=e||{},N=n.extend({},N,e),this}function r(e){if(void 0===e)return B;if("object"===(void 0===e?"undefined":t(e))&&("modules"in e||"baseUrl"in e))B=n.extend(!0,{},B,e),R=B.modules;else if("object"===(void 0===e?"undefined":t(e))&&"moduleName"in e){var i=u(e);R[e.moduleName]=i||{},B=n.extend(!1,B,{modules:R}),R=B.modules}return B}function l(e){if("string"==typeof e)return B.modules[e]||null}function c(t,n){return n&&"object"===e.typeof(n)&&(n.moduleName=t,r(n)),this}function s(e,t){var n=e,i=t.lastIndexOf("/"),o=t.substr(0,i);return e.indexOf("../")>-1?(e=e.replace(/\..\//g,function(e){var t=o.lastIndexOf("/");return o=o.substr(0,t),""}),n=o?o+"/"+e:e):e.indexOf("./")>-1&&(n=o+"/"+e.replace(/\.\//g,"")),n}function u(e){var t={id:"",moduleName:"",template:"",data:null,depend:[],script:"",style:[],isDefined:!1,isLoaded:!1,beforeCreate:null,created:null,beforeLoad:null,loaded:null,show:null,beforeDestroy:null,destroyed:null,exports:{},dependExports:[]},i={};return e.moduleName in R&&(i=R[e.moduleName]),n.extend(!0,{},t,i,e)}function d(t){N.log&&console.log("destroy "+t);var i="string"==typeof t?R[t]:null;if(i){i.beforeDestroy&&i.beforeDestroy.call(i);var o=n('script[name="'+t+'"]').attr("src");L=e.array.remove(L,o),n('script[name="'+t+'"]').remove(),delete B.modules[t],R=B.modules,i.destroyed&&i.destroyed.call(i)}}function f(t,i,o){var a={moduleName:"",template:"",data:null,depend:[],beforeCreate:null,created:null,beforeLoad:null,loaded:null,hide:null,show:null,beforeDestroy:null,destroyed:null},l={},c="";try{var u=p().name?p():h(),d=u.name}catch(e){}var f=[],v=[];if(void 0===t)return e.showLog("define第1个参数不能为空"),this;"function"==typeof t?(o=t,c=d,i=[]):"object"===e.typeof(t)?(c=d,i=t.depend||[],o=t.loaded,l=n.extend(!0,{},a,t)):"array"===e.typeof(t)?(o=i,i=t,c=d):"function"==typeof i?(c=t,o=i,i=[]):(c=t,i=i,o=o);var m=c in R?R[c].script||u.src:u.src;if(N.log&&console.log("define "+c),i.length)for(var b=0;b<i.length;b++){var w=i[b],y=w.indexOf("./")>-1?s(w,m):w;if(y.indexOf(".css")>-1)y.indexOf("css!")>-1?v.push(y.substr(4)):v.push(y);else{var x=y.indexOf(".js");x>-1&&(y=y.substr(0,x)),f.push(y),y in R||r({moduleName:y})}}if("string"==typeof c&&"function"==typeof o){var k=function(){var e=[g,R[d]&&R[d].exports,R[d]],t=[];f.length&&f.forEach(function(e,n){R[e]&&t.push(R[e].exports)});var n=t.concat(e);return o&&o.apply(this,n)};l=t&&"object"===e.typeof(t)?n.extend(!0,{},a,R[c],t):n.extend(!0,{},a,R[c]),l.moduleName=c,l.depend=f,l.style=v,l.script=m,l.loaded=k,r(l)}else e.showLog("define "+c+"模块的参数格式不对");return this}function h(e){var t=window.location.pathname,n=t.indexOf(".html"),i="",o="";return n>-1?(i=t.substr(0,n),o=i+".js"):(i=t,o=i+".js"),{name:i,src:o}}function p(){var e,t,i=window.location.href,o=[],r=document.currentScript;if(i.indexOf("#")>-1?o=i.split("#"):o.push(i),S=o[0].replace("/index.html","")+"/",r)return e=r.src.replace(S,""),t=r.getAttribute("name")||e.substr("0",e.indexOf(N.scriptSuffix)),{name:t,src:e};try{a()}catch(e){var l=e.stack||e.sourceURL||e.stacktrace||"",c=l.split(/[@ ]/g).pop(),s=c.replace(/(:\d+)?:\d+$/i,""),s=s.replace(new RegExp(S,"g"),"");return r=n('script[src="'+s+'"]')[0],t=r?r.getAttribute("name"):s.replace(N.scriptSuffix,""),{name:t,src:s}}}function g(t,n){N.log&&console.log("require "+t);if(t&&"string"==typeof t){var i=t.indexOf(".css");if(i>-1)return void y(t);var i=t.indexOf(".html");t=i>-1?t.substr(0,i):t,t=[t]}if(n&&"function"!=typeof n)return e.showLog("require第2个参数格式为function","bui.loader.require"),this;try{t=t.map(function(t,n){return e.unit.resolvePath(t)}),v(t,n)}catch(t){e.showLog(t,"bui.loader.require")}return this}function v(t,n){function i(t,n){function a(e,o){var a=R[e];a&&(a.isDefined=!0),a&&a.beforeLoad&&a.beforeLoad.call(a,a.depend),a&&a.depend&&a.depend.length&&i(a.depend,n),o==t.length-1&&n&&n.apply(a)}t=t||[],R=B.modules;t.length>1&&t.forEach(function(e,n){R[e]&&1==R[e].isLoaded&&t.splice(n,1)}),t.forEach(function(i,r){var l=R[i];if(R[i]&&R[i].style&&R[i]&&R[i].style.length&&I(R[i].style),e.array.compare(o,i)||o.unshift(i),l&&l.isLoaded)r==t.length-1&&(n&&n.apply(l),o=[]);else if(l&&l.loaded){var c=R[i].beforeCreate&&R[i].beforeCreate.call(R[i]);if(!1===c)return!1;R[i].created&&R[i].created.call(R[i]),a(i,r)}else k(i,function(){var e=R[i];if(!1===(e&&e.beforeCreate&&e.beforeCreate.call(R[i])))return!1;e&&e.style&&e.style.length&&I(e.style),e&&e.created&&e.created.call(R[i]),a(i,r)},function(){r==t.length-1&&(n&&n.apply(null),o=[])})})}var o=[];i(t,function(){if(b(o)){var e=[];t.forEach(function(i,o){m(i),e.push(R[i]&&R[i].exports),o===t.length-1&&n&&n.apply(D,e||[])})}})}function m(t){R=B.modules;var n="string"==typeof t?R[t]||{}:t,i=n.depend||[],o=null,a=[];n.dependExports=[];try{if(i.length)for(var r=0;r<i.length;r++){var l=i[r],c=R[l];c.isLoaded?a[r]=c.exports:a[r]=m(c)||c.exports,c.exports=a[r],n.dependExports.push(a[r]),c.isLoaded=!0}o=n.isLoaded?n.exports:n.loaded&&n.loaded.apply(n,a),n.exports=o||R[n.moduleName]&&R[n.moduleName].exports,n.isLoaded=!0,N.log&&console.log("execute "+n.moduleName)}catch(t){e.showLog(t,"bui.loader.execute")}return o}function b(e){var t=!0,n=e||[];if(R=B.modules,n.length)n.forEach(function(e,n){R[e]&&!1===R[e].isDefined&&(t=!1)});else for(var i in R)R[i]&&!1===R[i].isDefined&&(t=!1);return t}function w(t){var n=!0,i=[];if(R=B.modules,"string"==typeof t){t.indexOf(",")>-1?i=t.split(","):i.push(t)}else t&&"array"===e.typeof(t)&&(i=t||[]);if(i.length)i.forEach(function(e,t){e in R||(n=!1),R[e]&&!1===R[e].isLoaded&&(n=!1)});else for(var o in R)R[o]&&!1===R[o].isLoaded&&(n=!1);return n}function y(t,n,i){return"string"==typeof t?(t=e.unit.resolvePath(t),t.indexOf(".css")>-1?(T(t),n&&n(t)):t.indexOf(".html")>-1||t.indexOf(".htm")>-1?x(t,n,i):k(t,n,i)):t&&"array"===e.typeof(t)&&t.forEach(function(o,a){o=e.unit.resolvePath(o),o.indexOf(".css")>-1?(T(o),a==t.length-1&&n&&n(t)):o.indexOf(".html")>-1||o.indexOf(".htm")>-1?x(o,n,i):a==t.length-1?k(o,n,i):k(o)}),this}function x(t,i,o){var a="function"==typeof i;if(F.hasOwnProperty(t))return a?i&&i.call(D,F[t],200):"string"==typeof i&&e.$(i).html(F[t]),this;"string"==typeof t&&n.ajax({url:t,dataType:"html",success:function(n,r,l){l.url=t,F[t]=n,a?i&&i.call(D,n,r,l):"string"==typeof i&&(e.$(i).html(n),o&&o.call(D,n,r,l))},error:function(e,t,n){a&&o&&o.call(D,e,t,n)}})}function k(t,i,o){var a,r=this;if(R=B.modules,void 0===t||""==t)return o&&o.call(r,t),this;if(t in R)a=t,t=R[t].script||a+N.scriptSuffix;else{var l=t.indexOf(N.scriptSuffix);l>-1?(t=t,a=t.substr(0,l)):(a=t,t+=N.scriptSuffix)}var c=document.createElement("script")||{},s=N.cache?"":"?t="+(new Date).getTime(),u=t.indexOf("http://")>-1||t.indexOf("https://")>-1;c.type="text/javascript",c.src=u?t+s:B.baseUrl+t+s,c.setAttribute("name",a),c.onload=function(){N.log&&console.log("create "+t),i&&i(t)},c.onerror=function(e){N.log&&console.log("createError "+t),o&&o(t)};var d=e.array.index(L,t),f=n('script[name="'+a+'"]').length||n('script[src="'+t+'"]').length;return d>-1||f?i&&i(t):d<0&&(document.body&&document.body.appendChild(c),N.cache&&L.push(t)),c=null,this}function I(t){var n,i=t.length;if("array"===e.typeof(t))for(n=0;n<i;n++){var o=t[n];T(o)}else T(t)}function T(t){if("string"!=typeof t)return void e.showLog(t+"的格式不正确");if(e.array.index(P,t)<0){var n=document.createElement("link")||{};n.href=t+(N.cache?"":"?t="+(new Date).getTime()),n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),document.head&&document.head.appendChild(n),n=null,P.push(t)}}function O(t,n){return e.on.apply(D,arguments),this}function C(t,n){return e.off.apply(D,arguments),this}function j(t){D.self=this==window||this==D?null:this,e.trigger.apply(D,arguments)}var S,E={cache:!0,log:!1,scriptSuffix:".js"},N=n.extend({},E,e.config.loader,i),L=[],P=[],F={},B={baseUrl:"",modules:{}},R={},D={init:o,define:f,require:g,destroy:d,map:r,import:y,checkLoad:w,get:l,set:c,on:O,off:C,trigger:j};return D}}(window.bui||{},window.libs),function(e,t){e.toggle=function(n){function i(t){if(t=t||m,w=!1,!t.id)return void e.showLog("toggle id不能为空","bui.toggle");x=e.objId(t.id),m=v.config=t,g=x.attr("class")||"";var n=t.effect,i=t.inOrder?e.array.index(y.hideInOrder,n):e.array.index(y.hide,n),o=n&&(e.array.index(y.show,n)>-1?e.array.index(y.show,n):i);return T=!(x[0]&&"none"==x[0].style.display||"none"==x.css("display")),o<0?(p=y.show[0],h=t.inOrder?y.hideInOrder[0]:y.hide[0]):(p=y.show[o],h=t.inOrder?y.hideInOrder[o]:y.hide[o]),this}function o(){return T}function a(t,n){if(!w)return x=e.objId(m.id),!(!k&&!I)&&(k=!1,"function"==typeof t?(t=t,n=n||p||""):(n=t||p||"",t=null),x[0]&&"none"==x[0].style.display&&x.css("display",b),x.addClass("animated "+n),"showIn"==n||"showOut"==n||"none"==n?(m.revert&&x.removeClass("animated "+n),t&&t.call(v,this),T=!0,k=!0):x.one("webkitAnimationEnd",function(){try{!T&&x.css("display",b),m.revert&&x.removeClass("animated "+n),t&&t.call(v,this),T=!0,k=!0}catch(t){e.showLog(t,"toggle show method")}}),this)}function r(t,n){if(!w&&(x=e.objId(m.id),k||I))return I=!1,"function"==typeof t?(t=t,n=n||h||""):(n=t||h||"",t=null),x.css("display",b).addClass("animated "+n),"showIn"==n||"showOut"==n||"none"==n?(x.css("display","none"),m.revert&&x.removeClass("animated "+n),t&&t.call(v,this),T=!1,I=!0):x.one("webkitAnimationEnd",function(){try{x.css("display","none"),m.revert&&x.removeClass("animated "+n),t&&t.call(v,this),T=!1,I=!0}catch(t){e.showLog(t,"toggle hide method")}}),this}function l(){return x.remove(),this}function c(e){var e=1==e;x&&(x.off(),e&&x.remove()),w=!0}function s(t){var n={};return e.widget.call(n,t)}function u(t,n){return e.option.call(v,t,n)}var d={id:"",effect:"fadeIn",useBox:!1,revert:!0,inOrder:!1};if("string"==typeof n){var f=n||"";n={},n.id=f}var h,p,g,v={show:a,hide:r,remove:l,isShow:o,destroy:c,widget:s,option:u,config:m,init:i},m=v.config=t.extend(!0,{},d,n),b=m.useBox?"-webkit-box":"block",w=!1,y={show:["fadeIn","fadeInLeft","fadeInRight","fadeInDown","fadeInUp","fadeInLeftBig","fadeInRightBig","fadeInUpBig","fadeInDownBig","zoomIn","bounceIn","rotateIn","rollIn","flipInX","flipInY","lightSpeedIn","showIn","slideInRight","slideInLeft","coverInLeft","coverInRight","zoomSlideInLeft","zoomSlideInRight","pushInLeft","pushInRight"],hide:["fadeOut","fadeOutLeft","fadeOutRight","fadeOutUp","fadeOutDown","fadeOutLeftBig","fadeOutRightBig","fadeOutDownBig","fadeOutUpBig","zoomOut","bounceOut","rotateOut","rollOut","flipOutX","flipOutY","lightSpeedOut","showOut","slideOutRight","slideOutLeft","coverOutLeft","coverOutRight","zoomSlideOutLeft","zoomSlideOutRight","pushOutLeft","pushOutRight"],hideInOrder:["fadeOut","fadeOutRight","fadeOutLeft","fadeOutDown","fadeOutUp","fadeOutRightBig","fadeOutLeftBig","fadeOutUpBig","fadeOutDownBig","zoomOut","bounceOut","rotateOut","rollOut","flipOutX","flipOutY","lightSpeedOut","showOut","slideOutLeft","slideOutRight","coverOutRight","coverOutLeft","zoomSlideOutRight","zoomSlideOutLeft","pushOutRight","pushOutLeft"]},x=null,k=!0,I=!0,T=!1;return m.id&&i(m),v}}(window.bui||{},window.libs),function(e,n){e.router=function(i){function o(t){if(we.store=t.store||null,delete t.store,t=n.extend(!0,{},U,e.config.router,t),U=we.config=t,e.hasRouter=!0,me=!0,"pages/main/main.html"===t.indexModule.template&&"pages/main/main.js"===t.indexModule.script||(pe=loader.map(t.indexModule)),te&&"effect"in t&&ae.forEach(function(e,n){e.effect=t.effect}),!t.id)return e.showLog("id 不能为空","bui.router.init"),!1;if(z=e.objId(t.id),q=bui.mask({appendTo:z,opacity:0,autoClose:!1}),V=e.loading({display:"block",width:30,height:30,opacity:0}),$=z.children(".bui-router-main"),X=t.width||window&&window.viewport&&window.viewport.width()||document.documentElement.clientWidth||"100%",Z=t.height||window&&window.viewport&&window.viewport.height()||document.documentElement.clientHeight||"100%",!$.length){var i=j(t);z.html(i),$=z.children(".bui-router-main")}return(t.width>0||String(t.width).indexOf("%")>-1)&&$.width(t.width),(t.height>0||String(t.height).indexOf("%")>-1)&&$.height(t.height),J||l(t),B.call(this,"init",{target:z[0]}),we}function a(e){var e=e||{};return e.width=e.width||U.width,e.height=e.height||U.height,window.viewport=bui.viewport(),X=e.width||window&&window.viewport&&window.viewport.width()||document.documentElement.clientWidth||"100%",Z=e.height||window&&window.viewport&&window.viewport.height()||document.documentElement.clientHeight||"100%",$.css({width:X,height:Z}),B.call(this,"resize",{target:ae[ae.length-1]}),this}function r(){var e=ve.get("hasCache",0);Boolean(e)&&U.reloadCache?fe.load():c(),ue=!0}function l(t){return r(),window.addEventListener("beforeunload",function(e){U.reloadCache&&fe.save(),B.call(W,"beforeunload",{target:ae[ae.length-1]})}),t.hash?(window.addEventListener("hashchange",function(t){var n=s(),i=""==n.pid||"undefined"==n.pid?"main":n.pid,o=e.array.index(ae,i,"pid");o>-1?(g({index:-(ae.length-o-1)}),B.call(W,"popstate",{type:"back",prevTarget:ae[o-1],target:ae[o]})):(d({url:i,param:n.param,replace:!0}),B.call(W,"popstate",{type:"load",prevTarget:ae[ae.length-2],target:ae[ae.length-1]}))}),this):(U.syncHistory&&"pushState"in window.history&&window.addEventListener("popstate",function(t){var n=s(),i=""==n.pid?U.indexModule.moduleName:n.pid,o=m(i);e.array.index(ae,i,"pid")>-1?(g({index:o,param:n.param}),B.call(W,"popstate",{type:"back",prevTarget:ae[o-1],target:ae[o]})):(d({url:i,param:n.param}),B.call(W,"popstate",{type:"load",prevTarget:ae[ae.length-2],target:ae[ae.length-1]}))}),this)}function c(t){try{var n=s();if(n.pid){if(n.pid.indexOf("http://")>-1||n.pid.indexOf("https://")>-1)return void d({url:n.pid,param:n.param,iframe:!0});d({url:n.pid,param:n.param})}else d({url:U.indexModule.moduleName,param:n.param||{}})}catch(t){e.showLog(t,"bui.router.loadUrl")}}function s(e){function t(t,n){for(var i=t&&t.substr(n+1),o=i&&i.split("&"),a=0;a<o.length;a++){var r=e?decodeURIComponent(o[a].split("=")[1]):o[a].split("=")[1];u[o[a].split("=")[0]]=r}}var n=window.location.hash||window.location.search,i=window.location.search,o=i&&i.indexOf("?"),e=0!=e,a=n&&n.indexOf("?"),r=a>-1?n&&n.substr(1,a-1):window.location.hash.substr(1),l=r&&r.indexOf(U.pageSuffix),c=l>-1?r.substr(0,l):r,s=l>-1?r:r+U.pageSuffix,u={};return a>-1&&(t(i,o),t(n,a)),{pid:c,url:s,param:u}}function u(t){var i=n.Deferred(),o=function(n,o){return b(n.url,function(i){var a=e.guid(),r=p(n.url),l=r.pid,c=(E({id:a,content:i,pid:l}),[]);fe.add(l,{id:a,pid:l,template:i}),c.push(l),n.style&&"array"===e.typeof(n.style)?n.style.forEach(function(e,t){c.push(e)}):n.style&&"string"===e.typeof(n.style)&&c.push(n.style),n.script&&"array"===e.typeof(n.script)?n.script.forEach(function(e,t){c.push(e)}):n.script&&"string"===e.typeof(n.script)&&c.push(n.script),loader.import(c,function(){B.call(we,"preloadafter",{prevTarget:null,target:null}),o&&o(t)},function(){B.call(we,"preloadafter",{prevTarget:null,target:null}),o&&o(t)})},function(t){e.showLog(n.url+"请求失败"),i.reject(n.url)}),i.promise()};return t&&"object"===e.typeof(t)?"url"in t&&o(t,function(){i.resolve(t)}):t&&"array"===e.typeof(t)&&t.forEach(function(e,n){n==t.length-1?"url"in e&&o(e,function(){i.resolve(t)}):"url"in e&&o(e)}),i}function d(t){function i(e){q&&q.hide(),d.progress&&V&&V.hide(),re.removeLast(),U.syncHistory&&window.history.back(),f.reject(e)}function o(t){ee||I in oe?(c({pid:I}),se&&r(),t&&t()):(loader.checkLoad(I)?(c({pid:I}),t&&t()):loader.require(I,function(n){try{if(d.firstAnimate&&d.progress&&V&&V.hide(),oe[I]=n||null,f.resolve(n),Q||d.firstAnimate||d.replace){var i=loader.get(I);i&&i.show&&i.show({type:"firstload",target:j})}t&&t()}catch(t){e.showLog(t,"bui.router.load"),f.reject()}}),d.callback&&d.callback({prevTarget:g,target:j}),d.loaded&&d.loaded({prevTarget:g,target:j}),B.call(we,"complete",{prevTarget:g,target:j}))}function a(){_=e.objId(R.id);var t=_&&_.find(".bui-page");t&&t.length&&d.autoInit&&e.init({id:t,height:Z})}function r(t){_=e.objId(w),O(),C();try{if(Q||ee||d.replace||d.part){!d.firstAnimate&&d.progress&&V&&V.hide(),t&&t(),q&&q.hide(),_&&_.css("zIndex",5);var n=re.getLast(),i="pageshow-"+n.pid;B.call(we,"pageshow",{type:"load",target:re.getLast()}),B.call(we,i,{type:"load",target:re.getLast()})}else K&&K.hide(),Y&&Y.show(function(){!d.firstAnimate&&d.progress&&V&&V.hide(),t&&t(),_&&_.css("zIndex",5),q&&q.hide();var e=ae[ae.length-2]||{},n=re.getLast(),i=loader.get(n.pid),o=e&&e.pid&&loader.get(e.pid)||null,a="pageshow-"+n.pid,r="pagehide-"+e.pid;B.call(we,r,{type:"load",target:ae[ae.length-2]}),B.call(we,a,{type:"load",target:re.getLast()}),B.call(we,"pagehide",{type:"load",target:ae[ae.length-2]}),B.call(we,"pageshow",{type:"load",target:re.getLast()}),o&&o.hide&&o.hide({type:"load",target:ae[ae.length-2]}),i&&i.show&&i.show({type:"load",target:re.getLast()})})}catch(t){e.showLog(t,"bui.router.doAnimate")}}function l(t){var n="";if(we.store&&(t=we.store.compileHtml(t)),d.part)n=N({content:t}),d.id?y.html(n):e.showLog("id 不能为空","router.loadPart");else if(d.replace){var i=re.getLast();y=ae.length?e.objId(i.id):$,i.pid=I,i.url=T,i.param=v;e.array.index(ae,I,"pid");n=I in le?fe.get(I,"template"):N({content:t}),y.html(n).attr("data-page",I)}else ee||(n=E({id:w,content:t,pid:I}),$&&$.attr("data-main",w).append(n));return n}function c(e){var t=e||re.getLast(),n=ge[t.pid]&&ge[t.pid]||{},i=n.loaded,o=i&&i.apply(n,n.dependExports)||n.exports;oe[t.pid]=o||null,n.exports=o,ee=!1,Q=!1,B.call(we,"refresh",{prevTarget:g,target:t}),q&&q.hide(),U.progress&&V&&V.hide(),f.resolve(o)}function s(){var e=ae[ae.length-2]||null,t=re.getLast();Q&&!d.part&&(B.call(we,"firstload",{prevTarget:e,target:t}),Q=!1),d.part?B.call(we,"loadpart",{prevTarget:e,target:t}):B.call(we,"load",{prevTarget:e,target:t})}var u={id:"",url:"",param:{},effect:"",command:"html",path:U.path,firstAnimate:U.firstAnimate,progress:U.progress,reload:U.reload,autoInit:U.autoInit,replace:!1,iframe:!1,decode:!1,part:!1,cache:U.cache,callback:null,beforeLoad:U.beforeLoad,loaded:U.loaded},d=n.extend(!0,{},u,t),f=n.Deferred(),g=re.getLast()||null;ae[ae.length-2];d.url.indexOf("./")>-1&&(d.url=h(d.url,g)),d.path&&(d.path="/"==d.path[d.path.length-1]?d.path:d.path+"/"),d.url=d.url in ge||d.iframe||d.url.indexOf("http:")>-1?d.url:d.path+d.url,document.activeElement.blur();var v=null,m={};d.id=(d.id&&d.id.indexOf("#")>-1?d.id.substr(1):d.id)||"";var w=d.replace?g.id:d.id||e.guid(),y=e.objId(w);if(!d.url)return e.showLog("url 不能为空","bui.router.load"),f.promise();if(d.url=d.decode?decodeURIComponent(d.url):d.url,d.url.indexOf("tel:")>=0||d.url.indexOf("mailto:")>=0||d.url.indexOf("sms:")>=0)return e.unit.openExtral(d.url),f.promise();if(d.url&&d.url.indexOf("?")>-1){var x=d.url.split("?");m=e.unit.keyStringToObject(x[1]),d.url=x[0]}v=n.extend(!0,{},m,d.param),"undefined"==d.url&&(d.url="main"),d.iframe=Boolean(d.iframe);var k=p(d.url),I=k.pid,T=d.iframe?d.url:k.url,j={id:w,pid:I,url:"function"==typeof T?d.url:T,replace:d.replace,param:v,part:{},effect:t.effect||U.effect};ne=d.part?g:j;var L="function"==typeof d.beforeLoad?d.beforeLoad.call(we,{prevTarget:g,target:j}):d.beforeLoad;if(B.call(we,"loadbefore",{prevTarget:g,target:j}),B.call(we,"beforeload",{prevTarget:g,target:j}),!1===L)return Q=!1,this;q&&q.show(),d.progress&&V&&V.show(),loader.map({moduleName:I,id:w});var P=loader.get(j.pid);if(P&&P.beforeLoad&&P.beforeLoad(),ae.length&&d.effect){var F=ae.length-1;ae[F].effect=d.effect}!ee&&!d.part&&!d.replace&&re.add(j),d.replace&&re.replace(j);var R=re.getLast();if(d.part&&(R.part&&(R.part[w]={id:w,pid:I,url:T,param:v}),R.currentPart=w,R.part&&ae.splice(ae.length-1,1,R)),d.part||(de=j),I in le)!function(e){l(fe.get(e.pid,"template")),e.part?c(e):(a(),!ee&&r(function(){e.progress&&V&&V.hide()}),c(e))}({pid:I,progress:d.progress,part:d.part}),d.callback&&d.callback({prevTarget:g,target:j}),d.loaded&&d.loaded({prevTarget:g,target:j}),B.call(we,"complete",{prevTarget:g,target:j});else{if(d.iframe)return function(e){var t=S({id:e.id,pid:e.pid,url:e.url,param:e.param});$&&$.attr("data-main",e.id).append(t),r(function(){d.progress&&V&&V.hide()})}({id:w,pid:I,url:d.url,param:v}),f.promise();if(d.part)return function(){b(T,function(t,n,i){e.objId(w)[d.command](t),o(s),d.cache&&fe.add(I,{id:w,pid:I,template:t}),q&&q.hide(),d.progress&&V&&V.hide()},function(e,t,n){i(T),B.call(we,"loadfail",e,t,n)})}(),f.promise();!function(){b(T,function(e,t,n){if(l(e),d.cache&&fe.add(I,{id:w,pid:I,template:e}),a(),d.firstAnimate)return void r(function(){o(s),d.progress&&V&&V.hide(),he.add(I,{id:w,pid:I,param:v})});r(function(){d.progress&&V&&V.hide()}),o(s),he.add(I,{id:w,pid:I,param:v})},function(e,t,n){i(T),B.call(we,"loadfail",e,t,n)})}()}return f.promise()}function f(e){var t={id:"",url:"",command:"html",param:{},part:!0};return d(n.extend(!0,{},t,e)).promise()}function h(e,t){var n=e,i=t.url.lastIndexOf("/"),o=t.url.substr(0,i);return e.indexOf("../")>-1?(e=e.replace(/\..\//g,function(e){var t=o.lastIndexOf("/");return o=o.substr(0,t),""}),n=o?o+"/"+e:e):e.indexOf("./")>-1&&(n=o+"/"+e.replace(/\.\//g,"")),n}function p(e){var t="",n=e;pe=loader.map(),ge=pe.modules;var i=n.indexOf(U.pageSuffix);return i>-1?(t=n,n=t.substr(0,i),ge.hasOwnProperty(n)&&(t=ge[n]&&ge[n].template||t||"")):(n=n,t=ge[n]&&ge[n].template||n+U.pageSuffix||""),{pid:n,url:t}}function g(t){var i=this,o={};"function"==typeof t?o.callback=t:o=t||{};var a=n.extend(!0,{index:-1,name:"",beforeBack:U.beforeBack,callback:null,loaded:U.loaded},o),r=parseInt(a.index),l=ae.length;if(pe=loader.map(),ge=pe.modules,r>0)return void e.showLog("index 参数只能是负数","bui.router.back");var c=re.getLast(),s=l-1,u="function"==typeof a.beforeBack?a.beforeBack.call(we,{prevTarget:null,target:c}):o.beforeBack;B.call(we,"beforeback",{prevTarget:null,target:c});var d=loader.get(c.pid);return d&&d.beforeDestroy&&d.beforeDestroy(),!1===u?this:(a.name&&(r=m(a.name)),Math.abs(r)>s&&(r=-s),l>1&&G&&(r<-1&&C(r),G=!1,o.effect&&(K.option({effect:o.effect}),Y.option({effect:o.effect})),K&&K.show(),Y&&Y.hide(function(){var t=l+r;T(t),re.removeNext(t),C();var n=O(),o=n.pid;e.objId(n.id).css("zIndex",5),function(){var e={};e=oe[o]||{};var t=loader.get(n.pid);a.callback&&a.callback.call(i,e,n),a.backed&&a.backed.call(we,{prevTarget:c,target:n}),B.call(we,"back",{prevTarget:c,target:n}),de=n;var r="pageshow-"+n.pid,l="pagehide-"+c.pid;d&&d.hide&&d.hide({type:"back",target:c}),t&&t.show&&t.show({type:"back",target:n}),B.call(we,l,{type:"back",target:c}),B.call(we,r,{type:"back",target:n}),B.call(we,"pageshow",{type:"back",target:n}),B.call(we,"pagehide",{type:"back",target:c}),d&&d.destroyed&&d.destroyed(),G=!0}()})),this)}function v(t){return"string"==typeof t&&"main"!==t?(loader.destroy(t),fe.del(t),t in oe&&delete oe[t]):e.showLog("参数只能是字符串"),this}function m(t){var n,i=e.array.indexs(ae,t,"pid"),o=i.length;if(o){var a=-(ae.length-i[o-1]-1);n=0==a?-1:a}else n=-1;return n}function b(t,i,o){if("string"==typeof t){var a=null;t.indexOf(".js")>-1&&(a=loader.get(de.pid))&&a.beforeCreate&&a.beforeCreate(),n.ajax({url:t,dataType:"html",async:U.async,success:function(e,n,o){o.url=t,""===e&&B.call(we,"fail",e,n,o),i&&i(e,n,o),B.call(we,"success",e,n,o),a&&a.created&&a.created()},error:function(e,t,n){o&&o(e,t,n),B.call(we,"fail",e,t,n)}})}else if("function"==typeof t){var r=t&&t();i&&i(r,200,{}),B.call(we,"success",r,200,{})}else e.showLog("url 不能为空","bui.router.requestUrl")}function w(){ee=!0;var e=ae.length-1,t=ae[e];return d({id:t.id,url:t.pid,param:t.param}),this}function y(e){return e=e||{},d({url:e.url||"",param:e.param||{},replace:!0}),this}function x(){return re.getLast().param}function k(e){var t=re.getLast(),n=e||t.currentPart,i=null,o=n in t.part?t.part[n]:{};return"param"in o&&(i=o.param),i}function I(e){var t;return e&&(t=e in oe),t}function T(e){$.children().each(function(t,i){t>=e&&n(i).remove()})}function O(){var t=re.getLast(),n=t.id||"",i=t.effect||U.effect;return n&&(B.call(we,"beforepageshow",{target:t}),Y=null,Y=e.toggle({id:document.getElementById(n),effect:ie[i].inRight||""}),$&&$.attr("data-main",n)),t}function C(t){t=t||-1;var n=ae.length+t-1,i=ae[n],o=i&&i.id||"",a=i&&i.effect||U.effect;return o&&(B.call(we,"beforepagehide",{target:i}),K=null,K=e.toggle({id:document.getElementById(o),effect:ie[a].inLeft||""})),i}function j(e){e=e||{};var t="";String(X).indexOf("%"),String(Z).indexOf("%");return t+='<div class="bui-router-main">',t+="</div>"}function S(t){var n=t.param?e.setUrlParams(t.url,t.param):t.url,i="";return i+='<div id="'+t.id+'" class="bui-router-item" data-page="'+t.pid+'">',i+='<iframe class="bui-router-iframe" src="'+n+'"></iframe>',i+="</div>"}function E(e){var t="";return t+='<div id="'+e.id+'" class="bui-router-item" data-page="'+e.pid+'">',t+=e.content||"",t+="</div>"}function N(e){var t="";return t+=e.content}function L(t,n){return te=!0,e.option.call(we,t,n)}function P(t,n){return e.on.apply(we,arguments),this}function F(t,n){return e.off.apply(we,arguments),this}function B(t){we.self=this==window||this==we?null:this,e.trigger.apply(we,arguments)}function R(){return re.getLast()}function D(){var e=re.getLast();return document.getElementById(e.id)}function A(e){return re.getLast().id}function M(i){var o=re.getLast(),a=e.objId(o.id),r="object"===(void 0===i?"undefined":t(i))?n(i):a.find(".bui-page");return r.length&&e.init({id:r,height:Z}),this}var z,V,q,H={id:"",progress:!1,syncHistory:!0,autoInit:!0,firstAnimate:!1,path:"",indexModule:{moduleName:"main",template:"pages/main/main.html",script:"pages/main/main.js"},hash:!1,cache:!0,reloadCache:!1,reload:!1,useScroll:".bui-scroll-x",beforeBack:null,beforeLoad:null,loaded:null,store:null,width:0,height:0,async:!0,effect:"push",hashPrefix:"#",scriptSuffix:".js",pageSuffix:".html"},U=n.extend({},H,e.config.router,i),_=null,W=this,$=null,K=null,Y=null,J=!1,X="",Z="",Q=!0,G=!0,ee=!1,te=!1,ne=null,ie={none:{inRight:"showIn",inLeft:"showIn"},fadein:{inRight:"fadeIn",inLeft:"fadeIn"},fadeinslide:{inRight:"fadeInRight",inLeft:"fadeInLeft"},slide:{inRight:"slideInRight",inLeft:"slideInLeft"},push:{inRight:"pushInRight",inLeft:"pushInLeft"},zoom:{inRight:"zoomIn",inLeft:"zoomIn"},cover:{inRight:"coverInRight",inLeft:"coverInLeft"},zoomslide:{inRight:"zoomSlideInRight",inLeft:"zoomSlideInLeft"},fadeinslideback:{inRight:"fadeInLeft",inLeft:"fadeInRight"},slideback:{inRight:"slideInLeft",inLeft:"slideInRight"},pushback:{inRight:"pushInLeft",inLeft:"pushInRight"},coverback:{inRight:"coverInLeft",inLeft:"coverInRight"},zoomslideback:{inRight:"zoomSlideInLeft",inLeft:"zoomSlideInRight"}},oe={},ae=[],re={},le={},ce={},se=!1,ue=!1,de={},fe={},he={},pe=loader.map(U.indexModule),ge=pe.modules,ve=e.storage({local:!1}),me=!1;re.get=function(){return ae},re.add=function(t){t=t||{};var n=window.location.origin+window.location.pathname+"#"+t.pid,i=e.setUrlParams(n,t.param);return ae.push(t),Q?void(U.syncHistory&&"replaceState"in window.history&&window.history.replaceState(t,null,i)):(U.syncHistory&&"pushState"in window.history&&window.history.pushState(t,null,i),ae)},re.prepend=function(t){t=t||{};var n=window.location.origin+window.location.pathname+"#"+t.pid;e.setUrlParams(n,t.param);return ae.unshift(t),ae},re.replace=function(t){t=t||{};var n=ae.length-1,i=window.location.origin+window.location.pathname+"#"+t.pid,o=e.setUrlParams(i,t.param);return n>-1&&(ae.splice(n,1,t),U.syncHistory&&"replaceState"in window.history&&window.history.replaceState(t,null,o)),ae},re.getLast=function(e){var t=ae.length-1,n=ae[t]||{};return e?n[e]:n},re.removeNext=function(t){var n=ae.length-t;ae.splice(t,n);var i=re.getLast(),o=window.location.origin+window.location.pathname+"#"+i.pid,a=e.setUrlParams(o,i.param);U.syncHistory&&"replaceState"in window.history&&window.history.replaceState(i.param,null,a)},re.removeLast=function(){var e=ae.length-1;re.removeNext(e)},re.checkLoad=function(t){return e.array.compare(ae,t,"pid")||e.array.compare(ae,t,"url")||e.array.compare(ae,t,"id")},fe.add=function(e,t){return le[e]=t||{},le[e]},fe.del=function(e){delete le[e]},fe.get=function(e,t){if(t){return(le[e]||{})[t]}return le[e]},fe.save=function(){if(ae.length>1){var e=z.html();ve.set("cacheHtml",e),ve.set("cacheHistory",ae),ve.set("hasCache","true")}},fe.load=function(){var t=ve.get("cacheHtml",0),n=ve.get("cacheHistory",0),i=[];if(n.length>1){z.html(t),$=z.children(".bui-router-main");g({name:s().pid});try{n.forEach(function(e,t){var n="string"==typeof e?JSON.parse(e):e;i.push(n)});var o=i[i.length-1];de=o,loader.require(o.pid,function(e){oe[o.pid]=e||null}),P("back",function(e){loader.require(e.target.pid,function(t){oe[e.target.pid]=t||null})})}catch(t){e.showLog(t)}ae=i,O(),C(),Q=!1,se=!0,fe.clear()}},fe.clear=function(){ve.remove("cacheHistory"),ve.remove("cacheHtml"),ve.remove("hasCache")},he.add=function(e,t){return ce[e]=t||{},ce[e]},he.get=function(e,t){if(t){return(ce[e]||{})[t]}return ce[e]};var be=function(t){var n=re.getLast(),i=document.getElementById(n.id)||document;return e.obj(t,i)},we={init:o,option:L,config:U,data:{},on:P,off:F,trigger:B,load:d,resize:a,destroy:v,loadPart:f,replace:y,refresh:w,back:g,isLoad:I,$:be,currentId:A,currentPage:D,currentModule:R,getPageParams:x,getPartParams:k,getHistory:re.get,preload:u,initScroll:M,history:{get:re.get,check:re.checkLoad,getLast:re.getLast}};return we}}(window.bui||{},window.libs),function(e,o){var a=function(){function a(t){n(this,a),this._default={log:!1,hasLife:!0,onBeforeInit:null,onInited:null},this._plugin=t||{name:"",depend:null,config:null,param:null,callback:null};var i=e.config.hasOwnProperty(this._plugin.name)?e.config[this._plugin.name]:null;this.config=o.extend(!0,{},this._default,i,this._plugin.config,this._plugin.param),this.initStatus=!1,this.reinitStatus=!1,this.widgets=Object.create(null),this.init()}return i(a,[{key:"widget",value:function(e){return e&&e in this.widgets?this.widgets[e]:this.widgets}},{key:"init",value:function(e){var t=this,n=e||null;t.config=o.extend(!0,this.config,n);var i=t.config,a=i.hasLife&&i.onBeforeInit&&i.onBeforeInit.call(t,i);return i.log&&console.log(t._plugin.name+" before init"),!1===a?t:(t._plugin.callback&&t._plugin.callback.call(t,i),i.log&&console.log(t._plugin.name+" init"),i.hasLife&&i.onInited&&i.onInited.call(t,i),i.log&&console.log(t._plugin.name+" after inited"),this.initStatus=!0,t)}},{key:"reinit",value:function(){return this.destroy(),this.init(),this.config.log&&console.log(this._plugin.name+" reinit"),this}},{key:"destroy",value:function(e){return this.beforeDestroy&&this.beforeDestroy(),this.beforeDestroy=null,this.widgets={},this.off(),this.initStatus=!1,e&&e.call(this),this.config.log&&console.log(this._plugin.name+" destroyed"),this}},{key:"prefix",value:function(t){return e.config.classNamePrefix+t}},{key:"showLog",value:function(n,i){i=i||"";var o="";return"object"==(void 0===n?"undefined":t(n))&&"message"in n&&"name"in n?o=n.message+":"+n.name+"&&stack:"+n.stack:"string"==typeof n&&(o=n),e.log&&console.error(i+" "+o),e.trace&&console.trace&&console.trace(),this}},{key:"option",value:function(t,n){if("object"!==e.typeof(t)&&void 0===n)return"string"==typeof t?this.config[t]:this.config;var i=this;if("id"==t)return e.showLog("不允许修改控件的ID参数"),this;if(t&&"object"===e.typeof(t)){var a=o.extend(this.config,t);return i&&i.init(a)}if(this.config.hasOwnProperty(t)){var r={};r[t]=n;var l=o.extend(this.config,r);return i&&i.init(l)}return this}},{key:"emitter",get:function(){return e.emitter()}},{key:"on",get:function(){return this.emitter.on}},{key:"off",get:function(){return this.emitter.off}},{key:"trigger",get:function(){return this.emitter.trigger}}]),a}();e.extend=function(t){var o=function(){function o(e){n(this,o),this.init(e)}return i(o,[{key:"init",value:function(n){var i=n.name;return this.checkName(i)?(e[i]=function(e){return t.param=e,new a(t)},this):this}},{key:"checkName",value:function(t){return t?!e.hasOwnProperty(t)||(console.warn("已有相同名为"+t+"的插件或方法,请重新换个名称注册."),!1):(console.warn("插件名字不能为空"),!1)}}]),o}();new o(t)}}(window.bui||{},window.libs),function(e,n){
e.setUrlParams=function(n,i,o){var o=0!=o,i="object"==(void 0===i?"undefined":t(i))?i:{},a=e.unit.objectToKeyString(i,o);return""==a?n:n+"?"+a},e.getUrlParams=function(t){var t=0!=t,n=window.location.search,i={};if(n.indexOf("?")>-1){var o=n.substr(1);i=e.unit.keyStringToObject(o,t)}return i},e.getUrlParam=function(e){var t=window.location.search,n=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),i=t.substr(1).match(n);return null!=i?decodeURIComponent(i[2]):null},e.typeof=function(e){var t=Object.prototype.toString.call(e).slice(8,-1);return t=t.toLowerCase()},e.setting=function(n,i){return"string"==typeof n&&"object"===(void 0===i?"undefined":t(i))?e.config[n]=i:"string"==typeof n&&void 0===i?e.config[n]:e.config}}(window.bui||{},window.libs),function(e,t){e.array={},e.array.index=e.inArray=function(e,t,n){var i,o;e instanceof Array?(i=e||[],o=t):(i=t||[],o=e);for(var a=0;a<i.length;a++){var r=i[a];if((r&&r[n]||r)==o)return parseInt(a)}return-1},e.array.compare=e.compareArray=function(e,t,n){var i,o;e instanceof Array?(i=e||[],o=t):(i=t||[],o=e);for(var a=0;a<i.length;a++){var r=i[a];if((r&&r[n]||r)==o)return!0}return!1},e.array.remove=e.removeArray=function(t,n,i){function o(e){l.forEach(function(t,n){try{("string"==typeof i||"number"==typeof i?t[i]||t:t)==e&&l.splice(n,1)}catch(e){}})}var a,r;t instanceof Array?(a=t||[],r=n):(a=n||[],r=t||[]);var l=a||[];return r&&"array"===e.typeof(r)?r.forEach(function(e,t){o("string"==typeof i||"number"==typeof i?e[i]||e:e)}):o(r),l},e.array.filter=e.filterArray=function(e,t,n){var i,o;e instanceof Array?(i=e||[],o=t):(i=t||[],o=e);var a=[];for(var r in i)try{var l=i[r]&&i[r][n]||i[r];new RegExp(o).test(l)&&a.push(i[r])}catch(e){}return a},e.array.indexs=e.indexArray=function(e,t,n){var i,o;e instanceof Array?(i=e||[],o=t):(i=t||[],o=e);var a=[];for(var r in i)try{(i[r]&&i[r][n]||i[r])===o&&a.push(+r)}catch(e){}return a},e.array.excess=e.excessArray=function(e,t,n){var i;e instanceof Array?i=e||[]:i=t||[];var o={},a=[];for(var r in i)try{var l=i[r]&&i[r][n]||i[r];o[l]!=l&&(o[l]=l,a.push(i[r]))}catch(e){}return a},e.array.uniq=function(t,n){for(var i=[],o=0;o<t.length;o++){var a=void 0===n,r=a?t[o]:t[o][n]||t[o];(a?-1==e.array.index(i,r,n):-1==i.indexOf(r))&&i.push(r)}return i},e.array.copy=e.copyArray=function(t,n,i){var o=[];if(n=n||0,i=i||t&&t.length,!t||"array"===e.typeof(t)){t.forEach(function(e,t){o.push(e)});return o.splice(n,i)||[]}},e.array.empty=function(t){if(!t||"array"===e.typeof(t))return t.splice(0,t.length)},e.array.replace=function(t,n){if(!(t&&"array"!==e.typeof(t)||n&&"array"!==e.typeof(n))){var i=[0,t.length].concat(n);return t.splice.apply(t,i)}},e.array.merge=function(t){var n;if(!t||"array"===e.typeof(t)){var i=arguments,o=i.length-1,a=i[o];if("string"==typeof a&&i.length>1){for(var l,c=o,s=[],u=0;u<c;u++)!function(e){var n=Array.prototype.slice.call(i[e],0);t.forEach(function(e,t){var i=e[a]||e;n instanceof Array&&n.forEach(function(t,o){var r=t[a]||t;if(i===r){for(var l in t)e[l]=t[l];n.splice(o,1)}})}),s.push(n)}(u);return(l=e.array).merge.apply(l,[t].concat(s))}var d=(n=[t.length,0]).concat.apply(n,r(Array.prototype.slice.call(arguments,1)));return t.splice.apply(t,d),t}},e.array.get=function(t,n,i){if(!t||"array"===e.typeof(t)){for(var o,a=null,r=0;r<t.length;r++){a=t[r];(a&&a[i]||a)==n&&(o=a)}return o}},e.array.getAll=function(e,t,n){var e=e||[],i=[],o=null;for(var a in e)try{o=e[a];var r=o&&o[n]||o;t&&t instanceof Array?t.forEach(function(e,t){r==e&&i.push(o)}):r==t&&i.push(o)}catch(e){}return i},e.array.set=function(t,n,i,o){if(!t||"array"===e.typeof(t)){for(var a=/\d/.test(n),r=0;r<t.length;r++){var l=t[r],c=void 0===o?l:l[o]||l;if(a?r===n:c===n){if(o){if(i&&"object"==e.typeof(i))for(var s in i)l[s]=i[s];else l[o]=i;t.splice(r,1,l)}else t.splice(r,1,i);return t}}return t}},e.array.setAll=function(t,n,i,o){if(!t||"array"===e.typeof(t))return t.filter(function(a,r){var l=void 0===o?a:a[o]||a;if(r==n||l===n)if(o){if(i&&"object"==e.typeof(i))for(var c in i)a[c]=i[c];else a[o]=i;t.splice(r,1,a)}else t.splice(r,1,i)}),t},e.array.delete=function(t,n,i){function o(e){t.forEach(function(n,o){try{("string"==typeof i||"number"==typeof i?n[i]||n:n)!=e&&o!=e||t.splice(o,1)}catch(e){}})}if(!t||"array"===e.typeof(t)){var a=e.array.indexs(t,n,i);return n&&"array"===e.typeof(n)?n.forEach(function(e,t){o("string"==typeof i||"number"==typeof i?e[i]||e:e)}):o(n),a}}}(window.bui||{},window.libs),function(e,n){e.storage=function(n){function i(t,n,i){t=u+t;var o=1==c?null:p.getItem(t),a=[],r="",l=i?n[i]:n;if(null===o){a.push(n),r=JSON.stringify(a);try{p.setItem(t,r)}catch(e){"QuotaExceededError"==e.name&&console.log("超出本地存储限额！")}}else{var s=JSON.parse(o);if(i?e.array.compare(s,l,i):e.array.compare(s,l)){e.array.remove(s,l,i),s[h](n);try{r=JSON.stringify(s),p.setItem(t,r)}catch(e){"QuotaExceededError"==e.name&&console.log("超出本地存储限额！")}}else{s[h](n),s.length>c&&0!=c&&s.pop();try{r=JSON.stringify(s),p.setItem(t,r)}catch(e){"QuotaExceededError"==e.name&&console.log("超出本地存储限额！")}}}return this}function o(t,n,i){t=u+t;var o,a=p.getItem(t)||"";try{o=d?a&&e.unit.stringToJson(a):a&&JSON.parse(a)}catch(t){o=a,e.showLog(t.name+": "+t.message,"bui.storage.get")}if("number"==typeof n&&i)o=o&&o[n]&&o[n][i]||void 0;else if("string"==typeof n){var r=e.array.index(o,n,i);o=o&&o[r]}else o="number"==typeof n?o&&o[n]||void 0:o;return o}function a(t,n,i){if("string"!=typeof(t=u+t))return void e.showLog("要删除的字段名只能是字符串","bui.storage.remove");var a=o(t)||[];if("number"==typeof n){var r="number"==typeof i?i:r;a.splice(n,r);try{var l=JSON.stringify(a)||"";p.setItem(t,l)}catch(t){e.showLog(t.name+": "+t.message,"bui.storage.remove")}}else if("string"==typeof n){var c=e.array.remove(a,n,i);try{var l=JSON.stringify(c)||"";p.setItem(t,l)}catch(t){e.showLog(t.name+": "+t.message,"bui.storage.remove")}}else p.removeItem(t);return this}function r(){if(u)for(var e=0;e<localStorage.length;e++){var t=localStorage.key(e);0===t.indexOf(u)&&p.removeItem(t)}else p.clear();return this}function l(e){for(var t={},n=parseInt(e)||0,i=0;i<localStorage.length;i++){var o=localStorage.key(i);o.substr(u.length);if(u&&0===o.indexOf(u))try{var a=JSON.parse(p.getItem(o));t[o]=void 0!==e?a[n]:a}catch(e){t[o]=p.getItem(o)}if(""===u)try{t[o]=JSON.parse(p.getItem(o))}catch(e){t[o]=p.getItem(o)}}return t}var c=1,s=!0,u="",d=!1,f=!0;"number"==typeof n||"string"==typeof n?c=0==parseInt(n)?0:parseInt(n)||1:"object"===(void 0===n?"undefined":t(n))&&(c=n&&0==n.size?0:n.size||1,f=!n||0!=n.local,s=!n||0!=n.reverse,d=!(!n||1!=n.deep),u=n.prefix||"");var h=s?"push":"unshift",p=f?localStorage:sessionStorage;return{get:o,getAll:l,set:i,remove:a,clear:r}}}(window.bui||{},window.libs),function(e,n){e.unit={},e.unit.remToPx=function(e){var t=window&&window.viewport&&window.viewport.fontSize||100,e=(parseFloat(e)*t).toFixed(2);return e},e.unit.pxToRem=function(e){var t=window&&window.viewport&&window.viewport.fontSize||100,e=(parseFloat(e)/t).toFixed(2);return e},e.unit.pxToRemZoom=function(e){var e=(parseFloat(e)/100).toFixed(2);return e},e.unit.debounce=function(e,t,n){var i;return function(){var o=n||this,a=arguments,r=function(){i=null,e.apply(o,a)};clearTimeout(i),i=setTimeout(r,t)}},e.unit.throttle=function(e,t,n){t||(t=250);var i,o;return function(){var a=n||this,r=+new Date,l=arguments;i&&r<i+t?(clearTimeout(o),o=setTimeout(function(){i=r,e.apply(a,l)},t)):(i=r,e.apply(a,l))}},e.unit.startWithCss=function(e){var t=new RegExp("^\\.|^#");return"string"==typeof e&&t.test(e)},e.unit.startWithStr=function(e,t){var n=new RegExp("^"+t);return"string"==typeof e&&n.test(e)},e.unit.startWithId=function(e){var t=new RegExp("^#");return"string"==typeof e&&t.test(e)},e.unit.startWithClass=function(e){var t=new RegExp("^\\.");return"string"==typeof e&&t.test(e)},e.unit.endWithImage=function(e){var t=new RegExp("(.png|.jpg|.gif)$");return"string"==typeof e&&t.test(e)},e.unit.tel=function(t){var n,t=String(t),i="tel:";return 0==t.indexOf("+")&&(i="wtai://wp/mc;"),n=t,window.location.href=i+n,e},e.unit.sms=function(t,n){var i=navigator.userAgent,o=/(iPhone|iPad|iOS)/i.test(i),a=o?"&":"?";return window.location.href="sms:"+t+a+"body="+n,e},e.unit.mailto=function(t){var t="email"in t?t:{};return"string"==typeof t.email&&t.email.indexOf("@")>0?window.location.href="mailto:"+t.email+"?subject="+(t.subject||"")+"&body="+(t.body||"")+"&cc="+(t.cc||""):e.showLog(email+"格式不正确"),e},e.unit.openExtral=function(t){var n=[],i="",t=String(t);if(t.indexOf("mailto:")>=0)if(n=t.split("mailto:"),i=n[1],i.indexOf("?")>-1){var o=i.split("?"),a=e.unit.keyStringToObject(o[1]);a.email=o[0],e.unit.mailto(a)}else e.unit.mailto({email:i});if(t.indexOf("tel:")>=0&&(n=t.split("tel:"),i=parseInt(n[1]),e.unit.tel(i)),t.indexOf("sms:")>=0)if(n=t.split("sms:"),i=n[1],t.indexOf("=")>=0){var r=t.split("="),l=r[1];e.unit.sms(i,l)}else e.unit.sms(i);return e},e.unit.objectToKeyString=function(e,t){var n="";for(var i in e){n+="&"+i+"="+(t?encodeURIComponent(e[i]):e[i])}return n.substr(1)},e.unit.keyStringToObject=function(t,n){var i,o={},a=[];try{for(a=t.split("&"),i=0;i<a.length;i++){var r=n?decodeURIComponent(a[i].split("=")[1]):a[i].split("=")[1];o[a[i].split("=")[0]]=r}}catch(t){e.showLog(t)}return o},e.unit.checkTargetInclude=function(e,t){var i=t,o=[];if(i.indexOf(",")>-1){o=i.split(",");var a,r=o.length;for(a=0;a<r;a++){var l=o[a];l.indexOf(".")>-1&&(o[a]=l.substr(1))}}else i.indexOf(".")>-1?o[0]=i.substr(1):o[0]=i;var c,s=o.length;for(c=0;c<s;c++)if(n(e).hasClass(o[c]))return!0;return!1},e.unit.jsonToString=function(n){function i(n){if(n&&"object"===e.typeof(n)){for(var i in n){var o=n[i];"object"===(void 0===o?"undefined":t(o))&&(n[i]=JSON.stringify(o))}return n}}function o(n){if(n&&"array"===e.typeof(n))return n.forEach(function(e,i){"object"===(void 0===e?"undefined":t(e))&&(n[i]=JSON.stringify(e))}),n}return"object"===(void 0===n?"undefined":t(n))?function(t){function n(t,n){var a=t[n];return a&&"object"===e.typeof(a)?t[n]=i(a):a&&"array"===e.typeof(a)?t[n]=o(a):t[n]=a,t[n]}var a;if("object"===e.typeof(t)){for(var r in t)t[r]=n(t,r);a=JSON.stringify(t)}else"array"===e.typeof(t)?(t.forEach(function(e,i){t[i]=n(t,i)}),a=JSON.stringify(t)):a=t;return a}(n):n},e.unit.stringToJson=function(n){function i(n){var o,a;try{if(o="object"===(void 0===n?"undefined":t(n))?n:JSON.parse(n),"array"===e.typeof(o))o.forEach(function(e,t){o[t]=i(e)});else if("object"===e.typeof(o))for(var r in o){var l=o[r];o[r]=i(l)}a=o}catch(e){a=n}return a}return n&&i(n)},e.unit.setKeyValue=function(e,t,n){function i(e,n){if(o.length)return i(o.shift(),n[e]||{});n[e]=t}var o=e&&e.indexOf(".")>-1?e.split("."):[e];return i(o.shift(),n)},e.unit.getKeyValue=function(e,t){function n(e,t){var o=t[e];if(o&&"string"==typeof o&&o.indexOf("{")>-1&&o.indexOf("}")>-1)try{t[e]=JSON.parse(o)}catch(n){t[e]=o}return void 0!==o&&i.length?n(i.shift(),o):o}var i=e&&e.indexOf(".")>-1?e.split("."):[e];return n(i.shift(),t)},e.unit.getKeyObj=function(e,t){function n(e,t){var o=t[e];return!o instanceof Array&&o instanceof Object?n(i.shift(),o):o}var i=e&&e.indexOf(".")>-1?e.split("."):[e];return n(i.shift(),t)},e.unit.delKey=function(e,t){function n(e,o){return i.length?n(i.shift(),o[e]):(delete o[e],t)}var i=e&&e.indexOf(".")>-1?e.split("."):[e];return n(i.shift(),t)},e.unit.calcHeight=function(e,t){var i=n(e);i[0]&&(i[0].style.height="calc(100% - "+t+")")},e.unit.resolvePath=function(t){if(!e.hasRouter)return t;var n=t,i=router&&router.history&&router.history.getLast()||{url:n},o=i.url.lastIndexOf("/"),a=i.url.substr(0,o);return t.indexOf("../")>-1?(t=t.replace(/\..\//g,function(e){var t=a.lastIndexOf("/");return a=a.substr(0,t),""}),n=a?a+"/"+t:t):t.indexOf("./")>-1&&(n=a+"/"+t.replace(/\.\//g,"")),n},e.unit.filterField=function(n,i){var o={};if("object"===(void 0===i?"undefined":t(i))){var a="object"===e.typeof(n),r="object"===e.typeof(i),l="array"===e.typeof(n),c="array"===e.typeof(i);if(a){if(r)for(var s in i)o[s]=i[s]?n[i[s]]:n[s];else c&&i.forEach(function(e,t){o[e]=n[e]});return o}return l?(o=[],c?n.forEach(function(e,t){var n={};i.forEach(function(t,i){n[t]=e[t]}),o.push(n)}):r&&n.forEach(function(e,t){var n={};for(var a in i)n[a]=i[a]?e[i[a]]:e[a];o.push(n)}),o):void 0}}}(window.bui||{},window.libs),function(e,t){e.platform=function(){function e(e){return/Windows NT/i.test(s)}function t(){return/Macintosh/i.test(s)}function n(e){return/(Android|Linux)/i.test(s)}function i(e){return/(iPhone)/i.test(s)}function o(e){var t=!1;return 3==window.devicePixelRatio&&375==document.documentElement.clientWidth&&812==document.documentElement.clientHeight&&(t=!0),t}function a(e){return/(iPad)/i.test(s)}function r(e){return/(iPhone|iPad|iOS)/i.test(s)}function l(e){return/(micromessenger)/i.test(s)}function c(e){return/(crosswalk)/i.test(s)}var s=navigator.userAgent;return{isAndroid:n,isIphone:i,isIpad:a,isIos:r,isWeiXin:l,isBingotouch:c,isMac:t,isIphoneX:o,isWindow:e}}()}(window.bui||{},window.libs),function(e,n){e.animate=function(i){function o(t){return t.id?(L=e.objId(t.id),L.css({"-webkit-transition":z,transition:z}),P=t.open3D,F=t.zoom,B=t.animates||[],D=R.config=t,this):void e.showLog("animate id不能为空","bui.animate")}function a(e){var e=e,t=Math.abs(parseFloat(e));e="string"==typeof e&&e.indexOf("%")>-1?"-"+e:F?-t/100+"rem":-t+"px";var n="translateX("+e+")";return B.push(n),A.push(n),this}function r(e){var e=e,t=Math.abs(parseFloat(e));e="string"==typeof e&&e.indexOf("%")>-1?e:F?t/100+"rem":t+"px";var n="translateX("+e+")";return B.push(n),A.push(n),this}function l(e){var e=e,t=Math.abs(parseFloat(e));e="string"==typeof e&&e.indexOf("%")>-1?"-"+e:F?-t/100+"rem":-t+"px";var n="translateY("+e+")";return B.push(n),A.push(n),this}function c(e){var e=e,t=Math.abs(parseFloat(e));e="string"==typeof e&&e.indexOf("%")>-1?e:F?t/100+"rem":t+"px";var n="translateY("+e+")";return B.push(n),A.push(n),this}function s(e){var t=String(e),e=t.indexOf(",")>-1?t:e+",1",n="scale("+e+")";return B.push(n),A.push(n),this}function u(e){var e=String(e),t="scaleX("+e+")";return B.push(t),A.push(t),this}function d(e){var e=String(e),t="scaleY("+e+")";return B.push(t),A.push(t),this}function f(e){var t=String(e),e=t.indexOf("deg")>-1?t:t+"deg",n="rotate("+e+")";return B.push(n),A.push(n),this}function h(e){var t=String(e),e=t.indexOf("deg")>-1?t:t+"deg",n="rotateX("+e+")";return B.push(n),A.push(n),this}function p(e){var t=String(e),e=t.indexOf("deg")>-1?t:t+"deg",n="rotateY("+e+")";return B.push(n),A.push(n),this}function g(e){var e,t=String(e),i=[];t.indexOf(",")>-1?(i=t.split(","),e="",n.each(i,function(t,n){t<2&&(e+=n.indexOf("deg")>-1?","+n:","+n+"deg")}),e=e.substr(1)):e=t.indexOf("deg")>-1?t:t+"deg,0";var o="skew("+e+")";return B.push(o),A.push(o),this}function v(e){var t=String(e),e=t.indexOf("deg")>-1?t:t+"deg",n="skewX("+e+")";return B.push(n),A.push(n),this}function m(e){var t=String(e),e=t.indexOf("deg")>-1?t:t+"deg",n="skewY("+e+")";return B.push(n),A.push(n),this}function b(e){var t=String(e);return L.css({"-webkit-transform-origin":t,"transform-origin":t}),this}function w(e,t){var n=t||"ease-out";return z="number"==typeof e?"all "+e+"ms "+n:0==e||"none"==e?"none":1==e?"all 300ms "+n:e||"all 300ms "+n,L.css({"-webkit-transition":z,transition:z}),this}function y(){return B=[],A=[],M=[],V=0,this}function x(e){return q&&(w(),q=!1),L.css({"-webkit-transform":"",transform:""}),"none"!=z&&L.one("webkitTransitionEnd",function(){e&&e.call(R,this)}),y(),this}function k(e){var t=P?A.join("")+"translateZ(0)":A.join("");try{M[V]=[],M[V].push(B.join("")),B=[],V++}catch(e){}return L.css({"-webkit-transform":t,transform:t}),"none"!=z?L.one("webkitTransitionEnd",function(){e&&e.call(R,this)}):e&&e.call(R,this),this}function I(e){function t(e){var a=e[i]||[],r=e[i+1]||[];n=P?a.join("")+"translateZ(0)":a.join(""),n=A.join("")+n.replace(/\(.*?\)/g,"(0)"),L.css({"-webkit-transform":"",transform:""}),i++;try{L.one("webkitTransitionEnd",function(){if(!r||!r.length)return i=0,void(historyCache=[]);t(o)})}catch(e){}}var n,i=0,o=M.reverse();return t(o),this}function T(e,t){return L.css({"-webkit-transform":e,transform:e}),t&&"none"!=w&&L.one("webkitTransitionEnd",function(){t.call(R,this)}),this}function O(e){return e=parseFloat(e)||100,P=!0,L.parent().css({perspective:e+"px"}),this}function C(e,n){var i={};return"object"===(void 0===e?"undefined":t(e))?(i=e,n=""):"string"==typeof e&&(i[e]=n||""),L.css(i),this}function j(t){var n={};return e.widget.call(n,t)}function S(t,n){return e.option.call(R,t,n)}var E={id:"",zoom:!0,open3D:!1,animates:[]};if("object"===(void 0===i?"undefined":t(i))&&i.id)i=i||{};else{var N=i||"";i={},i.id=N}var L,P,F,B,R={origin:b,transition:w,property:C,open3D:O,transform:T,start:k,stop:x,clear:y,left:a,right:r,up:l,down:c,scale:s,scaleX:u,scaleY:d,rotate:f,rotateX:h,rotateY:p,skew:g,skewX:v,skewY:m,reverse:I,widget:j,option:S,config:D,init:o},D=R.config=n.extend(!0,{},E,i),A=[],M=[],z="all 300ms ease-out";o(D);var V=0,q=!1;return R}}(window.bui||{},window.libs),function(e,t){e.mask=function(n){function i(n){j=!1;var i=t.extend(!0,w,x,n);return i.onBeforeInit&&i.onBeforeInit.call(y,i),i.appendTo=i.appendTo||"body",T=e.objId(i.appendTo),x=y.config=i,m=T.css("position"),i.autoTrigger&&r(i),O=e.objId(i.id),i.onInited&&i.onInited.call(y,i),this}function o(e){var t=function(t){e.callback&&e.callback.call(y,t),e.autoClose&&s(),t.stopPropagation()};O.off("click.bui").on("click.bui",t),C=!0}function a(t){var n=t.background?t.background:"rgba(0,0,0,"+t.opacity+")",i="";return i+='<div id="'+I+'" class="'+e.prefix("mask")+'" style="background:'+n+";z-index:"+t.zIndex+'"></div>'}function r(n){if(!j){var i=t.extend(!0,{},w,x,n),r=a(i);return O=e.objId(I),O&&O.length?O.css("display","block"):(T.append(r).css("position","relative"),O=e.objId(I)),b=!0,v.call(y,"show"),C||o(i),this}}function l(){if(!j)return O&&O.remove(),O=null,T.css("position",m||"static"),b=!1,C=!1,v.call(y,"hide"),this}function c(t){if(!j)return O=e.objId(I),O&&O.length?(O.css("display","block"),T.css("position","relative"),b=!0):r(x),v.call(y,"show"),this}function s(){if(!j)return O&&O.css("display","none"),T.css("position","relative"),b=!1,v.call(y,"hide"),this}function u(){return b}function d(e){l(),T&&T.off("click.mask"),g("show"),g("hide"),j=!0}function f(t){var n={};return e.widget.call(n,t)}function h(t,n){return e.option.call(y,t,n)}function p(t,n){return e.on.apply(y,arguments),this}function g(t,n){return e.off.apply(y,arguments),this}function v(t){y.self=this==window||this==y?null:this,e.trigger.apply(y,arguments)}var m,b,w={id:"",appendTo:"",opacity:.3,background:"",zIndex:100,autoTrigger:!1,autoClose:!1,onBeforeInit:null,onInited:null,callback:null},y={handle:{},on:p,off:g,hide:s,show:c,isShow:u,remove:l,destroy:d,widget:f,option:h,config:x,init:i},x=y.config=t.extend(!0,{},w,e.config.mask,n),k=e.guid(),I=x.id?x.id.indexOf("#")>-1?x.id.substring(1):x.id:k,T=(t("body"),e.objId(x.appendTo)),O=null,C=!1,j=!1;return i(x),y}}(window.bui||{},window.libs),function(e,t){e.loading=function(n){function i(i){L=!1;var o=t.extend(!0,{},O,i);return o.onBeforeInit&&o.onBeforeInit.call(T,n),o.appendTo=o.appendTo||"body",C=t(o.appendTo),O=T.config=o,o.autoTrigger&&E.length<1&&r(o),E=e.objId(j),o.onInited&&o.onInited.call(T,o),this}function o(e){var t=e||O,n=function(e){t.callback&&t.callback.call(T,e),e.stopPropagation()};return C.off("click.bui","#"+j).on("click.bui","#"+j,n),N=!0,this}function a(t){t=t||{};var n=t.text,i=C.width()||document.documentElement.clientWidth,o=n&&"block"==t.display?parseInt(t.height)+30:parseInt(t.height),a=-i/2,r=-o/2,l="block"==t.display?e.prefix("loading-block"):e.prefix("loading-inline"),c="";return c+='<div id="'+j+'" class="'+e.prefix("loading")+" "+l+'" style="width:'+i+"px;height:"+o+"px;line-height:"+o+"px;margin-left:"+a+"px;margin-top:"+r+"px;"+(t.zIndex?"z-index:"+t.zIndex:"")+'" >',t.onlyText||(c+='<div class="'+e.prefix("loading-cell")+'" style="width:'+parseFloat(t.width)+"px;height:"+parseFloat(t.height)+'px;"></div>'),c+='<div class="'+e.prefix("loading-text")+'">'+t.text+"</div>",c+="</div>",t&&t.template?t.template.call(T,t):c}function r(n){if(!L){var i=t.extend(!0,{},O,n);if(E=e.objId(j),k=E.children(".bui-loading-cell"),E.hasClass("bui-loading-pause"))E.removeClass("bui-loading-pause"),y.call(this,"start");else{E.length&&E.remove();var r=a(i);C.append(r),D&&D.show(),y.call(this,"show")}return i.timeout&&(F&&clearTimeout(F),F=setTimeout(function(){d()},i.timeout)),N||o(i),P=!0,this}}function l(t){if(!L){E=e.objId(j),x=E.children(".bui-loading-text");return void 0===t?x&&x.text():(x&&x.text(t),this)}}function c(){if(!L)return E=e.objId(j),k=E.children(".bui-loading-cell"),k.css("display","inline-block"),E.removeClass("bui-loading-pause"),this}function s(){if(!L)return E=e.objId(j),k=E.children(".bui-loading-cell"),k.css("display","none"),E.addClass("bui-loading-pause"),this}function u(){return P}function d(){if(!L)return E=e.objId(j),E&&E.remove(),E=null,D&&D.remove(),N=!1,P=!1,y.call(this,"remove"),y.call(this,"hide"),this}function f(){if(!L)return E&&E.addClass("bui-loading-pause"),y.call(this,"pause"),this}function h(n){var i=n||{};if(!L){var o=t.extend(!0,O,i);return E=e.objId(o.id),E&&E.length?(l(o.text),E[0].style.display="-webkit-box",D&&D.show(),y.call(this,"show")):r(o),O.timeout&&(F&&clearTimeout(F),F=setTimeout(function(e){p()},O.timeout)),P=!0,this}}function p(){if(!L)return E=e.objId(j),O.appendTo?(E.css("display","none"),D&&D.hide()):E&&E.length&&(E.css("display","none"),D&&D.hide()),P=!1,y.call(this,"hide"),this}function g(e){var e=1==e;d(),C&&C.off("click.bui"),w("show"),w("hide"),w("start"),w("stop"),w("pause"),w("remove"),D&&D.destroy(e),L=!0}function v(t){var n={mask:D||{}};return e.widget.call(n,t)}function m(t,n){return e.option.call(T,t,n)}function b(t,n){return e.on.apply(T,arguments),this}function w(t,n){return e.off.apply(T,arguments),this}function y(t){T.self=this==window||this==T?null:this,e.trigger.apply(T,arguments)}var x,k,I={appendTo:"",width:30,height:30,text:"",onlyText:!1,mask:!0,zIndex:"",autoTrigger:!1,autoClose:!0,timeout:0,opacity:0,display:"block",template:null,onBeforeInit:null,onInited:null,callback:null},T={handle:{},on:b,off:w,start:r,stop:d,isLoading:u,pause:f,text:l,showRing:c,hideRing:s,show:h,hide:p,destroy:g,widget:v,option:m,config:O,init:i},O=T.config=t.extend(!0,{},I,e.config.loading,n),C=(t("body"),null),j=e.guid(),S=j+"-mask",E=e.objId(j),N=!1,L=!1,P=!1,F=null;O.id=j;var B=O.callback;O.callback=function(e){O.autoClose&&d(),B&&B.call(T,e)};var R=t.extend(!0,{},O,{id:S}),D=O.mask?e.mask(R):null;return i(O),T}}(window.bui||{},window.libs),function(e,t){e.slide=function(n){function i(n){var i=t.extend(!1,pe,n);if(!1===(i.onBeforeInit&&i.onBeforeInit.call(he,i)))return this;if(!i.id)return void e.showLog("slide id不能为空","bui.slide.init");if(V=e.obj(i.id),pe=he.config=i,Q=i.direction,"function"==typeof i.template)V.html(i.template.call(he,i.data||[])||"");else if(i.data&&!i.template){var l=V.find(i.main).length<=0;if(l){var c=L(i);V.html(c)}var s=V.find(i.children),u=P.call(he,i.data);s.html(u)}if(i.needLoading&&(xe=bui.loading({appendTo:V})),q=0==i.menu.indexOf("#")?e.obj(i.menu):V.find(i.menu).eq(0),H=q.children(),U=V.find(i.children).eq(0),_=U.parent(),W=U.children(),ue=W.length,i.loop&&W.length){var d=W.eq(W.length-1).clone(!0),f=W.eq(0).clone(!0);U.prepend(d).append(f),W=U.children();var h=W.length-1;M("afterto"),A("afterto",function(e){0==e&&g(h-1,"none"),e==h&&g(1,"none")}),g(1,"none");!V.hasClass(".bui-slide-loop")&&V.addClass("bui-slide-loop"),be=!0}if(i.cross&&W.length){var p=function(e){var t=W.eq(e);t.removeClass("bui-cross-prev").removeClass("bui-cross-next"),t.prev().removeClass("bui-cross-next").addClass("bui-cross-prev"),t.next().removeClass("bui-cross-prev").addClass("bui-cross-next")};!V.hasClass(".bui-slide-cross")&&V.addClass("bui-slide-cross"),M("to",p),A("to",p),g(1,"none"),we=!0}return o(i),r(i),se=i.autoplay,se&&v(),me||(a(),Te=!0),ve=U.children(".active").length?U.children(".active").index():ve||i.index,parseInt(i.index)>0?g(i.index,"none"):g(ve,"none"),i.onInited&&i.onInited.call(he,i),this}function o(e){re=document.documentElement.clientWidth,le=document.documentElement.clientHeight,e.height=String(e.height).indexOf("%")>-1?parseFloat(e.height)/100*le:parseFloat(e.height),e.width=String(e.width).indexOf("%")>-1?parseFloat(e.width)/100*re:parseFloat(e.width);var t=V.parents(".bui-page"),n=(V.parents("main"),V[0]&&V[0].offsetTop||0),i=t.children(e.header),o=i[0]&&i[0].offsetHeight||0,a=t.children(e.footer),r=a[0]&&a[0].offsetHeight||0;ie=le-(o||0)-(r||0)-n,oe=0==e.height?ie:e.height;var l="static"==q.parent().css("position")?q.css("position"):q.parent().css("position");ae=V.find(e.menu).length?"absolute"==l||"fixed"==l?oe:oe-(q[0]&&q[0].offsetHeight||0):oe,Z=e.fullscreen?le:0==e.height?ae:e.height,X=e.fullscreen?re:e.width||re,$=W.length,G="x"==Q?X/pe.visibleNum:X,ne="y"==Q?Z/pe.visibleNum:Z,ce="y"==pe.direction?ne*pe.scrollNum:G*pe.scrollNum,Y=X*$/pe.visibleNum,J=Z*$/pe.visibleNum}function a(){var e=function(e){var n=t(this).hasClass("active"),i=t(this).index(),o=t(this).attr("disabled"),a=t(this).hasClass("disabled")||""==o||"true"==o||"disabled"==o;if(e.currentIndex=i,e.prevIndex=ve,!1===(pe.onBeforeTo&&pe.onBeforeTo.call(he,e)))return!1;n||a||(pe.animate?g(i):g(i,"none"),k(i),se&&v()),e.stopPropagation()};0==pe.menu.indexOf("#")?q.off("click.bui","li").on("click.bui","li",e):V.off("click.bui",pe.menu+" li").on("click.bui",pe.menu+" li",e),V.off("click.bui",pe.prev).on("click.bui",pe.prev,y),V.off("click.bui",pe.next).on("click.bui",pe.next,x);var n=pe.children+" "+pe.item;pe.data&&V.off("click.bui",n).on("click.bui",n,function(e){var n=t(e.currentTarget),i=n.attr("href"),o="true"==n.attr("data-reload"),a="true"==n.attr("data-iframe");i&&bui.load({url:i,reload:o,iframe:a}),z.call(he,"click",e),pe.callback&&pe.callback.call(he,e,he),e.stopPropagation()}),T(),pe.swipe||I(),me=!0}function r(e){Oe={x:{swipeDir:"swipeleft",swipeDir2:"swiperight",width:ce},y:{swipeDir:"swipeup",swipeDir2:"swipedown",width:ce}},de={x:{parentInitKey:"width",parentInitValue:Y,boxCss:"display:-webkit-box;display:box;-webkit-box-align: start;-webkit-box-pack: center;width:100%;",boxItemCSS:"-webkit-box-flex:1;box-flex:1;width:"+G+"px;height:"+ne+"px;"},y:{parentInitKey:"height",parentInitValue:J,box:"display:-webkit-box;display:box;-webkit-box-align: start;-webkit-box-pack: center;width:100%;-webkit-box-orient: vertical;box-orient: vertical;",boxItemCSS:"-webkit-box-flex:1;box-flex:1;width:"+G+"px;height:"+ne+"px;"}},W=U.children(),ue=W.length,_[de[Q].parentInitKey](de[Q].parentInitValue);var n,i=W.length;for(n=0;n<i;n++){var o=W[n].getAttribute("data-scroll"),a=null==o?pe.scroll:"false"!=o;de[Q].boxItemCSS=de[Q].boxItemCSS+(a?"overflow:auto;":"overflow:hidden;"),W[n].style.cssText=de[Q].boxItemCSS}try{U[0]&&(U[0].style.cssText=de[Q].boxCss)}catch(e){console.log("请检查下children参数是否正确.","bui.slide id:"+pe.id)}var r="y"==Q&&pe.visibleNum>1?ae/pe.visibleNum:ae,c=pe.zoom?oe/100+"rem":oe+"px",s=pe.zoom?r/100+"rem":r+"px";pe.zoom;if(pe.fullscreen?(t("main").css({position:"static"}),V.addClass("bui-slide-fullscreen").css({position:"absolute",top:0,left:0,right:0,bottom:0,"z-index":10,overflow:"hidden",width:X,height:le}),W.addClass(pe.alignClassName||"bui-box-center").css("height",le)):(V.css({position:"relative",overflow:"hidden",width:X,height:c}),W.addClass(pe.alignClassName).height(s)),pe.autoheight&&V.addClass("bui-slide-autoheight"),pe.autopage){var u=l(),d=U.find(".active").index()+1,f=O(u,d);V.children(".bui-slide-head").remove(),V.append(f),H=V.find(pe.menu).eq(0).children()}}function l(){var e=W.length,t=e-pe.visibleNum;return e%pe.scrollNum!=0?t+1:t/pe.scrollNum+1}function c(t){var n=t.originalEvent&&t.originalEvent.targetTouches||t.targetTouches,i=je?n[0]:t;return ge.x1=i.pageX,ge.y1=i.pageY,ge.direction="",!1!==(pe.onBeforeTouchstart&&pe.onBeforeTouchstart.call(he,t,ge))&&(pe.stopHandle&&e.unit.checkTargetInclude(t.target,pe.stopHandle)?void(Ne=!1):(Pe=-ve*ce,Fe=-ve*ce,n.length>1||t.scale&&1!==t.scale?void f("x"==Q?Pe:Fe):(se&&(m(),se=!0),z.call(he,"touchstart",t,ge),pe.onStart&&pe.onStart.call(he,t,ge,he),void(Ne=!0))))}function s(n){var i=n.originalEvent&&n.originalEvent.targetTouches||n.targetTouches;if(i.length>1||n.scale&&1!==n.scale)return void f("x"==Q?Pe:Fe);if(Ne){var o=je?i[0]:n;ge.x2=o.pageX,ge.y2=o.pageY;if(!1===(pe.onBeforeTouchmove&&pe.onBeforeTouchmove.call(he,n,ge)))return!1;ge.direction||(ge.direction=e.swipeDirection(ge.x1,ge.x2,ge.y1,ge.y2)),"swipeleft"!==ge.direction&&"swiperight"!==ge.direction||(n.preventDefault(),n.stopPropagation()),z.call(he,"touchmove",n,ge);try{if("y"==Q&&pe.scroll){var a=t(n.target).closest(".active"),r=a[0].scrollTop||0,c=a[0].scrollHeight||0,s=a[0].offsetHeight||0;if("swipedown"===ge.direction&&r>1)return void(Le=!1);if("swipeup"===ge.direction&&c-r-s>=2)return void(Le=!1)}}catch(n){}ee=ge.x2-ge.x1,te=ge.y2-ge.y1,Oe.x.move=Pe+ee,Oe.x.absDelta=Math.abs(ee),Oe.y.move=Fe+te,Oe.y.absDelta=Math.abs(te);var u=l();ge.direction!==Oe[Q].swipeDir&&ge.direction!==Oe[Q].swipeDir2||(pe.delay&&Oe[Q].absDelta>pe.distance&&f(Oe[Q].move,"none"),pe.delay||(pe.bufferEffect?f(Oe[Q].move,"none"):0==ve&&u>1&&("swipeleft"==ge.direction||"swipeup"==ge.direction)?f(Oe[Q].move,"none"):ve==u-1&&u>1&&("swiperight"==ge.direction||"swipedown"==ge.direction)?f(Oe[Q].move,"none"):ve>0&&ve<u-1&&u>1&&f(Oe[Q].move,"none"),n.preventDefault()),pe.onMove&&pe.onMove.call(he,n,ge,he)),Le=!0}}function u(e){switch(z.call(he,"touchend",e,ge),ge.direction){case"swiperight":case"swipedown":e.currentIndex=ve-1;break;case"swipeleft":case"swipeup":e.currentIndex=ve+1}if(e.prevIndex=ve,!1===(pe.onBeforeTouchend&&pe.onBeforeTouchend.call(he,e,ge)))return!1;if(Le){if(ee=ge.x2-ge.x1,te=ge.y2-ge.y1,Oe.x.delta=Pe,Oe.x.absDelta=Math.abs(ee),Oe.y.delta=Fe,Oe.y.absDelta=Math.abs(te),"x"!=pe.direction||"swipeleft"!=ge.direction&&"swiperight"!=ge.direction){if("y"==pe.direction&&("swipeup"==ge.direction||"swipedown"==ge.direction))var t=pe.onBeforeTo&&pe.onBeforeTo.call(he,e)}else var t=pe.onBeforeTo&&pe.onBeforeTo.call(he,e);if(!1===t)return f(Oe[Q].delta),"swipeleft"!=ge.direction&&"swiperight"!=ge.direction||e.stopPropagation(),Se+=ge.y2-ge.y1,Ee+=ge.x2-ge.x1,ge.lastX=Ee,ge.lastY=Se,ge={x1:0,x2:0,y1:0,y2:0,direction:""},Ne=!1,Le=!1,p(),!1;Oe[Q].absDelta>pe.distance?(d.call(this,e,ge,Oe),pe.onEnd&&pe.onEnd.call(he,e,ge,he)):Oe[Q].absDelta<pe.distance&&f(Oe[Q].delta),se&&v(),"swipeleft"!=ge.direction&&"swiperight"!=ge.direction||e.stopPropagation(),Se+=ge.y2-ge.y1,Ee+=ge.x2-ge.x1,ge.lastX=Ee,ge.lastY=Se,ge={x1:0,x2:0,y1:0,y2:0,direction:""},Ne=!1,Le=!1,p()}}function d(e,t,i){ve=U.children(".active").index();var o;if(t.direction==i[Q].swipeDir){var a=W.length,r=a-pe.visibleNum,l=a%pe.scrollNum!=0?r+1:r/pe.scrollNum+1;if(ve>=l-1)o=ve,i[Q].delta=-o*i[Q].width,f(i[Q].delta),ve=o,k(o),z.call(he,"last",o);else if(o=ve+1,i[Q].delta=-o*i[Q].width,f(i[Q].delta),ve=o,k(o),n.autoload)C(ve);else{W.eq(ve);if(n.loop&&ve>ue)return;z.call(he,"to",o)}z.call(he,"next",o)}else if(t.direction==i[Q].swipeDir2)if(ve>0){if(o=ve-1,i[Q].delta=-o*i[Q].width,f(i[Q].delta),ve=o,k(o),n.autoload)C(ve);else{W.eq(ve);if(n.loop&&0==ve)return;z.call(he,"to",o)}z.call(he,"prev",o)}else o=ve,i[Q].delta=-o*i[Q].width,f(i[Q].delta),ve=o,k(o),z.call(he,"first",o)}function f(e,t){var n=pe.transition,t=t||"all "+n+"ms",e=e||0;switch(Q){case"x":h(e+"px",0,t,_);break;case"y":h(0,e+"px",t,_)}return this}function h(e,t,n,i){var o=t||0;"y"==Q&&pe.zoom&&String(t).indexOf("%")<=-1&&(o=parseInt(t)/100+"rem");var n,i=i||V,e=e||0,a=e,r=String(e).indexOf("%")>-1?String(e):a,l=String(t).indexOf("%")>-1?String(t):o;n="number"==typeof n?"all "+n+"ms":n||"all 300ms";try{i.css({"-webkit-transition":n,transition:n,"-webkit-transform":"translate("+r+","+l+")",transform:"translate("+r+","+l+")"})}catch(e){console.log(e.message)}}function p(e){_.one("webkitTransitionEnd",function(){_.css({"-webkit-transition":"none",transition:"none"}),
e&&e.call(he,ve),z.call(he,"afterto",ve)})}function g(e,i,o){var a=0,r=null,o=0!=o;if("string"==typeof e&&e.indexOf(".html")>-1){var c=[];H.each(function(n,i){var o=t(i).attr("href")||void 0;c[n]=o,o==e&&(a=n)})}else a=parseInt(e);"function"==typeof i&&(r=i,i="");var s={x:{transform:-a*parseFloat(ce)},y:{transform:-a*parseFloat(ce)}},u=l();if(t(".bui-slide-video video").each(function(e,t){this.pause()}),a>=u||a<0)return!1;if(f(s[Q].transform,i),ve=a,k(a),se&&v(),n.autoload)C(ve);else{W.eq(ve);if(!o)return;z.call(he,"to",a)}return p(r),this}function v(e){var e=e||pe.interval;m(),se=!0;var t=ve;K=setInterval(function(){var e=l();t>=0&&t<e-1?t+=1:t=0,g(t)},e),z.call(he,"play")}function m(e){if(K)try{window.clearInterval(K),se=!1,z.call(he,"stop")}catch(e){}return this}function b(e){v(e)}function w(){return ve}function y(){var e=ve-1;return pe.loop&&-1==e&&(e=ue),g(e),z.call(he,"prev",e),this}function x(){var e=ve+1;return pe.loop&&e>ue+1&&(e=1),g(e),z.call(he,"next",e),this}function k(e){e=e||0,W.removeClass("active"),W.eq(e).addClass("active"),H.removeClass("active"),H.eq(e).addClass("active")}function I(){return V.off("touchstart",c).off("touchmove",s).off("touchend",u).off("touchcancel"),z.call(he,"lock"),this}function T(e){return V.on("touchstart",c).on("touchmove",s).on("touchend",u).on("touchcancel",function(){f("x"==Q?Pe:Fe)}),z.call(he,"unlock"),this}function O(e,t){var n,i="",t=t||1;for(i+='<div class="bui-slide-head">',i+="<ul >",n=1;n<Number(e)+1;n++)i+="<li "+(n==t?'class="active"':"")+">"+n+"</li>";return i+="</ul >",i+="</div >"}function C(n){var i=W.eq(n),o=H.eq(n),a=o.attr("href")||"";if(e.array.compare(ke,n))return z.call(he,"to",n,"200"),!1;pe.autoload&&(a?(a=e.unit.resolvePath(a),a in ye?(i.html(ye[a]),ke.push(n),!Te&&z.call(he,"load",n,status),!Te&&z.call(he,"to",n,status),Te=!1):(ye[a]="",xe&&xe.show(),t.ajax({url:a,dataType:"html",async:pe.async,success:function(e,t){ye[a]=e,i.html(e),ke.push(n),z.call(he,"load",n,t),!Te&&z.call(he,"to",n,t),Te=!1,xe&&xe.hide()},error:function(e,t){z.call(he,"loadfail",n,t),xe&&xe.hide()}}))):(!Te&&z.call(he,"to",n),Te=!1))}function j(t){var n,i=e.guid(),t=t||1,o="";for(n=0;n<t;n++)o+='<li id="'+i+'" style="-webkit-box-flex:1;box-flex:1;width:'+G+"px;height:"+ne+'px;"></li>';U.append(o),W=U.children();var a=G*W.length;$=W.length,_.width(a)}function S(n){var i={id:null,url:"",preload:!1,param:{},success:null,fail:null},o=t.extend(!0,{},i,n),a=o.url||"",r=null,l=W.length?ve+1:0;if(o.id)r=e.obj(o.id);else{var c=W.eq(l);c.length?r=c:(j(),W=U.children(),r=W.eq(l))}if(a)if(ve=l,Ie[l]=o.param,a in ye){e.array.compare(ke,l)||(ke.push(l),r.html(ye[a]),o.success&&o.success.call(he,ye[a],"cache"),z.call(he,"load",ye[a],"cache")),o.preload||g(l)}else t.ajax({url:a,success:function(t,n){t?(ye[a]=t,e.array.compare(ke,l)||(ke.push(l),r.html(ye[a]),o.success&&o.success.call(he,ye[a],n),z.call(he,"load",t,n)),o.preload||g(l)):(o.fail&&o.fail.call(r,t,n),z.call(he,"loadfail",t,n))},error:function(e,t){o.fail&&o.fail.call(he,e,t),z.call(he,"loadfail",e,t)}});return this}function E(e){var e="number"==typeof e?e:ve;return Ie[e]||{}}function N(e){return W.eq(ve)[0]}function L(e){return'<div class="'+e.main.substr(1)+'">\n              <ul class="bui-slide-main-ul">\n              </ul>\n            </div>'}function P(e){var e=e||[],t="";return e.length&&e.forEach(function(e,n){var i=e.title?'<div class="bui-slide-title">'+e.title+"</div>":"",o=e.background?'<div class="bui-slide-img" style="background-image:url('+e.background+')"></div>':'<div class="bui-slide-img"><img src="'+e.image+'" alt="'+(e.title||"")+'"/></div>',a="";e.video&&(a='<div class="bui-slide-video">\n                        <video class="bui-video" src="'+e.video.src+'" width="'+(e.video.width?e.video.width:"100%")+'" height="'+(e.video.height?e.video.height:"100%")+'" poster="'+(e.video.poster?e.video.poster:"")+'" '+(e.video.preload?"preload":"")+" "+(e.video.muted?"muted":"")+" "+(e.video.autoplay?"autoplay":"")+" "+(e.video.controls?"controls":"")+" "+(e.video.loop?"loop":"")+" "+(e.video.fullscreen?"fullscreen":"")+"></video>\n                        </div>"),t+='<li data-id="'+(e.id||"")+'" href="'+(e.url||"")+'" data-reload="'+(e.reload||!1)+'" data-iframe="'+(e.iframe||!1)+'">\n                  '+(a||o)+"\n                  "+i+"\n                  </li>"}),t}function F(e){var i=t.extend(!0,{},n,e);return o(i),r(i),g(ve,"none"),this}function B(e){var e=1==e;m(),q&&(q.off("click.bui"),e&&q.remove()),V&&(V.off(),e&&V.remove()),M("stop"),M("play"),M("first"),M("last"),M("to")}function R(t){var n={loading:xe};return e.widget.call(n,t)}function D(t,n){return e.option.call(he,t,n)}function A(t,n){return e.on.apply(he,arguments),this}function M(t,n){return e.off.apply(he,arguments),this}function z(t){he.self=this==window||this==he?null:this,e.trigger.apply(he,arguments)}var V,q,H,U,_,W,$,K,Y,J,X,Z,Q,G,ee,te,ne,ie,oe,ae,re,le,ce,se,ue,de,fe={id:"",menu:".bui-slide-head > ul",children:".bui-slide-main > ul",main:".bui-slide-main",header:"header",footer:"footer",item:"li",prev:".bui-slide-prev",next:".bui-slide-next",alignClassName:"",stopHandle:"",width:0,height:0,data:null,zoom:!0,transition:200,interval:5e3,swipe:!0,animate:!0,delay:!1,bufferEffect:!0,visibleNum:1,scrollNum:1,distance:40,direction:"x",autoplay:!1,loop:!1,cross:!1,autoheight:!1,autoinit:!0,scroll:!1,index:0,fullscreen:!1,autopage:!1,autoload:!1,needLoading:!1,async:!0,template:null,callback:null,onBeforeTouchstart:null,onBeforeTouchmove:null,onBeforeTouchend:null,onBeforeTo:null,onBeforeInit:null,onInited:null,onStart:null,onMove:null,onEnd:null},he={handle:{},on:A,off:M,to:g,load:S,resize:F,getPageParams:E,getPages:l,$active:N,prev:y,next:x,stop:m,start:b,lock:I,index:w,unlock:T,destroy:B,widget:R,option:D,config:pe,init:i},pe=he.config=t.extend(!0,{},fe,e.config.slide,n),ge={},ve=0,me=!1,be=!1,we=!1,ye={},xe=null,ke=[],Ie=[],Te=!1,Oe={x:{},y:{}},Ce=/hp-tablet/gi.test(navigator.appVersion),je="ontouchstart"in window&&!Ce,Q="",Se=0,Ee=0,Ne=!1,Le=!1,ge={x1:0,x2:0,y1:0,y2:0,direction:""};try{pe.autoinit&&i(pe)}catch(t){e.showLog(t)}var Pe,Fe;return he}}(window.bui||{},window.libs),function(e,t){e.swipe=function(){var n=null,i=null;return function(o){function a(i){var o=t.extend(!0,X,i);return o.onBeforeInit&&o.onBeforeInit.call(J,o),pe=!1,o.id?(D=e.obj(o.id),V=o.width>0?o.width:Ie.clientWidth,q=o.height>0?o.height:Ie.clientHeight,A=D.children(o.handle),M=G?D.children():D,U=M.children(o.swipeleft),_=M.children(o.swiperight),W=M.children(o.swipeup),$=M.children(o.swipedown),K=parseFloat(o.movingDistance),z=K,c(),ee||(r(o),ee=!0),n&&n.close(),de||(N(),S()),o.onInited&&o.onInited.call(J,o),this):void e.showLog("swipe id不能为空","bui.swipe.init")}function r(e){M.css({width:V,position:"relative",overflow:"hidden"}),!G&&M.css({height:q}),A.css({position:"relative","z-index":10});try{var t=U.attr("data-moving")||K,n=_.attr("data-moving")||K,i=W.attr("data-moving")||K,o=$.attr("data-moving")||K,a=l(t),r=l(n),c=l(i),s=l(o);ne&&U.css({width:a}),te&&_.css({width:r}),oe&&$.css({height:s}),ie&&W.css({height:c})}catch(e){}}function l(e){return X.zoom?e/100+"rem":e+"px"}function c(){"x"==Q?(te=!!_.length,ne=!!U.length):"y"==Q?(oe=!!$.length,ie=!!W.length):"xy"==Q&&(oe=!!$.length,ie=!!W.length,ne=!!U.length,te=!!_.length)}function s(n){var i=n.originalEvent&&n.originalEvent.targetTouches||n.targetTouches;if(i.length>1||n.scale&&1!==n.scale)return void(be=!1);if(X.stopHandle&&e.unit.checkTargetInclude(n.target,X.stopHandle))return void(be=!1);var o=me?i[0]:n;if(Z.id=X.id,Z.x1=o.pageX,Z.y1=o.pageY,Z.direction="",H=t(n.target).closest(X.handle),!1===(X.onBeforeTouchstart&&X.onBeforeTouchstart.call(J,n,Z)))return!1;R.call(J,"touchstart",n,Z);var a=t(n.target).closest(".bui-scroll"),l=t(n.target).closest(".bui-tab-main li.active"),s=t(n.target).closest("main"),u=t(n.target).closest(".swipedown"),d=t(n.target).closest(".swipeup"),f=u.length?u:d.length?d:H;if(Z.scrollObj=a.length?a:l.length?l:s.length?s:u.length?u:f,Te=Z.scrollObj.scrollTop()||0,G&&!ge){A=H,M=A.parent(),U=M.children(X.swipeleft),_=M.children(X.swiperight),W=M.children(X.swipeup),$=M.children(X.swipedown),c();M.index();r(X),(0==X.height||""==M[0].style.height)&&M.height(H[0]&&H[0].offsetHeight)}if(Z.movingleft=parseInt(U.attr("data-moving")||K),Z.movingright=parseInt(_.attr("data-moving")||K),Z.movingup=parseInt(W.attr("data-moving")||K),Z.movingdown=parseInt($.attr("data-moving")||K),H.length){var h=!1;switch(Q){case"x":h=!(!ne&&!te);break;case"y":h=!(!ie&&!oe);break;case"xy":h=!!(ne||te||ie||oe)}}be=void 0==h||1==h}function u(t){var o=t.originalEvent&&t.originalEvent.targetTouches||t.targetTouches;if(o.length>1||t.scale&&1!==t.scale)return void k();var a=me?o[0]:t;if(Z.x2=a.pageX,Z.y2=a.pageY,!1===(X.onBeforeTouchmove&&X.onBeforeTouchmove.call(J,t,Z)))return!1;if(R.call(J,"touchmove",t,Z),n&&t.stopPropagation(),be){var r=Z.scrollObj.scrollTop()<=0,l=(Z.scrollObj[0]&&Z.scrollObj[0].scrollHeight)-(Z.scrollObj[0]&&Z.scrollObj[0].offsetHeight)-Z.scrollObj.scrollTop()<=2,c=Z.y2-Z.y1>0,s=Z.y2-Z.y1<0;if(le){if(c&&r)return we=!1,void t.preventDefault();if(s&&l&&t.preventDefault(),s&&!l)return void(we=!1);if(c&&!r)return void(we=!1)}if(oe&&!le&&(c&&r&&t.preventDefault(),s&&l&&t.preventDefault()),!oe&&c&&r&&t.preventDefault(),ce){if(c&&r&&t.preventDefault(),s&&l)return t.preventDefault(),void(we=!1);if(s&&!l)return void(we=!1);if(c&&!r)return void(we=!1)}Z.direction||(Z.direction=e.swipeDirection(Z.x1,Z.x2,Z.y1,Z.y2)),"swipeleft"!==Z.direction&&"swiperight"!==Z.direction||t.preventDefault();try{if("swipeup"===Z.direction||"swipedown"===Z.direction){var u=D[0].scrollTop||0,d=(D[0].scrollHeight,H[0].scrollTop,H[0].scrollHeight,Z.scrollObj[0]&&Z.scrollObj[0].scrollTop||0),p=Z.scrollObj[0]&&Z.scrollObj[0].offsetHeight||0,g=Z.scrollObj[0]&&Z.scrollObj[0].scrollHeight||0,v=!1,m=!1;u<=0&&d<=0&&(v=!0),g-d-p<=2&&(m=!0)}}catch(t){}var b="swiperight"==Z.direction||"swipeleft"==Z.direction?Z.x2-Z.x1:Z.y2-Z.y1,w=0;Z.deltax=ge?Math.abs(b):Math.abs(b)+xe,!te||"swiperight"!=Z.direction||re||ge||i?!v||!oe||"swipedown"!=Z.direction||le||ge||i?!ne||"swipeleft"!=Z.direction||ae||ge||i?!m||!ie||"swipeup"!=Z.direction||ce||ge||i?"swipeleft"==Z.direction&&re?(z=Z.movingright,w=f(Z,Z.movingright),ue&&E(-Z.deltax,0,"none",i||_),se&&E(-w,0,"none",A),R.call(J,"movingleft",t,Z),we=!0,t.stopPropagation()):"swipeup"==Z.direction&&le?(z=Z.movingdown,w=f(Z,Z.movingdown),ue&&E(0,-Z.deltax,"none",i||$),se&&E(0,-w,"none",A),R.call(J,"movingup",t,Z),we=!0,t.preventDefault(),t.stopPropagation()):"swiperight"==Z.direction&&ae?(z=Z.movingleft,w=f(Z,Z.movingleft),ue&&E(Z.deltax,0,"none",i||U),se&&E(w,0,"none",A),R.call(J,"movingright",t,Z),we=!0,t.stopPropagation()):"swipedown"==Z.direction&&ce&&(z=Z.movingup,w=f(Z,Z.movingup),ue&&E(0,Z.deltax,"none",i||W),se&&E(0,w,"none",A),R.call(J,"movingdown",t,Z),we=!0,t.preventDefault(),t.stopPropagation()):(z=Z.movingup,w=h(Z,Z.movingup),ue&&E(0,w,"none",W),se&&E(0,-Z.deltax,"none",A),R.call(J,"movingup",t,Z),we=!0,t.preventDefault(),t.stopPropagation()):(z=Z.movingleft,w=h(Z,Z.movingleft),ue&&E(w,0,"none",U),se&&E(-Z.deltax,0,"none",A),R.call(J,"movingleft",t,Z),we=!0,t.stopPropagation()):(z=Z.movingdown,w=f(Z,Z.movingdown),ue&&E(0,w,"none",$),se&&E(0,Z.deltax,"none",A),R.call(J,"movingdown",t,Z),we=!0,t.preventDefault(),t.stopPropagation()):(z=Z.movingright,w=f(Z,Z.movingright),ue&&E(w,0,"none",_),se&&E(Z.deltax,0,"none",A),R.call(J,"movingright",t,Z),we=!0,t.stopPropagation())}}function d(e){if(R.call(J,"touchend",e,Z),!1===(X.onBeforeTouchend&&X.onBeforeTouchend.call(J,e,Z)))return!1;if(we){var t="swiperight"==Z.direction||"swipeleft"==Z.direction?Math.abs(Z.x2-Z.x1):Math.abs(Z.y2-Z.y1),n="";switch(Z.direction){case"swiperight":n="swipeleft";break;case"swipeleft":n="swiperight";break;case"swipeup":n="swipedown";break;case"swipedown":n="swipeup"}te&&"swiperight"==Z.direction&&t>X.distance&&!re&&!ge?(g(),R.call(J,Z.direction,e,Z),R.call(J,"open",Z.direction)):ne&&"swipeleft"==Z.direction&&t>X.distance&&!ae&&!ge?(p(),R.call(J,Z.direction,e,Z),R.call(J,"open",Z.direction)):ie&&"swipeup"==Z.direction&&t>X.distance&&!ce&&!ge?(v(),R.call(J,Z.direction,e,Z),R.call(J,"open",Z.direction)):oe&&"swipedown"==Z.direction&&t>X.distance&&!le&&!ge?(m(),R.call(J,Z.direction,e,Z),R.call(J,"open",Z.direction)):ge&&t<X.distance?(ne&&ae&&p(),te&&re&&g(),ie&&ce&&v(),oe&&le&&m(),R.call(J,Z.direction,e,Z),X.alwaysTrigger&&R.call(J,"open",Z.direction)):ge&&t>X.distance?(ne&&ae&&w(),te&&re&&b(),ie&&ce&&y(),oe&&le&&x(),R.call(J,Z.direction,e,Z),R.call(J,"close",n)):!ge&&t<X.distance&&("swipeleft"===Z.direction&&ne&&!ae&&w(),"swiperight"===Z.direction&&te&&!re&&b(),"swipeup"===Z.direction&&ie&&!ce&&y(),"swipedown"===Z.direction&&oe&&!le&&x(),X.alwaysTrigger&&R.call(J,"close",n),R.call(J,Z.direction,e,Z)),ye=Z.direction,be=!1,we=!1,e.stopPropagation()}}function f(e,t){var n=-t+e.deltax;return n=n>0?0:n}function h(e,t){var n=t-e.deltax;return n=n>t?t:n}function p(e){e=e||{},e.transition=e.transition||X.transition,e.target=e.target||U,e.handle=e.handle||A,n&&n.close(),ge=!0,ae=!0,G&&(n=J,i=U,Ie.addEventListener("click",j,!0)),ue&&E(0,0,e.transition,e.target),se&&E(-z,0,e.transition,e.handle)}function g(e){e=e||{},e.transition=e.transition||X.transition,e.target=e.target||_,e.handle=e.handle||A,n&&n.close(),ge=!0,re=!0,G&&(n=J,i=_,Ie.addEventListener("click",j,!0)),ue&&E(0,0,e.transition,e.target),se&&E(z,0,e.transition,e.handle)}function v(e){e=e||{},e.transition=e.transition||X.transition,e.target=e.target||W,e.handle=e.handle||A,n&&n.close(),ge=!0,ce=!0,G&&(n=J,i=W,Ie.addEventListener("click",j,!0)),ue&&E(0,0,e.transition,e.target),se&&E(0,-z,e.transition,e.handle)}function m(e){e=e||{},e.transition=e.transition||X.transition,e.target=e.target||$,e.handle=e.handle||A,n&&n.close(),ge=!0,le=!0,G&&(n=J,i=$,Ie.addEventListener("click",j,!0)),ue&&E(0,0,e.transition,e.target),se&&E(0,z,e.transition,e.handle)}function b(e){e=e||{},e.transition=e.transition||X.transition,e.target=_,e.handle=he||A,ge=!1,re=!1,G&&(n=null,i=null,fe=null,he=null,Ie.removeEventListener("click",j,!0)),ue&&E(-(z+1),0,e.transition,e.target),se&&E(xe,0,e.transition,e.handle)}function w(e){e=e||{},e.transition=e.transition||X.transition,e.target=U,e.handle=he||A,ge=!1,ae=!1,G&&(n=null,i=null,fe=null,he=null,Ie.removeEventListener("click",j,!0)),ue&&E("101%",0,e.transition,e.target),se&&E(-xe,0,e.transition,e.handle)}function y(e){e=e||{},e.transition=e.transition||X.transition,e.target=W,e.handle=he||A,ge=!1,ce=!1,G&&(n=null,i=null,fe=null,he=null,Ie.removeEventListener("click",j,!0)),ue&&E(0,"100%",e.transition,e.target),se&&E(0,-xe,e.transition,e.handle)}function x(e){e=e||{},e.transition=e.transition||X.transition,e.target=$,e.handle=he||A,ge=!1,le=!1,G&&(n=null,i=null,fe=null,he=null,Ie.removeEventListener("click",j,!0)),ue&&E(0,-z,e.transition,e.target),se&&E(0,xe,e.transition,e.handle)}function k(){re&&b(),ae&&w(),le&&x(),ce&&y(),R.call(J,"close",ye)}function I(){if(!pe)return k(),this}function T(e){if(!pe){var t=e||{};t.transition=t.transition||X.transition,t.index=t.index||0;var n,i=t.target;switch(ye=i,i){case"swiperight":t.target=_.eq(t.index),n=t.target.parent().index(),t.handle=G?D.children().eq(n).children(X.handle):A,he=t.handle,fe=t.target,z=_.attr("data-moving")||K,te&&g(t);break;case"swipeleft":t.target=U.eq(t.index),n=t.target.parent().index(),t.handle=G?D.children().eq(n).children(X.handle):A,he=t.handle,fe=t.target,z=U.attr("data-moving")||K,ne&&p(t);break;case"swipedown":t.target=$.eq(t.index),n=t.target.parent().index(),t.handle=G?D.children().eq(n).children(X.handle):A,he=t.handle,fe=t.target,z=$.attr("data-moving")||K,oe&&m(t);break;case"swipeup":t.target=W.eq(t.index),n=t.target.parent().index(),t.handle=G?D.children().eq(n).children(X.handle):A,he=t.handle,fe=t.target,z=W.attr("data-moving")||K,ie&&v(t);break;default:t.target=_.eq(t.index),n=t.target.parent().index(),t.handle=G?D.children().eq(n).children(X.handle):A,he=t.handle,fe=t.target,te&&g(t)}return R.call(J,"open",i),this}}function O(){return n}function C(){return ge}function j(e){var i=t(e.target),o=i.closest(U).length||i.closest(_).length||i.closest(W).length||i.closest($).length||e.target.className.indexOf("bui-mask")>-1||e.target.className.indexOf("bui-click")>-1;n&&(o||(n.close(),e.stopPropagation()))}function S(){D.on("touchstart",s).on("touchmove",u).on("touchend",d).on("touchcancel",function(){}),de=!0}function E(e,t,n,i){var n,o=i||D,e=e||0,t=t||0,a=X.zoom?parseFloat(e)/100+"rem":parseFloat(e)+"px",r=X.zoom?parseFloat(t)/100+"rem":parseFloat(t)+"px",l=String(e).indexOf("%")>-1?e:a,c=String(t).indexOf("%")>-1?t:r;return n="number"==typeof n?"all "+n+"ms":n||"all 300ms",o.css({"-webkit-transition":n,transition:n,"-webkit-transform":"translate("+l+","+c+")",transform:"translate("+l+","+c+")"}).one("webkitTransitionEnd",function(){o.css({"-webkit-transition":"none",transition:"none"})}),this}function N(){if(!pe)return D.off("touchmove",u).off("touchend",d).off("touchcancel",function(){}),R.call(J,"lock"),this}function L(){if(!pe)return D.on("touchmove",u).on("touchend",d).on("touchcancel",function(){}),R.call(J,"unlock"),this}function P(e){var e=1==e;D&&(D.off(),e&&D.remove()),B("open"),B("close"),pe=!0}function F(t,n){return e.on.apply(J,arguments),this}function B(t,n){return e.off.apply(J,arguments),this}function R(t){J.self=this==window||this==J?null:this,e.trigger.apply(J,arguments)}var D,A,M,z,V,q,H,U,_,W,$,K,Y={id:"",handle:".handle",swiperight:".swiperight",swipeleft:".swipeleft",swipeup:".swipeup",swipedown:".swipedown",direction:"x",stopHandle:"",hasChild:!1,handleMove:!0,targetMove:!0,alwaysTrigger:!1,width:0,height:0,movingDistance:280,initDistance:0,zoom:!1,distance:40,autoinit:!0,onBeforeTouchstart:null,onBeforeTouchmove:null,onBeforeTouchend:null,onBeforeInit:null,onInited:null,transition:300},J={handle:{},active:O,isActive:C,on:F,off:B,close:I,open:T,destroy:P,lock:N,unlock:L,init:a},X=J.config=t.extend(!0,{},Y,e.config.swipe,o),Z={},Q=X.direction,G=X.hasChild,ee=!1,te=!1,ne=!1,ie=!1,oe=!1,ae=!1,re=!1,le=!1,ce=!1,se=X.handleMove,ue=X.targetMove,de=!1,fe=null,he=null,pe=!1,ge=!1,ve=/hp-tablet/gi.test(navigator.appVersion),me="ontouchstart"in window&&!ve,be=!1,we=!1,Z={x1:0,x2:0,y1:0,y2:0,direction:"",deltax:0,movingleft:0,movingright:0,movingup:0,movingdown:0,scrollObj:null},ye="",xe=X.initDistance,ke=document,Ie=ke.documentElement;X.autoinit&&a(X);var Te=0;return J}}()}(window.bui||{},window.libs),function(e,t){e.sidebar=function(n){function i(n){var i=t.extend(!0,y,n);return i.onBeforeInit&&i.onBeforeInit.call(w,i),y=w.config=i,i.trigger&&(O=e.obj(i.trigger)),k=e.obj(i.handle),m||(m=e.swipe({id:i.id,handle:i.handle,movingDistance:i.width,swiperight:i.swiperight,swipeleft:i.swipeleft,direction:"x",hasChild:!1,width:0,height:0,onBeforeTouchstart:i.onBeforeTouchstart,onBeforeTouchmove:i.onBeforeTouchmove,onBeforeTouchend:i.onBeforeTouchend,handleMove:i.handleMove,zoom:i.zoom,distance:i.distance,transition:300})),y.mask&&!x&&(x=bui.mask({id:i.id+"-mask",appendTo:k,autoTrigger:!1,opacity:i.opacity,callback:function(){m.close()}})),T||(o(),i.height>0&&e.obj(i.id).height(i.height)),i.onInited&&i.onInited.call(w,i),this}function o(){var e=this;m.on("open",function(t){O&&O.addClass("active"),x&&x.show(),k.css("overflow-y","hidden"),I=!0,v.call(e,"open",t)}),m.on("close",function(){O&&O.removeClass("active"),x&&x.hide(),k.css("overflow-y","auto"),I=!1,v.call(e,"close")}),O&&O.off("click.bui").on("click.bui",function(e){if(!t(this).hasClass("disabled")){var n=t(this).attr("data-target")||"swiperight";I?r():a({target:n})}}),T=!0}function a(e){var t=e||{};return t.target=t.target||"swiperight",t.transition=t.transition||300,m.open(t),this}function r(){return m.close(),this}function l(){return m.lock(),v.call(this,"lock"),this}function c(e){return m.unlock(),v.call(this,"unlock"),this}function s(){return I}function u(){return m.active()}function d(e){var e=1==e;O&&O.off("click.bui"),g("open"),g("close"),x&&x.destroy(e),m&&m.destroy(e)}function f(t){var n={swipe:m,mask:x};return e.widget.call(n,t)}function h(t,n){return e.option.call(w,t,n)}function p(t,n){return e.on.apply(w,arguments),this}function g(t,n){return e.off.apply(w,arguments),this}function v(t){w.self=this==window||this==w?null:this,e.trigger.apply(w,arguments)}var m,b={id:"",trigger:"",handle:".bui-page",swiperight:".swiperight",swipeleft:".swipeleft",handleMove:!0,mask:!0,width:280,opacity:.1,height:0,zoom:!0,onBeforeTouchstart:null,onBeforeTouchmove:null,onBeforeTouchend:null,autoinit:!0,onBeforeInit:null,onInited:null,distance:40},w={handle:{},on:p,off:g,active:u,isActive:s,open:a,close:r,lock:l,unlock:c,destroy:d,widget:f,option:h,config:y,init:i},y=w.config=t.extend(!0,{},b,e.config.sidebar,n),x=null,k=null,I=!1,T=!1,O=null;return y.autoinit&&i(y),w}}(bui||{},libs),function(e,t){e.listview=function(n){function i(n){var i=t.extend(!0,k,n);return i.onBeforeInit&&i.onBeforeInit.call(x,i),k=x.config=i,b=e.obj(i.id),w=b.children(),w.length&&o(i),I||a(i),i.onInited&&i.onInited.call(x,i),this}function o(e){e.height>0&&b.height(e.height),e.data&&e.data.length?w.each(function(n,i){var o=t(i),a=o.attr("status"),l=e.menuHeight>0?e.menuHeight:i.offsetHeight;if(!a){var c="function"==typeof e.template?e.template.call(x,e.data):r(e);o.append(c).attr("status","1")}i.style.height||t(i).height(l)}):w.each(function(n,i){var o=e.menuHeight>0?e.menuHeight:i.offsetHeight;i.style.height||t(i).height(o)})}function a(e){var t=this,n=function(t){t.ui=x,e.callback&&e.callback.call(x,t,m)};b.off("click.bui",".bui-listview-menu .bui-btn").on("click.bui",".bui-listview-menu .bui-btn",n),m=bui.swipe({id:e.id,handle:e.handle,movingDistance:e.menuWidth,swiperight:e.swiperight,swipeleft:e.swipeleft,direction:"x",hasChild:!0,width:e.width,height:0,zoom:e.zoom,distance:e.distance,onBeforeTouchstart:e.onBeforeTouchstart,onBeforeTouchmove:e.onBeforeTouchmove,onBeforeTouchend:e.onBeforeTouchend,transition:300}),m.on("open",function(e){T=!0,v.call(t,"open",e)}),m.on("close",function(e){T=!1,v.call(t,"close",e)}),I=!0}function r(e){var n="",i="right"==e.position?e.swipeleft.substr(1):e.swiperight.substr(1);return n+='<div class="bui-listview-menu '+i+'">',t.each(e.data,function(e,t){n+='    <div class="bui-btn '+t.classname+'">'+t.text+"</div>"}),n+="</div>"}function l(){return m.active()}function c(e){var t=e||{};return t.target=t.target||("right"==k.position?k.swipeleft.substr(1):k.swiperight.substr(1)),t.transition=t.transition||300,t.index=t.index||0,m.open(t),this}function s(){return m.close(),this}function u(){return m.lock(),v.call(this,"lock"),this}function d(e){return m.unlock(),v.call(this,"unlock"),this}function f(e){var e=1==e;w&&(w.off("click.bui"),w=null),b&&(b.off("click.bui"),e&&b.remove(),b=null),g("open"),g("close"),m&&m.destroy(e),k=null,x=null}function h(t){var n={swipe:m};return e.widget.call(n,t)}function p(t,n){return e.option.call(x,t,n)}function g(t,n){return e.off.apply(x,arguments),this}function v(t){x.self=this==window||this==x?null:this,e.trigger.apply(x,arguments)}var m,b,w,y={id:"",data:[],handle:".bui-btn",swiperight:".swiperight",swipeleft:".swipeleft",position:"right",width:0,height:0,menuWidth:160,menuHeight:0,distance:80,zoom:!1,autoinit:!0,template:null,onBeforeTouchstart:null,onBeforeTouchmove:null,onBeforeTouchend:null,onBeforeInit:null,onInited:null,callback:null},x={active:l,lock:u,unlock:d,open:c,close:s,destroy:f,widget:h,option:p,config:k,init:i},k=x.config=t.extend(!0,{},y,e.config.listview,n),I=!1,T=!1;return k.autoinit&&i(k),x}}(window.bui||{},window.libs),function(e,t){e.btn=function(n){function i(n){var n=n,i=0;l.off("click.bui",u).on("click.bui",u,function(o){var a=t(this);if(!1===(d.beforeCallback&&d.beforeCallback.call(f,o)))return o.preventDefault(),o.stopPropagation(),!1;var r=n||a.attr("href"),l=a.attr("target"),u="true"===a.attr("firstAnimate"),h=a.attr("disabled"),p=a.hasClass("disabled")||""==h||"true"==h||"disabled"==h;if(r&&!p&&!(r&&r.indexOf("javascript:")>-1)){var g=a.attr("param")||"",v=g&&g.indexOf("{")>-1&&g.indexOf("}")>-1?JSON.parse(a.attr("param")):{},m=v;(a.attr("progress")?"false"!=a.attr("progress"):c)&&e.loading({autoTrigger:!0,display:"block",opacity:0,timeout:d.timeout});var b=+new Date;if(b-i<350)return!1;i=b;var w={url:r,param:m,replace:s,firstAnimate:u};return"_blank"==l?e.run({id:r,data:m}):e.load(w),o.preventDefault(),o.stopPropagation(),!1}})}function o(n,i){function o(o){if(!1===(d.beforeCallback&&d.beforeCallback.call(this,o)))return o.preventDefault(),o.stopPropagation(),!1;var r=this,l=t(r).css("background-color");if(!t(this).hasClass("disabled")&&"true"!=t(this).attr("disabled")){var c="none"==l?"#fff":l;if(i.appendTo=r,i.background=i.background||c,i.display=i.display||"inline",i.width=i.width||15,i.height=i.height||15,i.text=i.text||"加载中",i.autoClose=1==i.autoClose,i.autoTrigger=0!=i.autoTrigger,a){if(a.isLoading())return;a.show()}else a=e.loading(i);return n&&n.call(r,a,o)}}var i=i||{},a=null;d.id&&d.handle?l.off("click.bui",u).on("click.bui",u,o):l.click(o)}function a(e){function n(n){if(!1===(d.beforeCallback&&d.beforeCallback.call(this,n)))return n.preventDefault(),n.stopPropagation(),!1;var o=this;if(!t(this).hasClass("disabled")&&"true"!=t(this).attr("disabled")){var a=+new Date;return!(a-i<350)&&(i=a,e&&e.call(o,n))}}var i=0;d.id&&d.handle?l.off("click.bui",u).on("click.bui",u,n):l.click(n)}function r(){return l.off("click.bui",u),this}var l,c,s,u,d={},f={load:i,submit:o,click:a,off:r};return function(n){n&&"object"===e.typeof(n)?(d.id=n.id||"",d.handle=n.handle||"",d.progress="progress"in n&&n.progress,d.replace="replace"in n&&n.replace,d.timeout=n.timeout||3e3,d.beforeCallback=n.beforeCallback||null,l=t(d.id)):"string"==typeof n&&(d.id=n||"",d.handle="",d.progress=!1,d.replace=!1,d.timeout=3e3,d.beforeCallback=null,l=e.obj(d.id)),u=d.handle,c=d.progress,s=d.replace}(n),f}}(window.bui||{},window.libs),function(e,n){e.dialog=function(i){function o(i){var o=n.extend(!0,C,i);switch(o.onBeforeInit&&o.onBeforeInit.call(O,o),o.appendTo=o.appendTo||(e.hasRouter?router.currentPage()||"body":"body"),B=!1,k=o.effect,P=window&&window.viewport&&window.viewport.width()||document.documentElement.clientWidth,F=window&&window.viewport&&window.viewport.height()||document.documentElement.clientHeight,o.position){case"top":j="bui-dialog-top",k=o.effect||"fadeInDown";break;case"bottom":j="bui-dialog-bottom",k=o.effect||"fadeInUp";break;case"left":j="bui-dialog-left",k=o.effect||"fadeInLeft";break;case"right":j="bui-dialog-right",k=o.effect||"fadeInRight";break;case"center":j="bui-dialog-center",k=o.effect||N}o.fullscreen&&(j="bui-dialog-fullscreen",k=o.effect||N),o.render?(o.id=e.guid(),u(o),y=e.objId(o.id)):(y=e.obj(o.id),y.addClass(j).css("z-index",o.zIndex)),S=y.width()>P?P:y.width(),E=y.height()>F?F:y.height(),y.css("display","none"),x||(x=e.toggle({id:o.id,effect:k}));try{var a="object"===t(o.id)?n(o.id).attr("id")+"-mask":o.id+"-mask";i.mask&&!I&&(I=e.mask({id:a,opacity:i.opacity,appendTo:y.parent(),autoTrigger:!1,onlyOne:!0,autoClose:!1,zIndex:parseInt(i.zIndex,10)-1,callback:function(e){i.onMask&&i.onMask.call(O,e),C.autoClose&&(C.render?c(s):c())}}))}catch(t){e.showLog(t)}return L&&!C.render||d(),C=O.config=o,o.onInited&&o.onInited.call(O,o),this}function a(e){var t="";return t+='<div id="'+e.id+'" class="bui-dialog '+j+" "+e.className+'" style="display:block;z-index:'+e.zIndex+'">',e.title&&(t+='\t<div class="bui-dialog-head">'+e.title+"</div>"),t+='\t<div class="bui-dialog-main">',e.content&&(t+=e.content),t+="\t</div>",e.buttons&&e.buttons.length&&(t+='\t<div class="bui-dialog-foot bui-box">',n(e.buttons).each(function(e,n){t+='\t\t<div class="bui-btn span1 '+(n.className||"")+'" value="'+(n.value||"")+'">'+(n.name||n)+"</div>"}),t+="\t</div>"),e.close&&(t+='   <div class="bui-dialog-close">'+(e.closeText?e.closeText:'<i class="icon-close"></i>')+"</div>"),t+="</div>"}function r(t){if(!l&&!B){var i={width:C.width,height:C.height,zoom:C.zoom,fullscreen:C.fullscreen,position:C.position,scroll:C.scroll,onBeforeOpen:C.onBeforeOpen,effect:"",callback:null},o=i;"function"==typeof t?o.callback=t:"string"==typeof t?o.effect=t:t&&"object"===e.typeof(t)&&(o=n.extend(!0,{},i,t));var a=o.onBeforeOpen&&o.onBeforeOpen.call(O,{toggle:x});if(w.call(O,"beforeopen",{toggle:x}),!1===a)return this;y.css("display","block");if(0==(y.attr("status")||0)){S=String(o.width).indexOf("%")>-1?P*parseFloat(o.width)/100:o.width||y.width(),E=String(o.height).indexOf("%")>-1?F*parseFloat(o.height)/100:o.height||y.height();var r=e.unit.pxToRemZoom(S),c=e.unit.pxToRemZoom(E),s=o.zoom?r+"rem":S+"px",u=o.zoom?c+"rem":E+"px",f=o.zoom?"-"+c/2+"rem":"-"+E/2+"px",h=o.zoom?"-"+r/2+"rem":"-"+S/2+"px";if("center"!=o.position||o.fullscreen||y.css({width:s,height:u,top:"50%","margin-top":f,left:"50%","margin-left":h,right:"auto"}),o.fullscreen||y.css({width:s,height:u}),o.fullscreen&&y.addClass("bui-dialog-fullscreen"),o.scroll){var p=y.children(".bui-dialog-head"),g=y.children(".bui-dialog-foot"),v=y.children(".bui-dialog-main"),m=p.length?p.height():0,b=g.length?g.height():0,k=y.height()-m-b;v.css({height:k})}y.attr("status","1")}return I&&I.show(),x.show(function(e){l=!0,o.callback&&o.callback.call(O,{toggle:x}),w.call(O,"openafter",{toggle:x}),w.call(O,"afteropen",{toggle:x})},o.effect),L||d(),w.call(O,"open",{toggle:x}),this}}function l(e){return l}function c(t){if(l&&!B){var n={};"function"==typeof t?n.callback=t:"string"==typeof t?(n.effect=t,n.callback=C.onClose):t&&"object"===e.typeof(t)&&(n=t),n.onBeforeClose=C.onBeforeClose;var i=n.onBeforeClose&&n.onBeforeClose.call(O,{toggle:x});if(w.call(O,"beforeclose",{toggle:x}),!1===i)return this;try{x.hide(function(e){l=!1,n.callback&&n.callback.call(O,{toggle:x})},n.effect),I&&I.hide(),w.call(this,"close",{toggle:x})}catch(t){e.showLog(t,"bui.dialog.close")}return this}}function s(){try{y.remove(),I&&I.remove(),w.call(this,"remove")}catch(t){e.showLog(t,"bui.dialog.remove")}return this}function u(e){var t=a(e);return n(e.appendTo).append(t),this}function d(){return y.off("click.bui",".bui-dialog-close").on("click.bui",".bui-dialog-close",function(e){C.render?c(s):c(),C.onClose&&C.onClose.call(O,e,O),e.stopPropagation()}),y.on("click.bui",".bui-dialog-foot .bui-btn",function(e){e.target=this,C.callback&&C.callback.call(O,e,O),C.autoClose&&(C.render?c(s):c()),e.stopPropagation()}),L=!0,this}function f(t){return e.selector.call(y,t)}function h(e){var t=e||{};return T.title=C.title||"提示",T.content=C.content||"",T.close=!1,T.render=!0,T.autoClose=C.autoClose,T.mask=C.mask,T.buttons=C.buttons&&C.buttons.length?C.buttons:["确定"],T.callback=C.callback||null,o(n.extend(!0,T,t)),w.call(O,"create"),this}function p(){var e=1==e;y&&(y.off("click.bui"),y.remove(),y=null),b("open"),b("close"),I&&I.destroy(e),x&&x.destroy(e),B=!0}function g(t){var n={toggle:x,mask:I};return e.widget.call(n,t)}function v(t,n){return e.option.call(O,t,n)}function m(t,n){return e.on.apply(O,arguments),this}function b(t,n){return e.off.apply(O,arguments),this}function w(t){O.self=this==window||this==O?null:this,e.trigger.apply(O,arguments)}var y,x,k,I,T={id:"",title:"",effect:"zoomIn",content:"",className:"",appendTo:"",position:"center",fullscreen:!1,width:0,height:0,mask:!0,opacity:.6,render:!1,autoClose:!0,close:!0,scroll:!0,closeText:"",zoom:!1,zIndex:100,buttons:[],onBeforeClose:null,onBeforeOpen:null,onBeforeInit:null,autoinit:!0,onInited:null,onMask:null,onClose:null,callback:null},O={selector:f,$el:f,$:f,handle:{},on:m,off:b,open:r,close:c,isOpen:l,create:h,remove:s,destroy:p,widget:g,option:v,config:C,init:o},C=O.config=n.extend(!1,{},T,e.config.dialog,i),j="",S="",E="",N="fadeInDown",l=!1,L=!1,P=window&&window.viewport&&window.viewport.width()||document.documentElement.clientWidth,F=window&&window.viewport&&window.viewport.height()||document.documentElement.clientHeight,B=!1;return C.id&&C.autoinit&&o(C),O}}(bui||{},libs),function(e,t){e.alert=function(n,i){
var o=e.dialog(),a={};a.className="bui-alert",a.title="",a.width=580,a.height=360,a.scroll=!0,a.zIndex=111,a.position="center",a.autoClose=!0,a.zoom=!0,a.buttons=[{name:"确定",className:"primary-reverse"}],a.callback=i||function(){};var r=t.extend(a,e.config.alert),l="";try{l="string"==typeof n&&n.indexOf("<")>-1&&n.indexOf(">")>-1?"<xmp>"+n+"</xmp>":!n||"object"!==e.typeof(n)&&"array"!==e.typeof(n)?n&&"function"===e.typeof(n)?n.toString():n:JSON.stringify(n),r.content='<div class="bui-dialog-text bui-box-center" style="height:100%;">'+l+"</div>"}catch(t){e.showLog(t,"bui.alert")}return o.create(r).open(),o}}(window.bui||{},window.libs),function(e,n){e.confirm=function(i,o){var a=e.dialog(),r={};r.className="bui-confirm",r.title="",r.width=580,r.height=360,r.scroll=!0,r.zIndex=111,r.autoClose=!0,r.zoom=!0,r.position="center",r.buttons=[{name:"取消",className:""},{name:"确定",className:"primary-reverse"}],r.callback=o||function(){};var l={};return"object"===(void 0===i?"undefined":t(i))?(i.content='<div class="bui-dialog-text bui-box-center" style="height:100%;">'+i.content+"</div>",l=n.extend(r,e.config.confirm,i)):(l=n.extend(r,e.config.confirm),l.content='<div class="bui-dialog-text bui-box-center" style="height:100%;">'+i+"</div>",l.callback=o||function(){}),a.create(l).open(),a}}(window.bui||{},window.libs);e(function(e){!function(n,i){n.prompt=function(o,a){var r=n.dialog(),l={};l.className="bui-prompt",l.title="",l.width=580,l.height=400,l.scroll=!0,l.autoClose=!1,l.zoom=!0,l.zIndex=111,l.position="center",l.buttons=[{name:"取消",className:""},{name:"确定",className:"primary-reverse"}],l.callback=a||function(){},l.placeholder="",l.row=1,l.type="text",l.value="",l.onChange=null;var c={},s="",u="";switch("object"===(void 0===o?"undefined":t(o))?(c=i.extend(l,n.config.prompt,o),s=c.content||""):(c=i.extend(l,n.config.prompt),c.callback=a||function(){},s=o||""),c.type){case"number":c.content='<div class="bui-prompt-main bui-box-vertical"> <div class="bui-prompt-label">'+s+'</div> <div class="span1"> <input class="bui-prompt-text" placeholder="'+c.placeholder+'" type="'+c.type+'" value="'+c.value+'"/> </div> </div>';break;default:c.content='<div class="bui-prompt-main bui-box-vertical"> <div class="bui-prompt-label">'+s+'</div> <div class="span1"> <textarea class="bui-prompt-text" placeholder="'+c.placeholder+'" rows="'+c.row+'" >'+c.value+"</textarea> </div> </div>"}return r.create(c).open(),i("#"+r.config.id).on("change",".bui-prompt-text",function(t){u=this.value,c.onChange&&c.onChange.call(e,t)}),r.value=function(e){return void 0===e?u:(i("#"+r.config.id).find(".bui-prompt-text").val(e),u=e)},r.focus=function(e){i("#"+r.config.id).find(".bui-prompt-text").focus()},r}}(window.bui||{},window.libs)});!function(e,n){e.hint=function(i,o){function a(t){var i=n.extend(!0,T,t);return i.onBeforeInit&&i.onBeforeInit.call(I,i),x=e.guid(),S="top"===i.position?"fadeInDown":"bottom"===i.position?"fadeInUp":i.effect,T=I.config=i,l(x,i.content,O,i.appendTo),++O,j=e.objId(x),C||(C=e.toggle({id:j,effect:S,useBox:i.useBox})),E=!0,i.autoTrigger?C.show():C.hide("showIn"),i.autoClose&&(k&&clearTimeout(k),k=setTimeout(function(){i.autoTrigger?s():C.hide(),i.onClose&&i.onClose.call(I)},i.timeout)),N||r(i),i.onInited&&i.onInited.call(I,i),this}function r(e){e.showClose&&j.off("click.bui",".bui-hint-close").on("click.bui",".bui-hint-close",function(t){e.autoTrigger?s():C.hide(),e.onClose&&e.onClose.call(I,t)}),N=!0}function l(t,i,o,a){var r,l="11"+o,c=a?e.obj(a):n("body");switch(T.position){case"top":r="bui-hint-top";break;case"bottom":r="bui-hint-bottom";break;case"center":r="bui-hint-center"}var s=T.height;T.width=String(T.width).indexOf("%")>-1?750*parseFloat(T.width)/100:parseFloat(T.width),T.height=parseFloat(T.height)||0;var u=T.background?"background:"+T.background:"",d=T.width>0?"width:"+T.width/100+"rem;margin-left:-"+T.width/100/2+"rem;":"",f=T.height>0?"height:"+T.height/100+"rem;":"",h="auto"==s?"height:auto;":f,p="center"===T.position&&T.width>0?"margin-top:-"+T.height/100/2+"rem;":"",g=u+";z-index:"+l+";opacity:"+T.opacity+";"+d+h+p,v='<div id="'+t+'" class="bui-hint '+r+" "+T.skin+'" style="'+g+'"><span class="bui-hint-inner">'+i+"</span>"+(T.showClose?'<div class="bui-hint-close"><i class="icon-close"></i></div>':"")+"</div>";c.append(v),a&&c.css("position","relative")}function c(){return E}function s(){var e=this;return C&&(E=!1,C.hide(function(){C.remove(),b.call(e,"remove",{toggle:C}),C=null})),this}function u(e,t){var n=this;return"function"==typeof e?(e=e,t=t||T.effect||""):(t=e||T.effect||"",e=null),C&&(E=!1,C.hide(function(){e&&e.call(I,{toggle:C}),b.call(n,"hide",{toggle:C})},t)),this}function d(e,t){var n=this;return"function"==typeof e?(e=e,t=t||T.effect||""):(t=e||T.effect||"",e=null),C&&(E=!0,C.show(function(t){b.call(n,"show",{toggle:C}),e&&e.call(I,{toggle:C})},t)),T.autoClose&&(k&&clearTimeout(k),k=setTimeout(function(){T.autoTrigger?s():C.hide(),T.onClose&&T.onClose.call(I)},T.timeout)),this}function f(e){var e=1==e;j.off("click.bui"),C&&C.destroy(e),m("show"),m("hide")}function h(t){var n={toggle:C};return e.widget.call(n,t)}function p(t,n){return e.option.call(I,t,n)}function g(e){return j.find(".bui-hint-inner").length&&j.find(".bui-hint-inner").html(e),this}function v(t,n){return e.on.apply(I,arguments),this}function m(t,n){return e.off.apply(I,arguments),this}function b(t){I.self=this==window||this==I?null:this,e.trigger.apply(I,arguments)}var w={appendTo:"",content:"",timeout:2e3,autoClose:!0,showClose:!1,autoTrigger:!0,useBox:!0,opacity:1,background:"",effect:"fadeInUp",skin:"",position:"bottom",width:0,height:0,onBeforeInit:null,onInited:null,onClose:null};if("number"==typeof i||"string"==typeof i){var y=i||"";i={},i.content=y,i.onClose=o||null}else"object"===(void 0===i?"undefined":t(i))&&(i=i);var x,k,I={handle:{},on:v,off:m,remove:s,hide:u,show:d,text:g,isShow:c,destroy:f,widget:h,option:p,config:T,init:a},T=I.config=n.extend(!0,{},w,e.config.hint,i),O=0,C=null,j=null,S="",E=!1,N=!1;return a(T),I}}(window.bui||{},window.libs),function(e,t){e.pullrefresh=function(n){function i(n){var i=t.extend(!0,M,n);return i.onBeforeInit&&i.onBeforeInit.call(A,i),i.id?(O=e.obj(i.id),M=A.config=i,C=O[0],j=O.children(F),S=O.children(B),E=O.children(R),P=o,L=i.refreshTips.end,_||(_=e.loading({appendTo:j,width:15,height:15,autoClose:!1,text:L,onlyText:!0,display:"inline",autoTrigger:!1,mask:!1})),i.autoLoad&&(q=!0,_.start({text:i.refreshTips.start,onlyText:!1}),P()),H||r(i),m(i.height),i.onInited&&i.onInited.call(A,i),this):void e.hint("pullrefresh id不能为空")}function o(){V=(new Date).getTime(),M.onBeforeRefresh&&M.onBeforeRefresh.call(A),M.onRefresh&&M.onRefresh.call(A),T.call(A,"refresh")}function a(){var e=(new Date).getTime(),t=e-V,n=Math.floor(t/36e5),i=Math.floor(t/6e4);Math.floor(t/1e3);return n<=0&&i<=0?"刚刚更新":n<=0&&i>0?i+"分钟前更新":"上次更新时间:"+(n<10?"0"+n:n)+":"+(i<10?"0"+i:i)}function r(e){z||d(),H=!0}function l(n){var i=n.originalEvent&&n.originalEvent.targetTouches||n.targetTouches,o=$?i[0]:n;return Z.x1=o.pageX,Z.y1=o.pageY,Z.direction="",Q=O.scrollTop(),M.stopHandle&&e.unit.checkTargetInclude(n.target,M.stopHandle)?void(J=!1):i.length>1||n.scale&&1!==n.scale?void(J=!1):!1!==(M.onBeforeTouchstart&&M.onBeforeTouchstart.call(A,n,Z))&&(L=M.lastUpdated?a():M.refreshTips.end,T.call(A,"touchstart",n,Z),t(window).scrollTop()<=0&&Q<=0&&M.onRefresh&&!q?(J=!0,t(this).css("touch-action","none")):J=!1,void(M.stopPropagation&&n.stopPropagation()))}function c(t){var n=t.originalEvent&&t.originalEvent.targetTouches||t.targetTouches||[];if(!J)return void h();if(n.length>1||t.scale&&1!==t.scale)return void h();var i=$?n[0]:t;if(Z.x2=i.pageX,Z.y2=i.pageY,!1===(M.onBeforeTouchmove&&M.onBeforeTouchmove.call(A,t,Z)))return!1;Z.direction||(Z.direction=e.swipeDirection(Z.x1,Z.x2,Z.y1,Z.y2)),T.call(A,"touchmove",t,Z),"swipeleft"!==Z.direction&&"swiperight"!==Z.direction||t.preventDefault(),Z.y2-Z.y1>0&&Q<=0&&t.preventDefault(),"swipedown"==Z.direction?(T.call(A,"movingdown",t,Z),N=Math.abs(Z.y2-Z.y1),h(N/2,!1),N>=M.distance?G||(_.show({text:M.refreshTips.release,onlyText:!1}).pause(),G=!0):ee||(_.show({text:L,onlyText:!1}).pause(),ee=!0),X=!0,M.maxDistance>M.distance&&N>=M.maxDistance&&(_.show({text:M.refreshTips.start,onlyText:!1}),q=!0,M.onRefresh&&P(),X=!1,G=!1,ee=!1,Z={},K+=Z.y2-Z.y1,Y+=Z.x2-Z.x1,Z.lastX=Y,Z.lastY=K,Z={x1:0,x2:0,y1:0,y2:0,direction:""},J=!1,X=!1),t.preventDefault(),t.stopPropagation()):"swipeup"==Z.direction&&(T.call(A,"movingup",t,Z),X=!0,t.stopPropagation()),_&&_.pause()}function s(e){return T.call(A,"touchend",e,Z),!1!==(M.onBeforeTouchend&&M.onBeforeTouchend.call(A,e,Z))&&(t(this).css("touch-action","auto"),X?("swipedown"==Z.direction?(T.call(A,Z.direction,e,Z),N>=M.distance?(h(M.distance/2),_.show({text:M.refreshTips.start,onlyText:!1}).start(),q=!0,M.onRefresh&&P()):h(),e.stopPropagation(),G=!1,ee=!1,Z={}):"swipeup"==Z.direction&&(T.call(A,Z.direction,e,Z),e.stopPropagation()),K+=Z.y2-Z.y1,Y+=Z.x2-Z.x1,Z.lastX=Y,Z.lastY=K,Z={x1:0,x2:0,y1:0,y2:0,direction:""},J=!1,void(X=!1)):(Z={x1:0,x2:0,y1:0,y2:0,direction:""},J=!1,void(X=!1)))}function u(e){return z=!0,O.off("touchstart",l).off("touchmove",c).off("touchend",s).off("touchcancel",h),h(),e&&e.call(A),T.call(A,"lock"),this}function d(e){return z=!1,O.on("touchstart",l).on("touchmove",c).on("touchend",s).on("touchcancel",h),e&&e.call(this),T.call(A,"unlock"),this}function f(e,t,n){return U||(_.show({text:M.refreshTips.success,onlyText:!1}),h(e,t),S.one("webkitTransitionEnd",function(){_&&_.hide().pause(),U=!1,n&&n.call(A)})),this}function h(e,t){t=0!=t,e=e||0,q=!1;var n=t?"all 300ms ease-out":"none";return p(0,e+"px",n,S),E.length&&p(0,e+"px",n,E),this}function p(e,t,n,i){var n,i=i||O,e=e||0,t=t||0,o=e,a=t,r=String(e).indexOf("%")>-1?String(e):o,l=String(t).indexOf("%")>-1?String(t):a;n="number"==typeof n?"all "+n+"ms":n||"all 300ms";try{i.css({"-webkit-transition":n,transition:n,"-webkit-transform":"translate("+r+","+l+")",transform:"translate("+r+","+l+")"}),i.one("webkitTransitionEnd",function(){i.css({"-webkit-transition":"none",transition:"none"}),_.hide()})}catch(e){console.log(e.message)}}function g(){U=!0,h(),e.hint(M.refreshTips.fail),T.call(A,"fail")}function v(){h(M.distance/2,!0),_.start({text:M.refreshTips.start,onlyText:!1}),M.onRefresh&&P()}function m(e){var t=O.parents(".bui-page"),n=(t.children("main"),t.find(".bui-tab-head .bui-nav")),i=C&&C.offsetTop||0,o=t.children(M.header),a=o.length>1?o.eq(o.length-1).height():o.height(),r=t.children(M.footer),l=r.length>1?r.eq(r.length-1).height():r.height(),c=window&&window.viewport&&window.viewport.height()-(a||0)-(l||0)-i-n.height(),s=e?parseFloat(e):c;O.height(s)}function b(e){var t=e||{height:0,width:0};return this.setHeight(t),t&&t.width>0&&O.width(t.width),this}function w(e){var e=1==e;O&&(O.off(),e&&O.remove()),_&&_.destroy(e),I("refresh"),I("movingdown"),I("swipedown")}function y(t){var n={loading:_};return e.widget.call(n,t)}function x(t,n){return e.option.call(A,t,n)}function k(t,n){return e.on.apply(A,arguments),this}function I(t,n){return e.off.apply(A,arguments),this}function T(t){A.self=this==window||this==A?null:this,e.trigger.apply(A,arguments)}var O,C,j,S,E,N,L,P,F="."+e.prefix("scroll-head"),B="."+e.prefix("scroll-main"),R="."+e.prefix("scroll-foot"),D={id:"",stopHandle:"",childrenTop:F,childrenMain:B,header:".bui-page header",footer:".bui-page footer",distance:90,maxDistance:0,autoLoad:!0,lastUpdated:!1,height:0,refreshTips:{start:"刷新中..",release:"松开刷新",end:"下拉刷新",fail:"刷新失败,请检查下网络再试试",success:"刷新成功"},autoinit:!0,stopPropagation:!1,onBeforeTouchstart:null,onBeforeTouchmove:null,onBeforeTouchend:null,onBeforeInit:null,onBeforeRefresh:null,onInited:null,onRefresh:null},A={handle:{},on:k,off:I,reverse:f,refresh:v,setHeight:m,resize:b,fail:g,lock:u,unlock:d,destroy:w,widget:y,option:x,config:M,init:i},M=A.config=t.extend(!0,{},D,e.config.pullrefresh,n),z=!1,V=(new Date).getTime(),q=!1,H=!1,U=!1,_=null,W=/hp-tablet/gi.test(navigator.appVersion),$="ontouchstart"in window&&!W,K=0,Y=0,J=!1,X=!1,Z={x1:0,x2:0,y1:0,y2:0,direction:""};M.autoinit&&i(M);var Q=0,G=!1,ee=!1;return A}}(window.bui||{},window.libs),function(e,n){e.scroll=function(i){function o(t){var i=n.extend(!0,X,t);if(i.onBeforeInit&&i.onBeforeInit.call(J,i),D=n(window),!i.id)return void e.hint("scroll id不能为空");B=e.obj(i.id),re=i.page,le=i.pageSize,X=J.config=i,ne=!0,ie=!0,oe=!1,ae=!1,R=B[0],M=B.children(W),V=B.children($),z=B.children(K),V.css({position:"relative"}),Q||(Q=e.loading({appendTo:z,width:20,height:20,autoClose:!1,text:i.scrollTips.start,display:"inline",autoTrigger:!1,mask:!1})),q=c,H=l,U?U.init({id:i.id,onBeforeRefresh:i.onBeforeRefresh,onRefresh:q,distance:i.distance,maxDistance:i.maxDistance,lastUpdated:i.lastUpdated,height:i.height,stopPropagation:i.stopPropagation,refreshTips:i.refreshTips,autoLoad:i.autoRefresh}):i.refresh&&i.onRefresh?(U=e.pullrefresh({id:i.id,onBeforeRefresh:i.onBeforeRefresh,onRefresh:q,distance:i.distance,stopHandle:i.stopHandle,maxDistance:i.maxDistance,lastUpdated:i.lastUpdated,header:i.header,footer:i.footer,height:i.height,stopPropagation:i.stopPropagation,onBeforeTouchstart:i.onBeforeTouchstart,onBeforeTouchmove:i.onBeforeTouchmove,onBeforeTouchend:i.onBeforeTouchend,refreshTips:i.refreshTips,autoLoad:i.autoRefresh}),U.lock(),ee=!0):y(i.height);try{H&&H.call(J,re,le)}catch(t){e.showLog(t,"bui.scroll.init")}return ce||a(i),i.onInited&&i.onInited.call(J,i),this}function a(t){B.on("scroll",e.unit.debounce(r,t.delayTime)),ce=!0}function r(e){var t=e.target;0==(t.scrollTop||0)?F.call(J,"scrolltop",e):t.scrollTop+t.clientHeight>=(t&&t.scrollHeight-X.endDistance)&&X.onLoad&&(X.page=J.config.page=++re,X.autoScroll&&H&&H.call(J,X.page,le),F.call(J,"scrollbottom",e)),F.call(J,"scrollend",e),X.onScrolling&&X.onScrolling.call(J,e,J)}function l(e,t){return te=!0,ae=!1,ie&&!oe&&(X.page=J.config.page=e,X.onBeforeLoad&&X.onBeforeLoad.call(J,e,t),X.onLoad&&Q&&Q.start({text:X.scrollTips.start,onlyText:!1}),X.onLoad&&X.onLoad.call(J,e,t)),ee&&X.refresh&&U&&U.unlock(),this}function c(){te=!0,ie=!0,oe=!1,ne=!0,ae=!0,re=Z,le=X.pageSize,se={},X.page=J.config.page=re,F.call(J,"refresh",re),X.onRefresh&&X.onRefresh.call(J,re,le)}function s(){return X.page}function u(t,n,i){var i=0!=i;if(!n||"array"!=e.typeof(n))return Q&&Q.stop(),e.showLog("scroll 控件的updatePage 第2个参数,必须是一个数组,如果是list控件,检测field的data映射是否准确","bui.scroll.updatePage"),void(n=[]);n=n,te=!1,ue&&clearTimeout(ue),ue=setTimeout(function(){var e=parseInt(B.height()),o=parseInt(B.find(X.childrenMain)[0]&&B.find(X.childrenMain)[0].scrollHeight);if(i)if(n&&n.length>le-1){if(ie=!0,oe=!1,ne=!1,Q&&Q.start({text:X.scrollTips.end,onlyText:!0}),o>=10&&o<e&&X.autoNext&&X.onLoad){var a=++re;H&&H.call(J,a,le)}F.call(J,"loadpage",n,re)}else{ie=!1,oe=!0;var r=ne&&n&&n.length<1?X.scrollTips.nodata:X.scrollTips.last;Q&&Q.start({text:r,onlyText:!0}),F.call(J,"loadpage",n,re),F.call(J,"lastpage",n,re)}else ie=!1,oe=!0,Q&&Q.stop();return se[t]=n},10)}function d(e){return U&&U.reverse(),e&&e.call(J,U),this}function f(){return ae}function h(e){return se}function p(e){se={}}function g(e,t){return G=!0,ee=!0,Q.show({text:X.scrollTips.fail,onlyText:!0,callback:function(n){l(e,t)}}),U&&U.lock(),this}function v(t,n){var i,o,a=[];if(t&&n)for(i in se){var r=e.array.filter(se[i],t,n)||[];if(r.length)for(o in r)a.push(r[o])}return a}function m(e,t){var e=e||0;A=B.find(X.children).children(X.handle);var n=B.height(),i=parseFloat(A.height()),o=R.scrollHeight,a=i*parseInt(e)-i;return o>n&&(R.scrollTop=a,F.call(J,"to",e),t&&t.call(J,parseInt(e))),this}function b(e){return A=B.find(X.children).children(X.handle),m(A.length,e),this}function w(e){var i=0;return i="object"===(void 0===e?"undefined":t(e))?n(e)[0].offsetTop:"string"==typeof e&&e.indexOf("#")>-1?n(e)[0].offsetTop:parseInt(e)||0,R.scrollTop=i,this}function y(e){var t=B.parents(".bui-page"),n=(t.children("main"),t.find(".bui-tab-head .bui-nav")),i=R&&R.offsetTop||0,o=t.children(X.header),a=o.length>1?o.eq(o.length-1).height():o.height(),r=t.children(X.footer),l=r.length>1?r.eq(r.length-1).height():r.height(),c=window.viewport.height()-(a||0)-(l||0)-i-n.height(),s=e?parseFloat(e):c;B.height(s)}function x(){return B.off("scroll"),F.call(J,"lock"),this}function k(t){return B.on("scroll",e.unit.debounce(r,X.delayTime)),F.call(J,"unlock"),this}function I(){return m(1),U&&U.refresh(),this}function T(e){var e=e||re;return re=e,H&&H.call(J,re,le),this}function O(){return H&&H.call(J,++re,le),this}function C(){return re-- >0&&H&&H.call(J,re--,le),this}function j(e){var t=e||{height:0,width:0};return this.setHeight(t),t&&t.width>0&&B.width(t.width),this}function S(e){var e=1==e;B&&(B.off("scroll"),e&&B.remove()),U&&U.destroy(e),Q&&Q.destroy(e),P("loadpage"),P("lastpage"),P("scrolltop"),P("scrollbottom"),P("scrollend")}function E(t){var n={pullrefresh:U,loading:Q};return e.widget.call(n,t)}function N(t,n){return e.option.call(J,t,n)}function L(t,n){return e.on.apply(J,arguments),this}function P(t,n){return e.off.apply(J,arguments),this}function F(t){J.self=this==window||this==J?null:this,e.trigger.apply(J,arguments)}var B,R,D,A,M,z,V,q,H,U,_="."+e.prefix("list"),W="."+e.prefix("scroll-head"),$="."+e.prefix("scroll-main"),K="."+e.prefix("scroll-foot"),Y={id:"",childrenTop:W,childrenMain:$,childrenBottom:K,children:_,stopHandle:"",header:".bui-page header",footer:".bui-page footer",handle:"li",distance:100,endDistance:1,height:0,page:1,pageSize:10,stopPropagation:!1,lastUpdated:!0,autoRefresh:!1,autoNext:!0,autoScroll:!0,refresh:!0,delayTime:100,scrollTips:{start:"努力加载中..",end:"上拉加载更多",nodata:"没有更多内容",last:"没有更多内容",fail:"点击重新加载"},refreshTips:{start:"刷新中..",release:"松开刷新",end:"下拉刷新",fail:"点击加载",success:"刷新成功"},autoinit:!0,onBeforeTouchstart:null,onBeforeTouchmove:null,onBeforeTouchend:null,onBeforeInit:null,onInited:null,onScrolling:null,onBeforeRefresh:null,onRefresh:null,onBeforeLoad:null,onLoad:null},J={handle:{},on:L,off:P,reverse:d,updateCache:u,updatePage:u,getPage:s,getCache:h,clearCache:p,resize:j,fail:g,filter:v,to:m,toBottom:b,scrollTop:w,lock:x,unlock:k,refresh:I,load:T,nextPage:O,prevPage:C,setHeight:y,isRefresh:f,destroy:S,widget:E,option:N,config:X,init:o},X=J.config=n.extend(!0,{},Y,e.config.scroll,i),Z=X.page,Q=null,G=!1,ee=!1,te=!1,G=!1,ne=!0,ie=!0,oe=!1,ae=!1,re=X.page,le=X.pageSize,ce=!1,se={};X.autoinit&&o(X);var ue;return J}}(window.bui||{},window.libs),function(e,t){e.list=function(n){function i(n){var i=t.extend(!0,S,n);i.onBeforeInit&&i.onBeforeInit.call(j,i),x=e.obj(i.id),k=x.find(i.children),S=j.config=i,N=S.data;var a=0==S.refresh?null:c;return O?O.init({id:i.id,children:i.children,handle:i.handle,page:i.page,pageSize:i.pageSize,distance:i.distance,maxDistance:i.maxDistance,height:i.height,refresh:i.refresh,autoNext:i.autoNext,autoScroll:i.autoScroll,stopPropagation:i.stopPropagation,scrollTips:i.scrollTips,refreshTips:i.refreshTips,lastUpdated:i.lastUpdated,onBeforeRefresh:i.onBeforeRefresh,onBeforeLoad:i.onBeforeLoad,onRefresh:a,onLoad:r}):O=bui.scroll({id:i.id,children:i.children,handle:i.handle,header:i.header,footer:i.footer,page:i.page,pageSize:i.pageSize,distance:i.distance,stopHandle:i.stopHandle,maxDistance:i.maxDistance,height:i.height,refresh:i.refresh,autoNext:i.autoNext,autoScroll:i.autoScroll,stopPropagation:i.stopPropagation,scrollTips:i.scrollTips,refreshTips:i.refreshTips,lastUpdated:i.lastUpdated,onBeforeTouchstart:i.onBeforeTouchstart,onBeforeTouchmove:i.onBeforeTouchmove,onBeforeTouchend:i.onBeforeTouchend,onBeforeRefresh:i.onBeforeRefresh,onBeforeLoad:i.onBeforeLoad,onRefresh:a,onLoad:r}),L||o(i),i.onInited&&i.onInited.call(j,i),this}function o(e){return e.callback&&x.off("click.bui",e.handle).on("click.bui",e.handle,function(t){e.callback.call(j,t)}),L=!0,this}function a(){return O.getPage()}function r(i,o,a){function r(e,t,n){var i=(e-1)*t;return i+t>=n.length?n.slice(i,n.length):n.slice(i,i+t)}function l(t,o,a){var l,u,d;l="string"==typeof t?t&&JSON.parse(t)||{}:t||{},u=S&&S.field&&""==S.field.data?l||[]:"object"===e.typeof(l)&&e.unit.getKeyValue(S.field.data,l)||[];var f=/\[?.+\]$/g;if("string"==typeof u&&f.test(u))try{d=JSON.parse(u)}catch(t){d=u,e.showLog(t)}else d=u;u=d&&"array"===e.typeof(d)?d:[],S.localData&&(u=r(i,S.pageSize,u));var h=n.template&&n.template(u,l,i)||"";k&&k[s](h);var p=O&&O.isRefresh()||!1;y.call(c,"success",t,i,a);try{p?(S.onRefresh&&S.onRefresh.call(j,O,l,a),y.call(c,"refresh",t,i,a),S.refresh&&O.reverse()):(y.call(this,"onloadbefore"),S.onLoad&&S.onLoad.call(j,O,l,a),y.call(c,"onload",t,i,a)),S.localData?S.autoUpdatePage&&c&&c.updatePage(i,u):S.autoUpdatePage&&O&&O.updatePage(i,u),T=u}catch(e){}}var c=this,s=a||S.commandLoad;return N=t.extend(!0,{},P,S.data,N),S.field.page.length&&e.unit.setKeyValue(S.field.page,i,N),S.field.size.length&&e.unit.setKeyValue(S.field.size,o,N),S.page=j.config.page=i,S.data=N,S.localData?void l(S.localData,200):(I=e.ajax(S).done(l).fail(function(e,t,n){y.call(c,"fail",e,i,n),S.onFail&&S.onFail.call(j,t,O,i,n),O&&O.fail(i,o,e)}),this)}function l(){var e=O.getPage();return O.updatePage(e,T),this}function c(){var e=E,t=S.pageSize;return y.call(this,"refreshbefore"),r(e,t,S.commandRefresh),this}function s(){return y.call(this,"refreshbefore"),O.refresh(),this}function u(){return y.call(this,"refreshbefore"),c(),this}function d(n,i){var o;if("string"==typeof i)try{o=JSON.parse(i)}catch(t){return void e.showLog("data 参数必须为对象","bui.list.modifyData")}else o=i;return N=t.extend(!0,{},P,o)}function f(){return k.html(""),this}function h(e){var e=1==e;x&&(x.off("click.bui"),e&&x.remove(),x=null),w("refreshbefore"),w("refresh"),w("success"),w("fail"),O&&O.destroy(e)}function p(t){var n={scroll:O,ajax:I};return e.widget.call(n,t)}function g(t,n){return"data"==t&&void 0!==n?d(t,n):e.option.call(j,t,n)}function v(e){return S=j.config=t.extend(!0,{},j.config,e),N=S.data,this}function m(e){return O.resize(e),this}function b(t,n){return e.on.apply(j,arguments),this}function w(t,n){return e.off.apply(j,arguments),this}function y(t){j.self=this==window||this==j?null:this,e.trigger.apply(j,arguments)}var x,k,I,T,O,C={id:"",url:"",data:{},method:"GET",dataType:"json",headers:{},contentType:null,timeout:2e4,field:{page:"page",size:"pageSize",data:""},scrollTips:{start:"努力加载中..",end:"上拉加载更多",nodata:"没有更多内容",last:"没有更多内容",fail:"点击重新加载"},refreshTips:{start:"刷新中..",release:"松开刷新",end:"下拉刷新",fail:"点击加载",success:"刷新成功"},lastUpdated:!1,page:1,pageSize:10,autoNext:!0,autoUpdatePage:!0,autoScroll:!0,stopPropagation:!1,autoinit:!0,native:!0,needNative:!1,refresh:!0,stopHandle:"",children:".bui-list",handle:".bui-btn",header:".bui-page header",footer:".bui-page footer",height:0,commandRefresh:"html",commandLoad:"append",localData:null,template:null,onBeforeTouchstart:null,onBeforeTouchmove:null,onBeforeTouchend:null,onBeforeInit:null,onInited:null,onBeforeRefresh:null,onRefresh:null,onLoad:null,onFail:null,callback:null},j={handle:{},on:b,off:w,empty:f,updatePage:l,getPage:a,refresh:s,reload:u,resize:m,modify:v,destroy:h,widget:p,option:g,config:S,init:i},S=j.config=t.extend(!0,{},C,e.config.list,n),E=S.page,N=(S.page,{}),L=!1,P=S.data;return S.autoinit&&i(S),j}}(window.bui||{},window.libs),function(e,t){e.searchbar=function(n){function i(n){var i=t.extend(!0,y,n);return i.onBeforeInit&&i.onBeforeInit.call(w,i),p=e.obj(i.id),y=w.config=i,v=p.find("input"),p.find(i.handleRemove).length>0||v.after('<i class="'+i.handleRemove.substr(1)+'"></i>'),m=p.find(i.handleRemove),m.hide(),x||o(i),i.onInited&&i.onInited.call(w,i),this}function o(e){p.off("click.bui",e.handle).on("click.bui",e.handle,function(t){document.activeElement.blur();var n=v.val();g=n,h.call(w,"search",t,n),e.callback&&e.callback.call(w,t,n)}),p.off("click.bui",e.handleRemove).on("click.bui",e.handleRemove,function(n){document.activeElement.blur(),v.val("");var i=v.val();g=i,t(this).hide(),h.call(w,"remove",n,i),e.onRemove&&e.onRemove.call(w,n,i)});var n=!1;return e.onInput&&p.off("input","input").on("compositionstart",function(){n=!0}).on("compositionend",function(t){n=!1;var i=v.val();e.onInput.call(w,t,i)}).on("input","input",function(t){var i=v.val();g=i,i?m.show():m.hide(),h.call(w,"input",t,i),n||e.onInput.call(w,t,i)}),e.onChange&&p.off("change","input").on("change","input",function(t){var n=v.val();g=n,n?m.show():m.hide(),h.call(w,"change",t,n),e.onChange.call(w,t,n)}),x=!0,this}function a(e){var t=e||g;return g=t,h.call(this,"search",{},t),y.callback&&y.callback.call(this,{},t),this}function r(){return v.val()}function l(){return v.val(""),m.hide(),this}function c(e){var e=1==e;p&&(p.off(),e&&p.remove()),f("search"),f("remove"),f("input")}function s(t){var n={};return e.widget.call(n,t)}function u(t,n){return e.option.call(w,t,n)}function d(t,n){return e.on.apply(w,arguments),this}function f(t,n){return e.off.apply(w,arguments),this}function h(t){w.self=this==window||this==w?null:this,e.trigger.apply(w,arguments)}var p,g,v,m,b={id:"",handle:".icon-search,.btn-search",handleRemove:".icon-removefill",delayTime:400,onInput:null,onChange:null,onRemove:null,autoinit:!0,onBeforeInit:null,onInited:null,callback:null},w={handle:{},on:d,off:f,search:a,reset:l,value:r,destroy:c,widget:s,option:u,config:y,init:i},y=w.config=t.extend(!0,{},b,e.config.searchbar,n),x=!1;return y.autoinit&&i(y),w}}(bui||{},libs),function(e,n){e.select=function(i){function o(t){var i=n.extend(!0,U,t);if(i.onBeforeInit&&i.onBeforeInit.call(H,i),i.appendTo=i.appendTo||(e.hasRouter?router.currentPage()||"body":"body"),Z=[],Q=[],G=[],_=i.id?e.obj(i.id).attr("id"):_,U=H.config=i,X="function"==typeof i.template?i.template:u,i.data&&i.data.length||ee)var o=X.call(this,i.data);if(i.popup)if(V)D.find(".bui-dialog-main").html(o);else{if(i.id)D=e.obj(i.id);else{var r=c();n(i.appendTo).append(r),D=e.obj(_),D.find(".bui-dialog-main").html(o)}V=e.dialog({id:_,effect:i.effect,mask:i.mask,position:i.position,autoClose:!1,height:i.height,width:i.width,zoom:!1,fullscreen:i.fullscreen,onMask:function(e){h()}})}else{if(!i.id)return void e.hint("select id 必须有");D=e.obj(i.id),i.data&&i.data.length&&D.html(o)}return z=D.find(i.handle),i.data&&i.data.length<1&&a(),ee||l(i),i.value&&g(i.value),i.onInited&&i.onInited.call(H,i),this}function a(){var e=[],t=[];return z.find("input").each(function(i,o){var a=n(this);if(!(a.length<1)){var l=a.val(),c=a.attr("text"),s=a.attr("image"),u=a.attr("icon"),d=a.is(":checked");U.data[i]={},U.data[i][$]=c,U.data[i][K]=l,U.data[i][Y]=s,U.data[i][J]=u,e.push(l),t.push(c),d&&r({name:c,value:l,index:i})}}),{value:e,text:t}}function r(e){var t=parseInt(e.index,10);switch(U.type){case"radio":case"select":Z=[],Q=[],G=[],Z.push(e.name),Q.push(e.value),G.push(t);break;case"checkbox":Z.push(e.name),Q.push(e.value),G.push(t)}}function l(t){t.trigger&&(R=e.obj(t.trigger),M=R.find(t.triggerChildren).length?R.find(t.triggerChildren):R,A=t.placeholder||n.trim(M.html()||""),t.placeholder&&M.html(t.placeholder),R.off("click.bui").on("click.bui",function(e){var i=t.onBeforeOpen&&t.onBeforeOpen.call(H);n(this).hasClass("disabled")||0==i||d()}));var i=function(i){var o=n(i.target[i.target.length-1]);if(!o.attr("disabled")){var a=o.val(),l=o.attr("text"),c=o.attr("index"),s="INPUT"!==i.srcElement.nodeName?o.is(":checked"):!o.is(":checked");i.target=o[0],i.index=c,s?s&&(t.toggle||"checkbox"==t.type)&&(B.call(H,"uncheck",i),e.array.remove(Z,l),e.array.remove(Q,a),e.array.remove(G,c),t.onChange&&t.onChange.call(H,i)):(B.call(H,"check",i),r({name:l,value:a,index:c}),t.onChange&&t.onChange.call(H,i)),g(Q.join(",")||"",i),b(Z.join(",")||"")}},o=function(e){var o=null;e.srcElement=e.originalEvent&&e.originalEvent.srcElement||e.srcElement,o=n(this).find("input"),e.target=[o[0]],i.call(H,e),t.popup&&t.autoClose&&h(),B.call(H,"select",e),e.stopPropagation()};D.off("click.bui",t.handle).on("click.bui",t.handle,o);var a=function(e){t.callback&&t.callback.call(H,e,H),e.stopPropagation()};D.off("click.bui",t.callbackHandle).on("click.bui",t.callbackHandle,a),ee=!0}function c(e){var t="";return U.popup&&(t+='<div id="'+_+'" class="bui-dialog bui-dialog-select">',U.title&&(t+='<div class="bui-dialog-head">'+U.title+"</div>"),t+='  <div class="bui-dialog-main">'),U.popup&&(t+="  </div>",U.buttons.length>0&&(t+='    <div class="bui-dialog-foot bui-box">',n.each(U.buttons,function(e,n){t+='        <div class="span1">',t+='             <div class="bui-btn '+(n.className||"")+'" value="'+(n.value||"")+'">'+(n.name||n)+"</div>",t+="        </div>"}),t+="    </div>"),t+="</div>"),t}function s(e){var e=e||{},t=document.createElement("input");for(var n in e)"string"!=typeof e[n]&&"number"!=typeof e[n]||t.setAttribute(n,e[n]);switch(U.type){case"mulelect":t.setAttribute("type","checkbox"),t.setAttribute("class",U.className||"bui-choose");break;case"select":t.setAttribute("type","radio"),t.setAttribute("class",U.className||"bui-choose");break;case"radio":t.setAttribute("type","radio"),t.setAttribute("class",U.className||"bui-radio");break;case"checkbox":t.setAttribute("type","checkbox"),t.setAttribute("class",U.className||"bui-choose");break;default:t.setAttribute("type","checkbox")}return t}function u(t){var i=W,o="",a="";return n.each(t,function(t,o){var r="string"==typeof o?o:o[$]||o||"",l=o&&o[Y]?o[Y]||o:"",c=o&&o[J]?o[J]||o:"",u=o&&o[K]?o[K]||o:o||r||t,d=t,f={name:i,value:u,text:r,index:d};l&&(f.image=l),c&&(f.icon=c),o=o&&"object"===e.typeof(o)?o:{};var h=n.extend(!0,{},o,f),p=s(h).outerHTML;if(a+='    <div class="bui-btn bui-box bui-btn-line">',"left"==U.direction&&(a+=p),l){var g=e.unit.endWithImage(l)?'<div class="thumbnail"><img src="'+l+'" alt="" /></div>':'<div class="thumbnail '+l+'"></div>';a+=g}if(c){var v=e.unit.endWithImage(c)?'<i class="icon"><img src="'+c+'" alt="" /></i>':'<i class="icon '+c+'"></i>';a+=v}"center"==U.direction?(a+='        <div class="span1" align="center">'+r+"</div>",a+=p):a+='        <div class="span1">'+r+"</div>","right"==U.direction&&(a+=p),a+="    </div>"}),o+='    <div class="bui-list bui-list-select">',o+=a,o+="    </div>"}function d(e){B.call(this,"beforeshow");var n={};return"function"==typeof e?n.callback=function(){e&&e.call(H),B.call(H,"show")}:"string"==typeof e?n.effect=e:"object"===(void 0===e?"undefined":t(e))&&(n=e),U.popup&&V?(!V.isOpen()&&V.open(n),B.call(H,"show")):(D.css("display","block"),n.callback?n.callback():B.call(H,"show")),this}function f(){return D.html(""),U.data=[],this}function h(e){B.call(this,"beforehide");var n={};return"function"==typeof e?n.callback=function(){e&&e.call(H),B.call(H,"hide")}:"string"==typeof e?n.effect=e:"object"===(void 0===e?"undefined":t(e))&&(n=e),U.popup&&V?V.isOpen()&&V.close(n):(D.css("display","none"),n.callback?n.callback():B.call(H,"hide")),this}function p(){return G.join(",")}function g(t,n){if(void 0===t)return Q.join(",");z=D.find(U.handle);var i=[],o=[],a=[],r=[],l=[];"string"==typeof t&&t.indexOf(",")>-1?l=t.split(","):t instanceof Array?l=t:t&&l.push(t),U.data&&U.data.forEach(function(t,n){var c=t&&"object"===e.typeof(t)&&t.hasOwnProperty($)?String(t[$]):String(t),s=t&&"object"===e.typeof(t)&&t.hasOwnProperty(K)?String(t[K]):String(t)||String(n),u=z.eq(n).find("input");if(""==t)return u.prop("checked",!1),Z=[],Q=[],void(G=[]);var d=e.array.index(l,c);e.array.index(l,s)>-1||d>-1?("radio"!=U.type&&"select"!=U.type||(o=[],a=[],r=[]),o.push(c),a.push(s),r.push(n),i[n]=u,u.prop("checked",!0)):u.prop("checked",!1)}),Z=o.slice(0),Q=a.slice(0),G=r.slice(0);var c=n||{target:i[i.length-1],index:G};B.call(H,"change",c),R&&U.change&&(R.attr("value",a.join(",")),M.text(Z.join(","))),D.attr("value",a.join(","))}function v(){var e=[];return Q.forEach(function(t,n){e.push({value:t,name:Z[n],index:G[n]})}),e}function m(){var e=[];return U.data&&U.data.forEach(function(t,n){var i=z.eq(n).find("input"),o=i.prop("checked");t.checked=o,e.push(t)}),e}function b(e){return void 0===e?Z.join(","):(R&&U.change&&(R.attr("text",e),M.html(e||A)),D.attr("text",e),this)}function w(e){var t=[];return String(e).indexOf(",")>-1?t=e.split(","):t.push(parseInt(e)),Z=[],
Q=[],t.forEach(function(e,t){U.data[e]&&Z.push(U.data[e][$]||U.data[e]),U.data[e]&&Q.push(U.data[e][K]||U.data[e]||t)}),"checkbox"==U.type||"mulselect"==U.type?(b(Z.join(",")),g(Q.join(","))):(b(Z[0]),g(Q[0])),this}function y(t){var n=[];return String(t).indexOf(",")>-1?n=t.split(","):n.push(parseInt(t)),n.forEach(function(t,n){var i=z.eq(t).find("input"),o=i.val(),a=i.attr("text");e.array.delete(Z,a),e.array.delete(Q,o),i.prop("checked",null)}),this}function x(){if("checkbox"==U.type){w(U.data.map(function(e,t){return t}).join(","))}else w(0);return this}function k(){return Z=[],Q=[],z.find("input").prop("checked",null),g(""),b(""),B.call(this,"reset"),this}function I(){if("checkbox"==U.type){var t=Z.map(function(e,t){return e});Q.map(function(e,t){return e});Z=[],Q=[],U.data&&U.data.forEach(function(n,i){var o=z.eq(i).find("input");e.array.index(t,n[$])>-1?o.prop("checked",null):(o.prop("checked",!0),Z.push(n[$]),Q.push(n[K]))}),g(Q.join(",")||""),b(Z.join(",")||"")}else k();return this}function T(t){var n=[];return String(t).indexOf(",")>-1?n=t.split(","):n.push(t),n.forEach(function(t,n){var i=null;U.data.forEach(function(n,o){var a=n[$]||n,r=n[K]||n;t!=r&&t!=a||(i=z.eq(o).find("input"),i.prop("checked",null),e.array.remove(Z,a),e.array.remove(Q,r))})}),this}function O(){var e=R;return e&&e.addClass("disabled"),this}function C(){var e=R;return e&&e.removeClass("disabled"),this}function j(e){if(void 0===e)z.find("input").attr("disabled",!0);else{if("number"!=typeof e)return void console.log("index 必须为数字");z.eq(e).find("input").attr("disabled",!0)}return this}function S(e){if(void 0===e)z.find("input").removeAttr("disabled");else{if("number"!=typeof e)return void console.log("index 必须为数字");z.eq(e).find("input").removeAttr("disabled")}return this}function E(e){var e=1==e;return D&&(D.off(),e&&D.remove()),R&&(R.off("click.bui"),e&&R.remove()),V&&V.destroy(e),F("show"),F("hide"),F("change"),F("select"),F("check"),F("uncheck"),this}function N(t){var n={dialog:V||{}};return e.widget.call(n,t)}function L(t,n){return e.option.call(H,t,n)}function P(t,n){return e.on.apply(H,arguments),this}function F(t,n){return e.off.apply(H,arguments),this}function B(t){H.self=this==window||this==H?null:this,e.trigger.apply(H,arguments)}var R,D,A,M,z,V,q={id:"",trigger:"",triggerChildren:".span1",handle:".bui-list .bui-btn",className:"",name:"",appendTo:"",data:[],popup:!0,title:"",autoClose:!1,placeholder:"",field:{name:"name",value:"value",image:"image",icon:"icon"},height:0,width:0,mask:!0,change:!0,toggle:!1,effect:"fadeInUp",type:"select",direction:"left",position:"bottom",fullscreen:!1,value:"",buttons:[],onChange:null,autoinit:!0,onBeforeOpen:null,onBeforeInit:null,template:null,onInited:null,callbackHandle:".bui-dialog-foot .bui-btn",callback:null},H={handle:{},on:P,off:F,value:g,values:v,allValues:m,index:p,active:w,unactive:y,disabled:O,enabled:C,disabledSelect:j,enabledSelect:S,template:X,empty:f,text:b,show:d,hide:h,selectAll:x,selectNone:k,unselect:I,unselected:T,destroy:E,widget:N,option:L,config:U,init:o},U=H.config=n.extend(!0,{},q,e.config.select,i),_=e.guid(),W=U.name||e.guid(),$=U.field.name,K=U.field.value,Y=U.field.image,J=U.field.icon,X=null,Z=[],Q=[],G=[],ee=!1;return U.autoinit&&o(U),H}}(window.bui||{},window.libs),function(e,t){e.dropdown=function(n){function i(n){var i=t.extend(!0,L,n);if(i.onBeforeInit&&i.onBeforeInit.call(N,i),!i.id)return void e.showLog("dropdown id不能为空","bui.dropdown.init");if(I=e.obj(i.id),L=N.config=i,T=I.children(i.handle),S=i.target?I.find(i.target):T.next(),B=T.text(),i.data&&i.data.length){var l="function"==typeof i.template?i.template.call(N,i.data):p(i.data);S.length?S.remove()&&T.after(l):I.append(l),S=I.find(i.target)}C=i.relative,O=I.attr("position")||i.position;var c=I[0]&&I[0].offsetLeft>=document.documentElement.clientWidth?0:I[0]&&I[0].offsetLeft,u=i.width?"auto":-c+"px",d={bottom:{menuPosition:"bui-menu-bottom",arrowPosition:"bui-arrow-up",left:u},top:{menuPosition:"bui-menu-top",arrowPosition:"bui-arrow-down",left:u},left:{menuPosition:"bui-menu-left",arrowPosition:"bui-arrow-right",left:"auto"},right:{menuPosition:"bui-menu-right",arrowPosition:"bui-arrow-left",left:"100%"}};if(j=i.width>0?i.width:C?P:i.width,parseFloat(j)>0&&S.width(j),a(i.showArrow?d[O].arrowPosition+" "+d[O].menuPosition:d[O].menuPosition,d[O].left),i.value)r(i.value);else{var f=S.find(i.targetHandle+".active").eq(0),h=f.index();h>-1&&s(h)}return F||o(i),i.onInited&&i.onInited.call(N,i),this}function o(e){var n=function(n){if(!t(this).hasClass("disabled")){var i=t(this).hasClass("active"),o=e.target?t(this).parent().find(e.target):t(this).next();h(),i?(t(this).removeClass("active"),o.css("display","none"),k.call(N,"hide")):(t(this).addClass("active"),o.css("display","block"),k.call(N,"show")),n.stopPropagation()}},i=function(n){var i=t(this),o=i.parent(),a=r(),l=i.attr("value")||"";t.trim(i.text()),void 0!=o.attr("change")?o.attr("change"):e.change;e.showActive&&i.addClass("active").siblings().removeClass("active"),r.call(this,l),L.autoClose&&d(),n.target=this,e.callback&&e.callback.call(N,n),a!==l&&e.onChange&&e.onChange.call(N,n),L.stopPropagation&&n.stopPropagation()};T.off("click.bui").on("click.bui",n),I.off("click.bui",e.targetHandle).on("click.bui",e.targetHandle,i);var o=function(e){h(),e.stopPropagation()};L.autoClose&&t("body").off("click.bui").on("click.bui",":not(.bui-dropdown)",o),F=!0}function a(e,t){S.addClass(e),C&&S.css({left:t})}function r(n){if(void 0===n){return R||T.attr("value")}var i="htmllielement"===e.typeof(this),o=i&&t(this).parent(),a=i?t(this).parents(".bui-dropdown").children(L.handle):T,r=i?o.find(L.targetHandle):S.find(L.targetHandle);if(r.removeClass("active"),L.data&&L.data.length){if(""==n)return R="",void a.attr("value",n);var l=e.array.index(L.data,n,"value"),c=e.array.index(L.data,n,"name");l>-1&&(r.eq(l).addClass("active"),a.attr("value",n),L.change&&u.call(this,L.data[l].name),R=n),c>-1&&(r.eq(c).addClass("active"),a.attr("value",L.data[c].value),L.change&&u.call(this,n),R=L.data[c].value)}else r.each(function(e,i){var o=i.innerText,r=i.getAttribute("value");o!=n&&r!=n||(t(this).addClass("active"),a.attr("value",r),L.change&&u.call(this,o),R=r)});L.change||k.call(this,"change")}function l(){return{name:D,value:R}}function c(){return R="",r(""),u(B),d(),this}function s(e){e=parseInt(e);var n=S.find(L.targetHandle).eq(e);if(n.length>=0){r(n.attr("value")||t.trim(n.text())||""),L.showActive&&n.addClass("active").siblings().removeClass("active")}return this}function u(n){if(void 0===n){return D||t.trim(T.text())}var i="htmllielement"===e.typeof(this),o=i?t(this).parents(".bui-dropdown").children(L.handle):T,a=o.children(L.handleChildren);return a.length?a.text(n):o.text(n),D=n,k.call(this,"change"),this}function d(){return T.removeClass("active"),S.css("display","none"),k.call(this,"hide"),this}function f(){return T.addClass("active"),S.css("display","block"),k.call(this,"show"),this}function h(){return t(".bui-dropdown > .bui-btn").removeClass("active"),t(".bui-dropdown > .bui-list").css("display","none"),k.call(this,"hide"),this}function p(e){var t="";return t+='<ul class="bui-list">',e.map(function(e,n){t+='<li class="bui-btn" value="'+e.value+'">'+e.name+"</li>"}),t+="</ul>"}function g(){var e=T;return e&&e.addClass("disabled"),this}function v(){var e=T;return e&&e.removeClass("disabled"),this}function m(e){var e=1==e;I&&(I.off("click.bui"),e&&I.remove()),T&&(T.off("click.bui"),e&&T.remove()),t("body").off("click.bui"),x("show"),x("hide")}function b(t){var n={};return e.widget.call(n,t)}function w(t,n){return e.option.call(N,t,n)}function y(t,n){return e.on.apply(N,arguments),this}function x(t,n){return e.off.apply(N,arguments),this}function k(t){N.self=this==window||this==N?null:this,e.trigger.apply(N,arguments)}var I,T,O,C,j,S,E={id:"",handle:".bui-btn",handleChildren:".span1",target:".bui-list",targetHandle:".bui-btn",data:null,position:"bottom",showArrow:!1,showActive:!0,autoClose:!0,stopPropagation:!1,width:0,value:"",relative:!0,change:!0,autoinit:!0,template:null,onBeforeInit:null,onInited:null,callback:null,onChange:null},N={handle:{},on:y,off:x,active:s,disabled:g,enabled:v,value:r,values:l,reset:c,text:u,hide:d,show:f,hideAll:h,destroy:m,widget:b,option:w,config:L,init:i},L=N.config=t.extend(!0,{},E,e.config.dropdown,n),P=document.documentElement.clientWidth,F=!1,B="",R="",D="";return L.autoinit&&i(L),N}}(window.bui||{},window.libs),function(e,t){e.accordion=function(n){function i(n){var i=t.extend(!0,j,n);return i.onBeforeInit&&i.onBeforeInit.call(C,i),x=document.documentElement.clientWidth,k=document.documentElement.clientHeight,S=e.obj(i.id)||e.obj("."+e.prefix("accordion")),j=C.config=i,I=i.handle.indexOf("#")>-1?e.obj(i.handle):S.children(i.handle),T=i.target.indexOf("#")>-1?e.obj(i.target):S.children(i.target),o(i),E||a(i),i.onInited&&i.onInited.call(C,i),this}function o(e){I.removeClass("active"),T.css("display","none"),parseFloat(e.targetHeight)>0&&T.height(e.targetHeight),parseFloat(e.height)>0&&S.height(e.height)}function a(e){var n=function(n){t(this).hasClass("disabled")||t(this).attr("href")||(c.call(this,n,e),e.callback&&e.callback.call(C,n),!t(this).attr("href")&&n.stopPropagation())};e.handle.indexOf("#")>-1?I.off("click.bui").on("click.bui",n):S.off("click.bui").on("click.bui",e.handle,n),E=!0}function r(e){var t;return t="number"==typeof e?I.eq(e):I,t&&t.addClass("disabled"),this}function l(e){var t;return t="number"==typeof e?I.eq(e):I,t&&t.removeClass("disabled"),this}function c(n,i){var o=t(this),a=o.hasClass("active"),r=(I.index(this),i.target.indexOf("#")>-1?e.obj(i.target):o.next(i.target));i.single?a?(o.removeClass("active"),r.css("display","none"),y.call(C,"hide",n)):(p(),o.addClass("active"),r.css("display","block"),y.call(C,"show",n)):a?(o.removeClass("active"),r.css("display","none"),y.call(C,"hide",n)):(o.addClass("active"),r.css("display","block"),y.call(C,"show",n))}function s(e){var e=Number(e)||0,t=I.eq(e).length?I.eq(e):I,n=T.eq(e).length?T.eq(e):t.next(j.target);return t.addClass("active"),n.css("display","block"),y.call(this,"show",{target:I[e]}),this}function u(e){var e=Number(e)||0,t=I.eq(e).length?I.eq(e):I,n=T.eq(e).length?T.eq(e):t.next(j.target);return t.removeClass("active"),n.css("display","none"),y.call(this,"hide",{target:I[e]}),this}function d(){return S.length>1?S.each(function(e,t){f(0,t)}):f(0),y.call(this,"show",{target:I[0]}),this}function f(e,n){var e=e||0;(n?t(n):S).children(j.handle).eq(e).addClass("active").next(j.target).css("display","block")}function h(){return I.each(function(e,n){t(n).addClass("active").next(j.target).css("display","block")}),y.call(this,"showall",{target:I}),this}function p(){return I.each(function(e,n){t(n).removeClass("active").next(j.target).css("display","none")}),y.call(this,"hideall",{target:I}),this}function g(e){S&&(S.off("click.bui"),S.remove(),S=null),w("hide"),w("show")}function v(t){var n={};return e.widget.call(n,t)}function m(t,n){return e.option.call(C,t,n)}function b(t,n){return e.on.apply(C,arguments),this}function w(t,n){return e.off.apply(C,arguments),this}function y(t){C.self=this==window||this==C?null:this,e.trigger.apply(C,arguments)}var x,k,I,T,O={id:"",handle:"dt",target:"dd",height:0,targetHeight:0,single:!1,autoinit:!0,onBeforeInit:null,onInited:null,callback:null},C={handle:{},on:b,off:w,showFirst:d,showAll:h,hideAll:p,disabled:r,enabled:l,destroy:g,show:s,hide:u,widget:v,option:m,config:j,init:i},j=C.config=t.extend(!0,{},O,e.config.accordion,n),S=null,E=!1;return j.autoinit&&i(j),C}}(window.bui||{},window.libs),function(e,t){e.rating=function(n){function i(n){var i=t.extend(!0,C,n);return i.onBeforeInit&&i.onBeforeInit.call(O,i),i.id?(w=e.obj(i.id),C=O.config=i,y=i.fullClassName,x=i.halfClassName,l(i),j||r(i),i.onInited&&i.onInited.call(O,i),this):void e.hint("rating id不能为空")}function o(t){var n=(e.guid(),""),i=0,o=t.stars;for(i=0;i<o;i++)n+='<div class="bui-rating-cell" ></div>';return n}function a(e){var t,n="",e=String(e)||String(k),i=0,o=C.stars,a=[];a=e.indexOf(".")>-1?e.split("."):[e,0];var r=parseInt(a[0]);for(t=a[1]/10*100+"%",i=0;i<o;i++)i<r&&(n+='<div class="bui-rating-cell" ><div class="bui-rating-cell-full" style="width:100%;">&nbsp;</div></div>'),i==r&&(n+='<div class="bui-rating-cell" ><div class="bui-rating-cell-full" style="width:'+t+';">&nbsp;</div></div>'),i>r&&(n+='<div class="bui-rating-cell" ><div class="bui-rating-cell-full" style="width:0;">&nbsp;</div></div>');return n}function r(e){if(!e.disabled){var n=String(e.value).indexOf(".")>-1?1:0;w.off("click.bui",e.handle).on("click.bui",e.handle,function(i){var o=t(this).index(),a=0;if(e.half){a=n%2==0?o+.5:o+1}else a=o+1;c(a),s(a),n++,e.callback&&e.callback.call(O,i),i.stopPropagation()})}j=!0}function l(e){if(e.render){var t=o(e);w.html(t),I=w.children(e.handle)}else I=w.children(e.handle);s(e.value)}function c(e){var n=[];e=String(e),C.half&&e.indexOf(".")>-1?n=e.split("."):n.push(e),I.removeClass(y).removeClass(x),I.each(function(e,i){1==n.length&&e<n[0]?t(i).addClass(y):2==n.length&&(e<n[0]&&t(i).addClass(y),e==n[0]&&t(i).addClass(x))})}function s(e){return"number"==typeof e?(w.attr("value",e),c(e),k=e,b.call(O,"change",e)):k=w.attr("value"),k}function u(e){var t=a(e);w.attr("value",e).html(t),k=e}function d(e){var e=0!=e;return e?(w.off("click.bui",C.handle),b.call(O,"disabled")):f(),this}function f(e){return C.disabled=!1,r(),b.call(O,"undisabled"),this}function h(e){var e=1==e;w&&(w.off("click.bui"),e&&w.remove()),m("change")}function p(t){var n={};return e.widget.call(n,t)}function g(t,n){return e.option.call(O,t,n)}function v(t,n){return e.on.apply(O,arguments),this}function m(t,n){return e.off.apply(O,arguments),this}function b(t){O.self=this==window||this==O?null:this,e.trigger.apply(O,arguments)}var w,y,x,k,I,T={id:"",handle:".bui-rating-cell",fullClassName:"bui-rating-cell-full",halfClassName:"bui-rating-cell-half",half:!1,stars:5,value:0,disabled:!1,render:!0,autoinit:!0,onBeforeInit:null,onInited:null,callback:null},O={handle:{},on:v,off:m,disabled:d,show:u,value:s,destroy:h,widget:p,option:g,config:C,init:i},C=O.config=t.extend(!0,{},T,e.config.rating,n),j=!1;return C.autoinit&&i(C),O}}(window.bui||{},window.libs),function(e,n){e.actionsheet=function(i){function o(t){var i=n.extend(!0,O,t);if(i.onBeforeInit&&i.onBeforeInit.call(T,i),x=e.obj(i.trigger),O=T.config=i,C)e.obj(O.id).find(".bui-list").html(l(i.data||i.buttons));else{var o="function"==typeof i.template?i.template.call(T,i.data||i.buttons):r(i.data||i.buttons);e.obj(i.appendTo).append(o)}return w||(w=e.dialog({id:O.id,position:i.position,mask:i.mask,effect:i.effect,opacity:i.opacity,onBeforeOpen:i.onBeforeOpen,onBeforeClose:i.onBeforeClose,onMask:function(){c(),i.onMask&&i.onMask()}})),k=w.$el(),y=k.find(i.handle),C||a(),i.onInited&&i.onInited.call(T,i),this}function a(){var e=function(e){e.target=this,O.callback&&O.callback.call(T,e,T),b.call(T,"click",e)},t=function(e){n(this).hasClass("disabled")||s.call(this)};k&&k.off("click.bui",O.handle).on("click.bui",O.handle,e),x&&x.off("click.bui").on("click.bui",t),C=!0}function r(e){var t=parseFloat(O.width),n=t>0?"width:"+t+"px;left:50%;right:0;margin-left:-"+t/2+"px;":"",i="";return e&&e.length&&(i+='<div id="'+O.id+'" class="bui-actionsheet" style="'+n+'">',i+='    <ul class="bui-list">',i+=l(e),i+="    </ul>",O.cancelText&&(i+='    <div class="bui-btn" value="cancel">'+O.cancelText+"</div>"),i+="</div>"),i}function l(e){var t="";return n.each(e,function(e,n){t+='        <li class="bui-btn '+(n.className||"")+'" value="'+(n.value||"")+'">'+(n.name||"")+"</li>"}),t}function c(e){b.call(this,"beforehide");var n={};return"function"==typeof e?n.callback=function(){e&&e.call(T),b.call(T,"hide")}:"string"==typeof e?n.effect=e:"object"===(void 0===e?"undefined":t(e))&&(n=e),w.isOpen()&&w.close(n),this}function s(e){b.call(this,"beforeshow");var n={};return"function"==typeof e?n.callback=function(){e&&e.call(T),b.call(T,"show")}:"string"==typeof e?n.effect=e:"object"===(void 0===e?"undefined":t(e))&&(n=e),!w.isOpen()&&w.open(n),this}function u(e){var t=x;return t&&t.addClass("disabled"),this}function d(){var e=x;return e&&e.removeClass("disabled"),this}function f(e){var e=1==e;x&&x.off("click.bui"),m("hide"),m("show"),w&&w.destroy(e)}function h(t){var n={dialog:w};return e.widget.call(n,t)}function p(t,n){return"buttons"==t&&void 0!==n?g(t,n):e.option.call(T,t,n)}function g(t,n){if(n&&"array"===e.typeof(n)){var i=l(n);e.obj(O.id).find(".bui-list").html(i)}}function v(t,n){return e.on.apply(T,arguments),this}function m(t,n){return e.off.apply(T,arguments),this}function b(t){T.self=this==window||this==T?null:this,e.trigger.apply(T,arguments)}var w,y,x,k,I={id:"",appendTo:".bui-page",trigger:"",handle:".bui-btn",position:"bottom",effect:"fadeInUp",width:0,mask:!0,opacity:.6,data:null,buttons:[],template:null,cancelText:"取消",autoinit:!0,onMask:null,onBeforeOpen:null,onBeforeClose:null,onBeforeInit:null,onInited:null,callback:null},T={handle:{},on:v,off:m,disabled:u,enabled:d,hide:c,show:s,destroy:f,widget:h,option:p,config:O,init:o},O=T.config=n.extend(!1,{},I,e.config.actionsheet,i),C=!1;return O.id=O.id||e.guid(),O.autoinit&&o(O),T}}(window.bui||{},window.libs),function(e,n){e.number=function(i){function o(i){var o=n.extend(!0,F,i);return o.onBeforeInit&&o.onBeforeInit.call(P,o),D=!1,T=o.max,O=o.min,C=o.step,A=e.obj(o.parentId),"object"===t(o.id)?(N=e.obj(o.id),R=!1):"string"==typeof o.id&&0===o.id.indexOf("#")?(N=e.obj(o.id),R=!0):(N=A.find(o.id),R=!1),F=P.config=o,o.render&&r(o),j=N.children(o.prev),S=N.children(o.next),E=N.children(o.input),B||c(o),o.disabled&&E.attr("disabled","disabled"),u(o.value),o.target=E,o.value=o.value,o.onInited&&o.onInited.call(P,o),o.inited&&o.inited.call(P,o),this}function a(e){var t="";return t+='    <div class="bui-number-prev"><i class="icon-minus"></i></div>',t+='    <input type="text" name="'+e.name+'" value="'+e.value+'"/>',t+='    <div class="bui-number-next"><i class="icon-plus"></i></div>'}function r(e){var t=a(e);return N.html(t),this}function l(t){return e.selector.call(N,t)}function c(t){var i=".bui-number "+t.input,o=".bui-number "+t.prev,a=".bui-number "+t.next,r=function(e){var i=n(this).val();e.value=i,t.onInput&&t.onInput.call(P,e),e.stopPropagation()},l=function(e){var i=t.autocheck&&isNaN(parseInt(n(this).val(),10))?0:parseInt(n(this).val(),10);/^[0-9]*$/i.test(i)&&u.call(this,i),e.value=i,t.onChange&&t.onChange.call(P,e),e.stopPropagation()},c=function(e){var i=n(this).next(F.input);e.value=i.val(),v.call(i,e),t.callback&&t.callback.call(P,e),e.preventDefault(),e.stopPropagation()},s=function(e){var i=n(this).prev(F.input);e.value=i.val(),m.call(i,e),t.callback&&t.callback.call(P,e),e.preventDefault(),e.stopPropagation()};return R?(t.onInput&&N.off("input",t.input).on("input",t.input,e.unit.debounce(r,400)),N.off("change",t.input).on("change",t.input,l),N.off("click.bui",t.prev).on("click.bui",t.prev,c),N.off("click.bui",t.next).on("click.bui",t.next,s)):(t.onInput&&A.off("input",i).on("input",i,e.unit.debounce(r,400)),A.off("change",i).on("change",i,l),A.off("click.bui",o).on("click.bui",o,c),A.off("click.bui",a).on("click.bui",a,s)),B=!0,this}function s(){g();var e=this==P?E:n(this);return parseInt(e.val(),10)}function u(e){g();var t=this==P?E:n(this);return Array.prototype.slice.call(t).forEach(function(t,n){var i=t.getAttribute("max")||t.parentElement.getAttribute("data-max")||F.max,o=t.getAttribute("min")||t.parentElement.getAttribute("data-min")||F.min,a=F.autocheck?d(e,o,i):e;t.value=a;I.call(P,"change",{target:t,value:e}),F.onChange&&F.onChange.call(P,{target:t,value:e})}),this}function d(e,t,n){var i=e||0;return i>n&&(i=n),i<t&&(i=t),i&&i>=t&&i<=n&&(i=i),i}function f(e){var t=0;return void 0!==e?(u.call(this,e),t=e):t=s.call(this),t}function h(t){if(N.length<1&&(N=A.find(F.id)),t&&"array"===e.typeof(t))return Array.prototype.slice.call(N).forEach(function(e,n){(e.id||e.getAttribute("name")||"")==t[n].id&&(e.querySelector("input").value=t[n].value)}),this;var n=[];return Array.prototype.slice.call(N).forEach(function(e,t){var i=e.id||e.getAttribute("name")||"",o=parseInt(e.querySelector("input").value,10);n.push({id:i,value:o})}),n}function p(e){g();var t=this==P?E:n(this),e=0!=e;return e?t.attr("disabled","disabled"):t.removeAttr("disabled"),this}function g(){"object"===t(F.id)?(N=e.obj(F.id),R=!1):"string"==typeof F.id&&0===F.id.indexOf("#")?(N=e.obj(F.id),R=!0):(N=A.find(F.id),R=!1),j=N.children(F.prev),S=N.children(F.next),E=N.children(F.input)}function v(){g();var e=this==P?E:n(this),t=e.val(),i=parseInt(t,10),o=i-=C;return u.call(e,o),I.call(P,"prev",o),this}function m(){g();var e=this==P?E:n(this),t=e.val(),i=parseInt(t,10),o=i+=C;return u.call(e,o),I.call(P,"next",o),this}function b(e){var e=1==e;N=A.find(F.id),N&&(N.off("click.bui"),N.off("input"),e&&N.remove()),k("prev"),k("next"),k("change"),D=!0}function w(t){var n={};return e.widget.call(n,t)}function y(t,n){return e.option.call(P,t,n)}function x(t,n){return e.on.apply(P,arguments),this}function k(t,n){return e.off.apply(P,arguments),this}function I(t){P.self=this==window||this==P?null:this,e.trigger.apply(P,arguments)}var T,O,C,j,S,E,N,L={parentId:".bui-page",id:".bui-number",min:0,max:100,step:1,value:1,disabled:!1,render:!0,tips:!1,autocheck:!0,name:"",prev:".bui-number-prev",input:"input",next:".bui-number-next",onInput:null,autoinit:!0,inited:null,onBeforeInit:null,onInited:null,onChange:null,callback:null},P={handle:{},on:x,off:k,$el:l,disabled:p,value:f,values:h,prev:v,next:m,destroy:b,widget:w,option:y,config:F,init:o},F=P.config=n.extend(!0,{},L,e.config.number,i),B=!1,R=!1,D=!1,A=null;return F.autoinit&&o(F),P}}(bui||{},libs),function(e,t){e.stepbar=function(n){function i(n){var i=t.extend(!0,w,n);if(i.onBeforeInit&&i.onBeforeInit.call(b,i),!i.id)return void e.hint("stepbar id不能为空");g=e.obj(i.id),w=b.config=i;var r="function"==typeof i.template?i.template.call(b,i.data):o(i.data);return i.lineCenter&&g.addClass("bui-stepbar-center"),g.html(r),v=g.children(),y||a(i),i.onInited&&i.onInited.call(b,i),this}function o(e){var n="";return t.each(e,function(e,t){var i=w.hasNumber?e+1:"",o=w.hasNumber?"bui-stepbar-number ":"",a=t.className||"";n+='<div class="bui-stepbar-cell '+o+a+'">',n+='    <span class="bui-stepbar-dot">'+i+"</span>",n+='    <div class="bui-stepbar-text">',t.title&&(n+="        <h3>"+t.title+"</h3>"),t.subtitle&&(n+='        <p class="bui-stepbar-time">'+t.subtitle+"</p>"),t.content&&(n+='        <p class="bui-stepbar-desc">'+t.content+"</p>"),n+="    </div>",n+="</div>"}),n}function a(e){var n=function(n){if(e.click){r(t(this).index())}e.callback&&e.callback.call(b,n,b)};return g.off("click.bui",e.handle).on("click.bui",e.handle,n),y=!0,this}function r(e){if("number"==typeof e)return e=e>=v.length-1?v.length-1:e<0?0:e,v.each(function(n,i){n<e&&t(i).removeClass("active").addClass("visited"),n==e&&t(i).removeClass("visited").addClass("active"),n>e&&t(i).removeClass("visited active")}),p.call(this,"change",e),e;var e=g.children(".active").index();return e}function l(){var e=r()+1;return p.call(this,"next",e),r(e)}function c(){var e=r()-1;return p.call(this,"prev",e),r(e)}function s(e){var e=1==e;g&&(g.off("click.bui"),e&&g.remove()),h("next"),h("prev"),h("change")}function u(t){var n={};return e.widget.call(n,t)}function d(t,n){return e.option.call(b,t,n)}function f(t,n){return e.on.apply(b,arguments),this}function h(t,n){return e.off.apply(b,arguments),this}function p(t){b.self=this==window||this==b?null:this,e.trigger.apply(b,arguments)}var g,v,m={id:null,handle:".bui-stepbar-cell",hasNumber:!1,lineCenter:!1,click:!0,autoinit:!0,data:[],template:null,onBeforeInit:null,onInited:null,callback:null},b={handle:{},on:f,off:h,value:r,next:l,prev:c,destroy:s,widget:u,option:d,config:w,init:i},w=b.config=t.extend(!0,{},m,e.config.stepbar,n),y=!1;return w.autoinit&&i(w),b}}(window.bui||{},window.libs);var l=function(e){function t(e){return window.cancelAnimationFrame?window.cancelAnimationFrame(e):window.webkitCancelAnimationFrame?window.webkitCancelAnimationFrame(e):window.mozCancelAnimationFrame?window.mozCancelAnimationFrame(e):window.clearTimeout(e)}function n(e,t){for(var n=0;n<e.length;n++){var i=e[n].style;i.webkitTransform=i.MsTransform=i.msTransform=i.MozTransform=i.OTransform=i.transform=t}return e}function i(e,t){"string"!=typeof t&&(t+="ms");for(var n=0;n<e.length;n++){var i=e[n].style;i.webkitTransitionDuration=i.MsTransitionDuration=i.msTransitionDuration=i.MozTransitionDuration=i.OTransitionDuration=i.transitionDuration=t}return e}function o(e,t){var n,i,o,a;return void 0===t&&(t="x"),o=window.getComputedStyle(e,null),window.WebKitCSSMatrix?(i=o.transform||o.webkitTransform,i.split(",").length>6&&(i=i.split(", ").map(function(e){return e.replace(",",".")}).join(", ")),a=new WebKitCSSMatrix("none"===i?"":i)):(a=o.MozTransform||o.OTransform||o.MsTransform||o.msTransform||o.transform||o.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),n=a.toString().split(",")),"x"===t&&(i=window.WebKitCSSMatrix?a.m41:16===n.length?parseFloat(n[12]):parseFloat(n[4])),"y"===t&&(i=window.WebKitCSSMatrix?a.m42:16===n.length?parseFloat(n[13]):parseFloat(n[5])),i||0}var a=this,r={updateValuesOnTouchmove:!1,rotateEffect:!1,momentumRatio:7,freeMode:!1};e=e||{};for(var l in r)void 0===e[l]&&(e[l]=r[l]);a.params=e,a.cols=[],a.initialized=!1;var c=function(){var e=navigator.userAgent,t=e.match(/(Android);?[\s\/]+([\d.]+)?/),n=e.match(/(iPad).*OS\s([\d_]+)/),i=e.match(/(iPod)(.*OS\s([\d_]+))?/),o=!n&&e.match(/(iPhone\sOS)\s([\d_]+)/),a=n||i||o,r=!!t;return a||navigator.userAgent.toLowerCase().indexOf("safari")>=0&&navigator.userAgent.toLowerCase().indexOf("chrome")<0&&!r}();return a.setValue=function(e,t){var n=0;if(0===a.cols.length)return a.value=e,void a.updateValue(e);for(var i=0;i<a.cols.length;i++)a.cols[i]&&!a.cols[i].divider&&(a.cols[i].setValue(e[n],t),n++)},a.updateValue=function(e){for(var t=e||[],n=[],i=0;i<a.cols.length;i++)a.cols[i].divider||(t.push(a.cols[i].value),n.push(a.cols[i].displayValue));t.indexOf(void 0)>=0||(a.value=t,a.displayValue=n,a.params.onChange&&a.params.onChange(a,a.value,a.displayValue))},a.initPickerCol=function(e,r){function l(e){if(!k&&!x){var t=e.originalEvent||e;t.preventDefault(),x=!0,I=T=t.targetTouches[0].pageY,O=(new Date).getTime(),F=!0,j=E=o(p.wrapper[0],"y")}}function s(e){if(x){var r=e.originalEvent||e;r.preventDefault(),F=!1,T=r.targetTouches[0].pageY,k||(t(y),k=!0,j=E=o(p.wrapper[0],"y"),i(p.wrapper,"0ms")),r.preventDefault();E=j+(T-I),S=void 0,E<b&&(E=b-Math.pow(b-E,.8),S="min"),E>w&&(E=w+Math.pow(E-w,.8),S="max"),n(p.wrapper,"translate3d(0,"+E+"px,0)"),p.updateItems(void 0,E,0,a.params.updateValuesOnTouchmove),L=E-N||E,P=(new Date).getTime(),N=E}}function u(e){if(!x||!k)return void(x=k=!1);x=k=!1,i(p.wrapper,""),S&&("min"===S?n(p.wrapper,"translate3d(0,"+b+"px,0)"):n(p.wrapper,"translate3d(0,"+w+"px,0)")),C=(new Date).getTime();var t;C-O>300?t=E:(Math.abs(L/(C-P)),t=E+L*a.params.momentumRatio),t=Math.max(Math.min(t,w),b);var o=-Math.floor((t-w)/v);a.params.freeMode||(t=-o*v+w),n(p.wrapper,"translate3d(0,"+parseInt(t,10)+"px,0)"),p.updateItems(o,t,"",!0),setTimeout(function(){F=!0},100)}function d(e){if(F){t(y);var n=$(this).attr("data-picker-value");p.setValue(n)}}var f=$(e),h=f.index(),p=a.cols[h];if(!p.divider){p.container=f,p.wrapper=p.container.find(".picker-items-col-wrapper"),p.items=p.wrapper.find(".picker-item");var g,v,m,b,w;p.replaceValues=function(e,t,n){p.destroyEvents(),p.values=e,p.displayValues=t;var i=a.columnHTML(p,!0);p.wrapper.html(i),p.items=p.wrapper.find(".picker-item"),p.calcSize(),p.setValue(n||p.values[0],0,!0),p.initEvents()},p.calcSize=function(){a.params.rotateEffect&&(p.container.removeClass("picker-items-col-absolute"),p.width||(p.container[0].style.width=""));var e,t;e=0,t=p.container[0].offsetHeight,g=p.wrapper[0].offsetHeight,v=p.items[0].offsetHeight,m=v*p.items.length,b=t/2-m+v/2,w=t/2-v/2,p.width&&(e=p.width,parseInt(e,10)===e&&(e+="px"),p.container[0].style.width=e),a.params.rotateEffect&&(p.width||(p.items.each(function(){var t=$(this);t[0].style.width="auto",e=Math.max(e,t[0].offsetWidth),t[0].style.width=""}),p.container[0].style.width=e+2+"px"),p.container.addClass("picker-items-col-absolute"))},p.calcSize(),n(p.wrapper,"translate3d(0,"+w+"px,0)"),i(p.wrapper,"0ms");var y;p.setValue=function(e,t,o){void 0===t&&(t="");var a=p.wrapper.find('.picker-item[data-picker-value="'+e+'"]').index();void 0!==a&&-1!==a||(a=0);var r=-a*v+w;n(p.wrapper,"translate3d(0,"+r+"px,0)"),i(p.wrapper,t+"ms"),p.updateItems(a,r,t,o)},p.updateItems=function(e,t,r,l){void 0===t&&(t=o(p.wrapper[0],"y")),void 0===e&&(e=-Math.round((t-w)/v)),e<0&&(e=0),e>=p.items.length&&(e=p.items.length-1);var s=p.activeIndex;p.wrapper.find(".picker-selected").removeClass("picker-selected"),i(p.items,r);var u=p.items.eq(e).addClass("picker-selected");if(n(u,""),a.params.rotateEffect){Math.floor((t-w)/v);p.items.each(function(){var e=$(this),i=e.index()*v,o=w-t,a=i-o,r=a/v,l=Math.ceil(p.height/v/2)+1,s=-18*r;s>180&&(s=180),s<-180&&(s=-180),Math.abs(r)>l?e.addClass("picker-item-far"):e.removeClass("picker-item-far"),n(e,"translate3d(0, "+(-t+w)+"px, "+(c?-110:0)+"px) rotateX("+s+"deg)")})}(l||void 0===l)&&(p.value=u.attr("data-picker-value"),p.displayValue=p.displayValues?p.displayValues[e]:p.value,s!=e&&(p.onChange&&p.onChange(a,p.value,p.displayValue),a.updateValue()))},r&&p.updateItems(0,w,0);var x,k,I,T,O,C,j,S,E,N,L,P,F=!0;p.initEvents=function(e){var t=/hp-tablet/gi.test(navigator.appVersion),n="ontouchstart"in window&&!t,i=n?"touchstart":"mousedown",o=n?"touchmove":"mousemove",a=n?"touchend":"mouseup",r=e?"off":"on";p.container[r](i,l),p.container[r](o,s),p.container[r](a,u),"mouseup"==a&&document.documentElement.addEventListener("mouseleave",u,!1),p.items[r]("click",d)},p.destroyEvents=function(){p.initEvents(!0)},p.initEvents()}},a.columnHTML=function(e,t){var n="",i="";if(e.divider)i+='<div class="picker-items-col picker-items-col-divider '+(e.textAlign?"picker-items-col-"+e.textAlign:"")+" "+(e.cssClass||"")+'">'+e.content+"</div>";else{for(var o=0;o<e.values.length;o++)n+='<div class="picker-item" data-picker-value="'+e.values[o]+'">'+(e.displayValues?e.displayValues[o]:e.values[o])+"</div>";i+='<div class="picker-items-col '+(e.textAlign?"picker-items-col-"+e.textAlign:"")+" "+(e.cssClass||"")+'"><div class="picker-items-col-wrapper">'+n+"</div></div>"}return t?n:i},a.layout=function(){var e,t="",n="";a.cols=[];var i="";for(e=0;e<a.params.cols.length;e++){var o=a.params.cols[e];i+=a.columnHTML(a.params.cols[e]),a.cols.push(o)}n="picker-modal picker-columns "+(a.params.cssClass||"")+(a.params.rotateEffect?" picker-3d":""),t='<div class="'+n+'"><div class="picker-modal-inner picker-items">'+i+'<div class="picker-center-highlight"></div></div></div>',a.pickerHTML=t},a.init=function(){a.initialized||(a.layout(),a.container=$(a.pickerHTML),a.container.addClass("picker-modal-inline"),$(a.params.container).html(a.container),a.container.find(".picker-items-col").each(function(){var e=!0;(!a.initialized&&a.params.value||a.initialized&&a.value)&&(e=!1),a.initPickerCol(this,e)}),a.value?a.setValue(a.value,0):a.params.value&&a.setValue(a.params.value,0)),a.initialized=!0},a.init(),a};!function(e,t){e.picker=function(e){return new l(e)}}(window.bui||{},window.libs),function(e,n){e.pickerdate=function(){function i(e){if(e&&e.constructor==Date)return e;if(e&&"string"==typeof e){if(e=e.replace(/[-|年|月|日|号]/gim,"/").replace(/[时|分|秒]/gim,":").replace(/^(\d{4}\/\d+?)($|\s)/,function(e,t){return t+"/1"}).replace(/^(\d{1,2}\/\d{1,2}?)($|\s)/,function(e,t){return(new Date).getFullYear()+"/"+t}),e.indexOf("/")<0){var t=new Date;e=t.getFullYear()+"/"+t.getMonth()+"/"+t.getDate()+" "+e}return new Date(e)}return"number"==typeof e?new Date(e):new Date}function o(e,t){var e,t,n=new Date;return n.getTime()<e.getTime()?e:n.getTime()>t.getTime()?t:n}
function a(a){function r(e){var t=new Date("1970/1/1");return L.forEach(function(n,i){t["set"+n](e[j[n]].value-("Month"==n?1:0))}),t}function l(e){var t=i(e);return L.map(function(e,n){return t["get"+e]()+("Month"==e?1:0)})}function c(){if(!n(this).hasClass("disabled")){if(C.bindValue){k=n(this);var e=k.val()||k.text();I.value(e)}O&&!O.isOpen()&&O.open()}}function s(t){I.self=this==window||this==I?null:this,e.trigger.apply(I,arguments)}var u,d,f,h,p,g,v,m,b,w,y=e.guid(),x={id:y,height:260,popup:!0,mask:!0,autoinit:!0,bindValue:!1,position:"bottom",effect:"fadeInUp",appendTo:"",rotateEffect:!1,buttons:[{name:"取消",className:""},{name:"确定",className:"primary-reverse"}],onBeforeInit:null,onInited:null,onMask:function(){O&&O.close()},callback:null},k=null,I=this,T=function(){},O=null,C=n.extend(!0,{},x,a);C.appendTo=C.appendTo||(e.hasRouter?router.currentPage()||"body":"body"),C.callback=function(e){var t=a.callback&&a.callback.call(I,e);if(1==t||void 0===t)if("取消"==n(e.target).text().trim()||"cancel"==n(e.target).text().trim()||"关闭"==n(e.target).text().trim())try{var o=i(u);I.value(o)}catch(e){}else u=I.value();k=null};var j={},S=["FullYear","Month","Date"],E=["Hours","Minutes","Seconds"],N={FullYear:"year",Month:"month",Date:"date",Hours:"hour",Minutes:"minute",Seconds:"second"},L=[],P=!1;this.config={},this.option=function(){},this.cols=function(e){e=e||{};var t=[];return b=[],m=[],j={},L=[],S.forEach(function(n,i){"none"!==e[N[n]]&&(L.push(n),t.push(n))}),E.forEach(function(t,n){"none"!==e[N[t]]&&(L.push(t),b.push(t))}),t.forEach(function(t,n){j[t]=m.length,m.push(R[t](e[N[t]]))}),b.forEach(function(n,i){0==i&&0!=t.length?m.push(R.Space()):m.push(R.Divider()),0==t.length&&(m[0].content=""),j[n]=m.length,m.push(R[n](e[N[n]]))}),I.picker&&(I.picker.params.cols=m,I.picker.initialized=!1,I.picker.init()),P=!1,this},this.id=function(e){e&&!p&&(p=e)},this.reset=function(){return I.picker&&(I.picker.initialized=!1,I.picker.init()),this},this.min=function(e){return f=i(e||C.min||"1960/01/01 00:00:00"),this},this.max=function(e){return h=i(e||C.max||"2024/01/01 00:00:00"),this},this.value=function(e){if(e){var t=i(e),n=l(t);return I.picker.setValue(n,0),this}return v(I.picker,I.value,I.displayValue)},this.handle=function(t){if(t&&d!==t){var n=e.obj(d);n&&n.off("click",c),n=e.obj(t),n&&n.on("click",c),c.hasOpen=!1,d=t}return this};var F={y:function(e,t){return e.getFullYear().toString().slice(-t)},M:function(e,t){return((t>1?"0":"")+(e.getMonth()+1)).slice(-2)},d:function(e,t){return((t>1?"0":"")+e.getDate()).slice(-2)},h:function(e,t){return((t>1?"0":"")+e.getHours()).slice(-2)},m:function(e,t){return((t>1?"0":"")+e.getMinutes()).slice(-2)},s:function(e,t){return((t>1?"0":"")+e.getSeconds()).slice(-2)}};this.formatValue=function(e){return v=function(t,n,i){var o=r(t.cols);return e.replace(/y+|M+|d+|h+|m+|s+/g,function(e){return F[e[0]](o,e.length)})},I.picker&&I.picker.updateValue(),P=!1,this},this.formatDate=function(e,t){if(null==e)return"";var n=i(e);t=t||"yyyy-MM-dd";var o={"M+":n.getMonth()+1,"d+":n.getDate(),"h+":n.getHours(),"m+":n.getMinutes(),"s+":n.getSeconds(),"q+":Math.floor((n.getMonth()+3)/3),S:n.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(n.getFullYear()+"").substr(4-RegExp.$1.length)));for(var a in o)new RegExp("("+a+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?o[a]:("00"+o[a]).substr((""+o[a]).length)));return t},this.onChange=function(t){var n=this;return g=C.bindValue?function(i){k?k[0]&&"INPUT"===k[0].nodeName?k.val(i):k.text(i):e.obj(d).each(function(e,t){"INPUT"===t.nodeName?t.value=i:t.innerTEXT=i}),t&&t.call(n,i)}:t||T,s.call(this,"change",w),this},this.popup=function(i){if(C.popup&&!O){var o='<div id="'+y+'" class="bui-dialog" >';o+='<div class="bui-dialog-main"><div id="'+y+'-picker"></div></div>',C.buttons&&C.buttons.length&&(o+='<div class="bui-dialog-foot bui-box">',n.each(C.buttons,function(e,n){var i="object"==(void 0===n?"undefined":t(n))&&"className"in n?" "+n.className:"",a="object"==(void 0===n?"undefined":t(n))&&"name"in n?n.name:n;o+='<div class="span1"><div class="bui-btn'+i+'">'+a+"</div></div>"}),o+="</div>"),o+="</div>";n(C.appendTo).append(o);p=e.obj(y+"-picker")}return this};var B=function(e,t,n){var i=r(e.cols),o=f["get"+t](),a=h["get"+t](),l=i.getTime(),c=f.getTime(),s=h.getTime();return l<c&&i["get"+t]()<o?("Month"==t&&(o+=1),void e.cols[j[t]].setValue(o)):l>s&&i["get"+t]()>a?("Month"==t&&(a+=1),void e.cols[j[t]].setValue(a)):void(n&&(l<c||l>s)&&e.cols[j[n]].onChange(e))},R={};R.FullYear=function(e){return e=e||{values:function(){for(var e=[],t=f.getFullYear(),n=h.getFullYear(),i=t;i<=n;i++)e.push(i);return e}()},{values:e.values,displayValues:e.displayValues,onChange:function(e,t,n){B(e,"FullYear",j.Month?"Month":"")}}},R.Month=function(e){return e=e||{values:[1,2,3,4,5,6,7,8,9,10,11,12],displayValues:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]},{values:e.values,displayValues:e.displayValues,textAlign:"right",onChange:function(e,t,n){for(var i=new Date(e.cols[j.FullYear].value,parseInt(e.cols[j.Month].value),0).getDate(),o=[],a=1;a<=i;a++)o.push(a);var r=e.cols[j.Date];r&&r.replaceValues&&r.replaceValues(o,null,r.value<i?r.value:i),B(e,"Month",j.Date?"Date":"")}}},R.Date=function(e){return e=e||{values:function(){var e=31,t=[];do{t.unshift(e)}while(e--);return t}(),displayValues:function(){var e=31,t=[];do{t.unshift(e+"天")}while(e--);return t}()},{values:e.values,displayValues:e.displayValues,onChange:function(e,t,n){B(e,"Date")}}},R.Space=function(){return{divider:!0,content:"  "}},R.Hours=function(e){return e=e||function(){for(var e=[],t=[],n=0;n<24;n++)e.push(n),t.push(("0"+n).slice(-2));return{values:e,displayValues:t}}(),{values:e.values,displayValues:e.displayValues,onChange:function(e,t,n){B(e,"Hours",j.Minutes?"Minutes":"")}}},R.Divider=function(){return{divider:!0,textAlign:"center",content:":"}},R.Minutes=function(e){return e=e||function(){for(var e=[],t=[],n=0;n<60;n++)e.push(n),t.push(("0"+n).slice(-2));return{values:e,displayValues:t}}(),{values:e.values,displayValues:e.displayValues,onChange:function(e,t,n){B(e,"Minutes",j.Seconds?"Seconds":"")}}},R.Seconds=function(e){return e=e||function(){for(var e=[],t=[],n=0;n<60;n++)e.push(n),t.push(("0"+n).slice(-2));return{values:e,displayValues:t}}(),{values:e.values,displayValues:e.displayValues,onChange:function(e,t,n){B(e,"Seconds")}}},I.init=function(t){var a=n.extend(!0,C,t);a.onBeforeInit&&a.onBeforeInit.call(I,a),I.min(a.min),I.max(a.max),I.cols(a.cols),I.id(a.id),I.handle(a.handle),I.popup(a),I.onChange(a.onChange),I.formatValue(a.formatValue||"yyyy-MM-dd hh:mm:ss"),I.picker=e.picker({container:p,rotateEffect:a.rotateEffect,value:l(a.value?i(a.value):o(f,h)),onChange:function(e,t,n){var i=v(e,t,n);w!=i&&(w=i,g(i),s.call(this,"change",i))},cols:m}),a.popup&&!O&&(O=e.dialog.call(this,a),O&&O.on("open",function(){u=v(I.picker,I.value,I.displayValue),I.picker&&(I.picker.initialized=!1,I.picker.init()),s.call(this,"show")}),O&&O.on("close",function(){s.call(this,"hide")})),a.onInited&&a.onInited.call(I,a)},C.autoinit&&I.init(C),this.disabled=function(){var t=e.obj(d);return t&&t.addClass("disabled"),this},this.open=function(e){return O.open(e),this},this.isOpen=function(){return O.isOpen()},this.close=function(e){return O.close(e),this},this.enabled=function(){var t=e.obj(d);return t&&t.removeClass("disabled"),this},this.destroy=function(e){var e=1==e;this.off("show"),this.off("hide"),this.off("change"),O&&O.destroy(e),I=null},this.widget=function(t){var n={dialog:O||{}};return e.widget.call(n,t)},this.on=function(t,n){return e.on.apply(I,arguments),this},this.off=function(t,n){return e.off.apply(I,arguments),this}}return function(e){return new a(e)}}()}(window.bui||{},window.libs),function(e,n){e.levelselect=function(i){function o(t){i=n.extend(!0,{},w,t),i.onBeforeInit&&i.onBeforeInit.call(F,i);var o="";i.popup?(o=h(i),B.append(o),P||(P=bui.dialog({id:x,height:i.height,mask:i.mask,scroll:!1,autoClose:i.autoClose,fullscreen:i.fullscreen,position:i.position,effect:i.effect,onMask:i.onMask})),I=e.obj(x)):(o=p(i),B.append(o),I=e.objId(x)),T=e.objId(k);var a=0;for(a=0;a<i.level;a++)!function(t){N[t]=n(".select-level-val-"+t,I),E[t]=n(".select-level-"+t,T),i.trigger&&(L[t]=n(i.trigger).eq(t)),S[t]||(S[t]=bui.select({id:E[t],type:"select",direction:"right",field:{name:i.field.name,icon:i.field.icon,image:i.field.image,value:i.field.value||i.field.name},popup:!1,data:[],template:i.template,onChange:i.onChange}),S[t].on("change",function(o){i.log&&console.log("change",t);var a=S[t].index()||0,r=S[t].value()||0,l=S[t].text()||S[t].value();C[t]={name:l,value:r,index:a};var c=[],s=[];"string"==typeof i.field.data?c=y[t][a][i.field.data]||y[t][a]:i.field.data&&"array"===e.typeof(i.field.data)&&(i.field.data.forEach(function(e,n){s.push(y[t][a][i.field.data[n]])}),c=s[0]||s[1]||s[2]||s[3]||s[4]||s[5]||s[6]),y[t+1]=c,S[t+1]&&S[t+1].option("data",y[t+1]),S[t+2]&&S[t+2].option("data",[""]),E[t]&&E[t].find(".bui-btn").removeClass("active"),n(o.target).parents(".bui-btn").addClass("active"),f(t),N[t]&&N[t].text(l),N[t+1]&&N[t+1].text(i.placeholder),N[t+2]&&N[t+2].text(""),L[t]&&L[t].text(l),L[t+1]&&L[t+1].text(i.placeholder),L[t+2]&&L[t+2].text(""),o.context={trigger:L[t],selector:N[t],index:t,select:S[t],data:y[t]},m.call(F,"change",o),t==i.level-1&&m.call(F,"lastchange",o),1==i.visibleNum&&(i.log&&console.log("next"),j.next()),i.popup&&!P.isOpen()||(t==i.level-1?(i.log&&console.log("close"),i.autoClose&&P&&P.close()):t%i.visibleNum==1&&(i.log&&console.log("next"),j.next()))}),N[t].on("click.bui",function(){var e=n(this).index(),t=j.index();1==i.visibleNum?j.to(e):(e>t?j.next():j.prev(),n(this).addClass("active").siblings().removeClass("active"))}))}(a);var r=window&&window.viewport&&window.viewport.height()||n(window).height(),l=i.fullscreen?r:String(i.height).indexOf("%")>-1?r*parseFloat(i.height)/100:i.height;i.popup&&P?P.on("open",function(e){O=l-I.find(".select-value").height()-I.children(".bui-dialog-head").height(),u(i)}):(O=l,u(i)),N[0]&&N[0].text(i.placeholder),L[0]&&L[0].text(i.placeholder),y[0]=i.data,S[0].option("data",y[0]),i.value&&d(i.value),i.onInited&&i.onInited.call(this,i),R=!1}function a(e,t){return j&&j.to(e,t),this}function r(){return j&&j.prev(),this}function l(){return j&&j.next(),this}function c(e){m.call(this,"beforeshow");var n={};"function"==typeof e?n.callback=function(){e&&e.call(F),m.call(F,"show")}:"string"==typeof e?n.effect=e:"object"===(void 0===e?"undefined":t(e))&&(n=e),P&&P.open(n)}function s(e){m.call(this,"beforehide");var n={};"function"==typeof e?n.callback=function(){e&&e.call(F),m.call(F,"hide")}:"string"==typeof e?n.effect=e:"object"===(void 0===e?"undefined":t(e))&&(n=e),P&&P.close(n)}function u(e){j||(j=bui.tab({id:k,height:O,scroll:!0,zoom:!1,visibleNum:e.visibleNum,scrollNum:e.scrollNum}).lock(),j.on("to",function(e){f(e)}))}function d(n){if(void 0===n)return C;n&&"array"===e.typeof(n)?n.forEach(function(e,n){"string"==typeof e?S[n].value(e):"object"===(void 0===e?"undefined":t(e))&&(S[n].text(e.name),S[n].value(e.value))}):e.showLog("参数是一个数组类型")}function f(e){n(".select-value div",I).removeClass("active"),n(".select-value div",I).eq(e).addClass("active")}function h(e){var t="";return t+='<div id="'+x+'" class="bui-dialog bui-levelselect" style="display:none;">',t+='    <div class="bui-dialog-head">'+e.title+"</div>",t+='    <div class="bui-dialog-main">',t+=p(e),t+="    </div>",t+='    <div class="bui-dialog-close"><i class="icon-close"></i></div>',t+="</div>"}function p(e){var t="",n=0;if(e.popup||(t+='<div id="'+x+'" class="bui-levelselect">'),e.showValue){for(t+='    <div class="bui-box select-value">',n=0;n<e.level;n++)t+='        <div class="select-level-val-'+n+'"></div>';t+="    </div>"}for(t+='<div id="'+k+'" class="bui-tab bui-levelselect-tab">',t+='    <div class="bui-tab-main">',t+="        <ul>",n=0;n<e.level;n++)t+="            <li>",t+='                <div class="select-level-'+n+'"></div>',t+="            </li>";return t+="        </ul>",t+="    </div>",t+="</div>",e.popup||(t+="</div>"),t}function g(t,n){return e.on.apply(F,arguments),this}function v(t,n){return e.off.apply(F,arguments),this}function m(t){F.self=this==window||this==F?null:this,e.trigger.apply(F,arguments)}var b={popup:!0,data:[],height:300,appendTo:"",title:"所在地区",trigger:null,placeholder:"请选择",level:3,visibleNum:2,scrollNum:1,log:!1,mask:!0,autoClose:!0,fullscreen:!1,position:"bottom",effect:"fadeInUp",showValue:!0,onMask:null,value:[],autoinit:!0,onChange:null,onBeforeInit:null,template:null,onInited:null,field:{name:"n",icon:"icon",image:"image",value:"",data:["c","a"]}},w=n.extend(!0,{},b,i),y=[],x=bui.guid(),k=x+"-slide",I=null,T=null,O=0,C=[],j=null,S=[],E=[],N=[],L=[],P=null,F={init:o,show:c,hide:s,value:d,to:a,prev:r,next:l,on:g,off:v,trigger:m};i.appendTo=i.appendTo||(e.hasRouter?router.currentPage()||"body":"body");var B=n(i.id?i.id:i.appendTo),R=!0;return w.onBeforeInit&&w.onBeforeInit.call(F,w),w.autoinit&&o(w),F}}(window.bui||{},window.libs);e(function(e){!function(t,n){t.tab=function(i){var o={id:"",menu:".bui-tab-head > ul",children:".bui-tab-main > ul",header:"header",footer:"footer",main:".bui-tab-main",item:"li",prev:".bui-tab-prev",next:".bui-tab-next",alignClassName:"",stopHandle:"",width:0,height:0,zoom:!1,swipe:!0,animate:!0,bufferEffect:!1,visibleNum:1,scrollNum:1,distance:40,direction:"x",autoplay:!1,autoheight:!1,scroll:!0,index:0,fullscreen:!1,autopage:!1,autoload:!1,autoinit:!0,data:null,template:null,async:!0,callback:null,onBeforeInit:null,onInited:null,onStart:null,onMove:null,onEnd:null},a=e.config=n.extend(!0,{},o,t.config.slide,i);return t.slide(a)}}(window.bui||{},window.libs)});!function(e,t){e.input=function(n){function i(n){var i=t.extend(!0,k,n);if(i.onBeforeInit&&i.onBeforeInit.call(x,i),k=x.config=i,""!=i.id&&null!==i.id){if(p=e.obj(i.id),w=p.find(i.target),v=w.eq(0),m=e.unit.startWithClass(i.iconClass)?i.iconClass:"."+i.iconClass,!I){if(o(i),i.showLength){var r=a(i);p.append(r)}i.maxLength>0&&w.attr("maxlength",i.maxLength)}return i.showLength&&w.trigger(i.event),i.onInited&&i.onInited.call(x,i),this}}function o(e){var n=!1;return w.on(e.event,function(i){var o=this.value,a=t(this).parent(),r=a.find(m);g=o,o.length>0&&e.showIcon?r&&r.length?r.css("display","block"):(a.append('<i class="'+m.substr(1)+'"></i>'),r=w.find(m)):r&&r.css("display","none"),e.showLength&&(b=a.find("em"),b.text(o.length)),n||(e.onInput&&e.onInput.call(x,i),h.call(x,"input",i))}).on("compositionstart",function(){n=!0}).on("compositionend",function(t){n=!1;var i=v.val();e.onInput&&e.onInput.call(x,t,i)}),w.off("focus").on("focus",function(n){var i=this.value;g=i,v=t(this),e.showIcon&&(p.find(m).css("display","none"),i&&t(this).next().css("display","block")),e.onFocus&&e.onFocus.call(x,n),h.call(x,"focus",n)}),w.off("blur").on("blur",function(t){var n=e.onBlur&&e.onBlur.call(x,t);g=1==n||null===n?this.value:"",h.call(x,"blur",t)}),e.showIcon&&p.off("click.bui",m).on("click.bui",m,function(t){e.callback&&e.callback.call(x,t),h.call(x,"click",t)}),I=!0,this}function a(e){v.parent();return'<span class="bui-input-length"><em>0</em>/'+e.maxLength+"</span>"}function r(e){return void 0!==e?(v.val(e),w.trigger(k.event),this):v.val()}function l(){return v.val(""),v.next().css("display","none"),k.showLength&&b.text(0),this}function c(){return"text"==v.attr("type")?v.attr("type","password"):v.attr("type","text"),this}function s(t){var n={};return e.widget.call(n,t)}function u(t,n){return e.option.call(x,t,n)}function d(t,n){return e.on.apply(x,arguments),this}function f(t,n){return e.off.apply(x,arguments),this}function h(t){x.self=this==window||this==x?null:this,e.trigger.apply(x,arguments)}var p,g,v,m,b,w,y={id:"",target:"input,textarea",event:"input",iconClass:".icon-remove",showIcon:!0,showLength:!1,maxLength:0,onInput:null,onBlur:null,onFocus:null,autoinit:!0,onBeforeInit:null,onInited:null,callback:null},x={handle:{},empty:l,value:r,toggleType:c,on:d,off:f,widget:s,option:u,config:k,init:i},k=x.config=t.extend(!0,{},y,e.config.searchbar,n),I=!1;return k.autoinit&&i(k),x}}(bui||{},libs),function(e,t){e.timer=function(n){function i(){return d=h,f=!0,clearTimeout(p),this}function o(){return h=s?c.times:0,clearTimeout(p),g(),this}function a(){if(f&&(h=d,f=!1),0==h)return h=0,u&&u.text(h),c.onEnd&&c.onEnd.call(this,{count:h,target:u&&u[0]}),void clearTimeout(p);var e=h<10?"0"+h:h;return u&&u.text(e),c.onProcess&&c.onProcess.call(this,{count:h,target:u&&u[0]}),h--,p=setTimeout(function(){a()},c.interval),this}function r(){if(f&&(h=d,f=!1),h==c.times)return c.onEnd&&c.onEnd.call(this),h=c.times,u&&u.text(h),void clearTimeout(p);var e=h<10?"0"+h:h;return u&&u.text(e),c.onProcess&&c.onProcess.call(this,h),h++,p=setTimeout(function(){r()},c.interval),this}var l={interval:1e3,target:null,reduce:!0,onEnd:null,onProcess:null,times:10},c=t.extend({},l,n),s=c.reduce,u=c.target?e.obj(c.target):null,d=0,f=!1,h=s?c.times:0,p=null,g=s?a:r;return{stop:function(){d=0,h=s?c.times:0,clearTimeout(p)},start:g,restart:o,pause:i}}}(window.bui||{},window.libs),function(e,n){e.ajax=function(i){function o(e){var t=function(t,n,i){var o=null;if("string"==typeof t&&"json"==e.dataType)try{o=JSON.parse(t)}catch(e){o=t}else o=t||{};o=e.transformResponse?e.transformResponse.call(a,o)||o:o,s&&s(o,n,i),a.resolve(o,n,i)},i=function(t,n,i){var o;if("string"==typeof t&&"json"==e.dataType)try{o=JSON.parse(t)}catch(e){o=t}else o=t||{};u&&u(o,n,i),a.reject(o,n,i)};e.success=t,e.error=i;var o=e.type&&e.type.toUpperCase();e.type=o||e.method.toUpperCase(),r=n.ajax(e)}var a=n.Deferred(),r=null,l={baseUrl:"",data:{},method:"GET",dataType:"json",timeout:6e4,headers:{},processData:!0,mimeType:"none",cache:!1,async:!0,needJsonString:!1,contentType:null,localData:null,transformRequest:null,transformResponse:null,native:!0,needNative:!1},c=n.extend(!0,{},l,e.config.ajax,i),s=c.success,u=c.fail||c.error;null===c.contentType&&"GET"==c.method?c.contentType="text/html;charset=UTF-8":null===c.contentType&&"POST"==c.method?c.contentType="application/x-www-form-urlencoded":c.contentType=c.contentType;"object"===(void 0===i?"undefined":t(i))&&void 0!==i.needNative?i.needNative:e.isWebapp;if(c.needJsonString)try{c.data="object"===t(c.data)?JSON.stringify(c.data):c.data}catch(e){c.data=c.data}if(c.data=c.transformRequest?c.transformRequest.call(a,c.data)||c.data:c.data,!c.url)return e.showLog("url不能为空","bui.ajax"),a;if(c.url.indexOf("://")>-1?c.url=c.url:c.url=c.baseUrl+c.url,c.proxy){var d=c.url.indexOf(c.proxy),f=d>-1?d+1:-1;c.url=c.url.substr(f)}if(a.abort=function(){r&&r.abort()},c.localData)return c.localData=c.transformResponse?c.transformResponse.call(a,c.localData)||c.localData:c.localData,s&&s(c.localData,200),a.resolve(c.localData,200),a;if(c.needNative){if(void 0===e.native.ajax)return o(c),a;a=e.native.ajax&&e.native.ajax(c)||a}else o(c);return a},e.get=function(t,i,o){var a={};a.method="GET",a.url=t,a.data=i||{};var r=null,l=o&&o[0];return r=o&&"array"===e.typeof(o)&&"object"==e.typeof(l)?n.extend(!0,{},e.config.get,a,l):a,bui.ajax(r)},e.post=function(i,o,a){var r={};r.method="POST",r.contentType="application/x-www-form-urlencoded",r.url=i,r.data=o||{};var l=null,c=a&&a[0];return l=a&&"array"===e.typeof(a)&&"object"==e.typeof(c)?n.extend(!0,{},e.config.post,r,c):r,l.contentType.indexOf("application/json")>-1&&(l.data="object"===t(l.data)?JSON.stringify(l.data):l.data),bui.ajax(l)},e.put=function(i,o,a){var r={};r.method="PUT",r.contentType="application/json",r.url=i,r.data=o||{};var l=null,c=a&&a[0];return l=a&&"array"===e.typeof(a)&&"object"==e.typeof(c)?n.extend(!0,{},e.config.put,r,c):r,l.contentType.indexOf("application/json")>-1&&(l.data="object"===t(l.data)?JSON.stringify(l.data):l.data),bui.ajax(l)},e.delete=function(i,o,a){var r={};r.method="DELETE",r.contentType="application/json",r.url=i,r.data=o||{};var l=null,c=a&&a[0];return l=a&&"array"===e.typeof(a)&&"object"==e.typeof(c)?n.extend(!0,{},e.config.delete,r,c):r,l.contentType.indexOf("application/json")>-1&&(l.data="object"===t(l.data)?JSON.stringify(l.data):l.data),bui.ajax(l)},e.all=function(t){var i=null;return i=t&&"array"===e.typeof(t)?t:Array.prototype.slice.apply(arguments),n.when.apply(null,i)}}(window.bui||{},window.libs),function(e,t){e.load=function(n){var i,o={url:"",param:{},reload:!1,replace:!1,native:!0,needNative:!1},a=t.extend(!0,{},o,e.config.load,n),r={},l=a.url;if(!a.url)return void e.showLog("url 不能为空!","bui.load:web");if(document.activeElement.blur(),l.indexOf("tel:")>=0||l.indexOf("mailto:")>=0||l.indexOf("sms:")>=0)return void e.unit.openExtral(l);if(l&&l.indexOf("?")>-1){var c=l.split("?");r=e.unit.keyStringToObject(c[1]),a.url=c[0]}try{var s="string"==typeof a.param&&JSON.parse(a.param)||a.param||{};a.param=t.extend(!0,{},r,s)}catch(t){return void e.showLog("param 参数值必须是一个{}对象","bui.load:web")}if(n&&n.needNative)return void(e.native.load&&e.native.load(a));if(i=e.setUrlParams(a.url,a.param),a.reload&&e.isWebapp)return void(window.location.href=i);if(a.reload&&!e.isWebapp)return void(e.native.load&&e.native.load(a));if(a.replace&&!("load"in window.router))return void window.location.replace(i);if("load"in window.router)window.router.load(a);else if(a.native&&e.isWebapp||!a.native&&!e.isWebapp)window.location.href=i;else{if(void 0===e.native.load)return void(window.location.href=i);e.native.load&&e.native.load(a)}}}(window.bui||{},window.libs),function(e,n){e.getPageParams=function(i){var o=n.Deferred(),a={callback:null,native:!0,needNative:!1};i=i||{};var r=n.extend(!0,{},a,e.config.getPageParams);"function"==typeof i?r.callback=i:i&&"object"===e.typeof(i)&&(r=n.extend(!0,{},a,e.config.getPageParams,i));"object"===(void 0===i?"undefined":t(i))&&void 0!==i.needNative?i.needNative:e.isWebapp;if(i&&i.needNative)return o=e.native.getPageParams&&e.native.getPageParams(r)||o;if("getPageParams"in window.router){var l=window.router.getPageParams&&window.router.getPageParams()||e.getUrlParams();r.callback&&r.callback(l),o.resolve(l)}else if(r.native&&e.isWebapp||!r.native&&!e.isWebapp){var c=e.getUrlParams();r.callback&&r.callback(c),o.resolve(c)}else{if(void 0===e.native.getPageParams){var c=e.getUrlParams();return r.callback&&r.callback(c),o.resolve(c),o}o=e.native.getPageParams&&e.native.getPageParams(r)||o}return o}}(window.bui||{},window.libs),function(e,n){e.back=function(i){function o(){if(window.history.go(a.index),f)try{clearTimeout(f)}catch(e){}a.delay&&a.callback?f=setTimeout(function(){if(e.hasRouter){var t=router.history.getLast(),n=loader.map().modules[t.pid].exports;a.callback.call(router,n)}else a.callback()},500):a.callback&&a.callback()}var a,r={index:-1,name:"",delay:!0,native:!0,beforeBack:!0,callback:null};"function"==typeof i?(r.callback=i,a=n.extend(!0,{},r,e.config.back)):a=i&&"object"===e.typeof(i)?n.extend(!0,{},r,e.config.back,i):n.extend(!0,{},r,e.config.back);var l=("object"===(void 0===i?"undefined":t(i))&&void 0!==i.needNative?i.needNative:e.isWebapp,e.hasRouter?router.history&&router.history.getLast()||null:null);if(!1!==("function"==typeof a.beforeBack?a.beforeBack.call(this,{prevTarget:null,target:l}):a.beforeBack)){if(i&&i.needNative)return void(e.native.back&&e.native.back(a));if("back"in window.router)if(window.router.config.syncHistory){var c=router.history.get(),s=c.length-1;if(a.name){var u=e.array.indexs(c,a.name,"pid"),d=u.length;a.index=d?-(c.length-u[d-1]-1):-1}if(Math.abs(a.index)>=c.length&&(a.index=-s),Math.abs(a.index)>=window.history.length&&window.router.config.hash&&(a.index=window.router.config.reloadCache?-s:-(window.history.length-1)),0==a.index&&(a.index=-1),window.router.config.hash&&!window.router.config.reloadCache)return void o();c.length>1&&o()}else window.router.back&&window.router.back(a);else if(a.native&&e.isWebapp||!a.native&&!e.isWebapp)o();else{if(void 0===e.native.back)return void o();e.native.back&&e.native.back(a)}var f}}}(window.bui||{},window.libs),function(e,t){e.refresh=function(n){var i={native:!0,needNative:!1},o=t.extend(!0,{},i,e.config.refresh,n);if(n&&n.needNative)return void(e.native.refresh&&e.native.refresh());if("refresh"in window.router)window.router.refresh();else if(o.native&&e.isWebapp||!o.native&&!e.isWebapp)window.location.reload(!0);else{if(void 0===e.native.refresh)return void window.location.reload(!0);e.native.refresh&&e.native.refresh()}}}(window.bui||{},window.libs),function(e,n){e.run=function(i){var o={},a={id:"",name:"",data:null,onFail:null,native:!0,needNative:!0};"string"==typeof i?o.id=i:i&&"object"===e.typeof(i)&&(o=n.extend(!0,{},a,e.config.run,i));var r=String(o.id);"object"===(void 0===i?"undefined":t(i))&&void 0!==i.needNative?i.needNative:e.isWebapp;if(i.needNative)e.native.run&&e.native.run(o);else if(r.indexOf("http://")>-1||r.indexOf("https://")>-1){var l=e.setUrlParams(o.id,o.data);if(e.platform.isIos())return void(window.location.href=l);var c=window.open("","_blank")||window.open("","_newtab");c.location.href=l}}}(window.bui||{},window.libs),function(e,n){e.fileselect=function(i){function o(t){var i=n.extend(!0,I,t);switch(I.appendTo=i.appendTo||(e.hasRouter?router.currentPage()||"body":"body"),i.mediaType){case"allmedeia":N="*";break;case"picture":case"image":N="image/*";break;case"video":N="video/*";break;case"audio":N="audio/*";break;default:N=i.mediaType}return S=[],P=new Image,F=new FileReader,B=document.createElement("canvas"),R=B.getContext("2d"),E?(f(),L||a(i)):x=e.native.fileselect&&e.native.fileselect.call(this,t,{module:O})||{},this}function a(t){return y.on("change",function(t){var n=this.files;if(!(n.length<1)){n.length>1&&e.showLog("一次只能选一张图片","bui.fileselect:web");var i=n[0];C=i;var o={name:i.name,data:i,type:i.type,size:i.size};if(S.push(o),j.needCompress){j.data=i,j.mimeType=j.mimeType?j.mimeType:i.type;r(j)}else j.onSuccess&&j.onSuccess.call(T,i,S);this.value=""}}),L=!0,this}function r(t){var i=n.extend(!0,{destinationType:"file",data:null,mimeType:"",quality:.8,width:800,height:800,needCompress:!0,needChangeData:!1,onSuccess:null,onFail:null},I,t);P.onload=function(){var t=this.width,n=this.height,o=null,a=i.width,r=i.height,c=t,s=n;i.needCompress&&(t>a||n>r)&&(t/n>a/r?(c=a,s=Math.round(a*(n/t))):(s=r,c=Math.round(r*(t/n)))),B.width=c,B.height=s,R.clearRect(0,0,c,s),R.drawImage(P,0,0,c,s);var f=B.toDataURL(i.mimeType||i.data&&i.data.type||"image/jpeg",i.quality),h=l(i.data.name)||"";switch(i.destinationType){case"file":o=u(f,h);break;case"blob":o=d(f);break;case"data":o=f}if(i.needChangeData){C=o;var p=e.array.index(S,i.data.name,"name");p>-1&&(S[p].data=o,o.size&&(S[p].size=o.size),o.type&&(S[p].type=o.type))}return i.onSuccess&&i.onSuccess.call(T,o,S),o},P.onerror=function(){i.onFail&&i.onFail.call(T,P.src)},F.onload=function(e){P.src=e.target.result},i.data&&0==i.data.type.indexOf("image")&&F.readAsDataURL(t.data)}function l(e){return e.indexOf(".png")>-1||e.indexOf(".jpg")>-1||e.indexOf(".gif")>-1||e.indexOf(".jpeg")>-1?e.substr(0,e.lastIndexOf(".")):e}function c(t){C=null;var i=n.extend(!0,{needChangeData:!0,needCompress:!1,name:"resize.jpg"},I,t);return j=i,j.mimeType=t.mimeType?t.mimeType:"",E?(t.from?"picture"===t.from||"photo"===t.from||"savephoto"===t.from?y.removeAttr("capture"):y.attr("capture",t.from):y.removeAttr("capture"),e.platform.isIos()&&"function"==typeof FastClick?y[0].dispatchEvent(new Event("click")):y.trigger("click")):x.add(i),this}function s(t){var i=n.extend(!0,{needCompress:!1,destinationType:"data",mimeType:"",needChangeData:!1},t);if(i.data=i.data||C,i.mimeType=t.mimeType?t.mimeType:i.data&&i.data.type||"image/jpeg",E)try{r(i)}catch(t){e.showLog(t)}else x.toBase64(i);return this}function u(t,n){try{n=n||"file";for(var i=t.split(","),o=i[0].match(/:(.*?);/)[1],a=o.split("/")[1],r=atob(i[1]),l=r.length,c=new Uint8Array(l);l--;)c[l]=r.charCodeAt(l);return new File([c],n+"."+a,{type:o})}catch(t){e.showLog(t)}}function d(e){for(var t=e.split(","),n=t[0].match(/:(.*?);/)[1],i=atob(t[1]),o=i.length,a=new Uint8Array(o);o--;)a[o]=i.charCodeAt(o);return new Blob([a],{type:n})}function f(){if(void 0==y){w=bui.guid();var e=I.from?'capture="'+I.from+'"':"",t='<input type="file" accept="'+N+'" name="uploadFiles" id="'+w+'" '+e+' style="display:none"/>';n(I.appendTo).append(t),y=n("#"+w)||n('input[name="uploadFiles"]')}}function h(t,n){var n=n||"name";if(!E)return S=x.remove(t,n);if("string"==typeof t){S.length&&e.array.remove(S,t,n);var i=S.length?S[S.length-1].data:null;return C=i,y[0].value="",S}return this}function p(){return S=[],C=null,E?y[0].value="":x.clear(),S}function g(){return S=E?S:x.data()}function v(){return C=E?C:x.value()}function m(){return E?S[S.length-1].name:x.value().name}function b(){return E?S.length-1:x.data().length-1}var w,y,x,k={native:!0,needNative:!1,needCompress:!1,appendTo:"",quality:.8,from:"camera",width:800,height:800,onSuccess:null,onFail:null,mediaType:"picture"},I=n.extend(!0,{},k,e.config.fileselect,i),T=this,O={add:c,remove:h,clear:p,value:v,data:g,toFile:u,toBase64:s,resize:r,toBlob:d,currentIndex:b,currentName:m,init:o},C=null,j=null,S=[],E="object"===(void 0===i?"undefined":t(i))&&void 0!==i.needNative?!i.needNative:e.isWebapp,N="*",L=!1,P=null,F=null,B=null,R=null;return o(I),O}}(bui||{},libs),function(e,n){e.file=function(i){function o(t){return w=e.fileselect(t),v=a(t),!t.needNative&&(m=r({root:!0,create:!0})),this}function a(t){function i(e){var t="";try{switch(e.code){case FileError.QUOTA_EXCEEDED_ERR:t="QUOTA_EXCEEDED_ERR";break;case FileError.NOT_FOUND_ERR:t="NOT_FOUND_ERR";break;case FileError.SECURITY_ERR:t="SECURITY_ERR";break;case FileError.INVALID_MODIFICATION_ERR:t="INVALID_MODIFICATION_ERR";break;case FileError.INVALID_STATE_ERR:t="INVALID_STATE_ERR";break;default:t="Unknown Error"}}catch(e){}var n={msg:t};o.reject(n)}var o=n.Deferred();return t.needNative?y=e.native.file&&e.native.file(t,{fileselect:w,module:I})||{}:(p="bui.app",g=window,b=1024*parseInt(T.size)*1024,window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,navigator.webkitPersistentStorage&&navigator.webkitPersistentStorage.requestQuota(b,function(e){window.requestFileSystem(window.PERSISTENT,e,function(e){o.resolve(e)},i)})),o}function r(e){var t={folderName:p,root:!1,create:!1,msg:"",param:{create:!1,exclusive:!1},onSuccess:null,onFail:null},i=n.extend({},t,e),o="";if(i.create?(o="创建 ",i.param.create=!0):(o="获取 ",i.param.create=!1),T.needNative)y.getFolder(i);else{var a=l(i.folderName);a=i.root?a:p+"/"+a,v.done(function(e){e.root.getDirectory(a,i.param,function(t){i.onSuccess&&i.onSuccess.call(I,t,e)},function(e){var t={msg:o+a+" 文件夹失败"};i.onFail&&i.onFail.call(I,t)})}).fail(function(e){var t={msg:"文件系统还没准备好."};i.onFail&&i.onFail.call(I,t)})}return this}function l(e){var t;return"."==e[0]||"/"==e[0]||" "==e[0]?(t=e.slice(1),l(t)):"."!=e[0]&&"/"!=e[0]&&" "!=e[0]?e:void 0}function c(e){return e&&e.indexOf("/")>-1?e.slice(e.lastIndexOf("/")+1,e.indexOf("?")>-1?e.indexOf("?"):void 0):e}function s(e){var t={fileName:"",folderName:"",root:!1,create:!1,param:{create:!1,exclusive:!1},onSuccess:null,onFail:null},i=n.extend({},t,e),o="";if(i.create?(o="创建 ",i.param.create=!0):(o="获取 ",i.param.create=!1),!i.fileName||i.fileName.indexOf(".")<0)return void(i.onFail&&i.onFail());if(T.needNative)y.getFile(i);else{var a=c(i.fileName);r({root:i.root,folderName:i.folderName,create:!0,onSuccess:function(e,t){var n=e.name==p?e.name+"/"+a:p+"/"+e.name+"/"+a;t.root.getFile(n,i.param,function(e){x=e,i.onSuccess&&i.onSuccess.call(I,e,t)},function(e){var t={msg:o+a+" 文件失败"};i.onFail&&i.onFail.call(I,t)})},onFail:function(e){i.onFail&&i.onFail(e)}})}return this}function u(e){var t=n.extend(!0,{},e);return T.needNative?y.removeFolder(t):r({root:t.root,folderName:t.folderName,create:t.create,onSuccess:function(e,n){e.removeRecursively(function(){t.onSuccess&&t.onSuccess.call(I,e,n)},function(n){var i={msg:"删除 "+t.folderName+" 文件失败"};t.onFail&&t.onFail.call(I,i,e)})},onFail:function(e){var n={
msg:"删除 "+t.folderName+" 文件失败"};t.onFail&&t.onFail.call(I,n)}}),this}function d(e){var t=n.extend(!0,{},e);return T.needNative?y.removeFile(t):s({root:t.root,create:t.create,folderName:t.folderName,fileName:t.fileName,onSuccess:function(e,n){e.remove(function(){t.onSuccess&&t.onSuccess.call(I,e,n)},function(n){var i={msg:"删除 "+t.fileName+" 文件失败"};t.onFail&&t.onFail.call(I,i,e)})},onFail:function(e){var n={msg:"删除 "+t.fileName+" 文件失败"};t.onFail&&t.onFail.call(I,n)}}),this}function f(t){var n=t||{};if(n.url)return T.needNative?y.open(n):e.showLog("web暂不支持open方法","bui.file.open:web"),this}function h(e){return w.toBase64(e),this}var p,g,v,m,b,w,y,x,k={size:10,native:!0,needNative:!1},I={getFolder:r,removeFolder:u,getFile:s,getFileName:c,removeFile:d,toBase64:h,open:f,init:o},T=I.config=n.extend(!0,{},k,e.config.file,i);"object"===(void 0===i?"undefined":t(i))&&void 0!==i.needNative?i.needNative:e.isWebapp;return o(T),I}}(window.bui||{},window.libs),function(e,n){e.upload=function(i){function o(t){return x=e.loading({display:"block",width:30,height:30,opacity:0,autoClose:t.autoClose,callback:t.onMask}),k=e.fileselect.call(L,{native:t.native,needNative:t.needNative,from:t.from,mediaType:t.mediaType}),t&&t.needNative&&(T=e.native.upload&&e.native.upload(t,{loading:x,fileselect:k,module:L})||{}),t.data?(d(t),this):this}function a(e){return k.resize(e),this}function r(e){return e.onSuccess=e.onSuccess?e.onSuccess.bind(L):null,e.onFail=e.onFail?e.onFail.bind(L):null,k.add(e),this}function l(e,t){var n=u(),i=n.length;return i<1?this:(/\d/.test(e)&&e.indexOf(".")<0?k.remove(n[e].name,t):"string"==typeof e?k.remove(e,t):k.remove(n[i-1].name,t),this)}function c(){return k.clear(),this}function s(e){return k.toBase64(e),this}function u(){return k.data()}function d(e){var t=n.extend(!0,{},E,e);if(C=t.url,O=k.value(),P=t.showProgress,O){if(P&&x.show(),t&&t.needNative)return T.start(t)||N;var i=t.data,o=new FormData;o.append(t.fileKey,O);for(var a in i)t.fileKey===a&&o.delete(a),o.append(a,i[a]);return t.data=o,p(t)}}function f(e){var t=n.extend(!0,{needFileinfo:!1},E,e),i=t[t.fileKey]||k.data();return null===t.data&&(t.data={}),i.forEach(function(e,n){!function(e){if(t.data[t.fileKey]=i[e].data,t.needFileinfo)for(var n in i[e])"data"!==n&&(t.data[n]=i[e][n]);d(t)}(n)}),N}function h(e){return E&&E.needNative?T.stop(e):(x&&x.stop(),I&&I.abort(),e&&e.call(L,x,I)),this}function p(e){var t=e.onSuccess,i=e.onFail;return I=n.ajax({url:C,type:e.method,data:e.data,cache:e.cache,headers:e.headers,dataType:e.dataType,contentType:e.contentType,processData:e.processData,timeout:e.timeout,xhr:function(){var e=n.ajaxSettings.xhr();if(g&&e.upload)return e.upload.addEventListener("progress",g,!1),e},success:function(e){m(),t&&t.call(L,e),N.resolve(e)},error:function(e,t,n){m(),i&&i.call(L,e,t),N.reject(e,t,n)}}),N}function g(e){window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame,window.requestAnimationFrame(function(){if(e.lengthComputable){var t=Math.round(100*e.loaded/e.total);j=t.toString()+"%",t<100?v(j):m(),F&&F.call(L,j)}})}function v(e){return P&&x&&x.show({text:e}),this}function m(){return x&&x.stop(),this}function b(){return k.currentName()}function w(){return k.currentIndex()}function y(t){var n={loading:x,fileselect:k,ajax:I};return e.widget.call(n,t)}var x,k,I,T,O,C,j,S={url:"",data:null,headers:{},showProgress:!0,timeout:6e4,contentType:!1,processData:!1,autoClose:!0,native:!0,needNative:!1,method:"POST",fileKey:"file",dataType:"json",mediaType:"picture",from:"picture",onProgress:null,onMask:function(){h()},onSuccess:null,onFail:null},E=n.extend(!0,{},S,e.config.upload,i),N=n.Deferred(),L={init:o,add:r,remove:l,resize:a,currentIndex:w,currentName:b,clear:c,data:u,start:d,startAll:f,stop:h,toBase64:s,widget:y},P=E.showProgress,F=E.onProgress;"object"===(void 0===i?"undefined":t(i))&&void 0!==i.needNative?i.needNative:e.isWebapp;return o(E),L}}(window.bui||{},window.libs),function(e,n){e.download=function(i){function o(t){return N=t.showProgress&&e.loading({display:"block",width:30,height:30,opacity:0,callback:function(){u()}}),m=e.file({native:t.native,needNative:t.needNative}),t.needNative?b=e.native.download&&e.native.download(t,{file:m,loading:N,module:T})||{}:function(e){m.getFolder({folderName:e.folderName,create:!1,onSuccess:function(e,t){y=e.fullPath},onFail:function(t){m.getFolder({folderName:e.folderName,create:!0,onSuccess:function(e,t){y=e.fullPath},onFail:function(e){E&&E.call(T,e)}})}}),e.url&&a(e)}(t),this}function a(e){var t=n.extend(!0,{},O,e);w=t.needEncode?encodeURI(t.url):t.url,S=t.onProgress,j=t.showProgress,j&&N&&N.show({text:"0%"}),x=y+"/"+(e.fileName||m.getFileName(t.url)),t.needNative?b.start(t):(t.cache=!1,t.contentType=!1,t.processData=!1,v=n.ajax({url:w,type:t.method,data:t.data,cache:t.cache,headers:t.headers,contentType:t.contentType,processData:t.processData,timeout:t.timeout,xhr:function(){var e=n.ajaxSettings.xhr();if(d&&e)return e.addEventListener("progress",d,!1),e},success:function(n){var i=e.fileName||m.getFileName(t.url);m.getFile({fileName:i,folderName:t.folderName,create:!0,onSuccess:function(e,n){t.onSuccess&&t.onSuccess.call(T,e.fullPath,n)}})},fail:function(e){h(),t.onFail&&t.onFail.call(T,e)}}))}function r(e){var t=n.extend(!0,{autoDown:!0},O,e),i=e.fileName||m.getFileName(t.url);m.getFile({fileName:i,folderName:t.folderName,onSuccess:function(e,n){t.onSuccess&&t.onSuccess.call(T,e.fullPath||e,e,n)},onFail:function(e){t.autoDown=a(t)}})}function l(t){return t.fileName?(t.folderName=t.folderName||O.folderName,m.removeFile(t),this):(e.showLog("请告诉我们你要删除哪个文件, fileName "),this)}function c(e){return e.folderName=e.folderName||O.folderName,m.removeFolder(e),this}function s(e){return m.open(e),this}function u(e){C?(h(),v&&v.abort(),L&&window.cancelAnimationFrame(L)):b.stop(),e&&e.call(T,N,v)}function d(e){window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame,L=window.requestAnimationFrame(function(){if(e.lengthComputable){var t=Math.round(100*e.loaded/e.total);k=t.toString()+"%",t<100?f(k):h(),S&&S.call(T,k)}})}function f(e){j&&N&&N.show({text:e})}function h(){j&&N&&N.stop()}function p(e){return m.toBase64(e),this}function g(t){var n={loading:N,file:m,ajax:v};return e.widget.call(n,t)}var v,m,b,w,y,x,k,I={url:"",data:{},headers:{},method:"GET",showProgress:!0,timeout:6e4,fileName:"",folderName:"download",native:!0,needNative:!0,onProgress:null,onSuccess:null,onFail:null},T={open:s,getFile:r,removeFile:l,removeFolder:c,start:a,stop:u,toBase64:p,init:o,widget:g},O=T.config=n.extend(!0,{},I,e.config.download,i),C="object"===(void 0===i?"undefined":t(i))&&void 0!==i.needNative?!i.needNative:e.isWebapp,j=O.showProgress,S=O.onProgress,E=O.onFail,N=null,L=null;return o(O),T}}(window.bui||{},window.libs),function(e,t){e.currentPlatform="webapp",e.on("pagereadybefore",function(){e.platform.isWindow()||e.platform.isMac()?window.viewport=e.viewport(40):window.viewport=e.viewport(),e.config.init.auto&&e.init()}),e.webready=function(n){t(document).ready(function(){e.trigger.call(e,"pagereadybefore"),n&&n.call(e),e.trigger.call(e,"pageready")})},e.ready=function(n){e.isWebapp=void 0===e.isWebapp?e.debug:e.isWebapp;var i=t.Deferred();if(e.isWebapp)t(document).ready(function(){e.trigger.call(e,"pagereadybefore"),n&&n.call(e),e.trigger.call(e,"pageready"),i.resolve()});else{if(void 0===e.native.ready)return e.showLog("当前 bui.isWebapp = false; 但bui.js为webapp版本,不支持原生方法,请使用 buijs update -p xxx, 更换bui.js为对应xxx平台版本;"),e.webready(n),i;i=e.native.ready&&e.native.ready(n)||i}return i}}(window.bui||{},window.libs),function(e,t){e.checkVersion=function(n){function i(){e.platform.isIos()?e.run({id:d,native:f.native,needNative:f.needNative}):e.run({id:u,native:f.native,needNative:f.needNative})}function o(n){function o(){v<l?(k(),x({title:"新版本"+s,content:c,buttons:n.buttons,width:n.width,height:n.height,mask:n.mask,callback:function(e){"立即下载"==t(e.target).text().trim()&&i()}})):(I(),e.hint(w)),n.callback&&n.callback.call(this)}f.id&&p.length?p.off("click").on("click",o):h.off("click",f.id).on("click",f.id,o),g=!0}function a(n){n.needNative=!1,e.ajax(n).done(function(a){var r=a&&"object"===e.typeof(a)?a:{},h=f.field.data?e.unit.getKeyValue(f.field.data,r):r,p=parseInt(h.minVersionCode);u=h.downloadUrl||"",d=h.iosDownloadUrl||"",c=h.remark||"检测到新版本"+s+",是否立即下载",l=parseInt(h.versionCode),s=h.versionName,h.forced="false"!=h.forced&&0!=h.forced,h.isForced||h.forced?(k(),v<p?x({title:n.title,content:b,width:n.width,height:n.height,mask:n.mask,autoClose:!1,buttons:[{name:"立即下载",className:"primary-reverse"}],callback:function(){try{i()}catch(t){e.showLog(t)}}}):v>p&&v<l?x({title:n.title,content:c,buttons:n.buttons,width:n.width,height:n.height,mask:n.mask,callback:function(){try{"立即下载"==t(this).text().trim()&&i()}catch(t){e.showLog(t)}}}):(I(),n.needTips&&e.hint(w))):v<l?k():I(),f.onSuccess&&f.onSuccess(h),!g&&f.id&&o(n)}).fail(function(t){f.onFail&&f.onFail(),n.tips.fail&&e.hint(n.tips.fail)})}var r={id:"",target:"i",title:"版本更新",tips:{nowVersion:"",minVersion:"您的版本太低,需要卸载安装最新版才能正常使用!",fail:"网络超时,请检测网络再次尝试"},field:{data:""},currentVersion:"",currentVersionCode:"",width:580,height:500,mask:!0,needTips:!0,url:"",data:{},native:!0,needNative:!1,method:"GET",buttons:[{name:"取消",className:""},{name:"立即下载",className:"primary-reverse"}],timeout:2e4,callback:null,onSuccess:null,onFail:null};n=n||{};var l,c,s,u,d,f=t.extend(!0,r,e.config.checkVersion,n),h=t("body"),p=t(f.id),g=!1,v=parseInt(f.currentVersionCode||e.config.versionCode),m=f.currentVersion||e.config.version,b=f.tips.minVersion,w=f.tips.nowVersion||"您目前的版本"+m+",已经是最新了 ^_^",y=f.target.indexOf("#")>-1?e.obj(f.target):p?p.find(f.target):null,x=e.confirm;!function(e){a(e)}(f);var k=function(){y&&y.find(".bui-badges").length||y&&y.append('<span class="bui-badges"></span>')},I=function(){y&&y.find(".bui-badges").remove()}}}(window.bui||{},window.libs),function(e,n){e.native.run=function(t){if(t.id){if(t.data&&t.data,t.id.indexOf("http")>-1)return e.native.openWeb({url:t.id}),this;if(t.id.indexOf(".")>-1)return e.native.openFile({url:t.id}),this}else e.showLog("id 不能为空","bui.run")},e.native.openWeb=function(e){("object"!==(void 0===e?"undefined":t(e))||e.url)&&cordova.exec(function(t){e.success&&e.success(t)},function(t){e.fail&&e.fail(result)},"WorkPlus_WebView","openWebView",[{url:e.url,title:e.title||"",use_android_webview:!0,display_mode:!1===e.fullscreen?"":"FULL_SCREEN"}])},e.native.openFile=function(e,t,n,i){e=e||"",t=t||"",n=n||function(e){},i=i||function(e){app.hint("没有找到合适的程序打开该文件")},cordova.exec(function(e){n&&n(e)},function(e){i&&i(e)},"WorkPlus_Files","readFile",[{path:e}])}}(bui||{},libs),function(e,t){e.native.fileselect=function(n,i){function o(){v=[]}function a(n){function i(t){var n=t.imageURL||t.key;g=n;var i=n.lastIndexOf("?"),r=i<0?void 0:i,l=n.slice(n.lastIndexOf(".")+1,r),c=n.slice(n.lastIndexOf("/")+1,r),s="image/"+l;if(!e.array.compare(c,v,"name")){var u={name:c,data:n,type:s};v.push(u)}a.onSuccess&&a.onSuccess.call(o,n,v,t)}g=null;var o=this,a=t.extend(!0,{width:800,height:800},h,n);!function(e){switch(e.from){case"picture":case"photo":case"savephoto":l({success:function(e){i(e)},fail:function(t){e.fail&&e.fail(t)}});break;case"camera":r({success:function(e){i(e)},fail:function(t){e.fail&&e.fail(t)}});break;default:l({success:function(e){i(e)},fail:function(t){e.fail&&e.fail(t)}})}}(a)}function r(e){e=e||{},cordova.exec(function(t){e.success&&e.success(t)},function(t){e.fail&&e.fail(t)},"WorkPlus_Image","takePhoto",[])}function l(e){e=e||{},cordova.exec(function(t){e.success&&e.success(t)},function(t){e.fail&&e.fail(t)},"WorkPlus_Image","selectImage",[])}function c(e){var e=e||{},t=e.data||g,n=e.onSuccess,i=e.onFail;try{!function(e,t,n){function i(e,t){var n=new FileReader;n.onloadend=function(e){e.target._result&&(e.target._result=e.target._result.split(",")[1]),t(e.target._result,e)},n.readAsDataURL(e)}function o(e){n(e)}!function(e,t){"android"===cordova.platformId.toLowerCase()&&(e="file://"+e),window.resolveLocalFileSystemURL(e,function(e){e.file(function(e){i(e,t)},o)},o)}(e,t)}(t,n,i)}catch(e){console.log(e)}return this}function s(t,n){var n=n||"name";if("string"==typeof t){v=e.array.remove(t,v,n);var i=v.length?v[v.length-1].data:null;return g=i,v}return this}function u(){return v=[],g=null,v}function d(){return v}function f(){return g}var h=n,p={add:a,remove:s,clear:u,value:f,data:d,toBase64:c,init:o},g=null,v=[];return o(),p}}(bui||{},libs),function(e,n){e.native.file=function(i,o){function a(e){return window.app&&app.getInfo(function(e){m=e.id||"bui.app",b=m}),y=r(),x=l({root:!0,create:!0}),this}function r(){function e(e){var n="";switch(e.code){case FileError.QUOTA_EXCEEDED_ERR:n="QUOTA_EXCEEDED_ERR";break;case FileError.NOT_FOUND_ERR:n="NOT_FOUND_ERR";break;case FileError.SECURITY_ERR:n="SECURITY_ERR";break;case FileError.INVALID_MODIFICATION_ERR:n="INVALID_MODIFICATION_ERR";break;case FileError.INVALID_STATE_ERR:n="INVALID_STATE_ERR";break;default:n="Unknown Error"}var i={msg:n};t.reject(i)}var t=n.Deferred();if(w=LocalFileSystem,k=0,window.requestFileSystem&&w)window.requestFileSystem(w&&w[O],k,function(e){t.resolve(e)},e);else{var i={msg:"不支持requestFileSystem"};t.reject(i)}return t}function l(e){var t={folderName:b,root:!1,create:!1,msg:"",param:{create:!1,exclusive:!1},onSuccess:null,onFail:null},i=n.extend({},t,e),o="";i.create?(o="创建 ",i.param.create=!0):(o="获取 ",i.param.create=!1);var a=c(i.folderName);return a=i.root?a:b+"/"+a,y.done(function(e){e.root.getDirectory(a,i.param,function(t){i.onSuccess&&i.onSuccess.call(I,t,e)},function(e){var t={msg:o+a+" 文件夹失败"};i.onFail&&i.onFail.call(I,t)})}).fail(function(e){var t={msg:"文件系统还没准备好."};i.onFail&&i.onFail.call(I,t)}),this}function c(e){var t;return e=e||"","."==e[0]||"/"==e[0]||" "==e[0]?(t=e.slice(1),c(t)):"."!=e[0]&&"/"!=e[0]&&" "!=e[0]?e:void 0}function s(e){return e&&e.indexOf("/")>-1?e.slice(e.lastIndexOf("/")+1,e.indexOf("?")>-1?e.indexOf("?"):void 0):e}function u(e){var t={fileName:"",folderName:"",root:!1,create:!1,param:{create:!1,exclusive:!1},onSuccess:null,onFail:null},i=n.extend({},t,e),o={name:i.fileName,success:i.onSuccess,fail:i.onFail};try{h(o)}catch(e){console.log(e)}return this}function d(e,t){cordova.exec(function(t){var n={};n.sdcard=t,n.documents=t,e&&e(n)},function(e){t&&t(e)},"WorkPlus_Files","getUserFilePath",[{system:"file"}])}function f(e,t,n){cordova.exec(function(e){t&&t(e)},function(e){n&&n(e)},"WorkPlus_Files","isFileExist",[{path:e}])}function h(e){if("object"===(void 0===e?"undefined":t(e))){var n=e.name,i=(e.mimeType||n.substr(n.lastIndexOf(".")+1),e.success||function(){}),o=e.fail||function(){};d(function(e){var t=e.sdcard+n;f(t,function(e){var a={};e.exist?(a.isFile=!0,a.name=n,a.fullPath=t,i&&i.call(I,a.fullPath,a)):o&&o.call(I,a)})})}}function p(e){var t=n.extend(!0,{},e);return l({root:t.root,folderName:t.folderName,create:t.create,onSuccess:function(e,n){e.removeRecursively(function(){t.onSuccess&&t.onSuccess.call(I,e,n)},function(n){var i={msg:"删除 "+t.folderName+" 文件失败"};t.onFail&&t.onFail.call(I,i,e)})},onFail:function(e){var n={msg:"删除 "+t.folderName+" 文件失败"};t.onFail&&t.onFail.call(I,n)}}),this}function g(e){var t=n.extend(!0,{},e);return u({root:t.root,create:t.create,folderName:t.folderName,fileName:t.fileName,onSuccess:function(e,n){e.remove(function(){t.onSuccess&&t.onSuccess.call(I,e,n)},function(n){var i={msg:"删除 "+t.fileName+" 文件失败"};t.onFail&&t.onFail.call(I,i,e)})},onFail:function(e){var n={msg:"删除 "+t.fileName+" 文件失败"};t.onFail&&t.onFail.call(I,n)}}),this}function v(e){var t=e||{};if(t.url){var n=t.url||"";return cordova.exec(function(e){t.onSuccess&&t.onSuccess.call(I,entry)},function(e){t.onFail&&t.onFail.call(I,e)},"WorkPlus_Files","readFile",[{path:n}]),this}}var m,b,w,y,x,k,I={getFolder:l,removeFolder:p,getFile:u,getFileName:s,removeFile:g,open:v,init:a},T=i,o=o||{},O="PERSISTENT";o.fileselect,e.isWebapp||T.native;return a(T),I}}(bui||{},libs),function(e,t){e.native.upload=function(e,n){function i(e){e.data&&o(e)}function o(e){var n=t.extend(!0,{},p,e);if(f=n.url,d=m.value(),b=n.showProgress,d)return b&&v.show(),r(n),this}function a(e){return v&&v.stop(),u&&u.abort(),e&&e.call(g,v,u),this}function r(e){var t=e.onSuccess,n=e.onFail;f=encodeURI(e.url);var i=new FileUploadOptions;return i.fileKey=e.fileKey,i.mimeType=e.mimeType,i.fileName=d.substr(d.lastIndexOf("/")+1)||"image.jpg",i.params=e.data,u=new FileTransfer,u.onprogress=l,u.upload(d,f,function(e){s();var n=JSON.parse(e.response);t&&t.call(g,n)},function(e){s(),n&&n.call(g,e)},i),this}function l(e){window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame,window.requestAnimationFrame(function(){if(e.lengthComputable){var t=Math.round(100*e.loaded/e.total);h=t.toString()+"%",t<100?c(h):s(),w&&w.call(g,h)}})}function c(e){return v&&v.show({text:e}),this}function s(){return v&&v.stop(),this}var u,d,f,h,p=e,n=n||{},g={init:i,start:o,stop:a},v=n.loading||function(){},m=n.fileselect||function(){},b=p.showProgress,w=p.onProgress;return i(p),g}}(bui||{},libs),function(e,t){e.native.download=function(n,i){function o(e){if(e.url)return r(e),this}function a(e,t){cordova.exec(function(t){var n={};n.sdcard=t,n.documents=t,e&&e(n)},function(e){t&&t(e)},"WorkPlus_Files","getUserFilePath",[{system:"file"}])}function r(e){e&&!e.url||a(function(t){var n=e.data||{},i=new FileTransfer,o=encodeURI(e.url),a=e.fileName||e.url.substr(e.url.lastIndexOf("/")),r=t.sdcard+a;e.onProgress;e.showProgress&&b.show({text:"0%"}),i.onprogress=c,i.download(o,r,function(t){try{u(),e.onSuccess&&e.onSuccess.call(g,t.fullPath,t,b)}catch(e){console.log(e)}},function(t){u(),e.onFail&&e.onFail.call(g,t,b)},!1,n)})}function l(){u(),f&&f.abort()}function c(e){window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame,window.requestAnimationFrame(function(){if(e.lengthComputable){var t=Math.round(100*e.loaded/e.total);h=t.toString()+"%",t<100?s(h):u(),w&&w.call(g,h)}})}function s(e){b&&b.show({text:e})}function u(){b&&b.stop()}function d(e){return m.toBase64(e),this}var f,h,p={url:"",data:{},headers:{},method:"GET",showProgress:!0,timeout:6e4,fileName:"",folderName:"download",native:!0,onProgress:null,onSuccess:null,onFail:null},g={start:r,stop:l,toBase64:d,init:o},v=g.config=t.extend(!0,{},p,e.config.download,n),i=i||{},m=i.file,b=i.loading,w=(e.isWebapp||v.native,v.showProgress,v.onProgress);v.onFail;return o(v),g}}(bui||{},libs),function(e,t){e.currentPlatform="workplus",e.native.ready=function(n){var i=t.Deferred();return"undefined"==typeof cordova?(e.showLog("请检查页面有没有引入 Cordova.js ","bui.native.ready:workplus"),e.webready(n),i.reject()):e.platform.isMac()||e.platform.isWindow()?(e.showLog("调用手机原生功能,需要在debugtool中打开","bui.native.ready:workplus"),e.webready(n),i.reject()):window.addEventListener("load",function(t){document.addEventListener("deviceready",function(){e.trigger.call(e,"pagereadybefore"),n&&n(),e.trigger.call(e,"pageready"),i.resolve()},!1)},!1),i}}(bui||{},libs),function(e,t){e.init=function(n){var i,o={id:".bui-page",height:0,header:"header",main:"main",footer:"footer",reduceRem:0};if("object"==e.typeof(n))i=t.extend({},o,e.config.init,n);else{var a={};a.height=n,i=t.extend({},o,a)}var r=i.height||document.documentElement.clientHeight||t("body").height()||t("#bui-router").height()||t(".bui-page").height();if(!(e.obj(i.main).length<1)){try{var l=e.obj(i.id),c=i.header.indexOf("#")>-1?e.obj(i.header)[0]:l.children(i.header)[0],s=i.footer.indexOf("#")>-1?e.obj(i.footer)[0]:l.children(i.footer)[0],u=i.main.indexOf("#")>-1?e.obj(i.main):l.children(i.main),d=c?c.offsetHeight:0,f=s?s.offsetHeight:0,h=i.reduceRem>0?e.unit.remToPx(i.reduceRem):0,p=r-d-f-h;if(parseInt(p)>0)u.height(p);else{var g=d+f+h+"px";e.unit.calcHeight(u,g)}}catch(t){e.showLog(t,"bui.init")}return p}},window.addEventListener?window.addEventListener("load",function(t){e.trigger.call(e,"onload")},!1):window.attachEvent("onload",function(t){e.trigger.call(e,"onload")}),window.loader=e.loader(),e.define=loader.define,e.require=loader.require,e.map=loader.map,e.import=loader.import,e.checkLoad=loader.checkLoad,e.checkDefine=loader.checkDefine,t(document).ready(function(){e.isWebapp=void 0===e.isWebapp?e.debug:e.isWebapp,e.trigger.call(e,"pagebefore"),"function"==typeof FastClick&&FastClick.attach(document.body),e.trigger.call(e,"pageinit")});try{var n="hidden"in document?"hidden":"webkitHidden"in document?"webkitHidden":"",i=n.replace(/hidden/i,"visibilitychange"),o=function(t){document[n]?e.trigger.call(e,"pagehide",t):e.trigger.call(e,"pageshow",t)};document.addEventListener(i,o)}catch(e){}try{navigator.control.gesture(!1),navigator.control.longpressMenu(!1)}catch(e){}}(window.bui||{},window.libs)});
